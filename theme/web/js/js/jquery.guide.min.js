!function(a){function c(){this.layout={container:"",bg:"",content:""},this.step={current:0,status:0},this.actionList=new Array}var b=a(window);a.guide=function(d){var e=new c;if(void 0!==d.actions)for(i in d.actions)e.addAction(d.actions[i]);return e.buildLayout(),a(e.layout.bg).on("click",function(){e.next()}),b.on("resize",function(){e.draw()}).on("scroll",function(){e.draw()}),e.execAction(),e},c.prototype.buildLayout=function(){var b=Math.round(1e4*Math.random()),c=a('<div class="jquery-guide" id="jQueryGuide'+b+'"><div class="jquery-guide-bg"></div><div class="jquery-guide-content"></div></div>');a("html>body").append(c),this.layout.container=a("#jQueryGuide"+b),this.layout.bg=this.layout.container.find(">.jquery-guide-bg"),this.layout.content=this.layout.container.find(">.jquery-guide-content")},c.prototype.addAction=function(a){void 0===a.content&&(a.content=""),void 0===a.offsetX&&(a.offsetX=0),void 0===a.offsetY&&(a.offsetY=0),void 0===a.isBeforeFuncExec&&(a.isBeforeFuncExec=!1),this.actionList.push(a)},c.prototype.execAction=function(){var b=this.actionList[this.step.current],c=this;(0!=this.step.status||(this.step.status=1,void 0!==b.beforeFunc&&b.beforeFunc(this),1!=b.isBeforeFuncExec))&&(this.step.status=2,this.animate(),void 0!==b.successFunc&&(this.step.status=3,b.successFunc(this)),setTimeout(function(){a(c.layout.content).find(".gonext").click(function(){c.next()}),a(c.layout.content).find(".godone").click(function(){c.exit()})},100))},c.prototype.back=function(){return 0==this.step.current?(this.exit(),!1):(this.step={current:--this.step.current,status:0},this.execAction(),!0)},c.prototype.next=function(){return this.step.current+1==this.actionList.length?(this.exit(),!1):(this.step={current:++this.step.current,status:0},this.execAction(),!0)},c.prototype.exit=function(){this.layout.container.remove()},c.prototype.animate=function(){var a=this,c=this.actionList[this.step.current],d=b.scrollTop(),e=c.element.offset().top-d,f=e>0?e:0,g=e+c.element.innerHeight()>0?b.innerHeight()-(c.element.innerHeight()+e):b.innerHeight();this.layout.bg.animate({width:c.element.innerWidth(),height:c.element.innerHeight()+(0>e?e:0),borderTopWidth:f+1,borderRightWidth:b.innerWidth()-c.element.offset().left-c.element.innerWidth()+1,borderBottomWidth:g+1,borderLeftWidth:c.element.offset().left+1},0,function(){a.layout.content.html(c.content),a.layout.content.css({top:c.element.offset().top+c.offsetY,left:c.element.offset().left+c.offsetX})})},c.prototype.draw=function(){var a=this.actionList[this.step.current],c=b.scrollTop(),d=a.element.offset().top-c,e=d>0?d:0,f=d+a.element.innerHeight()>0?b.innerHeight()-(a.element.innerHeight()+d):b.innerHeight();this.layout.bg.css({width:a.element.innerWidth(),height:a.element.innerHeight()+(0>d?d:0),borderTopWidth:e,borderRightWidth:b.innerWidth()-a.element.offset().left-a.element.innerWidth(),borderBottomWidth:f,borderLeftWidth:a.element.offset().left}),this.layout.content.css({top:a.element.offset().top+a.offsetY,left:a.element.offset().left+a.offsetX})}}(jQuery);