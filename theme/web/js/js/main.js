!function(e){function t(o){if(i[o])return i[o].exports;var n=i[o]={exports:{},id:o,loaded:!1};return e[o].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var n=i(1),a=o(n),r=i(2),s=o(r),c=i(3),u=o(c),d=i(22),l=o(d),f=i(10),h=o(f),p=i(12),m=o(p),g=i(11),v=o(g),y=i(9),w=i(28),_=i(43),b=window.jWeixin,x=window.location,j=x.hostname,D="localhost"==j||j.indexOf("local")>=0||x.hash.indexOf("noweixin=1")>=0,k=!0,S=document.body,T="micromessenger"==navigator.userAgent.toLowerCase().match(/MicroMessenger/i);!D&&b&&!function(){var e=l.default.state.visitor,t=y.Location.query(),i=!1,o=v.default.force_open_by_third,n=void 0,a=void 0,r=o.length;for(n=0;n<r;n++)if(a=o[n],x.href.match(a)){i=!0;break}if(e&&e.openId||!v.default.fetch_openids[j]||i)!function(){var i=y.LocalStorage.getItem("router"),o=x.protocol+"//"+x.host+x.pathname.replace(new RegExp("(/&).*","gm"),"")+x.search;if(e&&e.expires&&e.expires<=Date.now()&&y.LocalStorage.removeItem("visitor"),i&&y.LocalStorage.removeItem("router"),t.activity&&t.type)!function(){var e=Number(t.activity),i="#!activity/"+(0,y.translateType)(t.type)+"/"+t.activity;e>1e4&&e<79284?$.getJSON(h.default.json.redirectActivityMaps+"?"+(new Date).getSeconds(),function(n){n&&n["id_"+e]?(i="#!activity/"+(0,y.translateType)(t.type)+"/"+n["id_"+e],x.href=""+o+i):x.href="http://cdn.s.shangjiadao.cn/promotion/error/serverdown.html?error"}):(t.joiner>0&&(i+="/joiner/"+t.joiner),x.href=""+o+i)}();else if(i&&i.path)x.href=o+"#!"+i.path;else{var n=x.pathname;n.indexOf("&")>=0&&(x.href=""+o+x.hash)}k=!0}();else if(t.code&&v.default.domains[j])k=!1,$.ajax(h.default.wechatAccess,{method:"get",data:{code:t.code},dataType:"json",success:function(e){return e.code?1403==e.code?void x.replace(x.href.replace(/[\?&]?code=[^&#]+(&state=?[^&#]*)?/i,"")):($(S).tooltip(m.default[e.code],"danger"),void("1005"==e.code&&setTimeout(function(){x.href="/403.html"},3e3))):void(e.data&&e.data.open_id&&(y.LocalStorage.setItem("visitor",{openId:e.data.open_id,expires:Date.now()+31536e6}),x.replace(x.href.replace(/[\?&]?code=[^&#]+(&state=?[^&#]*)?/i,""))))},error:function(e){$(S).tooltip("貌似网络不是很理想哟 :)","danger"),console.log("error: get access code failed["+e+"]")}});else{v.default.domains[j]||(x.href="/404.html?reason=no-domain-name-configured");var s=v.default.domains[j],c=x.href,u="https://open.weixin.qq.com/connect/oauth2/authorize",d=c.split(/#!?/),f=["appid="+s.appid,"redirect_uri="+window.encodeURIComponent(d[0]),"response_type=code","scope=snsapi_base","state="+s.hostname,"connect_redirect=1"];d[1]&&y.LocalStorage.setItem("router",{path:d[1]}),k=!1,x.replace(u+"?"+f.join("&")+"#wechat_redirect")}}(),k&&!function(){a.default.config.debug=D,a.default.filter("formatDate",_.formatDate),a.default.filter("formatDateMini",_.formatDateMini),a.default.filter("formatText",_.formatText),a.default.filter("asterisk",_.asterisk),a.default.filter("imagify",_.imagify),a.default.filter("pricify",_.pricify),a.default.filter("digital2chinese",_.digital2chinese),a.default.filter("asteriskName",_.asteriskName),a.default.filter("videoify",_.videoify);var e=new s.default;e.map(w.routes),e.alias(w.aliases),e.redirect(w.redirections),e.beforeEach(function(e){l.default.state.user?/(signin|signup)/.test(e.to.path)?e.redirect("/my"):e.next():e.to.auth?e.redirect("/signin?next="+window.encodeURIComponent(e.to.path)):e.next()}),!D&&b?(e.afterEach(function(e){var t=["menuItem:openWithQQBrowser","menuItem:openWithSafari","menuItem:share:qq","menuItem:share:QZone","menuItem:share:weiboApp","menuItem:share:facebook"],i=!1,o=v.default.allshare_blacks,n=void 0,a=void 0,r=o.length;for(n=0;n<r;n++)if(a=o[n],j.match(a)){i=!0;break}if(!e.to.share||i)b.hideOptionMenu();else{var s=!1,c=v.default.timeline_blacks,u=void 0,d=void 0,l=c.length;for(u=0;u<l;u++)if(d=c[u],j.match(d)){s=!0;break}var f=!1;if(e.to&&e.to.params&&e.to.params.id){var h=v.default.activity_timeline_blacks,p=(h.length,Number(e.to.params.id));f=$.inArray(p,h)>=0}(e.to.disable_timeline||s||f)&&t.push("menuItem:share:timeline"),e.to.enable_third?t.forEach(function(e,i){$.inArray(e,["menuItem:share:qq","menuItem:share:QZone","menuItem:share:weiboApp"])>=0&&t.splice(i,1)}):T||(x.href="/gowechat.html?from="+encodeURIComponent(x.href)),b.showOptionMenu(),b.hideMenuItems({menuList:t})}}),T?$.get(h.default.wechatSignature,{url:x.href.split("#")[0]}).then(function(t){if(t.code)return"1005"==t.code?void(x.href="/403.html"):void $(S).tooltip(m.default[t.code],"danger");if(t.data){var i=t.data;b.config({appId:i.app_id,timestamp:i.timestamp,nonceStr:i.nonce_str,signature:i.signature,jsApiList:["hideMenuItems","onMenuShareAppMessage","onMenuShareTimeline","chooseWXPay"]}),b.ready(function(){e.start(a.default.extend(u.default),"html")}),b.error(function(){x.reload()})}}):e.start(a.default.extend(u.default),"html")):e.start(a.default.extend(u.default),"html")}()},function(e,t){e.exports=window.Vue},function(e,t,i){!function(t,i){e.exports=i()}(this,function(){"use strict";function e(e,t,i){this.path=e,this.matcher=t,this.delegate=i}function t(e){this.routes={},this.children={},this.target=e}function i(t,o,n){return function(a,r){var s=t+a;return r?void r(i(s,o,n)):new e(t+a,o,n)}}function o(e,t,i){for(var o=0,n=0,a=e.length;n<a;n++)o+=e[n].path.length;t=t.substr(o);var r={path:t,handler:i};e.push(r)}function n(e,t,i,a){var r=t.routes;for(var s in r)if(r.hasOwnProperty(s)){var c=e.slice();o(c,s,r[s]),t.children[s]?n(c,t.children[s],i,a):i.call(a,c)}}function a(e,o){var a=new t;e(i("",a,this.delegate)),n([],a,function(e){o?o(this,e):this.add(e)},this)}function r(e){U||"undefined"==typeof console||console.error("[vue-router] "+e)}function s(e,t){try{return t?decodeURIComponent(e):decodeURI(e)}catch(i){r("malformed URI"+(t?" component: ":": ")+e)}}function c(e){return"[object Array]"===Object.prototype.toString.call(e)}function u(e){this.string=e}function d(e){this.name=e}function l(e){this.name=e}function f(){}function h(e,t,i){"/"===e.charAt(0)&&(e=e.substr(1));var o=e.split("/"),n=[];i.val="";for(var a=0,r=o.length;a<r;a++){var s,c=o[a];(s=c.match(/^:([^\/]+)$/))?(n.push(new d(s[1])),t.push(s[1]),i.val+="3"):(s=c.match(/^\*([^\/]+)$/))?(n.push(new l(s[1])),i.val+="2",t.push(s[1])):""===c?(n.push(new f),i.val+="1"):(n.push(new u(c)),i.val+="4")}return i.val=+i.val,n}function p(e){this.charSpec=e,this.nextStates=[]}function m(e){return e.sort(function(e,t){return t.specificity.val-e.specificity.val})}function g(e,t){for(var i=[],o=0,n=e.length;o<n;o++){var a=e[o];i=i.concat(a.match(t))}return i}function v(e){this.queryParams=e||{}}function y(e,t,i){for(var o=e.handlers,n=e.regex,a=t.match(n),r=1,s=new v(i),c=0,u=o.length;c<u;c++){for(var d=o[c],l=d.names,f={},h=0,p=l.length;h<p;h++)f[l[h]]=a[r++];s.push({handler:d.handler,params:f,isDynamic:!!l.length})}return s}function w(e,t){return t.eachChar(function(t){e=e.put(t)}),e}function _(e){return e=e.replace(/\+/gm,"%20"),s(e,!0)}function b(e){"undefined"!=typeof console&&console.error("[vue-router] "+e)}function x(e,t,i){var o=e.match(/(\?.*)$/);if(o&&(o=o[1],e=e.slice(0,-o.length)),"?"===t.charAt(0))return e+t;var n=e.split("/");i&&n[n.length-1]||n.pop();for(var a=t.replace(/^\//,"").split("/"),r=0;r<a.length;r++){var s=a[r];"."!==s&&(".."===s?n.pop():n.push(s))}return""!==n[0]&&n.unshift(""),n.join("/")}function j(e){return e&&"function"==typeof e.then}function $(e,t){var i=e&&(e.$options||e.options);return i&&i.route&&i.route[t]}function D(e,t){G?G.$options.components._=e.component:G={resolve:V.Vue.prototype._resolveComponent,$options:{components:{_:e.component}}},G.resolve("_",function(i){e.component=i,t(i)})}function k(e,t,i){return void 0===t&&(t={}),e=e.replace(/:([^\/]+)/g,function(i,o){var n=t[o];return n||b('param "'+o+'" not found when generating path for "'+e+'" with params '+JSON.stringify(t)),n||""}),i&&(e+=W(i)),e}function S(e,t,i){var o=e.childVM;if(!o||!t)return!1;if(e.Component!==t.component)return!1;var n=$(o,"canReuse");return"boolean"==typeof n?n:!n||n.call(o,{to:i.to,from:i.from})}function T(e,t,i){var o=e.childVM,n=$(o,"canDeactivate");n?t.callHook(n,o,i,{expectBoolean:!0}):i()}function z(e,t,i){D(e,function(e){if(!t.aborted){var o=$(e,"canActivate");o?t.callHook(o,null,i,{expectBoolean:!0}):i()}})}function I(e,t,i){var o=e.childVM,n=$(o,"deactivate");n?t.callHooks(n,o,i):i()}function M(e,t,i,o,n){var a=t.activateQueue[i];if(!a)return O(e),e._bound&&e.setComponent(null),void(o&&o());var r=e.Component=a.component,s=$(r,"activate"),c=$(r,"data"),u=$(r,"waitForData");e.depth=i,e.activated=!1;var d=void 0,l=!(!c||u);if(n=n&&e.childVM&&e.childVM.constructor===r)d=e.childVM,d.$loadingRouteData=l;else if(O(e),e.unbuild(!0),d=e.build({_meta:{$loadingRouteData:l},created:function(){this._routerView=e}}),e.keepAlive){d.$loadingRouteData=l;var f=d._keepAliveRouterView;f&&(e.childView=f,d._keepAliveRouterView=null)}var h=function(){d.$destroy()},p=function(){if(n)return void(o&&o());var i=t.router;i._rendered||i._transitionOnLoad?e.transition(d):(e.setCurrent?e.setCurrent(d):e.childVM=d,d.$before(e.anchor,null,!1)),o&&o()},m=function(){e.childView&&M(e.childView,t,i+1,null,n||e.keepAlive),p()},g=function(){e.activated=!0,c&&u?C(d,t,c,m,h):(c&&C(d,t,c),m())};s?t.callHooks(s,d,g,{cleanup:h,postActivate:!0}):g()}function L(e,t){var i=e.childVM,o=$(i,"data");o&&C(i,t,o)}function C(e,t,i,o,n){e.$loadingRouteData=!0,t.callHooks(i,e,function(){e.$loadingRouteData=!1,e.$emit("route-data-loaded",e),o&&o()},{cleanup:n,postActivate:!0,processData:function(t){var i=[];if(P(t)&&Object.keys(t).forEach(function(o){var n=t[o];j(n)?i.push(n.then(function(t){e.$set(o,t)})):e.$set(o,n)}),i.length)return i[0].constructor.all(i)}})}function O(e){e.keepAlive&&e.childVM&&e.childView&&(e.childVM._keepAliveRouterView=e.childView),e.childView=null}function P(e){return"[object Object]"===Object.prototype.toString.call(e)}function E(e){return"[object Object]"===Object.prototype.toString.call(e)}function A(e){return e?Array.prototype.slice.call(e):[]}function N(e){var t=e.util,i=t.extend,o=t.isArray,n=t.defineReactive,a=e.prototype._init;e.prototype._init=function(e){e=e||{};var t=e._parent||e.parent||this,i=t.$router,o=t.$route;i&&(this.$router=i,i._children.push(this),this._defineMeta?this._defineMeta("$route",o):n(this,"$route",o)),a.call(this,e)};var r=e.prototype._destroy;e.prototype._destroy=function(){!this._isBeingDestroyed&&this.$router&&this.$router._children.$remove(this),r.apply(this,arguments)};var s=e.config.optionMergeStrategies,c=/^(data|activate|deactivate)$/;s&&(s.route=function(e,t){if(!t)return e;if(!e)return t;var n={};i(n,e);for(var a in t){var r=n[a],s=t[a];r&&c.test(a)?n[a]=(o(r)?r:[r]).concat(s):n[a]=s}return n})}function B(e){var t=e.util,i=e.directive("_component")||e.internalDirectives.component,o=t.extend({},i);t.extend(o,{_isRouterView:!0,bind:function(){var e=this.vm.$route;if(!e)return void b("<router-view> can only be used inside a router-enabled app.");this._isDynamicLiteral=!0,i.bind.call(this);for(var t=void 0,o=this.vm;o;){if(o._routerView){t=o._routerView;break}o=o.$parent}if(t)this.parentView=t,t.childView=this;else{var n=e.router;n._rootView=this}var a=e.router._currentTransition;if(!t&&a.done||t&&t.activated){var r=t?t.depth+1:0;M(this,a,r)}},unbind:function(){this.parentView&&(this.parentView.childView=null),i.unbind.call(this)}}),e.elementDirective("router-view",o)}function F(e){function t(e){return e.protocol===location.protocol&&e.hostname===location.hostname&&e.port===location.port}function i(e,t,i){if(t=t.trim(),t.indexOf(" ")===-1)return void i(e,t);for(var o=t.split(/\s+/),n=0,a=o.length;n<a;n++)i(e,o[n])}var o=e.util,n=o.bind,a=o.isObject,r=o.addClass,s=o.removeClass,c=e.directive("on").priority,u="__vue-router-link-update__",d=0;e.directive("link-active",{priority:9999,bind:function(){for(var e=this,t=String(d++),i=this.el.querySelectorAll("[v-link]"),o=0,n=i.length;o<n;o++){var a=i[o],r=a.getAttribute(u),s=r?r+","+t:t;a.setAttribute(u,s)}this.vm.$on(u,this.cb=function(i,o){i.activeIds.indexOf(t)>-1&&i.updateClasses(o,e.el)})},unbind:function(){this.vm.$off(u,this.cb)}}),e.directive("link",{priority:c-2,bind:function(){var e=this.vm;if(!e.$route)return void b("v-link can only be used inside a router-enabled app.");this.router=e.$route.router,this.unwatch=e.$watch("$route",n(this.onRouteUpdate,this));var t=this.el.getAttribute(u);t&&(this.el.removeAttribute(u),this.activeIds=t.split(",")),"A"===this.el.tagName&&"_blank"===this.el.getAttribute("target")||(this.handler=n(this.onClick,this),this.el.addEventListener("click",this.handler))},update:function(e){this.target=e,a(e)&&(this.append=e.append,this.exact=e.exact,this.prevActiveClass=this.activeClass,this.activeClass=e.activeClass),this.onRouteUpdate(this.vm.$route)},onClick:function(e){if(!(e.metaKey||e.ctrlKey||e.shiftKey||e.defaultPrevented||0!==e.button)){var i=this.target;if(i)e.preventDefault(),this.router.go(i);else{for(var o=e.target;"A"!==o.tagName&&o!==this.el;)o=o.parentNode;if("A"===o.tagName&&t(o)){e.preventDefault();var n=o.pathname;this.router.history.root&&(n=n.replace(this.router.history.rootRE,"")),this.router.go({path:n,replace:i&&i.replace,append:i&&i.append})}}}},onRouteUpdate:function(e){var t=this.router.stringifyPath(this.target);this.path!==t&&(this.path=t,this.updateActiveMatch(),this.updateHref()),this.activeIds?this.vm.$emit(u,this,e.path):this.updateClasses(e.path,this.el)},updateActiveMatch:function(){this.activeRE=this.path&&!this.exact?new RegExp("^"+this.path.replace(/\/$/,"").replace(re,"").replace(ae,"\\$&")+"(\\/|$)"):null},updateHref:function(){if("A"===this.el.tagName){var e=this.path,t=this.router,i="/"===e.charAt(0),o=e&&("hash"===t.mode||i)?t.history.formatPath(e,this.append):e;o?this.el.href=o:this.el.removeAttribute("href")}},updateClasses:function(e,t){var o=this.activeClass||this.router._linkActiveClass;this.prevActiveClass&&this.prevActiveClass!==o&&i(t,this.prevActiveClass,s);var n=this.path.replace(re,"");e=e.replace(re,""),this.exact?n===e||"/"!==n.charAt(n.length-1)&&n===e.replace(ne,"")?i(t,o,r):i(t,o,s):this.activeRE&&this.activeRE.test(e)?i(t,o,r):i(t,o,s)},unbind:function(){this.el.removeEventListener("click",this.handler),this.unwatch&&this.unwatch()}})}function q(e,t){var i=t.component;ce.util.isPlainObject(i)&&(i=t.component=ce.extend(i)),"function"!=typeof i&&(t.component=null,b('invalid component for route "'+e+'".'))}var R={};R.classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.prototype={to:function(e,t){var i=this.delegate;if(i&&i.willAddRoute&&(e=i.willAddRoute(this.matcher.target,e)),this.matcher.add(this.path,e),t){if(0===t.length)throw new Error("You must have an argument in the function passed to `to`");this.matcher.addChild(this.path,e,t,this.delegate)}return this}},t.prototype={add:function(e,t){this.routes[e]=t},addChild:function(e,o,n,a){var r=new t(o);this.children[e]=r;var s=i(e,r,a);a&&a.contextEntered&&a.contextEntered(o,s),n(s)}};var J=["/",".","*","+","?","|","(",")","[","]","{","}","\\"],Y=new RegExp("(\\"+J.join("|\\")+")","g"),U=!1;u.prototype={eachChar:function(e){for(var t,i=this.string,o=0,n=i.length;o<n;o++)t=i.charAt(o),e({validChars:t})},regex:function(){return this.string.replace(Y,"\\$1")},generate:function(){return this.string}},d.prototype={eachChar:function(e){e({invalidChars:"/",repeat:!0})},regex:function(){return"([^/]+)"},generate:function(e){var t=e[this.name];return null==t?":"+this.name:t}},l.prototype={eachChar:function(e){e({invalidChars:"",repeat:!0})},regex:function(){return"(.+)"},generate:function(e){var t=e[this.name];return null==t?":"+this.name:t}},f.prototype={eachChar:function(){},regex:function(){return""},generate:function(){return""}},p.prototype={get:function(e){for(var t=this.nextStates,i=0,o=t.length;i<o;i++){var n=t[i],a=n.charSpec.validChars===e.validChars;if(a=a&&n.charSpec.invalidChars===e.invalidChars)return n}},put:function(e){var t;return(t=this.get(e))?t:(t=new p(e),this.nextStates.push(t),e.repeat&&t.nextStates.push(t),t)},match:function(e){for(var t,i,o,n=this.nextStates,a=[],r=0,s=n.length;r<s;r++)t=n[r],i=t.charSpec,"undefined"!=typeof(o=i.validChars)?o.indexOf(e)!==-1&&a.push(t):"undefined"!=typeof(o=i.invalidChars)&&o.indexOf(e)===-1&&a.push(t);return a}};var H=Object.create||function(e){function t(){}return t.prototype=e,new t};v.prototype=H({splice:Array.prototype.splice,slice:Array.prototype.slice,push:Array.prototype.push,length:0,queryParams:null});var X=function(){this.rootState=new p,this.names={}};X.prototype={add:function(e,t){for(var i,o=this.rootState,n="^",a={},r=[],s=[],c=!0,u=0,d=e.length;u<d;u++){var l=e[u],p=[],m=h(l.path,p,a);s=s.concat(m);for(var g=0,v=m.length;g<v;g++){var y=m[g];y instanceof f||(c=!1,o=o.put({validChars:"/"}),n+="/",o=w(o,y),n+=y.regex())}var _={handler:l.handler,names:p};r.push(_)}c&&(o=o.put({validChars:"/"}),n+="/"),o.handlers=r,o.regex=new RegExp(n+"$"),o.specificity=a,(i=t&&t.as)&&(this.names[i]={segments:s,handlers:r})},handlersFor:function(e){var t=this.names[e],i=[];if(!t)throw new Error("There is no route named "+e);for(var o=0,n=t.handlers.length;o<n;o++)i.push(t.handlers[o]);return i},hasRoute:function(e){return!!this.names[e]},generate:function(e,t){var i=this.names[e],o="";if(!i)throw new Error("There is no route named "+e);for(var n=i.segments,a=0,r=n.length;a<r;a++){var s=n[a];s instanceof f||(o+="/",o+=s.generate(t))}return"/"!==o.charAt(0)&&(o="/"+o),t&&t.queryParams&&(o+=this.generateQueryString(t.queryParams)),o},generateQueryString:function(e){var t=[],i=[];for(var o in e)e.hasOwnProperty(o)&&i.push(o);i.sort();for(var n=0,a=i.length;n<a;n++){o=i[n];var r=e[o];if(null!=r){var s=encodeURIComponent(o);if(c(r))for(var u=0,d=r.length;u<d;u++){var l=o+"[]="+encodeURIComponent(r[u]);t.push(l)}else s+="="+encodeURIComponent(r),t.push(s)}}return 0===t.length?"":"?"+t.join("&")},parseQueryString:function(e){for(var t=e.split("&"),i={},o=0;o<t.length;o++){var n,a=t[o].split("="),r=_(a[0]),s=r.length,c=!1;1===a.length?n="true":(s>2&&"[]"===r.slice(s-2)&&(c=!0,r=r.slice(0,s-2),i[r]||(i[r]=[])),n=a[1]?_(a[1]):""),c?i[r].push(n):i[r]=n}return i},recognize:function(e,t){U=t;var i,o,n,a,r=[this.rootState],c={},u=!1;if(a=e.indexOf("?"),a!==-1){var d=e.substr(a+1,e.length);e=e.substr(0,a),d&&(c=this.parseQueryString(d))}if(e=s(e)){for("/"!==e.charAt(0)&&(e="/"+e),i=e.length,i>1&&"/"===e.charAt(i-1)&&(e=e.substr(0,i-1),u=!0),o=0,n=e.length;o<n&&(r=g(r,e.charAt(o)),r.length);o++);var l=[];for(o=0,n=r.length;o<n;o++)r[o].handlers&&l.push(r[o]);r=m(l);var f=l[0];return f&&f.handlers?(u&&"(.+)$"===f.regex.source.slice(-5)&&(e+="/"),y(f,e,c)):void 0}}},X.prototype.map=a;var W=X.prototype.generateQueryString,V={},G=void 0,K=/#.*$/,Q=function(){function e(t){var i=t.root,o=t.onChange;R.classCallCheck(this,e),i&&"/"!==i?("/"!==i.charAt(0)&&(i="/"+i),this.root=i.replace(/\/$/,""),this.rootRE=new RegExp("^\\"+this.root)):this.root=null,this.onChange=o;var n=document.querySelector("base");this.base=n&&n.getAttribute("href")}return e.prototype.start=function(){var e=this;this.listener=function(t){var i=location.pathname+location.search;e.root&&(i=i.replace(e.rootRE,"")),e.onChange(i,t&&t.state,location.hash)},window.addEventListener("popstate",this.listener),this.listener()},e.prototype.stop=function(){window.removeEventListener("popstate",this.listener)},e.prototype.go=function(e,t,i){var o=this.formatPath(e,i);t?history.replaceState({},"",o):(history.replaceState({pos:{x:window.pageXOffset,y:window.pageYOffset}},"",location.href),history.pushState({},"",o));var n=e.match(K),a=n&&n[0];e=o.replace(K,"").replace(this.rootRE,""),this.onChange(e,null,a)},e.prototype.formatPath=function(e,t){return"/"===e.charAt(0)?this.root?this.root+"/"+e.replace(/^\//,""):e:x(this.base||location.pathname,e,t)},e}(),Z=function(){function e(t){var i=t.hashbang,o=t.onChange;R.classCallCheck(this,e),this.hashbang=i,this.onChange=o}return e.prototype.start=function(){var e=this;this.listener=function(){var t=location.hash,i=t.replace(/^#!?/,"");"/"!==i.charAt(0)&&(i="/"+i);var o=e.formatPath(i);if(o!==t)return void location.replace(o);var n=location.search&&t.indexOf("?")>-1?"&"+location.search.slice(1):location.search;e.onChange(t.replace(/^#!?/,"")+n)},window.addEventListener("hashchange",this.listener),this.listener()},e.prototype.stop=function(){window.removeEventListener("hashchange",this.listener)},e.prototype.go=function(e,t,i){e=this.formatPath(e,i),t?location.replace(e):location.hash=e},e.prototype.formatPath=function(e,t){var i="/"===e.charAt(0),o="#"+(this.hashbang?"!":"");return i?o+e:o+x(location.hash.replace(/^#!?/,""),e,t)},e}(),ee=function(){function e(t){var i=t.onChange;R.classCallCheck(this,e),this.onChange=i,this.currentPath="/"}return e.prototype.start=function(){this.onChange("/")},e.prototype.stop=function(){},e.prototype.go=function(e,t,i){e=this.currentPath=this.formatPath(e,i),this.onChange(e)},e.prototype.formatPath=function(e,t){return"/"===e.charAt(0)?e:x(this.currentPath,e,t)},e}(),te=function(){function e(t,i,o){R.classCallCheck(this,e),this.router=t,this.to=i,this.from=o,this.next=null,this.aborted=!1,this.done=!1}return e.prototype.abort=function(){if(!this.aborted){this.aborted=!0;var e=!this.from.path&&"/"===this.to.path;e||this.router.replace(this.from.path||"/")}},e.prototype.redirect=function(e){this.aborted||(this.aborted=!0,"string"==typeof e?e=k(e,this.to.params,this.to.query):(e.params=e.params||this.to.params,e.query=e.query||this.to.query),this.router.replace(e))},e.prototype.start=function(e){for(var t=this,i=[],o=this.router._rootView;o;)i.unshift(o),o=o.childView;var n=i.slice().reverse(),a=this.activateQueue=A(this.to.matched).map(function(e){return e.handler}),r=void 0,s=void 0;for(r=0;r<n.length&&S(n[r],a[r],t);r++);r>0&&(s=n.slice(0,r),i=n.slice(r).reverse(),a=a.slice(r)),t.runQueue(i,T,function(){t.runQueue(a,z,function(){t.runQueue(i,I,function(){if(t.router._onTransitionValidated(t),s&&s.forEach(function(e){return L(e,t)}),i.length){var o=i[i.length-1],n=s?s.length:0;M(o,t,n,e)}else e()})})})},e.prototype.runQueue=function(e,t,i){function o(a){a>=e.length?i():t(e[a],n,function(){o(a+1)})}var n=this;o(0)},e.prototype.callHook=function(e,t,i){var o=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],n=o.expectBoolean,a=void 0!==n&&n,r=o.postActivate,s=void 0!==r&&r,c=o.processData,u=o.cleanup,d=this,l=!1,f=function(){u&&u(),d.abort()},h=function(e){if(s?m():f(),e&&!d.router._suppress)throw b("Uncaught error during transition: "),e instanceof Error?e:new Error(e)},p=function(e){try{h(e)}catch(e){setTimeout(function(){throw e},0)}},m=function(){return l?void b("transition.next() should be called only once."):(l=!0,d.aborted?void(u&&u()):void(i&&i()))},g=function(t){"boolean"==typeof t?t?m():f():j(t)?t.then(function(e){e?m():f()},p):e.length||m()},v=function(e){var t=void 0;try{t=c(e)}catch(e){return h(e)}j(t)?t.then(m,p):m()},y={to:d.to,from:d.from,abort:f,next:c?v:m,redirect:function(){d.redirect.apply(d,arguments)}},w=void 0;try{w=e.call(t,y)}catch(e){return h(e)}a?g(w):j(w)?c?w.then(v,p):w.then(m,p):c&&E(w)?v(w):e.length||m()},e.prototype.callHooks=function(e,t,i,o){var n=this;Array.isArray(e)?this.runQueue(e,function(e,i,a){n.aborted||n.callHook(e,t,a,o)},i):this.callHook(e,t,i,o)},e}(),ie=/^(component|subRoutes|fullPath)$/,oe=function e(t,i){var o=this;R.classCallCheck(this,e);var n=i._recognizer.recognize(t);n&&([].forEach.call(n,function(e){for(var t in e.handler)ie.test(t)||(o[t]=e.handler[t])}),this.query=n.queryParams,this.params=[].reduce.call(n,function(e,t){if(t.params)for(var i in t.params)e[i]=t.params[i];return e},{})),this.path=t,this.matched=n||i._notFoundHandler,Object.defineProperty(this,"router",{enumerable:!1,value:i}),Object.freeze(this)},ne=/\/$/,ae=/[-.*+?^${}()|[\]\/\\]/g,re=/\?.*$/,se={abstract:ee,hash:Z,html5:Q},ce=void 0,ue=function(){function e(){var t=this,i=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],o=i.hashbang,n=void 0===o||o,a=i.abstract,r=void 0!==a&&a,s=i.history,c=void 0!==s&&s,u=i.saveScrollPosition,d=void 0!==u&&u,l=i.transitionOnLoad,f=void 0!==l&&l,h=i.suppressTransitionError,p=void 0!==h&&h,m=i.root,g=void 0===m?null:m,v=i.linkActiveClass,y=void 0===v?"v-link-active":v;if(R.classCallCheck(this,e),!e.installed)throw new Error("Please install the Router with Vue.use() before creating an instance.");this.app=null,this._children=[],this._recognizer=new X,this._guardRecognizer=new X,this._started=!1,this._startCb=null,this._currentRoute={},this._currentTransition=null,this._previousTransition=null,this._notFoundHandler=null,this._notFoundRedirect=null,this._beforeEachHooks=[],this._afterEachHooks=[],this._rendered=!1,this._transitionOnLoad=f,this._root=g,this._abstract=r,this._hashbang=n;var w="undefined"!=typeof window&&window.history&&window.history.pushState;this._history=c&&w,this._historyFallback=c&&!w;var _=ce.util.inBrowser;this.mode=!_||this._abstract?"abstract":this._history?"html5":"hash";var b=se[this.mode];this.history=new b({root:g,hashbang:this._hashbang,onChange:function(e,i,o){t._match(e,i,o)}}),this._saveScrollPosition=d,this._linkActiveClass=y,this._suppress=p}return e.prototype.map=function(e){for(var t in e)this.on(t,e[t]);return this},e.prototype.on=function(e,t){return"*"===e?this._notFound(t):this._addRoute(e,t,[]),this},e.prototype.redirect=function(e){for(var t in e)this._addRedirect(t,e[t]);return this},e.prototype.alias=function(e){for(var t in e)this._addAlias(t,e[t]);return this},e.prototype.beforeEach=function(e){return this._beforeEachHooks.push(e),this},e.prototype.afterEach=function(e){return this._afterEachHooks.push(e),this},e.prototype.go=function(e){var t=!1,i=!1;ce.util.isObject(e)&&(t=e.replace,i=e.append),e=this.stringifyPath(e),e&&this.history.go(e,t,i)},e.prototype.replace=function(e){"string"==typeof e&&(e={path:e}),e.replace=!0,this.go(e)},e.prototype.start=function(e,t,i){if(this._started)return void b("already started.");if(this._started=!0,this._startCb=i,!this.app){if(!e||!t)throw new Error("Must start vue-router with a component and a root container.");if(e instanceof ce)throw new Error("Must start vue-router with a component, not a Vue instance.");this._appContainer=t;var o=this._appConstructor="function"==typeof e?e:ce.extend(e);o.options.name=o.options.name||"RouterApp"}if(this._historyFallback){var n=window.location,a=new Q({root:this._root}),r=a.root?n.pathname.replace(a.rootRE,""):n.pathname;if(r&&"/"!==r)return void n.assign((a.root||"")+"/"+this.history.formatPath(r)+n.search)}this.history.start()},e.prototype.stop=function(){this.history.stop(),this._started=!1},e.prototype.stringifyPath=function(e){var t="";if(e&&"object"==typeof e){if(e.name){var i=ce.util.extend,o=this._currentTransition&&this._currentTransition.to.params,n=e.params||{},a=o?i(i({},o),n):n;t=encodeURI(this._recognizer.generate(e.name,a))}else e.path&&(t=encodeURI(e.path));if(e.query){var r=this._recognizer.generateQueryString(e.query);t+=t.indexOf("?")>-1?"&"+r.slice(1):r}}else t=encodeURI(e?e+"":"");return t},e.prototype._addRoute=function(e,t,i){if(q(e,t),t.path=e,t.fullPath=(i.reduce(function(e,t){return e+t.path},"")+e).replace("//","/"),i.push({path:e,handler:t}),this._recognizer.add(i,{as:t.name}),t.subRoutes)for(var o in t.subRoutes)this._addRoute(o,t.subRoutes[o],i.slice())},e.prototype._notFound=function(e){q("*",e),this._notFoundHandler=[{handler:e}]},e.prototype._addRedirect=function(e,t){"*"===e?this._notFoundRedirect=t:this._addGuard(e,t,this.replace)},e.prototype._addAlias=function(e,t){this._addGuard(e,t,this._match)},e.prototype._addGuard=function(e,t,i){var o=this;this._guardRecognizer.add([{path:e,handler:function(e,n){var a=k(t,e.params,n);i.call(o,a)}}])},e.prototype._checkGuard=function(e){var t=this._guardRecognizer.recognize(e,!0);return t?(t[0].handler(t[0],t.queryParams),!0):this._notFoundRedirect&&(t=this._recognizer.recognize(e),!t)?(this.replace(this._notFoundRedirect),!0):void 0},e.prototype._match=function(e,t,i){var o=this;if(!this._checkGuard(e)){var n=this._currentRoute,a=this._currentTransition;if(a){if(a.to.path===e)return;if(n.path===e)return a.aborted=!0,void(this._currentTransition=this._prevTransition);a.aborted=!0}var r=new oe(e,this),s=new te(this,r,n);this._prevTransition=a,this._currentTransition=s,this.app||!function(){var e=o;o.app=new o._appConstructor({el:o._appContainer,created:function(){this.$router=e},_meta:{$route:r}})}();var c=this._beforeEachHooks,u=function(){s.start(function(){o._postTransition(r,t,i)})};c.length?s.runQueue(c,function(e,t,i){s===o._currentTransition&&s.callHook(e,null,i,{expectBoolean:!0})},u):u(),!this._rendered&&this._startCb&&this._startCb.call(null),this._rendered=!0}},e.prototype._onTransitionValidated=function(e){var t=this._currentRoute=e.to;this.app.$route!==t&&(this.app.$route=t,this._children.forEach(function(e){e.$route=t})),this._afterEachHooks.length&&this._afterEachHooks.forEach(function(t){return t.call(null,{to:e.to,from:e.from})}),this._currentTransition.done=!0},e.prototype._postTransition=function(e,t,i){var o=t&&t.pos;o&&this._saveScrollPosition?ce.nextTick(function(){window.scrollTo(o.x,o.y)}):i&&ce.nextTick(function(){var e=document.getElementById(i.slice(1));e&&window.scrollTo(window.scrollX,e.offsetTop)})},e}();return ue.installed=!1,ue.install=function(e){return ue.installed?void b("already installed."):(ce=e,N(ce),B(ce),F(ce),V.Vue=ce,void(ue.installed=!0))},"undefined"!=typeof window&&window.Vue&&window.Vue.use(ue),ue})},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),i(4);var n=i(22),a=o(n),r=i(25),s=o(r),c=i(27),u=o(c),d=i(26);t.default={components:{Dialog:s.default,Snackbar:u.default},store:a.default,vuex:{getters:{loading:function(e){return e.loading},page:function(e){return e.page},site:function(e){return e.site},user:function(e){return e.user}},actions:{signOut:d.signOut}},ready:function(){var e=this,t=e.user;t&&t.expires&&t.expires<=Date.now()/1e3&&e.signOut()}}},function(e,t,i){"use strict";i(5),i(7),i(8);var o=i(9);$.ajaxSetup({dataType:"json",dataFilter:function(e,t){return"json"==t?(0,o.jsonFilter)(e):e},timeout:9e4,error:function(e,t,i){$(document.body).tooltip("请求失败，请检查您的网络连接或稍后再试","danger")}})},function(e,t,i){var o,n,a;!function(r){n=[i(6)],o=r,a="function"==typeof o?o.apply(t,n):o,!(void 0!==a&&(e.exports=a))}(function(e){"use strict";function t(e){return"string"==typeof e}function i(t,o){this.$element=e(t),this.options=e.extend({},i.DEFAULTS,e.isPlainObject(o)&&o),this.active=!1,this.animating=!1,this.dismissing=!1,this.classes=!1,this.center=!1,this.middle=!1,this.isBody=!1,this.isStatic=!1,this.init()}var o=e(window),n="tooltip",a=n+"-fixed",r=n+"-relative",s=n+"-active",c=n+"-dismissible",u=n+"-countdown",d="click."+n,l="resize."+n,f="show."+n,h="shown."+n,p="hide."+n,m="hidden."+n;i.prototype={constructor:i,init:function(){var t=this.options,a=this.$element;this.initialOptions=e.extend({},this.options),this.isBody=a.is("body"),this.isStatic=!this.isBody&&"static"===a.css("position"),this.$tooltip=e(i.TEMPLATE.dialog),a.on(d,'[data-dismiss="'+n+'"]',e.proxy(this.dismiss,this)),o.on(l,e.proxy(this.resize,this)),t.autoshow&&this.show(t.content)},show:function(o,u){var d,l,h=this.$tooltip,p=e.Event(f);this.$element.trigger(p),p.isDefaultPrevented()||(u?t(u)&&e.inArray(u,i.STYLES)>-1&&(u={style:u}):e.isPlainObject(o)&&(u=o,o=""),this.options=u=e.extend({},this.initialOptions,e.isPlainObject(u)&&u),o=o||u.content,u.duration=Number(u.duration)||3e3,u.offset=Number(u.offset)||10,u.zIndex=Number(u.zIndex)||1024,t(o)&&o.length&&(d=t(u.position)?u.position.split(/\W+/):["center","top"],this.center=e.inArray("center",d)>-1,this.middle=e.inArray("middle",d)>-1,l=e.map(d,function(e){return n+"-"+e}),u.fixed&&this.isBody&&l.unshift(a),
l.push(e.inArray(u.style,i.STYLES)>-1?n+"-"+u.style:u.style),u.countdown&&(o+=i.TEMPLATE.countdown),u.dismissible&&(l.push(c),o+=i.TEMPLATE.button),h.removeClass(this.classes+" "+s).addClass(this.classes=l.join(" ")).html(o).appendTo(this.$element.toggleClass(r,this.isStatic)),u.countdown&&this.countdown(),this.active=!0,this.resize(),h.addClass(s),this.animating&&clearTimeout(this.animating),this.animating=setTimeout(e.proxy(this.shown,this),150)))},shown:function(){var t=this.options;this.animating=!1,t.autohide&&(this.dismissing&&clearTimeout(this.dismissing),this.dismissing=setTimeout(e.proxy(this.hide,this),t.duration)),this.$element.trigger(h)},hide:function(){var t=e.Event(p);this.$element.trigger(t),t.isDefaultPrevented()||(this.active=!1,this.$tooltip.removeClass(s),this.animating&&clearTimeout(this.animating),this.animating=setTimeout(e.proxy(this.hidden,this),150))},hidden:function(){this.animating=!1,this.$tooltip.empty().detach(),this.$element.removeClass(r).trigger(m)},resize:function(){var e=this.options,t=this.$tooltip,i=e.offset;this.active&&t.removeAttr("style").css({marginTop:this.middle?-t.outerHeight()/2:i,marginRight:i,marginBottom:i,marginLeft:this.center?i-t.outerWidth()/2:i,zIndex:e.zIndex})},dismiss:function(){this.dismissing&&clearTimeout(this.dismissing),this.counting&&clearTimeout(this.counting),this.dismissing=!1,this.counting=!1,this.hide()},countdown:function(){var e=this.$tooltip.find("."+u),t=this.options.duration/1e3;!function i(){e.text(" ("+t+") "),t-- >0&&setTimeout(i,1e3)}()},destroy:function(){this.$element.off(d,this.dismiss).removeData(n).removeClass(r),o.off(l,this.resize)}},i.DEFAULTS={autohide:!0,autoshow:!0,content:"",countdown:!1,dismissible:!1,duration:3e3,fixed:!0,offset:10,position:"center top",style:"default",zIndex:1024},i.setDefaults=function(t){e.extend(i.DEFAULTS,t)},i.STYLES=["default","primary","success","info","warning","danger"],i.TEMPLATE={dialog:'<div class="tooltip-dialog"></div>',countdown:'<span class="tooltip-countdown"></span>',button:'<button type="button" class="tooltip-dismiss" data-dismiss="tooltip" aria-label="Close"><span aria-hidden="true">&times;</span></button>'},i.other=e.fn.tooltip,e.fn.tooltip=function(o){var a=[].slice.call(arguments,1);return this.each(function(){var r,s=e(this),c=s.data(n);if(!c){if(/destroy|hide/.test(o))return;s.data(n,c=new i(this,o))}t(o)&&(r=c[o],e.isFunction(r)||(r=c.show,a.unshift(o)),r.apply(c,a))})},e.fn.tooltip.Constructor=i,e.fn.tooltip.setDefaults=i.setDefaults,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=i.other,this}})},function(e,t){e.exports=window.jQuery},function(e,t,i){var o,n,a;!function(r){n=[i(6)],o=r,a="function"==typeof o?o.apply(t,n):o,!(void 0!==a&&(e.exports=a))}(function(e){"use strict";function t(e){return"number"==typeof e}function i(e){return"string"==typeof e}function o(e){return"undefined"==typeof e}function n(e,i){var o=[];return t(i)&&o.push(i),o.slice.apply(e,o)}function a(t,i){this.element=t,this.$element=e(t),this.options=e.extend(!0,{},a.DEFAULTS,e.isPlainObject(i)&&i),this.isCheckboxOrRadio=/checkbox|radio/.test(t.type),this.value=null,this.valid=!0,this.init()}var r="validator",s="success."+r,c="error."+r;a.DEFAULTS={rules:null,trigger:"",filter:null,success:null,error:null},a.PATTERNS={number:/^-?\d+$/,email:/^[\w.!#$%&'*+\/=?^_`{|}~-]+@[\w](?:[\w-]{0,61}[\w])?(?:\.[\w](?:[\w-]{0,61}[\w])?)*$/,url:/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,required:/\S+/},a.VALIDATORS=["number","email","url","date","required","min","max","minlength","maxlength","pattern","range","rangelength","equalto"],a.setDefaults=function(t){e.extend(!0,a.DEFAULTS,t)},a.MESSAGES={number:"Please enter a valid number (only digits).",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",required:"This field is required.",max:"Please enter a value less than or equal to [0].",min:"Please enter a value greater than or equal to [0].",maxlength:"Please enter no more than [0] characters.",minlength:"Please enter at least [0] characters.",pattern:"Please enter a matched value.",range:"Please enter a value between [0] and [1].",rangelength:"Please enter a value between [0] and [1] characters long.",equalto:"Please enter the same value again."},a.setMessages=function(t){e.extend(a.MESSAGES,t)},a.prototype={constructor:a,init:function(){this.update(),this.bind()},bind:function(){var t=this.$element,o=this.options;e.isFunction(o.success)&&t.on(s,o.success),e.isFunction(o.error)&&t.on(c,o.error),i(o.trigger)&&t.on(o.trigger,e.proxy(this.validate,this))},unbind:function(){var t=this.$element,o=this.options;e.isFunction(o.success)&&t.off(s,o.success),e.isFunction(o.error)&&t.off(c,o.error),i(o.trigger)&&t.off(o.trigger,this.validate,this)},number:function(e){return a.PATTERNS.number.test(e)},email:function(e){return a.PATTERNS.email.test(e)},url:function(e){return a.PATTERNS.url.test(e)},date:function(e){return!isNaN(new Date(e).valueOf())},pattern:function(t,i){return"regexp"===e.type(i)&&i.test(t)},required:function(e){return this.isCheckboxOrRadio?this.element.checked:a.PATTERNS.required.test(e)},min:function(e,t){return parseInt(e,10)>=t},max:function(e,t){return parseInt(e,10)<=t},range:function(t,i){return t=parseInt(t,10),e.isArray(i)&&2===i.length&&i[0]<=t&&t<=i[1]},minlength:function(e,t){return String(e).length>=t},maxlength:function(e,t){return String(e).length<=t},rangelength:function(t,i){var o=String(t).length;return e.isArray(i)&&2===i.length&&i[0]<=o&&o<=i[1]},equalto:function(t,i){return t===e(i).val()},update:function(){var t=this.$element,i=this.options,n=t.attr("type"),r=a.VALIDATORS,s={};e.inArray(n,r)>-1&&(s[n]=!0),e.each(r,function(i,n){var a=t.attr(n);if(!o(a)){switch(n){case"min":case"max":case"minlength":case"maxlength":a=Number(a);break;case"pattern":a=new RegExp(a);break;case"range":case"rangelength":a=a.match(/\d+/g),e.isArray(a)?e.map(a,function(e){return Number(e)}):a=[]}s[n]=a}}),i.rules=e.extend({},s,i.rules)},addRule:function(t,o){i(t)?this.options.rules[t]=o:e.isPlainObject(t)&&e.each(t,e.proxy(this.addRule,this))},removeRule:function(t){i(t)?delete this.options.rules[t]:e.isPlainObject(t)&&e.each(t,e.proxy(this.removeRule,this))},addValidator:function(t,o){i(t)?!this.hasOwnProperty(t)&&e.isFunction(o)&&(this[t]=o,a.VALIDATORS.push(t)):e.isPlainObject(t)&&e.each(t,e.proxy(this.addValidator,this))},removeValidator:function(t){i(t)?this.hasOwnProperty(t)&&e.isFunction(this[t])&&(delete this[t],e.grep(a.VALIDATORS,function(e){return e!==t})):e.isPlainObject(t)&&e.each(t,e.proxy(this.removeValidator,this))},validate:function(){var t,o=this.$element,n=this.options,r=o.val(),u=!0,d={};return this.isCheckboxOrRadio||r!==this.value?(this.value=r,n.filter&&(r=n.filter.call(o[0],r)),e.each(n.rules,e.proxy(function(i,o){var n;return e.isPlainObject(o)?(n=o.validator,t=o.message):(n=this[i],t=a.MESSAGES[i]),e.isFunction(n)&&(u=n.call(this,r,o)),d.type=i,d.data=o,u},this)),u?(t="",o.trigger(e.Event(s,{message:t,value:r,rule:d}),t)):(i(t)&&(t=t.replace(/\[\s*(\d+)\s*\]/g,function(){var t=d.data;return e.isArray(t)?t[arguments[1]]:t})),o.trigger(e.Event(c,{message:t,value:r,rule:d}),t)),this.valid=u,u):this.valid},v:function(){return this.validate()},x:function(){return!this.validate()},isValid:function(){return this.validate()},isInvalid:function(){return!this.validate()},destroy:function(){this.unbind(),this.$element.removeData("validator")}},a.other=e.fn.validator,e.fn.validator=function(t){var s,c=n(arguments,1);return this.each(function(){var o,n=e(this),u=n.data(r);if(!u){if(/destroy/.test(t))return;n.data(r,u=new a(this,t))}i(t)&&e.isFunction(o=u[t])&&(s=o.apply(u,c))}),o(s)?this:s},e.fn.validator.Constructor=a,e.fn.validator.setDefaults=a.setDefaults,e.fn.validator.setMessages=a.setMessages,e.fn.validator.setValidators=function(t){e.extend(a.prototype,t)},e.fn.validator.noConflict=function(){return e.fn.validator=a.other,this}})},function(e,t,i){var o,n,a;!function(r){n=[i(6)],o=r,a="function"==typeof o?o.apply(t,n):o,!(void 0!==a&&(e.exports=a))}(function(e){"use strict";e.fn.validator.setMessages({number:"请输入有效的数字 (仅限数字)。",email:"请输入有效的电子邮件地址。",url:"请输入有效的网址。",date:"请输入有效的日期。",required:"这是必填字段。",max:"请输入一个不大于 [0] 的数值。",min:"请输入一个不小于 [0] 的数值。",maxlength:"最多 [0] 个字。",minlength:"最少 [0] 个字。",pattern:"请输入匹配的值。",range:"请输入 [0] 至 [1] 之间的数值。",rangelength:"请输入长度为 [0] 至 [1] 之间的字符串。",equalto:"请再次输入相同值。"})})},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e){return Y.Base64.encode(JSON.stringify(e))}function a(e){return"string"==typeof e?JSON.parse(Y.Base64.decode(e)):e}function r(e){return"string"==typeof e?e.replace(/\/(sjd|activity)_\w+/,"/"):e}function s(e){var t=e.match(/^(.*)(\.[A-z]+)$/);return null===t?(0,H.default)(String(Date.now()+Math.random())+e):(0,H.default)(String(Date.now()+Math.random())+t[1])+t[2]}function c(e){return"string"==typeof e?e.replace(K,":$1"):e}function u(e){return e=Number(e),["","vote","star","bargain","group","moon","nation","doubleeleven","daydaysale","bargain2","snowman","christmasgift","goldcoin","fire","ingots","lantern","solitaire","tree","earth","lottery","labourday","form","form2","zongzi","bargain3","child","photovote","fullphotovote","fish","watermelon"][e]}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.reversed,o=t.pattern||Z,n=function(e){return i?Math.round(100*e):e/100};return $.isPlainObject(e)||Array.isArray(e)?$.each(e,function(i,a){Q.test(a)?o.test(i)&&(e[i]=n(a)):($.isPlainObject(a)||Array.isArray(a))&&(e[i]=d(a,t))}):Q.test(e)&&(e=n(e)),e}function l(e){return e[Math.floor(Math.random()*e.length)]}function f(e){return e+".wx.shangjiadao.com"}function h(e){return Math.random().toString(36).substr(2).substring(0,e)}function p(e,t){var i={},o=[],n=void 0,a=void 0,r=t.length;for(n=0;n<r;n++)i[t[n]]=!0;for(n=0,r=e.length;n<r;n++)a=e[n],i[a]||o.push(a);return o}function m(e,t,i){for(var o=e.slice(0),n=e.length,a=n-t,r=void 0,s=void 0;n-- >a;)s=Math.floor((n+1)*Math.random()),r=o[s],i&&i==r?n++:(o[s]=o[n],o[n]=r);return o.slice(a)}function g(e){var t={data:X.href,output:"image/jpeg",error:"H",type:"10",margin:"20",size:"4"};return t=$.extend({},t,e),"http://tool.oschina.net/action/qrcode/generate?"+$.param(t)}function v(e,t){var i=e.skin?"skin"+e.skin:"skin2",o={},n={},a={};$.getJSON(B.default.json.qrcode,function(r){a=r,r.skins[i]?(o=e.options?$.extend({},r.skins[i],e.options):r.skins[i],$.each(o,function(e,t){n["qrcodeconfig["+e+"]"]=t}),$.ajax({async:!1,url:r.url,type:"GET",dataType:"jsonp",jsonp:"callback",data:n,timeout:5e3,success:function(i){i=$.parseJSON(i),t&&i.qrcodeconfig&&t(i.qrcodeconfig,a,e.skin)},error:function(e,t,i){console.log("generate qrcode url error:"+e+t+i)}})):t(null)})}function y(e,t,i){var o=(encodeURI(X.protocol+"//"+X.host),i+".wx.shangjiadao.com"),n=(X.pathname.replace(/(\/*$)/g,""),Math.random().toString(36).substr(2).substring(0,12)),a=["activity="+e,"type="+t];return X.protocol+"//"+o+"/"+n+"?"+a.join("&")}function w(e,t,i,o,n){var a=r(X.pathname).replace(/(\/*$)/g,""),s=(Math.random().toString(36).substr(2).substring(0,2),"localhost"==X.hostname||X.hostname.indexOf("local")>=0||X.hash.indexOf("noweixin=1")>=0),c=["activity="+t,"type="+i],d=q.default.share,l=X.hostname,f=void 0;if(s){var h="#!activity/"+u(i)+"/"+t;n&&(h+="/joiner/"+n),f=X.protocol+"//"+l+a+h}else o&&d[o]&&(l=d[o]),e&&(l=e),q.default.fetch_openids[l]||(l=t+"."+l),n&&c.push("joiner="+n),n=n?n:0,f=X.protocol+"//"+l+a+"/sjd_"+n+"?"+c.join("&");return console.log("个人中心分享地址："+f),f}function _(e,t,i,o){var n=V.getItem("shareurl")||{},a=X.protocol+"//"+r(window.location.host)+"/images/ucenter/activities/qrcode/loading.gif",s=e.type||"",c=e.activityId,u=e.joinerId||c,d=e.name,l=e.title,f={type:s,name:d,title:l,activity_id:c};n["k"+c]?(i("正在生成..."),f.url=n["k"+c],$.ajax(B.default.activity+"/qrcode",{method:"post",data:{id:u,params:JSON.stringify(f)},dataType:"text",timeout:6e4,success:function(e){return o(),e=$.parseJSON(e),e.code?void alert(J.default[e.code]):void t({content:'<p style="font-size: 1.2rem;color: #fff;text-align: left;text-indent: 11%;">① 长按图片保存</p><p style="font-size: 1.2rem;color: #fff;text-align: left;text-indent: 11%;">② 图片发圈通知朋友来帮忙</p><p style="width: 100%;height: 260px;position:relative;margin: 0 auto;"> <img id="dialog_qrocde_demo" style="left:0;top:0;z-index:10;width:80%;background:url('+a+') no-repeat center;" src="'+e.data.src+'"/></p>',fullscreen:!0,minicancel:!0,showmask:!0})},error:function(){alert("二维码生成失败"),o()}})):t({title:"温馨提示",content:"请先报名后，再点击生成活动二维码哦 :)",style:"text-align:center;",confirm:!0,button:{confirm:"我知道了"}})}function b(e,t,i,o,n){var a=V.getItem("shareurl")||{},s=X.protocol+"//"+r(window.location.host)+"/images/ucenter/activities/qrcode/loading.gif",c=m(["1","2","3","4","5"],1);console.log("category:"+n),a["k"+e]?(i("正在生成..."),v({skin:c[0],options:{text:"我在参加这个活动，扫码进来看看吧！",logourl:"",fontsize:"16",data:a["k"+e]}},function(e,i,a){o(),t({title:"我的活动二维码(长按图片保存)",content:(!n||$.inArray(n,["photovote","lottery","form","form2"])<0?'<div style="text-align: center;">①、长按图片进行保存</div><div style="text-align: center;">②、分享朋友圈或者好友</div>':"")+'<div style="width: 100%;height: 260px;position:relative;margin: 0 auto;"> <img id="dialog_qrocde_demo" style="width: 200px;height: 260px;left:0;top:0;z-index:10;background:url('+s+') no-repeat center;" src="'+e+'"/></div>',confirm:!0,button:{confirm:"我知道了"}})})):t({title:"温馨提示",content:"请先报名后，再点击生成活动二维码哦 :)",style:"text-align:center;",confirm:!0,button:{confirm:"我知道了"}})}function x(){X.href.indexOf("joiner=")>=0?X.replace(X.href.replace(/joiner=\d+&?/i,"joiner=0")):X.href.indexOf("/joiner")>=0&&X.replace(X.href.replace(/\/joiner(\/\d+)?/i,"/"))}function j(e){e&&e({title:"温馨提醒",content:'<p>账号已到期，请先续费并联系客服开通</p><p style="font-size:0.8rem;text-align:left;">（活动已自动关停（续费后自动恢复）。线上支付的金额将在24小时内根据系统规则退款或转入钱包，请自行在钱包中提现。）</p>',button:{confirm:"我知道了"},confirm:!0})}function D(e){e&&e({title:"温馨提醒",content:"亲，请填写正确的报名信息哟~",button:{confirm:"我知道了"},confirm:!0})}function k(e){var t={},i=void 0;for(i in e)t[i]="object"===A(e[i])?k(e[i]):e[i];return t}function S(e,t){e&&e({title:"温馨提示",style:{"text-align":"left"},button:{confirm:"我知道了"},content:"<p>①报名前可先联系商家，确认活动真实性以及记录联系方式哦。</p><p>②如发现虚假活动，请在商家岛公众号回复我们</p>",confirm:function(){return t(),!0}})}function T(e,t){e&&e({title:"提示",content:"此活动为复制的活动，请适当编辑，然后发布。",confirm:!0})}function z(){return/(iPhone|iPad|iPod|iOS|Safari)/i.test(navigator.userAgent)}function I(e,t,i,o){window._hmt&&window._hmt.push(["_trackEvent",e,t,i||"",o||""])}function M(e){var t=/[\ud800-\udbff][\udc00-\udfff]/g,i=void 0;return i="string"==typeof e&&e.replace(t,function(e){var t=void 0,i=void 0,o=void 0;return 2===e.length?(t=e.charCodeAt(0),i=e.charCodeAt(1),o=1024*(t-55296)+65536+i-56320,"&#"+o+";"):e}),"string"==typeof i?i:e}function L(e,t){return t=t||[],($.isPlainObject(e)||Array.isArray(e))&&$.each(e,function(i,o){$.isPlainObject(o)||Array.isArray(o)?e[i]=L(o):$.inArray(i,t)<0&&(e[i]=M(o))}),e}function C(e,t,i,o){i&&i({title:"下线提示",content:"<p>你的账号于 "+e+" 在 "+t+" 登录，如非本人操作，请修改密码<p>",minicancel:!0,confirm:function(){return"function"==typeof o?o():window.location.hash="#!/signout",!0},cancel:function(){return window.location.hash="#!/reset-password",!0},button:{confirm:"重新登录",cancel:"修改密码"}})}function O(e,t,i){i&&i({title:"重要提示",content:'<p style="text-align:left;">该活动需要生成二维码或者短网址，才可发至朋友圈。</p>',confirm:function(){return window.location.href=t,!0},cancel:!0})}function P(e,t,i){var o=[];"微报名（线上支付版）"==e?o.push('<p style="text-align:left;">该活动目前尚在完善中，朋友圈按钮处于关闭状态。</p>'):(o.push('<p style="text-align:left;">亲，由于微信近期朋友圈整顿，该活动暂时关闭分享朋友圈按钮，'),$.inArray(e,["全民拼团","优惠接龙"])<0&&o.push("预计5月中旬恢复，"),o.push("其他一切正常。</p>"),o.push('<p style="color: red;text-align:left;">（亲可以运用商家岛传单功能，将二维码传单发至朋友圈进行宣传）</p>')),i&&i({title:"温馨提示",content:o.join(""),confirm:function(){return window.location.href=X.protocol+"//"+q.default.ucenter_host+"/"+t,!0},cancel:!0})}function E(e){for(var t=X.href,i={},o=[],n=t.replace(/^\?/,"").split("?"),a=n.length>1?n.length>2?n[2].replace(/^\?/,"").split("&"):n[1].replace(/^\?/,"").split("&"):{},r=a.length,s=0,c=void 0,u=void 0,d="";s<r;s++)!a[s]||!a[s].indexOf("=")<0||(c=a[s].split("="),i[c[0]]=c[1]);if(e=$.extend({},i,e),$.isEmptyObject(e))return t;for(u in e)o.push(u+"="+e[u]);return o=o.join("&"),d=n.length>2?n[0]+n[1]+"?"+o:n[0]+"?"+o}Object.defineProperty(t,"__esModule",{value:!0}),t.Location=t.LocalStorage=void 0;var A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.encode=n,t.decode=a,t.pathify=r,t.getRandomFilename=s,t.jsonFilter=c,t.translateType=u,t.priceFilter=d,t.randomArray=l,t.generateUserShareHost=f,t.generateRandomStr=h,t.getArrayDiff=p,t.getRandomArrayElements=m,t.generalBlackQrcode=g,t.generateQrcode=v,t.generalShareurl=y,t.generalShareurlV2=w,t.displayShareQrcode=_,t.displayShareQrcode2=b,t.redirectToActivityIndex=x,t.showExpireTip=j,t.showJoinNotice=D,t.deepCopy=k,t.showBeforeJoinTiper=S,t.showCloneTiper=T,t.isIOS=z,t.bdStat=I,t.utf16toEntities=M,t.expressionFilter=L,t.showKickedOffline=C,t.showCreateNotice=O,t.showCreateTimelineWarning=P,t.generateUrlByParams=E;var N=i(10),B=o(N),F=i(11),q=o(F),R=i(12),J=o(R),Y=i(13),U=i(21),H=o(U),X=window.location,W=window.localStorage,V=t.LocalStorage={pathname:r(X.pathname),prefixKey:function(e){return""+this.pathname+e},setItem:function(e,t){W&&W.setItem&&W.setItem(this.prefixKey(e),n(t))},getItem:function(e){if(W&&W.getItem){var t=a(W.getItem(this.prefixKey(e)));return t||(t=a(W.getItem(n(e)))),t}return null},removeItem:function(e){W&&W.removeItem&&(W.removeItem(this.prefixKey(e)),W.removeItem(n(e)))}},G=window.decodeURIComponent,K=(t.Location={query:function e(){var e=X.search.replace(/^\?+/,"").split(/&+/),t={};return e.forEach(function(e){var i=e.split("=");i[0]&&(t[i[0]]=i[1]||"")}),t},encodeSearch:function(e,t){var i=this,o=X.search;return e&&!function(){var n=i.decodeSearch(o);Object.keys(e).forEach(function(i){var o=e[i],a=n[i];if(a)if(Array.isArray(a)){var r=a.indexOf(o);r==-1?a.push(o):t&&a.splice(r,1)}else t?delete n[i]:n[i]=o;else t||(n[i]=o)});var a=[];Object.keys(n).forEach(function(e){var t=n[e];t?Array.isArray(t)?t.forEach(function(t){a.push(t?e+"="+t:e)}):a.push(e+"="+t):a.push(e)}),o="?"+a.join("&")}(),o},decodeSearch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X.search,t={};if(e){var i=e.replace("?","").split("&");i.forEach(function(e){var i=e.split("="),o=i[0];if(o){var n=i[1]||"";n&&(n=G(n));var a=t[o];a?Array.isArray(a)?a.push(n):t[o]=[a,n]:t[o]=n}})}return t}},/:"(\d+\.?\d*)"/g),Q=/^\d+\.?\d*$/,Z=/price/i},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(9),n=location.protocol+"//"+(0,o.pathify)(window.location.host)+"/",a=n+"api/";t.default={signIn:a+"v1/user/login",signUp:a+"v1/user/register",resetPassword:a+"v1/user/reset_password",verifyCode:a+"v1/user/verify_code",profile:a+"v1/user/profile",avator:a+"v1/user/avator",inviteList:a+"v1/invite/list",inviteMyUrl:a+"v1/invite/my",accountWithdraw:a+"v1/account/withdraw",accountFlows:a+"v1/account/flow",accountBind:a+"v1/account/accountbind",accountBound:a+"v1/account/bound",activity:a+"v1/activity",activityVote:a+"v1/activity/vote",activityJoin:a+"v1/activity/join",activityShare:a+"v1/activity/share",activityHostShareWatch:a+"v1/activity/sharewatch",activityJoiner:a+"v1/activity/joiner",activityJoiners:a+"v1/activity/joiners",activityRanking:a+"v1/activity/ranking",activityComplete:a+"v1/activity/complete",activityExchange:a+"v1/activity/exchange",activitySearch:a+"v1/activity/search",activityStatistics:a+"v1/activity/statistics",activityPrize:a+"v1/activity/prize",group:a+"v1/group",groupOrder:a+"v1/group/order",groupPay:a+"v1/group/pay",groupMy:a+"v1/group/mygroup",groupOne:a+"v1/group/onegroup",groupAll:a+"v1/group/allgroups",groupJoiners:a+"v1/group/joiners",groupComplete:a+"v1/group/complete",groupIncomplete:a+"v1/group/incomplete",groupWithdraw:a+"v1/group/withdraw",groupRemove:a+"v1/group/remove",groupExceptionJoiners:a+"v1/group/blackjoiners",groupExceptionOrderRefund:a+"v1/group/blackrefund",groupSettle:a+"v1/group/settle",solitaire:a+"v1/solitaire",solitaireOrder:a+"v1/solitaire/order",solitairePay:a+"v1/solitaire/pay",solitaireRanking:a+"v1/solitaire/ranking",solitaireJoiners:a+"v1/solitaire/joiners",solitaireJoinerProfile:a+"v1/solitaire/joinerprofile",solitaireRefunds:a+"v1/solitaire/refunds",solitaireWithdraw:a+"v1/solitaire/withdraw",solitaireRemove:a+"v1/solitaire/remove",solitaireExceptionJoiners:a+"v1/solitaire/blackjoiners",solitaireExceptionOrderRefund:a+"v1/solitaire/blackrefund",solitaireSettle:a+"v1/solitaire/settle",form:a+"v1/form",formJoin:a+"v1/form/join",formOrder:a+"v1/form/order",formPay:a+"v1/form/pay",formRanking:a+"v1/form/ranking",formJoiners:a+"v1/form/joiners",formJoinerProfile:a+"v1/form/joinerprofile",formRefunds:a+"v1/form/refunds",formRemove:a+"v1/form/remove",formExceptionJoiners:a+"v1/form/blackjoiners",formExceptionOrderRefund:a+"v1/form/blackrefund",formSettle:a+"v1/form/settle",flyer:a+"v1/flyer",tree:a+"v1/tree",lottery:a+"v1/lottery",zongzi:a+"v1/zongzi",photovote:a+"v1/photovote",statistic:{activity:a+"v1/statistic/activity"},complaint:a+"v1/complaint",complaintType:a+"v1/complaint/type",uploadSignature:a+"v1/upload/signature",wechatAccess:a+"v1/wechat/access",wechatSignature:a+"v1/wechat/signature",json:{qrcode:n+"json/qrcode.json",music:n+"json/music.json",foreground:n+"json/foreground.json",imager:n+"json/imager.json",avators:n+"json/avators.json",protocol:n+"json/protocol.txt",flyer:{categories:n+"json/flyer/categories.json",background:n+"json/flyer/background.json",templatesPath:n+"json/flyer/templates",categoriesPath:n+"json/flyer/categories"},bannerSkins:n+"json/banner-skinner/",redirectActivityMaps:n+"json/activity-redirect.map.json"},message:{root:a+"v1/message"},tools:{shorturl:a+"shorturl.php"},thirdParty:{}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={title:"商家岛",description:"简单高效的营销工具",domains:{"wx.m.shangjiadao.cn":{hostname:"shangjiadao.cn",appid:"wx5429f96d1f04975b"},"wx.51jielong.cn":{hostname:"51jielong.cn",appid:"wxe2a1da21c0f4c41e"},"wx.ddenglong.cn":{hostname:"ddenglong.cn",appid:"wx78a6d522cb4fd586"}},share:{form:"wx.51jielong.cn",group:"wx.m.shangjiadao.cn",solitaire:"wx.m.shangjiadao.cn",nation:"nation.huandu51.cn",snowman:"snowman.huandu51.cn",christmasgift:"christmasgift.huandu51.cn",labourday:"labourday.huandu51.cn",lantern:"lantern.huandu51.cn",zongzi:"zongzi.huandu51.cn",bargain2:"wx.1kanjia.cn",daydaysale:"wx.1kanjia.cn",vote:"wx.1kanjia.cn",bargain3:"wx.huandugq.cn",star:"wx.zxingxing.cn",moon:"wx.zxingxing.cn",fish:"wx.zxingxing.cn",watermelon:"wx.zxingxing.cn",fire:"wx.huanmanyue.cn",goldcoin:"wx.huanmanyue.cn",earth:"wx.huanmanyue.cn",tree:"wx.huanmanyue.cn",doubleeleven:"wx.huanmanyue.cn",ingots:"wx.huanmanyue.cn",lottery:"lottery.shangjd.cn",form2:"form2.shangjd.cn",child:"child.huanmanyue.cn",photovote:"wx.ddenglong.cn",fullphotovote:"wx.ddenglong.cn"},fetch_openids:{"wx.m.shangjiadao.cn":1,"wx.51jielong.cn":1,"wx.ddenglong.cn":1},timeline_blacks:[/(shanghuba.cn)/,/(shangjiadao.com)/,/(wx.m.shangjiadao.cn)/,/(wx.1kanjia.cn)/,/(wx.liulangjia.com)/,/(wx.guangxiaojie.com)/,/(wx.qiangyuanbao.cn)/,/(huanmanyue.cn)/,/(zxingxing.cn)/,/(huandu51.cn)/,/(huandugq.cn)/],allshare_blacks:[/(shangjia8.cn)/,/(shanghu8.cn)/,/(haohuodong.top)/],activity_timeline_blacks:[42],force_open_by_third:[/(signup)/],ucenter_host:"wx.m.shangjiadao.cn",token:"shangjiadao"}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={1001:"非法的登录",1002:"加载数据失败",1003:"页码无效",1004:"每页显示数据条数参数无效",1005:"此IP已被禁止访问",1100:"您的账号在其他地方登录，您将被迫下线，如非本人操作，请及时修改密码",1101:"该手机号尚未注册或已被禁用",1102:"登录状态已过期，请重新登录",1103:"类型无效",1104:"手机号无效",1105:"该手机号已被注册",1106:"正在处理中，请稍候",1107:"非法的IP地址",1108:"验证码记录失败",1109:"验证码条数已达到每日发送限制",1110:"验证码无效",1111:"密码格式错误，密码须为6~20位由字母和数字组合",1112:"手机号错误",1113:"验证码错误",1114:"注册失败",1115:"令牌更新失败",1116:"密码错误",1117:"密码重置失败",1118:"验证码发送失败",1119:"用户ID无效",1120:"用户禁用失败",1121:"用户解禁失败",1122:"机构名称不能为空",1123:"行业不能为空",1124:"省份不能为空",1125:"城市不能为空",1126:"用户列表为空",1127:"手机号码已经存在了",1128:"修改用户信息失败",1129:"该号码已申请，联系客服帮你通过",1130:"用户头像不能为空",1131:"邀请码错误",1132:"没有可转入金额",1133:"提现失败",1134:"账号流水类型不正确",1135:"余额不足",1136:"账号有误",1137:"真实姓名格式不正确",1138:"提现金额低于50元，无法提现哦",1139:"提现金额高于20000元，无法提现哦",1140:"提现金额有误",1141:"你的账号已在其他设备登录",1142:"登录参数错误",1143:"提现账号类型不正确",1144:"未设置提现账号",1145:"账号格式不正确",1146:"收款方 或者 收款账户名不正确",1147:"身份证号码不正确",1148:"开户行不正确",1149:"您已经设置了该类型提现账号",1150:"提现账户保存失败",1151:"每日只能提现一笔哟",1152:"登录超时，请重新登录",1201:"标题无效",1202:"开始时间无效",1203:"结束时间无效",1204:"活动规则无效",1205:"奖项设置无效",1206:"领奖信息无效",1207:"兑换奖品失败",1208:"还没有人参与此活动",1209:"机构介绍信息无效",1210:"机构介绍图片无效",1212:"活动创建失败",1213:"活动ID无效",1214:"提交数据为空",1215:"活动更新失败",1216:"暂无活动数据",1217:"该活动不存在或已删除",1218:"名字无效",1219:"您已参加过当前活动",1220:"参加活动失败",1221:"参加者无效",1222:"投票失败",1223:"您已经投过票了",1224:"分享标题不能为空",1225:"分享内容不能为空",1226:"分享图片不能为空",1227:"分享信息更新失败",1228:"活动未开始",1229:"活动已结束",1230:"活动期限错误",1231:"活动删除失败",1232:"已经兑换过了",1233:"奖品已被抢完",1234:"目标已完成",1235:"没人完成目标",1236:"活动不匹配",1237:"关键词无效",1238:"搜索结果为空",1239:"您的福气还不够哟",1240:"名额已满",1241:"您已经抢到奖品了",1242:"你已经抢到其他奖品",1243:"奖品信息格式有误，请检查是否有包含表情等特殊字符，请调整后重试",1244:"还没有人抢到名额",1245:"无效的活动名额",1246:"移除名额失败",1247:"奖品档位无效",1248:"搜索分类无效",1249:"亲，今天已经投过票哟，欢迎明天再来",1250:"活动恢复失败",1251:"报名者移除失败",1252:"报名者已被商家移除",1253:"报名者信息修改失败",1254:"活动配置信息有误",1255:"设置活动为案例失败",1256:"保存活动prizes失败",1257:"该活动的prizes数据正常",1258:"已达抢礼物数量上限",1259:"报名者头像格式不正确",1260:"进行中的活动必须≤6个，请先结束或删除其他活动。",1261:"活动时间必须≤10天，请修改。",1262:"活动已经开始，不能变更开始时间",1263:"活动内容不能为空",1264:"该活动需要支付后才能正常报名",1265:"活动名额已满",1266:"转入钱包失败",1267:"无可用金额",1268:"拉取异常订单失败",1269:"订单不存在",1270:"异常订单id无效",1271:"该活动未开启支付功能",1272:"未指定分享域名",1273:"助力校验码失效",1274:"助力者名称格式有误",1275:"你今天已经为他投过票咯",1276:"今天票数已经投完了，明天再投票哦。",1277:"个性宣言不能为空",1278:"二维码生成失败",1279:"二维码参数错误",1280:"选项编号格式不正确",1281:"选项编号已经存在",1282:"照片尺寸类型不正确",1283:"照片尺寸类型保存失败",1301:"投诉内容不能为空",1302:"投诉失败",1303:"投诉ID无效",1304:"投诉记录不存在",1305:"投诉处理失败",1306:"联系方式格式无效",1401:"获取签名失败",1402:"授权码无效",1403:"获取开放码失败",1404:"开放码无效",1501:"标题不能为空",1502:"价格无效",1503:"团ID无效",1504:"团不存在",1505:"姓名不能为空",1506:"预付金额无效",1507:"添加订单失败",1508:"你已参加过该活动",1509:"订单ID无效",1510:"支付令牌无效",1511:"订单支付失败",1512:"验证支付令牌失败",1513:"订单号不能为空",1514:"获取团列表失败",1515:"获取活动ID组失败",1516:"账号不能为空",1517:"添加提现记录失败",1518:"手机号不能为空",1519:"移除团成员失败",1520:"退款失败",1521:"微信统一下单失败",1522:"活动类型错误",1523:"活动还未结束",1524:"获取活动总参与人数失败",1525:"获取活动总预付金额失败",1526:"提现金额错误",1527:"更新订单失败",1528:"支付消息无效",1529:"支付状态无效",1530:"当前团已满员",1531:"订单ID无效",1532:"拼团订单不存在",1533:"拼团活动还未开始",1534:"活动正在进行中",1535:"转入钱包失败",1536:"没有可转入金额",1601:"统计类型无效",1602:"统计数据更失败",1701:"提现ID无效",1702:"提现记录不存在",1703:"提现处理失败",2001:"消息类型格式不正确",2002:"该消息不存在",2003:"消息ID格式不正确",2004:"留言失败",2005:"留言内容不能为空",2101:"标题不能为空",2102:"诚意金无效",2103:"参与人数无效",2104:"活动ID无效",2105:"活动不存在",2106:"姓名不能为空",2107:"预付金额无效",2108:"头像无效",2109:"添加订单失败",2110:"你已参加过该活动",2111:"订单ID无效",2112:"支付令牌无效",2113:"订单支付失败",2114:"验证支付令牌失败",2115:"订单号不能为空",2116:"获取接龙列表失败",2117:"获取活动ID组失败",2118:"账号不能为空",2119:"添加提现记录失败",2120:"手机号不能为空",2121:"移除团成员失败",2122:"退款失败",2123:"微信统一下单失败",2124:"活动类型错误",2125:"活动还未结束",2126:"获取活动总参与人数失败",2127:"获取活动总预付金额失败",2128:"提现金额错误",2129:"更新订单失败",2130:"支付消息无效",2131:"支付状态无效",2132:"该活动名额已满",2133:"订单ID无效",2134:"订单不存在",2135:"该活动还未开始",2136:"该活动正在进行中",2137:"报名者ID格式不正确",2138:"报名者自定义信息格式不正确",2139:"报名者自定义信息不正确",2140:"报名者自定义信息修改失败",2141:"保存失败，请检查产品描述是否包含表情或特殊字符",2142:"转入钱包失败",2143:"没有可转入金额",2144:"该活动未接龙成功",2201:"传单内容格式不正确",2202:"传单id格式不正确",2203:"该传单不存在",2204:"传单保存失败",2205:"传单删除失败",2206:"传单名称修改失败",2207:"传单下载失败",2208:"传单名称必填",2209:"传单下载参数不正确",2210:"传单模板参数有误",2211:"模板拉取失败",2212:"传单名称格式不正确",2213:"传单分类格式不正确",2301:"您今天的抽奖次数已经用完，欢迎明天再来哟",2302:"亲，您好像刚刚抽过了，等等再来吧 :)",2303:"无奖品可抽",2304:"抽奖失败",2305:"兑奖密码错误",2306:"已经获得奖品数量上限"}},function(e,t,i){!function(t){"use strict";var o,n=t.Base64,a="2.1.9";if("undefined"!=typeof e&&e.exports)try{o=i(14).Buffer}catch(e){}var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=function(e){for(var t={},i=0,o=e.length;i<o;i++)t[e.charAt(i)]=i;return t}(r),c=String.fromCharCode,u=function(e){if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?c(192|t>>>6)+c(128|63&t):c(224|t>>>12&15)+c(128|t>>>6&63)+c(128|63&t)}var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return c(240|t>>>18&7)+c(128|t>>>12&63)+c(128|t>>>6&63)+c(128|63&t)},d=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,l=function(e){return e.replace(d,u)},f=function(e){var t=[0,2,1][e.length%3],i=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0),o=[r.charAt(i>>>18),r.charAt(i>>>12&63),t>=2?"=":r.charAt(i>>>6&63),t>=1?"=":r.charAt(63&i)];return o.join("")},h=t.btoa?function(e){return t.btoa(e)}:function(e){return e.replace(/[\s\S]{1,3}/g,f)},p=o?function(e){return(e.constructor===o.constructor?e:new o(e)).toString("base64")}:function(e){return h(l(e))},m=function(e,t){return t?p(String(e)).replace(/[+\/]/g,function(e){return"+"==e?"-":"_"}).replace(/=/g,""):p(String(e))},g=function(e){return m(e,!0)},v=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),y=function(e){switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),i=t-65536;return c((i>>>10)+55296)+c((1023&i)+56320);case 3:return c((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return c((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},w=function(e){return e.replace(v,y)},_=function(e){var t=e.length,i=t%4,o=(t>0?s[e.charAt(0)]<<18:0)|(t>1?s[e.charAt(1)]<<12:0)|(t>2?s[e.charAt(2)]<<6:0)|(t>3?s[e.charAt(3)]:0),n=[c(o>>>16),c(o>>>8&255),c(255&o)];return n.length-=[0,0,2,1][i],n.join("")},b=t.atob?function(e){return t.atob(e)}:function(e){return e.replace(/[\s\S]{1,4}/g,_)},x=o?function(e){return(e.constructor===o.constructor?e:new o(e,"base64")).toString()}:function(e){return w(b(e))},j=function(e){return x(String(e).replace(/[-_]/g,function(e){return"-"==e?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},$=function(){var e=t.Base64;return t.Base64=n,e};if(t.Base64={VERSION:a,atob:b,btoa:h,fromBase64:j,toBase64:m,utob:l,encode:m,encodeURI:g,btou:w,decode:j,noConflict:$},"function"==typeof Object.defineProperty){var D=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}};t.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",D(function(){return j(this)})),Object.defineProperty(String.prototype,"toBase64",D(function(e){return m(this,e)})),Object.defineProperty(String.prototype,"toBase64URI",D(function(){return m(this,!0)}))}}t.Meteor&&(Base64=t.Base64)}(this)},function(e,t,i){(function(e,o){"use strict";function n(){try{var e=new Uint8Array(1);
return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}function a(){return e.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function r(t,i){if(a()<i)throw new RangeError("Invalid typed array length");return e.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(i),t.__proto__=e.prototype):(null===t&&(t=new e(i)),t.length=i),t}function e(t,i,o){if(!(e.TYPED_ARRAY_SUPPORT||this instanceof e))return new e(t,i,o);if("number"==typeof t){if("string"==typeof i)throw new Error("If encoding is specified then the first argument must be a string");return d(this,t)}return s(this,t,i,o)}function s(e,t,i,o){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?h(e,t,i,o):"string"==typeof t?l(e,t,i):p(e,t)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function u(e,t,i,o){return c(t),t<=0?r(e,t):void 0!==i?"string"==typeof o?r(e,t).fill(i,o):r(e,t).fill(i):r(e,t)}function d(t,i){if(c(i),t=r(t,i<0?0:0|m(i)),!e.TYPED_ARRAY_SUPPORT)for(var o=0;o<i;++o)t[o]=0;return t}function l(t,i,o){if("string"==typeof o&&""!==o||(o="utf8"),!e.isEncoding(o))throw new TypeError('"encoding" must be a valid string encoding');var n=0|v(i,o);t=r(t,n);var a=t.write(i,o);return a!==n&&(t=t.slice(0,a)),t}function f(e,t){var i=t.length<0?0:0|m(t.length);e=r(e,i);for(var o=0;o<i;o+=1)e[o]=255&t[o];return e}function h(t,i,o,n){if(i.byteLength,o<0||i.byteLength<o)throw new RangeError("'offset' is out of bounds");if(i.byteLength<o+(n||0))throw new RangeError("'length' is out of bounds");return i=void 0===o&&void 0===n?new Uint8Array(i):void 0===n?new Uint8Array(i,o):new Uint8Array(i,o,n),e.TYPED_ARRAY_SUPPORT?(t=i,t.__proto__=e.prototype):t=f(t,i),t}function p(t,i){if(e.isBuffer(i)){var o=0|m(i.length);return t=r(t,o),0===t.length?t:(i.copy(t,0,0,o),t)}if(i){if("undefined"!=typeof ArrayBuffer&&i.buffer instanceof ArrayBuffer||"length"in i)return"number"!=typeof i.length||G(i.length)?r(t,0):f(t,i);if("Buffer"===i.type&&Z(i.data))return f(t,i.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function m(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function g(t){return+t!=t&&(t=0),e.alloc(+t)}function v(t,i){if(e.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var o=t.length;if(0===o)return 0;for(var n=!1;;)switch(i){case"ascii":case"latin1":case"binary":return o;case"utf8":case"utf-8":case void 0:return U(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*o;case"hex":return o>>>1;case"base64":return W(t).length;default:if(n)return U(t).length;i=(""+i).toLowerCase(),n=!0}}function y(e,t,i){var o=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if(i>>>=0,t>>>=0,i<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return C(this,t,i);case"utf8":case"utf-8":return z(this,t,i);case"ascii":return M(this,t,i);case"latin1":case"binary":return L(this,t,i);case"base64":return T(this,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,i);default:if(o)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0}}function w(e,t,i){var o=e[t];e[t]=e[i],e[i]=o}function _(t,i,o,n,a){if(0===t.length)return-1;if("string"==typeof o?(n=o,o=0):o>2147483647?o=2147483647:o<-2147483648&&(o=-2147483648),o=+o,isNaN(o)&&(o=a?0:t.length-1),o<0&&(o=t.length+o),o>=t.length){if(a)return-1;o=t.length-1}else if(o<0){if(!a)return-1;o=0}if("string"==typeof i&&(i=e.from(i,n)),e.isBuffer(i))return 0===i.length?-1:b(t,i,o,n,a);if("number"==typeof i)return i=255&i,e.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(t,i,o):Uint8Array.prototype.lastIndexOf.call(t,i,o):b(t,[i],o,n,a);throw new TypeError("val must be string, number or Buffer")}function b(e,t,i,o,n){function a(e,t){return 1===r?e[t]:e.readUInt16BE(t*r)}var r=1,s=e.length,c=t.length;if(void 0!==o&&(o=String(o).toLowerCase(),"ucs2"===o||"ucs-2"===o||"utf16le"===o||"utf-16le"===o)){if(e.length<2||t.length<2)return-1;r=2,s/=2,c/=2,i/=2}var u;if(n){var d=-1;for(u=i;u<s;u++)if(a(e,u)===a(t,d===-1?0:u-d)){if(d===-1&&(d=u),u-d+1===c)return d*r}else d!==-1&&(u-=u-d),d=-1}else for(i+c>s&&(i=s-c),u=i;u>=0;u--){for(var l=!0,f=0;f<c;f++)if(a(e,u+f)!==a(t,f)){l=!1;break}if(l)return u}return-1}function x(e,t,i,o){i=Number(i)||0;var n=e.length-i;o?(o=Number(o),o>n&&(o=n)):o=n;var a=t.length;if(a%2!==0)throw new TypeError("Invalid hex string");o>a/2&&(o=a/2);for(var r=0;r<o;++r){var s=parseInt(t.substr(2*r,2),16);if(isNaN(s))return r;e[i+r]=s}return r}function j(e,t,i,o){return V(U(t,e.length-i),e,i,o)}function $(e,t,i,o){return V(H(t),e,i,o)}function D(e,t,i,o){return $(e,t,i,o)}function k(e,t,i,o){return V(W(t),e,i,o)}function S(e,t,i,o){return V(X(t,e.length-i),e,i,o)}function T(e,t,i){return 0===t&&i===e.length?K.fromByteArray(e):K.fromByteArray(e.slice(t,i))}function z(e,t,i){i=Math.min(e.length,i);for(var o=[],n=t;n<i;){var a=e[n],r=null,s=a>239?4:a>223?3:a>191?2:1;if(n+s<=i){var c,u,d,l;switch(s){case 1:a<128&&(r=a);break;case 2:c=e[n+1],128===(192&c)&&(l=(31&a)<<6|63&c,l>127&&(r=l));break;case 3:c=e[n+1],u=e[n+2],128===(192&c)&&128===(192&u)&&(l=(15&a)<<12|(63&c)<<6|63&u,l>2047&&(l<55296||l>57343)&&(r=l));break;case 4:c=e[n+1],u=e[n+2],d=e[n+3],128===(192&c)&&128===(192&u)&&128===(192&d)&&(l=(15&a)<<18|(63&c)<<12|(63&u)<<6|63&d,l>65535&&l<1114112&&(r=l))}}null===r?(r=65533,s=1):r>65535&&(r-=65536,o.push(r>>>10&1023|55296),r=56320|1023&r),o.push(r),n+=s}return I(o)}function I(e){var t=e.length;if(t<=ee)return String.fromCharCode.apply(String,e);for(var i="",o=0;o<t;)i+=String.fromCharCode.apply(String,e.slice(o,o+=ee));return i}function M(e,t,i){var o="";i=Math.min(e.length,i);for(var n=t;n<i;++n)o+=String.fromCharCode(127&e[n]);return o}function L(e,t,i){var o="";i=Math.min(e.length,i);for(var n=t;n<i;++n)o+=String.fromCharCode(e[n]);return o}function C(e,t,i){var o=e.length;(!t||t<0)&&(t=0),(!i||i<0||i>o)&&(i=o);for(var n="",a=t;a<i;++a)n+=Y(e[a]);return n}function O(e,t,i){for(var o=e.slice(t,i),n="",a=0;a<o.length;a+=2)n+=String.fromCharCode(o[a]+256*o[a+1]);return n}function P(e,t,i){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>i)throw new RangeError("Trying to access beyond buffer length")}function E(t,i,o,n,a,r){if(!e.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(i>a||i<r)throw new RangeError('"value" argument is out of bounds');if(o+n>t.length)throw new RangeError("Index out of range")}function A(e,t,i,o){t<0&&(t=65535+t+1);for(var n=0,a=Math.min(e.length-i,2);n<a;++n)e[i+n]=(t&255<<8*(o?n:1-n))>>>8*(o?n:1-n)}function N(e,t,i,o){t<0&&(t=4294967295+t+1);for(var n=0,a=Math.min(e.length-i,4);n<a;++n)e[i+n]=t>>>8*(o?n:3-n)&255}function B(e,t,i,o,n,a){if(i+o>e.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function F(e,t,i,o,n){return n||B(e,t,i,4,3.4028234663852886e38,-3.4028234663852886e38),Q.write(e,t,i,o,23,4),i+4}function q(e,t,i,o,n){return n||B(e,t,i,8,1.7976931348623157e308,-1.7976931348623157e308),Q.write(e,t,i,o,52,8),i+8}function R(e){if(e=J(e).replace(te,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function J(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function Y(e){return e<16?"0"+e.toString(16):e.toString(16)}function U(e,t){t=t||1/0;for(var i,o=e.length,n=null,a=[],r=0;r<o;++r){if(i=e.charCodeAt(r),i>55295&&i<57344){if(!n){if(i>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(r+1===o){(t-=3)>-1&&a.push(239,191,189);continue}n=i;continue}if(i<56320){(t-=3)>-1&&a.push(239,191,189),n=i;continue}i=(n-55296<<10|i-56320)+65536}else n&&(t-=3)>-1&&a.push(239,191,189);if(n=null,i<128){if((t-=1)<0)break;a.push(i)}else if(i<2048){if((t-=2)<0)break;a.push(i>>6|192,63&i|128)}else if(i<65536){if((t-=3)<0)break;a.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return a}function H(e){for(var t=[],i=0;i<e.length;++i)t.push(255&e.charCodeAt(i));return t}function X(e,t){for(var i,o,n,a=[],r=0;r<e.length&&!((t-=2)<0);++r)i=e.charCodeAt(r),o=i>>8,n=i%256,a.push(n),a.push(o);return a}function W(e){return K.toByteArray(R(e))}function V(e,t,i,o){for(var n=0;n<o&&!(n+i>=t.length||n>=e.length);++n)t[n+i]=e[n];return n}function G(e){return e!==e}var K=i(19),Q=i(20),Z=i(18);t.Buffer=e,t.SlowBuffer=g,t.INSPECT_MAX_BYTES=50,e.TYPED_ARRAY_SUPPORT=void 0!==o.TYPED_ARRAY_SUPPORT?o.TYPED_ARRAY_SUPPORT:n(),t.kMaxLength=a(),e.poolSize=8192,e._augment=function(t){return t.__proto__=e.prototype,t},e.from=function(e,t,i){return s(null,e,t,i)},e.TYPED_ARRAY_SUPPORT&&(e.prototype.__proto__=Uint8Array.prototype,e.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&e[Symbol.species]===e&&Object.defineProperty(e,Symbol.species,{value:null,configurable:!0})),e.alloc=function(e,t,i){return u(null,e,t,i)},e.allocUnsafe=function(e){return d(null,e)},e.allocUnsafeSlow=function(e){return d(null,e)},e.isBuffer=function(e){return!(null==e||!e._isBuffer)},e.compare=function(t,i){if(!e.isBuffer(t)||!e.isBuffer(i))throw new TypeError("Arguments must be Buffers");if(t===i)return 0;for(var o=t.length,n=i.length,a=0,r=Math.min(o,n);a<r;++a)if(t[a]!==i[a]){o=t[a],n=i[a];break}return o<n?-1:n<o?1:0},e.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(t,i){if(!Z(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return e.alloc(0);var o;if(void 0===i)for(i=0,o=0;o<t.length;++o)i+=t[o].length;var n=e.allocUnsafe(i),a=0;for(o=0;o<t.length;++o){var r=t[o];if(!e.isBuffer(r))throw new TypeError('"list" argument must be an Array of Buffers');r.copy(n,a),a+=r.length}return n},e.byteLength=v,e.prototype._isBuffer=!0,e.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)w(this,t,t+1);return this},e.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)w(this,t,t+3),w(this,t+1,t+2);return this},e.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)w(this,t,t+7),w(this,t+1,t+6),w(this,t+2,t+5),w(this,t+3,t+4);return this},e.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?z(this,0,e):y.apply(this,arguments)},e.prototype.equals=function(t){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===e.compare(this,t)},e.prototype.inspect=function(){var e="",i=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,i).match(/.{2}/g).join(" "),this.length>i&&(e+=" ... ")),"<Buffer "+e+">"},e.prototype.compare=function(t,i,o,n,a){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===i&&(i=0),void 0===o&&(o=t?t.length:0),void 0===n&&(n=0),void 0===a&&(a=this.length),i<0||o>t.length||n<0||a>this.length)throw new RangeError("out of range index");if(n>=a&&i>=o)return 0;if(n>=a)return-1;if(i>=o)return 1;if(i>>>=0,o>>>=0,n>>>=0,a>>>=0,this===t)return 0;for(var r=a-n,s=o-i,c=Math.min(r,s),u=this.slice(n,a),d=t.slice(i,o),l=0;l<c;++l)if(u[l]!==d[l]){r=u[l],s=d[l];break}return r<s?-1:s<r?1:0},e.prototype.includes=function(e,t,i){return this.indexOf(e,t,i)!==-1},e.prototype.indexOf=function(e,t,i){return _(this,e,t,i,!0)},e.prototype.lastIndexOf=function(e,t,i){return _(this,e,t,i,!1)},e.prototype.write=function(e,t,i,o){if(void 0===t)o="utf8",i=this.length,t=0;else if(void 0===i&&"string"==typeof t)o=t,i=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t=0|t,isFinite(i)?(i=0|i,void 0===o&&(o="utf8")):(o=i,i=void 0)}var n=this.length-t;if((void 0===i||i>n)&&(i=n),e.length>0&&(i<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");o||(o="utf8");for(var a=!1;;)switch(o){case"hex":return x(this,e,t,i);case"utf8":case"utf-8":return j(this,e,t,i);case"ascii":return $(this,e,t,i);case"latin1":case"binary":return D(this,e,t,i);case"base64":return k(this,e,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,i);default:if(a)throw new TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase(),a=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ee=4096;e.prototype.slice=function(t,i){var o=this.length;t=~~t,i=void 0===i?o:~~i,t<0?(t+=o,t<0&&(t=0)):t>o&&(t=o),i<0?(i+=o,i<0&&(i=0)):i>o&&(i=o),i<t&&(i=t);var n;if(e.TYPED_ARRAY_SUPPORT)n=this.subarray(t,i),n.__proto__=e.prototype;else{var a=i-t;n=new e(a,(void 0));for(var r=0;r<a;++r)n[r]=this[r+t]}return n},e.prototype.readUIntLE=function(e,t,i){e=0|e,t=0|t,i||P(e,t,this.length);for(var o=this[e],n=1,a=0;++a<t&&(n*=256);)o+=this[e+a]*n;return o},e.prototype.readUIntBE=function(e,t,i){e=0|e,t=0|t,i||P(e,t,this.length);for(var o=this[e+--t],n=1;t>0&&(n*=256);)o+=this[e+--t]*n;return o},e.prototype.readUInt8=function(e,t){return t||P(e,1,this.length),this[e]},e.prototype.readUInt16LE=function(e,t){return t||P(e,2,this.length),this[e]|this[e+1]<<8},e.prototype.readUInt16BE=function(e,t){return t||P(e,2,this.length),this[e]<<8|this[e+1]},e.prototype.readUInt32LE=function(e,t){return t||P(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},e.prototype.readUInt32BE=function(e,t){return t||P(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},e.prototype.readIntLE=function(e,t,i){e=0|e,t=0|t,i||P(e,t,this.length);for(var o=this[e],n=1,a=0;++a<t&&(n*=256);)o+=this[e+a]*n;return n*=128,o>=n&&(o-=Math.pow(2,8*t)),o},e.prototype.readIntBE=function(e,t,i){e=0|e,t=0|t,i||P(e,t,this.length);for(var o=t,n=1,a=this[e+--o];o>0&&(n*=256);)a+=this[e+--o]*n;return n*=128,a>=n&&(a-=Math.pow(2,8*t)),a},e.prototype.readInt8=function(e,t){return t||P(e,1,this.length),128&this[e]?(255-this[e]+1)*-1:this[e]},e.prototype.readInt16LE=function(e,t){t||P(e,2,this.length);var i=this[e]|this[e+1]<<8;return 32768&i?4294901760|i:i},e.prototype.readInt16BE=function(e,t){t||P(e,2,this.length);var i=this[e+1]|this[e]<<8;return 32768&i?4294901760|i:i},e.prototype.readInt32LE=function(e,t){return t||P(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},e.prototype.readInt32BE=function(e,t){return t||P(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},e.prototype.readFloatLE=function(e,t){return t||P(e,4,this.length),Q.read(this,e,!0,23,4)},e.prototype.readFloatBE=function(e,t){return t||P(e,4,this.length),Q.read(this,e,!1,23,4)},e.prototype.readDoubleLE=function(e,t){return t||P(e,8,this.length),Q.read(this,e,!0,52,8)},e.prototype.readDoubleBE=function(e,t){return t||P(e,8,this.length),Q.read(this,e,!1,52,8)},e.prototype.writeUIntLE=function(e,t,i,o){if(e=+e,t=0|t,i=0|i,!o){var n=Math.pow(2,8*i)-1;E(this,e,t,i,n,0)}var a=1,r=0;for(this[t]=255&e;++r<i&&(a*=256);)this[t+r]=e/a&255;return t+i},e.prototype.writeUIntBE=function(e,t,i,o){if(e=+e,t=0|t,i=0|i,!o){var n=Math.pow(2,8*i)-1;E(this,e,t,i,n,0)}var a=i-1,r=1;for(this[t+a]=255&e;--a>=0&&(r*=256);)this[t+a]=e/r&255;return t+i},e.prototype.writeUInt8=function(t,i,o){return t=+t,i=0|i,o||E(this,t,i,1,255,0),e.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[i]=255&t,i+1},e.prototype.writeUInt16LE=function(t,i,o){return t=+t,i=0|i,o||E(this,t,i,2,65535,0),e.TYPED_ARRAY_SUPPORT?(this[i]=255&t,this[i+1]=t>>>8):A(this,t,i,!0),i+2},e.prototype.writeUInt16BE=function(t,i,o){return t=+t,i=0|i,o||E(this,t,i,2,65535,0),e.TYPED_ARRAY_SUPPORT?(this[i]=t>>>8,this[i+1]=255&t):A(this,t,i,!1),i+2},e.prototype.writeUInt32LE=function(t,i,o){return t=+t,i=0|i,o||E(this,t,i,4,4294967295,0),e.TYPED_ARRAY_SUPPORT?(this[i+3]=t>>>24,this[i+2]=t>>>16,this[i+1]=t>>>8,this[i]=255&t):N(this,t,i,!0),i+4},e.prototype.writeUInt32BE=function(t,i,o){return t=+t,i=0|i,o||E(this,t,i,4,4294967295,0),e.TYPED_ARRAY_SUPPORT?(this[i]=t>>>24,this[i+1]=t>>>16,this[i+2]=t>>>8,this[i+3]=255&t):N(this,t,i,!1),i+4},e.prototype.writeIntLE=function(e,t,i,o){if(e=+e,t=0|t,!o){var n=Math.pow(2,8*i-1);E(this,e,t,i,n-1,-n)}var a=0,r=1,s=0;for(this[t]=255&e;++a<i&&(r*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/r>>0)-s&255;return t+i},e.prototype.writeIntBE=function(e,t,i,o){if(e=+e,t=0|t,!o){var n=Math.pow(2,8*i-1);E(this,e,t,i,n-1,-n)}var a=i-1,r=1,s=0;for(this[t+a]=255&e;--a>=0&&(r*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/r>>0)-s&255;return t+i},e.prototype.writeInt8=function(t,i,o){return t=+t,i=0|i,o||E(this,t,i,1,127,-128),e.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[i]=255&t,i+1},e.prototype.writeInt16LE=function(t,i,o){return t=+t,i=0|i,o||E(this,t,i,2,32767,-32768),e.TYPED_ARRAY_SUPPORT?(this[i]=255&t,this[i+1]=t>>>8):A(this,t,i,!0),i+2},e.prototype.writeInt16BE=function(t,i,o){return t=+t,i=0|i,o||E(this,t,i,2,32767,-32768),e.TYPED_ARRAY_SUPPORT?(this[i]=t>>>8,this[i+1]=255&t):A(this,t,i,!1),i+2},e.prototype.writeInt32LE=function(t,i,o){return t=+t,i=0|i,o||E(this,t,i,4,2147483647,-2147483648),e.TYPED_ARRAY_SUPPORT?(this[i]=255&t,this[i+1]=t>>>8,this[i+2]=t>>>16,this[i+3]=t>>>24):N(this,t,i,!0),i+4},e.prototype.writeInt32BE=function(t,i,o){return t=+t,i=0|i,o||E(this,t,i,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),e.TYPED_ARRAY_SUPPORT?(this[i]=t>>>24,this[i+1]=t>>>16,this[i+2]=t>>>8,this[i+3]=255&t):N(this,t,i,!1),i+4},e.prototype.writeFloatLE=function(e,t,i){return F(this,e,t,!0,i)},e.prototype.writeFloatBE=function(e,t,i){return F(this,e,t,!1,i)},e.prototype.writeDoubleLE=function(e,t,i){return q(this,e,t,!0,i)},e.prototype.writeDoubleBE=function(e,t,i){return q(this,e,t,!1,i)},e.prototype.copy=function(t,i,o,n){if(o||(o=0),n||0===n||(n=this.length),i>=t.length&&(i=t.length),i||(i=0),n>0&&n<o&&(n=o),n===o)return 0;if(0===t.length||0===this.length)return 0;if(i<0)throw new RangeError("targetStart out of bounds");if(o<0||o>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-i<n-o&&(n=t.length-i+o);var a,r=n-o;if(this===t&&o<i&&i<n)for(a=r-1;a>=0;--a)t[a+i]=this[a+o];else if(r<1e3||!e.TYPED_ARRAY_SUPPORT)for(a=0;a<r;++a)t[a+i]=this[a+o];else Uint8Array.prototype.set.call(t,this.subarray(o,o+r),i);return r},e.prototype.fill=function(t,i,o,n){if("string"==typeof t){if("string"==typeof i?(n=i,i=0,o=this.length):"string"==typeof o&&(n=o,o=this.length),1===t.length){var a=t.charCodeAt(0);a<256&&(t=a)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!e.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t=255&t);if(i<0||this.length<i||this.length<o)throw new RangeError("Out of range index");if(o<=i)return this;i>>>=0,o=void 0===o?this.length:o>>>0,t||(t=0);var r;if("number"==typeof t)for(r=i;r<o;++r)this[r]=t;else{var s=e.isBuffer(t)?t:U(new e(t,n).toString()),c=s.length;for(r=0;r<o-i;++r)this[r+i]=s[r%c]}return this};var te=/[^+\/0-9A-Za-z-_]/g}).call(t,i(15).Buffer,function(){return this}())},function(e,t,i){(function(e,o){"use strict";function n(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}function a(){return e.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function r(t,i){if(a()<i)throw new RangeError("Invalid typed array length");return e.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(i),t.__proto__=e.prototype):(null===t&&(t=new e(i)),t.length=i),t}function e(t,i,o){if(!(e.TYPED_ARRAY_SUPPORT||this instanceof e))return new e(t,i,o);if("number"==typeof t){if("string"==typeof i)throw new Error("If encoding is specified then the first argument must be a string");return d(this,t)}return s(this,t,i,o)}function s(e,t,i,o){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?h(e,t,i,o):"string"==typeof t?l(e,t,i):p(e,t)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function u(e,t,i,o){return c(t),t<=0?r(e,t):void 0!==i?"string"==typeof o?r(e,t).fill(i,o):r(e,t).fill(i):r(e,t)}function d(t,i){if(c(i),t=r(t,i<0?0:0|m(i)),!e.TYPED_ARRAY_SUPPORT)for(var o=0;o<i;++o)t[o]=0;return t}function l(t,i,o){if("string"==typeof o&&""!==o||(o="utf8"),!e.isEncoding(o))throw new TypeError('"encoding" must be a valid string encoding');var n=0|v(i,o);t=r(t,n);var a=t.write(i,o);return a!==n&&(t=t.slice(0,a)),t}function f(e,t){var i=t.length<0?0:0|m(t.length);e=r(e,i);for(var o=0;o<i;o+=1)e[o]=255&t[o];return e}function h(t,i,o,n){if(i.byteLength,o<0||i.byteLength<o)throw new RangeError("'offset' is out of bounds");if(i.byteLength<o+(n||0))throw new RangeError("'length' is out of bounds");return i=void 0===o&&void 0===n?new Uint8Array(i):void 0===n?new Uint8Array(i,o):new Uint8Array(i,o,n),e.TYPED_ARRAY_SUPPORT?(t=i,t.__proto__=e.prototype):t=f(t,i),t}function p(t,i){if(e.isBuffer(i)){var o=0|m(i.length);return t=r(t,o),0===t.length?t:(i.copy(t,0,0,o),t)}if(i){if("undefined"!=typeof ArrayBuffer&&i.buffer instanceof ArrayBuffer||"length"in i)return"number"!=typeof i.length||G(i.length)?r(t,0):f(t,i);if("Buffer"===i.type&&Z(i.data))return f(t,i.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function m(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function g(t){return+t!=t&&(t=0),e.alloc(+t)}function v(t,i){if(e.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var o=t.length;if(0===o)return 0;for(var n=!1;;)switch(i){case"ascii":case"latin1":case"binary":return o;case"utf8":case"utf-8":case void 0:return U(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*o;case"hex":return o>>>1;case"base64":return W(t).length;default:if(n)return U(t).length;i=(""+i).toLowerCase(),n=!0}}function y(e,t,i){var o=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if(i>>>=0,t>>>=0,i<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return C(this,t,i);case"utf8":case"utf-8":return z(this,t,i);case"ascii":return M(this,t,i);case"latin1":case"binary":return L(this,t,i);case"base64":return T(this,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,i);default:if(o)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0}}function w(e,t,i){var o=e[t];e[t]=e[i],e[i]=o}function _(t,i,o,n,a){if(0===t.length)return-1;if("string"==typeof o?(n=o,o=0):o>2147483647?o=2147483647:o<-2147483648&&(o=-2147483648),o=+o,isNaN(o)&&(o=a?0:t.length-1),o<0&&(o=t.length+o),o>=t.length){if(a)return-1;o=t.length-1}else if(o<0){if(!a)return-1;o=0}if("string"==typeof i&&(i=e.from(i,n)),e.isBuffer(i))return 0===i.length?-1:b(t,i,o,n,a);if("number"==typeof i)return i=255&i,e.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(t,i,o):Uint8Array.prototype.lastIndexOf.call(t,i,o):b(t,[i],o,n,a);throw new TypeError("val must be string, number or Buffer")}function b(e,t,i,o,n){function a(e,t){return 1===r?e[t]:e.readUInt16BE(t*r)}var r=1,s=e.length,c=t.length;if(void 0!==o&&(o=String(o).toLowerCase(),"ucs2"===o||"ucs-2"===o||"utf16le"===o||"utf-16le"===o)){if(e.length<2||t.length<2)return-1;r=2,s/=2,c/=2,i/=2}var u;if(n){var d=-1;for(u=i;u<s;u++)if(a(e,u)===a(t,d===-1?0:u-d)){if(d===-1&&(d=u),u-d+1===c)return d*r}else d!==-1&&(u-=u-d),d=-1}else for(i+c>s&&(i=s-c),u=i;u>=0;u--){for(var l=!0,f=0;f<c;f++)if(a(e,u+f)!==a(t,f)){l=!1;break}if(l)return u}return-1}function x(e,t,i,o){i=Number(i)||0;var n=e.length-i;o?(o=Number(o),o>n&&(o=n)):o=n;var a=t.length;if(a%2!==0)throw new TypeError("Invalid hex string");o>a/2&&(o=a/2);for(var r=0;r<o;++r){var s=parseInt(t.substr(2*r,2),16);if(isNaN(s))return r;e[i+r]=s}return r}function j(e,t,i,o){return V(U(t,e.length-i),e,i,o)}function $(e,t,i,o){return V(H(t),e,i,o)}function D(e,t,i,o){return $(e,t,i,o)}function k(e,t,i,o){return V(W(t),e,i,o)}function S(e,t,i,o){return V(X(t,e.length-i),e,i,o)}function T(e,t,i){return 0===t&&i===e.length?K.fromByteArray(e):K.fromByteArray(e.slice(t,i))}function z(e,t,i){i=Math.min(e.length,i);for(var o=[],n=t;n<i;){var a=e[n],r=null,s=a>239?4:a>223?3:a>191?2:1;if(n+s<=i){var c,u,d,l;switch(s){case 1:a<128&&(r=a);break;case 2:c=e[n+1],128===(192&c)&&(l=(31&a)<<6|63&c,l>127&&(r=l));break;case 3:c=e[n+1],u=e[n+2],128===(192&c)&&128===(192&u)&&(l=(15&a)<<12|(63&c)<<6|63&u,l>2047&&(l<55296||l>57343)&&(r=l));break;case 4:c=e[n+1],u=e[n+2],d=e[n+3],128===(192&c)&&128===(192&u)&&128===(192&d)&&(l=(15&a)<<18|(63&c)<<12|(63&u)<<6|63&d,l>65535&&l<1114112&&(r=l))}}null===r?(r=65533,s=1):r>65535&&(r-=65536,o.push(r>>>10&1023|55296),r=56320|1023&r),o.push(r),n+=s}return I(o)}function I(e){var t=e.length;if(t<=ee)return String.fromCharCode.apply(String,e);for(var i="",o=0;o<t;)i+=String.fromCharCode.apply(String,e.slice(o,o+=ee));return i}function M(e,t,i){var o="";i=Math.min(e.length,i);for(var n=t;n<i;++n)o+=String.fromCharCode(127&e[n]);return o}function L(e,t,i){var o="";i=Math.min(e.length,i);for(var n=t;n<i;++n)o+=String.fromCharCode(e[n]);return o}function C(e,t,i){var o=e.length;(!t||t<0)&&(t=0),(!i||i<0||i>o)&&(i=o);for(var n="",a=t;a<i;++a)n+=Y(e[a]);return n}function O(e,t,i){for(var o=e.slice(t,i),n="",a=0;a<o.length;a+=2)n+=String.fromCharCode(o[a]+256*o[a+1]);return n}function P(e,t,i){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>i)throw new RangeError("Trying to access beyond buffer length")}function E(t,i,o,n,a,r){if(!e.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(i>a||i<r)throw new RangeError('"value" argument is out of bounds');if(o+n>t.length)throw new RangeError("Index out of range")}function A(e,t,i,o){t<0&&(t=65535+t+1);for(var n=0,a=Math.min(e.length-i,2);n<a;++n)e[i+n]=(t&255<<8*(o?n:1-n))>>>8*(o?n:1-n)}function N(e,t,i,o){t<0&&(t=4294967295+t+1);for(var n=0,a=Math.min(e.length-i,4);n<a;++n)e[i+n]=t>>>8*(o?n:3-n)&255}function B(e,t,i,o,n,a){if(i+o>e.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function F(e,t,i,o,n){return n||B(e,t,i,4,3.4028234663852886e38,-3.4028234663852886e38),Q.write(e,t,i,o,23,4),i+4}function q(e,t,i,o,n){return n||B(e,t,i,8,1.7976931348623157e308,-1.7976931348623157e308),Q.write(e,t,i,o,52,8),i+8}function R(e){if(e=J(e).replace(te,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function J(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function Y(e){return e<16?"0"+e.toString(16):e.toString(16)}function U(e,t){t=t||1/0;for(var i,o=e.length,n=null,a=[],r=0;r<o;++r){if(i=e.charCodeAt(r),i>55295&&i<57344){if(!n){if(i>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(r+1===o){(t-=3)>-1&&a.push(239,191,189);continue}n=i;continue}if(i<56320){(t-=3)>-1&&a.push(239,191,189),n=i;continue}i=(n-55296<<10|i-56320)+65536}else n&&(t-=3)>-1&&a.push(239,191,189);if(n=null,i<128){if((t-=1)<0)break;a.push(i)}else if(i<2048){if((t-=2)<0)break;a.push(i>>6|192,63&i|128)}else if(i<65536){if((t-=3)<0)break;a.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return a}function H(e){for(var t=[],i=0;i<e.length;++i)t.push(255&e.charCodeAt(i));return t}function X(e,t){for(var i,o,n,a=[],r=0;r<e.length&&!((t-=2)<0);++r)i=e.charCodeAt(r),o=i>>8,n=i%256,a.push(n),a.push(o);return a}function W(e){return K.toByteArray(R(e))}function V(e,t,i,o){for(var n=0;n<o&&!(n+i>=t.length||n>=e.length);++n)t[n+i]=e[n];return n}function G(e){return e!==e}var K=i(16),Q=i(17),Z=i(18);t.Buffer=e,t.SlowBuffer=g,t.INSPECT_MAX_BYTES=50,e.TYPED_ARRAY_SUPPORT=void 0!==o.TYPED_ARRAY_SUPPORT?o.TYPED_ARRAY_SUPPORT:n(),t.kMaxLength=a(),e.poolSize=8192,e._augment=function(t){return t.__proto__=e.prototype,t},e.from=function(e,t,i){return s(null,e,t,i)},e.TYPED_ARRAY_SUPPORT&&(e.prototype.__proto__=Uint8Array.prototype,e.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&e[Symbol.species]===e&&Object.defineProperty(e,Symbol.species,{value:null,configurable:!0})),e.alloc=function(e,t,i){return u(null,e,t,i)},e.allocUnsafe=function(e){return d(null,e)},e.allocUnsafeSlow=function(e){return d(null,e)},e.isBuffer=function(e){return!(null==e||!e._isBuffer)},e.compare=function(t,i){if(!e.isBuffer(t)||!e.isBuffer(i))throw new TypeError("Arguments must be Buffers");if(t===i)return 0;for(var o=t.length,n=i.length,a=0,r=Math.min(o,n);a<r;++a)if(t[a]!==i[a]){o=t[a],n=i[a];break}return o<n?-1:n<o?1:0},e.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(t,i){if(!Z(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return e.alloc(0);var o;if(void 0===i)for(i=0,o=0;o<t.length;++o)i+=t[o].length;var n=e.allocUnsafe(i),a=0;for(o=0;o<t.length;++o){var r=t[o];if(!e.isBuffer(r))throw new TypeError('"list" argument must be an Array of Buffers');r.copy(n,a),a+=r.length}return n},e.byteLength=v,e.prototype._isBuffer=!0,e.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)w(this,t,t+1);return this},e.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)w(this,t,t+3),w(this,t+1,t+2);return this},e.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)w(this,t,t+7),w(this,t+1,t+6),w(this,t+2,t+5),w(this,t+3,t+4);return this},e.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?z(this,0,e):y.apply(this,arguments)},e.prototype.equals=function(t){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===e.compare(this,t)},e.prototype.inspect=function(){var e="",i=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,i).match(/.{2}/g).join(" "),this.length>i&&(e+=" ... ")),"<Buffer "+e+">"},e.prototype.compare=function(t,i,o,n,a){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===i&&(i=0),void 0===o&&(o=t?t.length:0),void 0===n&&(n=0),void 0===a&&(a=this.length),i<0||o>t.length||n<0||a>this.length)throw new RangeError("out of range index");if(n>=a&&i>=o)return 0;if(n>=a)return-1;if(i>=o)return 1;if(i>>>=0,o>>>=0,n>>>=0,a>>>=0,this===t)return 0;for(var r=a-n,s=o-i,c=Math.min(r,s),u=this.slice(n,a),d=t.slice(i,o),l=0;l<c;++l)if(u[l]!==d[l]){r=u[l],s=d[l];break}return r<s?-1:s<r?1:0;
},e.prototype.includes=function(e,t,i){return this.indexOf(e,t,i)!==-1},e.prototype.indexOf=function(e,t,i){return _(this,e,t,i,!0)},e.prototype.lastIndexOf=function(e,t,i){return _(this,e,t,i,!1)},e.prototype.write=function(e,t,i,o){if(void 0===t)o="utf8",i=this.length,t=0;else if(void 0===i&&"string"==typeof t)o=t,i=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t=0|t,isFinite(i)?(i=0|i,void 0===o&&(o="utf8")):(o=i,i=void 0)}var n=this.length-t;if((void 0===i||i>n)&&(i=n),e.length>0&&(i<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");o||(o="utf8");for(var a=!1;;)switch(o){case"hex":return x(this,e,t,i);case"utf8":case"utf-8":return j(this,e,t,i);case"ascii":return $(this,e,t,i);case"latin1":case"binary":return D(this,e,t,i);case"base64":return k(this,e,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,i);default:if(a)throw new TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase(),a=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ee=4096;e.prototype.slice=function(t,i){var o=this.length;t=~~t,i=void 0===i?o:~~i,t<0?(t+=o,t<0&&(t=0)):t>o&&(t=o),i<0?(i+=o,i<0&&(i=0)):i>o&&(i=o),i<t&&(i=t);var n;if(e.TYPED_ARRAY_SUPPORT)n=this.subarray(t,i),n.__proto__=e.prototype;else{var a=i-t;n=new e(a,(void 0));for(var r=0;r<a;++r)n[r]=this[r+t]}return n},e.prototype.readUIntLE=function(e,t,i){e=0|e,t=0|t,i||P(e,t,this.length);for(var o=this[e],n=1,a=0;++a<t&&(n*=256);)o+=this[e+a]*n;return o},e.prototype.readUIntBE=function(e,t,i){e=0|e,t=0|t,i||P(e,t,this.length);for(var o=this[e+--t],n=1;t>0&&(n*=256);)o+=this[e+--t]*n;return o},e.prototype.readUInt8=function(e,t){return t||P(e,1,this.length),this[e]},e.prototype.readUInt16LE=function(e,t){return t||P(e,2,this.length),this[e]|this[e+1]<<8},e.prototype.readUInt16BE=function(e,t){return t||P(e,2,this.length),this[e]<<8|this[e+1]},e.prototype.readUInt32LE=function(e,t){return t||P(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},e.prototype.readUInt32BE=function(e,t){return t||P(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},e.prototype.readIntLE=function(e,t,i){e=0|e,t=0|t,i||P(e,t,this.length);for(var o=this[e],n=1,a=0;++a<t&&(n*=256);)o+=this[e+a]*n;return n*=128,o>=n&&(o-=Math.pow(2,8*t)),o},e.prototype.readIntBE=function(e,t,i){e=0|e,t=0|t,i||P(e,t,this.length);for(var o=t,n=1,a=this[e+--o];o>0&&(n*=256);)a+=this[e+--o]*n;return n*=128,a>=n&&(a-=Math.pow(2,8*t)),a},e.prototype.readInt8=function(e,t){return t||P(e,1,this.length),128&this[e]?(255-this[e]+1)*-1:this[e]},e.prototype.readInt16LE=function(e,t){t||P(e,2,this.length);var i=this[e]|this[e+1]<<8;return 32768&i?4294901760|i:i},e.prototype.readInt16BE=function(e,t){t||P(e,2,this.length);var i=this[e+1]|this[e]<<8;return 32768&i?4294901760|i:i},e.prototype.readInt32LE=function(e,t){return t||P(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},e.prototype.readInt32BE=function(e,t){return t||P(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},e.prototype.readFloatLE=function(e,t){return t||P(e,4,this.length),Q.read(this,e,!0,23,4)},e.prototype.readFloatBE=function(e,t){return t||P(e,4,this.length),Q.read(this,e,!1,23,4)},e.prototype.readDoubleLE=function(e,t){return t||P(e,8,this.length),Q.read(this,e,!0,52,8)},e.prototype.readDoubleBE=function(e,t){return t||P(e,8,this.length),Q.read(this,e,!1,52,8)},e.prototype.writeUIntLE=function(e,t,i,o){if(e=+e,t=0|t,i=0|i,!o){var n=Math.pow(2,8*i)-1;E(this,e,t,i,n,0)}var a=1,r=0;for(this[t]=255&e;++r<i&&(a*=256);)this[t+r]=e/a&255;return t+i},e.prototype.writeUIntBE=function(e,t,i,o){if(e=+e,t=0|t,i=0|i,!o){var n=Math.pow(2,8*i)-1;E(this,e,t,i,n,0)}var a=i-1,r=1;for(this[t+a]=255&e;--a>=0&&(r*=256);)this[t+a]=e/r&255;return t+i},e.prototype.writeUInt8=function(t,i,o){return t=+t,i=0|i,o||E(this,t,i,1,255,0),e.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[i]=255&t,i+1},e.prototype.writeUInt16LE=function(t,i,o){return t=+t,i=0|i,o||E(this,t,i,2,65535,0),e.TYPED_ARRAY_SUPPORT?(this[i]=255&t,this[i+1]=t>>>8):A(this,t,i,!0),i+2},e.prototype.writeUInt16BE=function(t,i,o){return t=+t,i=0|i,o||E(this,t,i,2,65535,0),e.TYPED_ARRAY_SUPPORT?(this[i]=t>>>8,this[i+1]=255&t):A(this,t,i,!1),i+2},e.prototype.writeUInt32LE=function(t,i,o){return t=+t,i=0|i,o||E(this,t,i,4,4294967295,0),e.TYPED_ARRAY_SUPPORT?(this[i+3]=t>>>24,this[i+2]=t>>>16,this[i+1]=t>>>8,this[i]=255&t):N(this,t,i,!0),i+4},e.prototype.writeUInt32BE=function(t,i,o){return t=+t,i=0|i,o||E(this,t,i,4,4294967295,0),e.TYPED_ARRAY_SUPPORT?(this[i]=t>>>24,this[i+1]=t>>>16,this[i+2]=t>>>8,this[i+3]=255&t):N(this,t,i,!1),i+4},e.prototype.writeIntLE=function(e,t,i,o){if(e=+e,t=0|t,!o){var n=Math.pow(2,8*i-1);E(this,e,t,i,n-1,-n)}var a=0,r=1,s=0;for(this[t]=255&e;++a<i&&(r*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/r>>0)-s&255;return t+i},e.prototype.writeIntBE=function(e,t,i,o){if(e=+e,t=0|t,!o){var n=Math.pow(2,8*i-1);E(this,e,t,i,n-1,-n)}var a=i-1,r=1,s=0;for(this[t+a]=255&e;--a>=0&&(r*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/r>>0)-s&255;return t+i},e.prototype.writeInt8=function(t,i,o){return t=+t,i=0|i,o||E(this,t,i,1,127,-128),e.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[i]=255&t,i+1},e.prototype.writeInt16LE=function(t,i,o){return t=+t,i=0|i,o||E(this,t,i,2,32767,-32768),e.TYPED_ARRAY_SUPPORT?(this[i]=255&t,this[i+1]=t>>>8):A(this,t,i,!0),i+2},e.prototype.writeInt16BE=function(t,i,o){return t=+t,i=0|i,o||E(this,t,i,2,32767,-32768),e.TYPED_ARRAY_SUPPORT?(this[i]=t>>>8,this[i+1]=255&t):A(this,t,i,!1),i+2},e.prototype.writeInt32LE=function(t,i,o){return t=+t,i=0|i,o||E(this,t,i,4,2147483647,-2147483648),e.TYPED_ARRAY_SUPPORT?(this[i]=255&t,this[i+1]=t>>>8,this[i+2]=t>>>16,this[i+3]=t>>>24):N(this,t,i,!0),i+4},e.prototype.writeInt32BE=function(t,i,o){return t=+t,i=0|i,o||E(this,t,i,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),e.TYPED_ARRAY_SUPPORT?(this[i]=t>>>24,this[i+1]=t>>>16,this[i+2]=t>>>8,this[i+3]=255&t):N(this,t,i,!1),i+4},e.prototype.writeFloatLE=function(e,t,i){return F(this,e,t,!0,i)},e.prototype.writeFloatBE=function(e,t,i){return F(this,e,t,!1,i)},e.prototype.writeDoubleLE=function(e,t,i){return q(this,e,t,!0,i)},e.prototype.writeDoubleBE=function(e,t,i){return q(this,e,t,!1,i)},e.prototype.copy=function(t,i,o,n){if(o||(o=0),n||0===n||(n=this.length),i>=t.length&&(i=t.length),i||(i=0),n>0&&n<o&&(n=o),n===o)return 0;if(0===t.length||0===this.length)return 0;if(i<0)throw new RangeError("targetStart out of bounds");if(o<0||o>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-i<n-o&&(n=t.length-i+o);var a,r=n-o;if(this===t&&o<i&&i<n)for(a=r-1;a>=0;--a)t[a+i]=this[a+o];else if(r<1e3||!e.TYPED_ARRAY_SUPPORT)for(a=0;a<r;++a)t[a+i]=this[a+o];else Uint8Array.prototype.set.call(t,this.subarray(o,o+r),i);return r},e.prototype.fill=function(t,i,o,n){if("string"==typeof t){if("string"==typeof i?(n=i,i=0,o=this.length):"string"==typeof o&&(n=o,o=this.length),1===t.length){var a=t.charCodeAt(0);a<256&&(t=a)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!e.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t=255&t);if(i<0||this.length<i||this.length<o)throw new RangeError("Out of range index");if(o<=i)return this;i>>>=0,o=void 0===o?this.length:o>>>0,t||(t=0);var r;if("number"==typeof t)for(r=i;r<o;++r)this[r]=t;else{var s=e.isBuffer(t)?t:U(new e(t,n).toString()),c=s.length;for(r=0;r<o-i;++r)this[r+i]=s[r%c]}return this};var te=/[^+\/0-9A-Za-z-_]/g}).call(t,i(15).Buffer,function(){return this}())},function(e,t){"use strict";function i(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function o(e){return 3*e.length/4-i(e)}function n(e){var t,o,n,a,r,s,c=e.length;r=i(e),s=new d(3*c/4-r),n=r>0?c-4:c;var l=0;for(t=0,o=0;t<n;t+=4,o+=3)a=u[e.charCodeAt(t)]<<18|u[e.charCodeAt(t+1)]<<12|u[e.charCodeAt(t+2)]<<6|u[e.charCodeAt(t+3)],s[l++]=a>>16&255,s[l++]=a>>8&255,s[l++]=255&a;return 2===r?(a=u[e.charCodeAt(t)]<<2|u[e.charCodeAt(t+1)]>>4,s[l++]=255&a):1===r&&(a=u[e.charCodeAt(t)]<<10|u[e.charCodeAt(t+1)]<<4|u[e.charCodeAt(t+2)]>>2,s[l++]=a>>8&255,s[l++]=255&a),s}function a(e){return c[e>>18&63]+c[e>>12&63]+c[e>>6&63]+c[63&e]}function r(e,t,i){for(var o,n=[],r=t;r<i;r+=3)o=(e[r]<<16)+(e[r+1]<<8)+e[r+2],n.push(a(o));return n.join("")}function s(e){for(var t,i=e.length,o=i%3,n="",a=[],s=16383,u=0,d=i-o;u<d;u+=s)a.push(r(e,u,u+s>d?d:u+s));return 1===o?(t=e[i-1],n+=c[t>>2],n+=c[t<<4&63],n+="=="):2===o&&(t=(e[i-2]<<8)+e[i-1],n+=c[t>>10],n+=c[t>>4&63],n+=c[t<<2&63],n+="="),a.push(n),a.join("")}t.byteLength=o,t.toByteArray=n,t.fromByteArray=s;for(var c=[],u=[],d="undefined"!=typeof Uint8Array?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=0,h=l.length;f<h;++f)c[f]=l[f],u[l.charCodeAt(f)]=f;u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,i,o,n){var a,r,s=8*n-o-1,c=(1<<s)-1,u=c>>1,d=-7,l=i?n-1:0,f=i?-1:1,h=e[t+l];for(l+=f,a=h&(1<<-d)-1,h>>=-d,d+=s;d>0;a=256*a+e[t+l],l+=f,d-=8);for(r=a&(1<<-d)-1,a>>=-d,d+=o;d>0;r=256*r+e[t+l],l+=f,d-=8);if(0===a)a=1-u;else{if(a===c)return r?NaN:(h?-1:1)*(1/0);r+=Math.pow(2,o),a-=u}return(h?-1:1)*r*Math.pow(2,a-o)},t.write=function(e,t,i,o,n,a){var r,s,c,u=8*a-n-1,d=(1<<u)-1,l=d>>1,f=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,h=o?0:a-1,p=o?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,r=d):(r=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-r))<1&&(r--,c*=2),t+=r+l>=1?f/c:f*Math.pow(2,1-l),t*c>=2&&(r++,c/=2),r+l>=d?(s=0,r=d):r+l>=1?(s=(t*c-1)*Math.pow(2,n),r+=l):(s=t*Math.pow(2,l-1)*Math.pow(2,n),r=0));n>=8;e[i+h]=255&s,h+=p,s/=256,n-=8);for(r=r<<n|s,u+=n;u>0;e[i+h]=255&r,h+=p,r/=256,u-=8);e[i+h-p]|=128*m}},function(e,t){var i={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==i.call(e)}},function(e,t){"use strict";function i(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function o(e){return 3*e.length/4-i(e)}function n(e){var t,o,n,a,r,s,c=e.length;r=i(e),s=new d(3*c/4-r),n=r>0?c-4:c;var l=0;for(t=0,o=0;t<n;t+=4,o+=3)a=u[e.charCodeAt(t)]<<18|u[e.charCodeAt(t+1)]<<12|u[e.charCodeAt(t+2)]<<6|u[e.charCodeAt(t+3)],s[l++]=a>>16&255,s[l++]=a>>8&255,s[l++]=255&a;return 2===r?(a=u[e.charCodeAt(t)]<<2|u[e.charCodeAt(t+1)]>>4,s[l++]=255&a):1===r&&(a=u[e.charCodeAt(t)]<<10|u[e.charCodeAt(t+1)]<<4|u[e.charCodeAt(t+2)]>>2,s[l++]=a>>8&255,s[l++]=255&a),s}function a(e){return c[e>>18&63]+c[e>>12&63]+c[e>>6&63]+c[63&e]}function r(e,t,i){for(var o,n=[],r=t;r<i;r+=3)o=(e[r]<<16)+(e[r+1]<<8)+e[r+2],n.push(a(o));return n.join("")}function s(e){for(var t,i=e.length,o=i%3,n="",a=[],s=16383,u=0,d=i-o;u<d;u+=s)a.push(r(e,u,u+s>d?d:u+s));return 1===o?(t=e[i-1],n+=c[t>>2],n+=c[t<<4&63],n+="=="):2===o&&(t=(e[i-2]<<8)+e[i-1],n+=c[t>>10],n+=c[t>>4&63],n+=c[t<<2&63],n+="="),a.push(n),a.join("")}t.byteLength=o,t.toByteArray=n,t.fromByteArray=s;for(var c=[],u=[],d="undefined"!=typeof Uint8Array?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=0,h=l.length;f<h;++f)c[f]=l[f],u[l.charCodeAt(f)]=f;u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,i,o,n){var a,r,s=8*n-o-1,c=(1<<s)-1,u=c>>1,d=-7,l=i?n-1:0,f=i?-1:1,h=e[t+l];for(l+=f,a=h&(1<<-d)-1,h>>=-d,d+=s;d>0;a=256*a+e[t+l],l+=f,d-=8);for(r=a&(1<<-d)-1,a>>=-d,d+=o;d>0;r=256*r+e[t+l],l+=f,d-=8);if(0===a)a=1-u;else{if(a===c)return r?NaN:(h?-1:1)*(1/0);r+=Math.pow(2,o),a-=u}return(h?-1:1)*r*Math.pow(2,a-o)},t.write=function(e,t,i,o,n,a){var r,s,c,u=8*a-n-1,d=(1<<u)-1,l=d>>1,f=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,h=o?0:a-1,p=o?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,r=d):(r=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-r))<1&&(r--,c*=2),t+=r+l>=1?f/c:f*Math.pow(2,1-l),t*c>=2&&(r++,c/=2),r+l>=d?(s=0,r=d):r+l>=1?(s=(t*c-1)*Math.pow(2,n),r+=l):(s=t*Math.pow(2,l-1)*Math.pow(2,n),r=0));n>=8;e[i+h]=255&s,h+=p,s/=256,n-=8);for(r=r<<n|s,u+=n;u>0;e[i+h]=255&r,h+=p,r/=256,u-=8);e[i+h-p]|=128*m}},function(e,t,i){var o;!function(n){"use strict";function a(e,t){var i=(65535&e)+(65535&t),o=(e>>16)+(t>>16)+(i>>16);return o<<16|65535&i}function r(e,t){return e<<t|e>>>32-t}function s(e,t,i,o,n,s){return a(r(a(a(t,e),a(o,s)),n),i)}function c(e,t,i,o,n,a,r){return s(t&i|~t&o,e,t,n,a,r)}function u(e,t,i,o,n,a,r){return s(t&o|i&~o,e,t,n,a,r)}function d(e,t,i,o,n,a,r){return s(t^i^o,e,t,n,a,r)}function l(e,t,i,o,n,a,r){return s(i^(t|~o),e,t,n,a,r)}function f(e,t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;var i,o,n,r,s,f=1732584193,h=-271733879,p=-1732584194,m=271733878;for(i=0;i<e.length;i+=16)o=f,n=h,r=p,s=m,f=c(f,h,p,m,e[i],7,-680876936),m=c(m,f,h,p,e[i+1],12,-389564586),p=c(p,m,f,h,e[i+2],17,606105819),h=c(h,p,m,f,e[i+3],22,-1044525330),f=c(f,h,p,m,e[i+4],7,-176418897),m=c(m,f,h,p,e[i+5],12,1200080426),p=c(p,m,f,h,e[i+6],17,-1473231341),h=c(h,p,m,f,e[i+7],22,-45705983),f=c(f,h,p,m,e[i+8],7,1770035416),m=c(m,f,h,p,e[i+9],12,-1958414417),p=c(p,m,f,h,e[i+10],17,-42063),h=c(h,p,m,f,e[i+11],22,-1990404162),f=c(f,h,p,m,e[i+12],7,1804603682),m=c(m,f,h,p,e[i+13],12,-40341101),p=c(p,m,f,h,e[i+14],17,-1502002290),h=c(h,p,m,f,e[i+15],22,1236535329),f=u(f,h,p,m,e[i+1],5,-165796510),m=u(m,f,h,p,e[i+6],9,-1069501632),p=u(p,m,f,h,e[i+11],14,643717713),h=u(h,p,m,f,e[i],20,-373897302),f=u(f,h,p,m,e[i+5],5,-701558691),m=u(m,f,h,p,e[i+10],9,38016083),p=u(p,m,f,h,e[i+15],14,-660478335),h=u(h,p,m,f,e[i+4],20,-405537848),f=u(f,h,p,m,e[i+9],5,568446438),m=u(m,f,h,p,e[i+14],9,-1019803690),p=u(p,m,f,h,e[i+3],14,-187363961),h=u(h,p,m,f,e[i+8],20,1163531501),f=u(f,h,p,m,e[i+13],5,-1444681467),m=u(m,f,h,p,e[i+2],9,-51403784),p=u(p,m,f,h,e[i+7],14,1735328473),h=u(h,p,m,f,e[i+12],20,-1926607734),f=d(f,h,p,m,e[i+5],4,-378558),m=d(m,f,h,p,e[i+8],11,-2022574463),p=d(p,m,f,h,e[i+11],16,1839030562),h=d(h,p,m,f,e[i+14],23,-35309556),f=d(f,h,p,m,e[i+1],4,-1530992060),m=d(m,f,h,p,e[i+4],11,1272893353),p=d(p,m,f,h,e[i+7],16,-155497632),h=d(h,p,m,f,e[i+10],23,-1094730640),f=d(f,h,p,m,e[i+13],4,681279174),m=d(m,f,h,p,e[i],11,-358537222),p=d(p,m,f,h,e[i+3],16,-722521979),h=d(h,p,m,f,e[i+6],23,76029189),f=d(f,h,p,m,e[i+9],4,-640364487),m=d(m,f,h,p,e[i+12],11,-421815835),p=d(p,m,f,h,e[i+15],16,530742520),h=d(h,p,m,f,e[i+2],23,-995338651),f=l(f,h,p,m,e[i],6,-198630844),m=l(m,f,h,p,e[i+7],10,1126891415),p=l(p,m,f,h,e[i+14],15,-1416354905),h=l(h,p,m,f,e[i+5],21,-57434055),f=l(f,h,p,m,e[i+12],6,1700485571),m=l(m,f,h,p,e[i+3],10,-1894986606),p=l(p,m,f,h,e[i+10],15,-1051523),h=l(h,p,m,f,e[i+1],21,-2054922799),f=l(f,h,p,m,e[i+8],6,1873313359),m=l(m,f,h,p,e[i+15],10,-30611744),p=l(p,m,f,h,e[i+6],15,-1560198380),h=l(h,p,m,f,e[i+13],21,1309151649),f=l(f,h,p,m,e[i+4],6,-145523070),m=l(m,f,h,p,e[i+11],10,-1120210379),p=l(p,m,f,h,e[i+2],15,718787259),h=l(h,p,m,f,e[i+9],21,-343485551),f=a(f,o),h=a(h,n),p=a(p,r),m=a(m,s);return[f,h,p,m]}function h(e){var t,i="",o=32*e.length;for(t=0;t<o;t+=8)i+=String.fromCharCode(e[t>>5]>>>t%32&255);return i}function p(e){var t,i=[];for(i[(e.length>>2)-1]=void 0,t=0;t<i.length;t+=1)i[t]=0;var o=8*e.length;for(t=0;t<o;t+=8)i[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return i}function m(e){return h(f(p(e),8*e.length))}function g(e,t){var i,o,n=p(e),a=[],r=[];for(a[15]=r[15]=void 0,n.length>16&&(n=f(n,8*e.length)),i=0;i<16;i+=1)a[i]=909522486^n[i],r[i]=1549556828^n[i];return o=f(a.concat(p(t)),512+8*t.length),h(f(r.concat(o),640))}function v(e){var t,i,o="0123456789abcdef",n="";for(i=0;i<e.length;i+=1)t=e.charCodeAt(i),n+=o.charAt(t>>>4&15)+o.charAt(15&t);return n}function y(e){return unescape(encodeURIComponent(e))}function w(e){return m(y(e))}function _(e){return v(w(e))}function b(e,t){return g(y(e),y(t))}function x(e,t){return v(b(e,t))}function j(e,t,i){return t?i?b(t,e):x(t,e):i?w(e):_(e)}o=function(){return j}.call(t,i,t,e),!(void 0!==o&&(e.exports=o))}(this)},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(23),a=o(n),r=i(24),s=o(r),c=i(11),u=o(c),d=i(9),l={dialog:null,joiner:d.LocalStorage.getItem("joiner"),loading:"",page:{},reminded:!0,sharable:!1,site:{title:u.default.title,description:u.default.description},user:d.LocalStorage.getItem("user"),voter:d.LocalStorage.getItem("voter"),visitor:d.LocalStorage.getItem("visitor"),guider:d.LocalStorage.getItem("guider")};t.default=new a.default.Store({strict:"localhost"==window.location.hostname,state:l,mutations:s.default})},function(e,t,i){!function(t,i){e.exports=i()}(this,function(){"use strict";function e(e){return e.reduce(function(e,t){return Object.keys(t).forEach(function(i){var o=e[i];o?Array.isArray(o)?e[i]=o.concat(t[i]):e[i]=[o].concat(t[i]):e[i]=t[i]}),e},{})}function t(e){return null!==e&&"object"===("undefined"==typeof e?"undefined":c(e))}function i(e,t){return t.reduce(function(e,t){return e[t]},e)}function o(e){if(!f){var t=function(){},i=e.$watch(t,t);f=e._watchers[0].constructor,i()}return f}function n(e){return h||(h=e._data.__ob__.dep.constructor),h}function a(e){p&&(p.emit("vuex:init",e),p.on("vuex:travel-to-state",function(t){e.replaceState(t)}),e.subscribe(function(e,t){p.emit("vuex:mutation",e,t)}))}function r(e){function t(){var e=this.$options,t=e.store,i=e.vuex;if(t?this.$store=t:e.parent&&e.parent.$store&&(this.$store=e.parent.$store),i){this.$store||console.warn("[vuex] store not injected. make sure to provide the store option in your root component.");var o=i.state,n=i.actions,r=i.getters;if(o&&!r&&(console.warn("[vuex] vuex.state option will been deprecated in 1.0. Use vuex.getters instead."),r=o),r){e.computed=e.computed||{};for(var c in r)a(this,c,r[c])}if(n){e.methods=e.methods||{};for(var u in n)e.methods[u]=s(this.$store,n[u],u)}}}function i(){throw new Error("vuex getter properties are read-only.")}function a(e,t,o){"function"!=typeof o?console.warn("[vuex] Getter bound to key 'vuex.getters."+t+"' is not a function."):Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:r(e.$store,o),set:i})}function r(e,t){var i=e._getterCacheId;if(t[i])return t[i];var a=e._vm,r=o(a),s=n(a),c=new r(a,function(e){return t(e.state)},null,{lazy:!0}),u=function(){return c.dirty&&c.evaluate(),s.target&&c.depend(),c.value};return t[i]=u,u}function s(e,t,i){return"function"!=typeof t&&console.warn("[vuex] Action bound to key 'vuex.actions."+i+"' is not a function."),function(){for(var i=arguments.length,o=Array(i),n=0;n<i;n++)o[n]=arguments[n];return t.call.apply(t,[this,e].concat(o))}}var c=Number(e.version.split(".")[0]);if(c>=2){var u=e.config._lifecycleHooks.indexOf("init")>-1;e.mixin(u?{init:t}:{beforeCreate:t})}else!function(){var i=e.prototype._init;e.prototype._init=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];e.init=e.init?[t].concat(e.init):t,i.call(this,e)}}();var d=e.config.optionMergeStrategies.computed;e.config.optionMergeStrategies.vuex=function(e,t){return e?t?{getters:d(e.getters,t.getters),state:d(e.state,t.state),actions:d(e.actions,t.actions)}:e:t}}function s(e){return m?void console.warn("[vuex] already installed. Vue.use(Vuex) should be called only once."):(m=e,void r(m))}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},u=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},d=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),l=function(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)},f=void 0,h=void 0,p="undefined"!=typeof window&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__,m=void 0,g=0,v=function(){function n(){var e=this,t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],i=t.state,o=void 0===i?{}:i,r=t.mutations,s=void 0===r?{}:r,c=t.modules,d=void 0===c?{}:c,l=t.plugins,f=void 0===l?[]:l,h=t.strict,p=void 0!==h&&h;u(this,n),this._getterCacheId="vuex_store_"+g++,this._dispatching=!1,this._rootMutations=this._mutations=s,this._modules=d,this._subscribers=[];var v=this.dispatch;if(this.dispatch=function(){for(var t=arguments.length,i=Array(t),o=0;o<t;o++)i[o]=arguments[o];v.apply(e,i)},!m)throw new Error("[vuex] must call Vue.use(Vuex) before creating a store instance.");var y=m.config.silent;m.config.silent=!0,this._vm=new m({data:{state:o}}),m.config.silent=y,this._setupModuleState(o,d),this._setupModuleMutations(d),p&&this._setupMutationCheck(),a(this),f.forEach(function(t){return t(e)})}return d(n,[{key:"replaceState",value:function(e){this._dispatching=!0,this._vm.state=e,this._dispatching=!1}},{key:"dispatch",value:function(e){for(var t=this,i=arguments.length,o=Array(i>1?i-1:0),n=1;n<i;n++)o[n-1]=arguments[n];var a=!1,r=!1;"object"===("undefined"==typeof e?"undefined":c(e))&&e.type&&1===arguments.length&&(r=!0,o=e,e.silent&&(a=!0),e=e.type);var s=this._mutations[e],u=this.state;s?(this._dispatching=!0,Array.isArray(s)?s.forEach(function(e){r?e(u,o):e.apply(void 0,[u].concat(l(o)))}):r?s(u,o):s.apply(void 0,[u].concat(l(o))),this._dispatching=!1,a||!function(){var i=r?o:{type:e,payload:o};t._subscribers.forEach(function(e){return e(i,u)})}()):console.warn("[vuex] Unknown mutation: "+e)}},{key:"watch",value:function(e,t,i){var o=this;return"function"!=typeof e?void console.error("Vuex store.watch only accepts function."):this._vm.$watch(function(){return e(o.state)},t,i)}},{key:"subscribe",value:function(e){var t=this._subscribers;return t.indexOf(e)<0&&t.push(e),function(){var i=t.indexOf(e);i>-1&&t.splice(i,1)}}},{key:"hotUpdate",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=e.mutations,i=e.modules;this._rootMutations=this._mutations=t||this._rootMutations,this._setupModuleMutations(i||this._modules)}},{key:"_setupModuleState",value:function(e,i){var o=this;t(i)&&Object.keys(i).forEach(function(t){var n=i[t];m.set(e,t,n.state||{}),o._setupModuleState(e[t],n.modules)})}},{key:"_setupModuleMutations",value:function(t){var i=this._modules;Object.keys(t).forEach(function(e){i[e]=t[e]});var o=this._createModuleMutations(i,[]);this._mutations=e([this._rootMutations].concat(l(o)))}},{key:"_createModuleMutations",value:function(o,n){var a=this;return t(o)?Object.keys(o).map(function(t){var r=o[t],s=n.concat(t),c=a._createModuleMutations(r.modules,s);if(!r||!r.mutations)return e(c);var u={};return Object.keys(r.mutations).forEach(function(e){var t=r.mutations[e];u[e]=function(e){for(var o=arguments.length,n=Array(o>1?o-1:0),a=1;a<o;a++)n[a-1]=arguments[a];t.apply(void 0,[i(e,s)].concat(n))}}),e([u].concat(l(c)))}):[]}},{key:"_setupMutationCheck",value:function(){var e=this,t=o(this._vm);new t(this._vm,"state",function(){if(!e._dispatching)throw new Error("[vuex] Do not mutate vuex store state outside mutation handlers.")},{deep:!0,sync:!0})}},{key:"state",get:function(){return this._vm.state},set:function(e){throw new Error("[vuex] Use store.replaceState() to explicit replace store state.")}}]),n}();"undefined"!=typeof window&&window.Vue&&s(window.Vue);var y={Store:v,install:s};return y})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(9);t.default={SHOW_DIALOG:function(e,t){e.dialog=$.isPlainObject(t)?t:null},HIDE_DIALOG:function(e,t){var i=e.dialog[t];$.isFunction(i)?i()&&(e.dialog=null):e.dialog=null},SHOW_LOADING:function(e,t){e.loading||(e.loading=t||"数据加载中")},HIDE_LOADING:function(e){e.loading=""},SIGN_IN:function(e,t){$.isPlainObject(t)&&(e.user=t,o.LocalStorage.setItem("user",t))},SIGN_OUT:function(e){o.LocalStorage.removeItem("user"),e.user=null},PAGE_IN:function(e,t){e.page=$.isPlainObject(t)?t:{},$("#pagetitle-hidden-iframe").attr("src","http://cdn.s.shangjiadao.cn/source/images/favicon.ico?"+Math.random())},JOIN_IN:function(e,t){$.isPlainObject(t)&&(e.joiner&&e.joiner.mobile==t.mobile?!function(){var i=Date.now(),o=e.joiner.activities;o.forEach(function(e,t){var n=e.expires||e.expire;(!n||n<i)&&o.splice(t,1)}),o.push(t.activity)}():e.joiner={activities:[t.activity],mobile:t.mobile,name:t.name},o.LocalStorage.setItem("joiner",e.joiner))},JOIN_OUT:function(e,t){var i=$.trim(t);i&&e.joiner&&!function(){var t=e.joiner.activities;t.forEach(function(e,o){e.joinerId==i&&t.splice(o,1)}),o.LocalStorage.setItem("joiner",e.joiner)}()},VOTE_IN:function(e,t){$.isPlainObject(t)&&(e.voter?!function(){var i=Date.now(),o=e.voter.joiners;o.forEach(function(e,t){var n=e.expires||e.expire;(!n||n<i)&&o.splice(t,1)}),o.push(t.joiner)}():e.voter={joiners:[t.joiner]},o.LocalStorage.setItem("voter",e.voter))},VOTE_OUT:function(e,t){var i=Number(t);!isNaN(i)&&e.voter&&!function(){var t=e.voter.joiners;t.forEach(function(e,o){e.id==i&&t.splice(o,1)}),o.LocalStorage.setItem("voter",e.voter)}()},TOGGLE_SHARABLE:function(e){e.sharable=!e.sharable},TOGGLE_REMINDER:function(e){e.reminded=!e.reminded},GUIDE_IN:function(e,t){$.isPlainObject(t)&&(e.guider?!function(){var i=Date.now(),o=e.guider.cases;o.forEach(function(e,t){var n=e.expires;(!n||n<i)&&o.splice(t,1)}),o.push(t.case)}():e.guider={cases:[t.case]},o.LocalStorage.setItem("guider",e.guider))},GUIDE_OUT:function(e,t){var i=t;i&&e.guider&&!function(){var t=e.guider.cases;t.forEach(function(e,o){e.id==i&&t.splice(o,1)}),o.LocalStorage.setItem("guider",e.guider)}()}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(26);({title:String,content:String,minicancel:Boolean||Function,confirm:Boolean||Function,cancel:Boolean||Function,fullscreen:Boolean,showmask:Boolean,style:Object||String,button:Object,noeffect:Boolean});t.default={template:"#dialog",vuex:{getters:{dialog:function(e){return e.dialog}},actions:{hideDialog:o.hideDialog}},computed:{styles:function(){var e=this,t=e.dialog,i=t.style?t.style:{"text-align":"center"};if(t.fullscreen){var o=$(window),n=t.confirm||t.cancel?o.height()-110:o.height()-60;"string"==typeof i?i+="overflow:auto;width:102%;height:"+n+"px":(i.width="102%",i.overflow="auto",i.height=n+"px")}return i},fullscreenStyle:function(){var e=this,t=e.dialog,i="";return t.fullscreen===!0&&(i="width:102%;"),i}},methods:{confirm:function(){this.hideDialog("confirm")},cancel:function(){this.hideDialog("cancel")},minicancel:function(){this.hideDialog("minicancel")},masked:function(e){}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.showDialog=function(e,t){var i=e.dispatch;return i("SHOW_DIALOG",t)},t.hideDialog=function(e,t){var i=e.dispatch;return i("HIDE_DIALOG",t)},t.showLoading=function(e,t){var i=e.dispatch;return i("SHOW_LOADING",t)},t.hideLoading=function(e){var t=e.dispatch;return t("HIDE_LOADING")},t.pageIn=function(e,t){var i=e.dispatch;i("PAGE_IN",t)},t.signIn=function(e,t){var i=e.dispatch;i("SIGN_IN",t)},t.signOut=function(e){var t=e.dispatch;t("SIGN_OUT")},t.joinIn=function(e,t){var i=e.dispatch;i("JOIN_IN",t)},t.joinOut=function(e,t){var i=e.dispatch;i("JOIN_OUT",t)},t.voteIn=function(e,t){var i=e.dispatch;i("VOTE_IN",t)},t.voteOut=function(e,t){var i=e.dispatch;i("VOTE_OUT",t)},t.toggleSharable=function(e){var t=e.dispatch;t("TOGGLE_SHARABLE")},t.toggleReminder=function(e){var t=e.dispatch;t("TOGGLE_REMINDER")},t.guideIn=function(e,t){var i=e.dispatch;i("GUIDE_IN",t)},t.guideOut=function(e,t){var i=e.dispatch;i("GUIDE_OUT",t)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=300,o={actionHandler:null,actionText:"",color:"default",message:"",timeout:3e3};t.default={template:"#snackbar",data:function(){return $.extend({timeoutId:0},o)},ready:function(){var e=this;e.$root.$on("show.snackbar",e.show)},methods:{show:function(e){var t=this;$.extend(t.$data,e),t.timeoutId=setTimeout(function(){t.timeoutId=0,t.hide()},i+t.timeout)},hide:function(){var e=this;e.message&&(e.message="",setTimeout(function(){e.$data=$.extend({},o)},i))},click:function(e){var t=this;e.preventDefault(),t.timeoutId&&(clearTimeout(t.timeoutId),t.timeoutId=0),t.actionHandler&&t.actionHandler(),t.hide()}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.redirections=t.aliases=t.routes=void 0;var n=i(29),a=o(n),r=i(30),s=o(r),c=i(31),u=o(c),d=i(36),l=o(d),f=i(37),h=o(f),p=i(38),m=o(p),g=i(39),v=o(g),y=i(42),w=o(y),_=i(44),b=o(_),x=i(46),j=o(x),$=i(47),D=o($),k=i(48),S=o(k),T=i(50),z=o(T),I=i(58),M=o(I),L=i(59),C=o(L),O=i(70),P=o(O),E=i(71),A=o(E),N=i(79),B=o(N),F=i(82),q=o(F),R=i(83),J=o(R),Y=i(84),U=o(Y),H=i(86),X=o(H),W=i(87),V=o(W),G=i(88),K=o(G),Q=i(91),Z=o(Q),ee=i(92),te=o(ee),ie=i(93),oe=o(ie),ne=i(96),ae=o(ne),re=i(97),se=o(re),ce=i(98),ue=o(ce),de=i(101),le=o(de),fe=i(102),he=o(fe),pe=i(103),me=o(pe),ge=i(106),ve=o(ge),ye=i(107),we=o(ye),_e=i(108),be=o(_e),xe=i(111),je=o(xe),$e=i(112),De=o($e),ke=i(113),Se=o(ke),Te=i(114),ze=o(Te),Ie=i(115),Me=o(Ie),Le=i(116),Ce=o(Le),Oe=i(117),Pe=o(Oe),Ee=i(118),Ae=o(Ee),Ne=i(121),Be=o(Ne),Fe=i(122),qe=o(Fe),Re=i(125),Je=o(Re),Ye=i(128),Ue=o(Ye),He=i(129),Xe=o(He),We=i(130),Ve=o(We),Ge=i(133),Ke=o(Ge),Qe=i(134),Ze=o(Qe),et=i(135),tt=o(et),it=i(138),ot=o(it),nt=i(139),at=o(nt),rt=i(140),st=o(rt),ct=i(143),ut=o(ct),dt=i(144),lt=o(dt),ft=i(145),ht=o(ft),pt=i(148),mt=o(pt),gt=i(149),vt=o(gt),yt=i(150),wt=o(yt),_t=i(153),bt=o(_t),xt=i(154),jt=o(xt),$t=i(155),Dt=o($t),kt=i(158),St=o(kt),Tt=i(159),zt=o(Tt),It=i(160),Mt=o(It),Lt=i(164),Ct=o(Lt),Ot=i(165),Pt=o(Ot),Et=i(166),At=o(Et),Nt=i(168),Bt=o(Nt),Ft=i(171),qt=o(Ft),Rt=i(172),Jt=o(Rt),Yt=i(173),Ut=o(Yt),Ht=i(176),Xt=o(Ht),Wt=i(177),Vt=o(Wt),Gt=i(178),Kt=o(Gt),Qt=i(181),Zt=o(Qt),ei=i(182),ti=o(ei),ii=i(184),oi=o(ii),ni=i(187),ai=o(ni),ri=i(188),si=o(ri),ci=i(189),ui=o(ci),di=i(192),li=o(di),fi=i(193),hi=o(fi),pi=i(194),mi=o(pi),gi=i(195),vi=o(gi),yi=i(198),wi=o(yi),_i=i(199),bi=o(_i),xi=i(200),ji=o(xi),$i=i(203),Di=o($i),ki=i(204),Si=o(ki),Ti=i(205),zi=o(Ti),Ii=i(208),Mi=o(Ii),Li=i(209),Ci=o(Li),Oi=i(210),Pi=o(Oi),Ei=i(211),Ai=o(Ei),Ni=i(215),Bi=o(Ni),Fi=i(217),qi=o(Fi),Ri=i(218),Ji=o(Ri),Yi=i(219),Ui=o(Yi),Hi=i(220),Xi=o(Hi),Wi=i(221),Vi=o(Wi),Gi=i(224),Ki=o(Gi),Qi=i(225),Zi=o(Qi),eo=i(226),to=o(eo),io=i(229),oo=o(io),no=i(230),ao=o(no),ro=i(231),so=o(ro),co=i(232),uo=o(co),lo=i(233),fo=o(lo),ho=i(234),po=o(ho),mo=i(235),go=o(mo),vo=i(236),yo=o(vo),wo=i(237),_o=o(wo),bo=i(238),xo=o(bo),jo=i(239),$o=o(jo),Do=i(240),ko=o(Do);t.routes={"/":{name:"home",component:a.default},"/signin":{name:"signin",component:s.default},"/signup":{name:"signup",component:u.default},"/signout":{name:"signout",component:l.default},"/reset-password":{name:"reset-password",component:h.default},"/login-transfer":{name:"transfer",component:m.default},"/ucenter":{name:"ucenter",component:v.default,auth:!0},"/withdraw":{name:"ucenter-withdraw",component:w.default,auth:!0},"/myaccount":{name:"my-account",component:b.default,auth:!0},"/account-bind":{name:"account-bind",component:j.default,auth:!0},"/myinvite":{name:"my-invite",component:D.default,auth:!0},"/invite/:code":{name:"invite-detail",component:S.default,share:!0},"/activities":{name:"activities",component:z.default,auth:!0},"/activity/categories":{name:"categories",component:M.default},"/activity/vote/:id":{name:"vote",component:C.default,share:!0,disable_timeline:!0},"/activity/vote/:id/joiner/:joinerId":{name:"vote-joiner",component:P.default,share:!0,disable_timeline:!0},"/activity/vote/:id/editor":{name:"vote-editor",component:A.default,auth:!0
},"/activity/star/:id":{name:"star",component:B.default,share:!0},"/activity/star/:id/joiner/:joinerId":{name:"star-joiner",component:q.default,share:!0},"/activity/star/:id/editor":{name:"star-editor",component:J.default,auth:!0},"/activity/bargain/:id":{name:"bargain",component:U.default,share:!0},"/activity/bargain/:id/joiner/:joinerId":{name:"bargain-joiner",component:X.default,share:!0},"/activity/bargain/:id/editor":{name:"bargain-editor",component:V.default,auth:!0},"/activity/bargain2/:id":{name:"bargain2",component:K.default,share:!0,disable_timeline:!0},"/activity/bargain2/:id/joiner/:joinerId":{name:"bargain2-joiner",component:Z.default,share:!0,disable_timeline:!0},"/activity/bargain2/:id/editor":{name:"bargain2-editor",component:te.default,auth:!0},"/activity/bargain3/:id":{name:"bargain3",component:oe.default,share:!0},"/activity/bargain3/:id/joiner/:joinerId":{name:"bargain3-joiner",component:ae.default,share:!0},"/activity/bargain3/:id/editor":{name:"bargain3-editor",component:se.default,auth:!0},"/activity/daydaysale/:id":{name:"daydaysale",component:ue.default,share:!0,disable_timeline:!0},"/activity/daydaysale/:id/joiner/:joinerId":{name:"daydaysale-joiner",component:le.default,share:!0,disable_timeline:!0},"/activity/daydaysale/:id/editor":{name:"daydaysale-editor",component:he.default,auth:!0},"/activity/doubleeleven/:id":{name:"doubleeleven",component:me.default,share:!0},"/activity/doubleeleven/:id/joiner/:joinerId":{name:"doubleeleven-joiner",component:ve.default,share:!0},"/activity/doubleeleven/:id/editor":{name:"doubleeleven-editor",component:we.default,auth:!0},"/activity/group/:id":{name:"group",component:be.default,share:!0},"/activity/group/:id/joiner/:joinerId":{name:"group-joiner",component:je.default,share:!0},"/activity/group/:id/editor":{name:"group-editor",component:De.default,auth:!0},"/activity/group/:id/joiners":{name:"group-joiners",component:Se.default,share:!0},"/activity/group/:id/guide":{name:"group-guide",component:ze.default,share:!0},"/activity/group/:id/groups":{name:"group-groups",component:Me.default,auth:!0},"/activity/group/:id/members":{name:"group-members",component:Ce.default,auth:!0},"/activity/group/:id/settle":{name:"group-settle",component:Pe.default,auth:!0},"/activity/moon/:id":{name:"moon",component:Ae.default,share:!0},"/activity/moon/:id/joiner/:joinerId":{name:"moon-joiner",component:Be.default,share:!0},"/activity/moon/:id/editor":{name:"moon-editor",component:qe.default,auth:!0},"/activity/nation/:id":{name:"nation",component:Je.default,share:!0},"/activity/nation/:id/joiner/:joinerId":{name:"nation-joiner",component:Ue.default,share:!0},"/activity/nation/:id/editor":{name:"nation-editor",component:Xe.default,auth:!0},"/activity/snowman/:id":{name:"snowman",component:Ve.default,share:!0},"/activity/snowman/:id/joiner/:joinerId":{name:"snowman-joiner",component:Ke.default,share:!0},"/activity/snowman/:id/editor":{name:"snowman-editor",component:Ze.default,auth:!0},"/activity/goldcoin/:id":{name:"goldcoin",component:tt.default,share:!0},"/activity/goldcoin/:id/joiner/:joinerId":{name:"goldcoin-joiner",component:ot.default,share:!0},"/activity/goldcoin/:id/editor":{name:"goldcoin-editor",component:at.default,auth:!0},"/activity/christmasgift/:id":{name:"christmasgift",component:st.default,share:!0},"/activity/christmasgift/:id/joiner/:joinerId":{name:"christmasgift-joiner",component:ut.default,share:!0},"/activity/christmasgift/:id/editor":{name:"christmasgift-editor",component:lt.default,auth:!0},"/activity/ingots/:id":{name:"ingots",component:ht.default,share:!0},"/activity/ingots/:id/joiner/:joinerId":{name:"ingots-joiner",component:mt.default,share:!0},"/activity/ingots/:id/editor":{name:"ingots-editor",component:vt.default,auth:!0},"/activity/fire/:id":{name:"fire",component:wt.default,share:!0},"/activity/fire/:id/joiner/:joinerId":{name:"fire-joiner",component:bt.default,share:!0},"/activity/fire/:id/editor":{name:"fire-editor",component:jt.default,auth:!0},"/activity/lantern/:id":{name:"lantern",component:Dt.default,share:!0},"/activity/lantern/:id/joiner/:joinerId":{name:"lantern-joiner",component:St.default,share:!0},"/activity/lantern/:id/editor":{name:"lantern-editor",component:zt.default,auth:!0},"/activity/solitaire/:id":{name:"solitaire",component:Mt.default,share:!0},"/activity/solitaire/:id/editor":{name:"solitaire-editor",component:Ct.default,auth:!0},"/activity/solitaire/:id/settle":{name:"solitaire-settle",component:Pt.default,auth:!0},"/activity/solitaire/:id/joiners":{name:"solitaire-joiners",component:At.default,share:!0},"/activity/earth/:id":{name:"earth",component:Ut.default,share:!0},"/activity/earth/:id/joiner/:joinerId":{name:"earth-joiner",component:Xt.default,share:!0},"/activity/earth/:id/editor":{name:"earth-editor",component:Vt.default,auth:!0},"/activity/labourday/:id":{name:"labourday",component:oi.default,share:!0},"/activity/labourday/:id/joiner/:joinerId":{name:"labourday-joiner",component:ai.default,share:!0},"/activity/labourday/:id/editor":{name:"labourday-editor",component:si.default,auth:!0},"/activity/tree/:id":{name:"tree",component:Bt.default,share:!0},"/activity/tree/:id/joiner/:joinerId":{name:"tree-joiner",component:qt.default,share:!0},"/activity/tree/:id/editor":{name:"tree-editor",component:Jt.default,auth:!0},"/activity/lottery/:id":{name:"lottery",component:Kt.default,share:!0},"/activity/lottery/:id/editor":{name:"lottery-editor",component:ti.default,auth:!0},"/activity/lottery/:id/joiners":{name:"lottery-joiners",component:Zt.default,share:!0},"/activity/form/:id":{name:"form",component:ui.default,share:!0},"/activity/form/:id/editor":{name:"form-editor",component:li.default,auth:!0},"/activity/form/:id/settle":{name:"form-settle",component:hi.default,auth:!0},"/activity/form/:id/joiners":{name:"form-joiners",component:mi.default,share:!0},"/activity/form2/:id":{name:"form",component:ui.default,share:!0},"/activity/form2/:id/editor":{name:"form-editor",component:li.default,auth:!0},"/activity/form2/:id/editor/:category":{name:"form-editor",component:li.default,auth:!0},"/activity/zongzi/:id":{name:"zongzi",component:vi.default,share:!0},"/activity/zongzi/:id/joiner/:joinerId":{name:"zongzi-joiner",component:wi.default,share:!0},"/activity/zongzi/:id/editor":{name:"zongzi-editor",component:bi.default,auth:!0},"/activity/child/:id":{name:"child",component:ji.default,share:!0},"/activity/child/:id/joiner/:joinerId":{name:"child-joiner",component:Di.default,share:!0},"/activity/child/:id/editor":{name:"child-editor",component:Si.default,auth:!0},"/activity/photovote/:id":{name:"photovote",component:zi.default,share:!0},"/activity/photovote/:id/joiner/:joinerId":{name:"photovote-joiner",component:Mi.default,share:!0},"/activity/photovote/:id/editor":{name:"photovote-editor",component:Pi.default,auth:!0},"/activity/photovote/:id/joiners":{name:"photovote-joiners",component:Ci.default,auth:!0},"/activity/fullphotovote/:id":{name:"fullphotovote",component:Ai.default,share:!0},"/activity/fullphotovote/:id/joiner/:joinerId":{name:"fullphotovote-joiner",component:Bi.default,share:!0},"/activity/fullphotovote/:id/editor":{name:"fullphotovote-editor",component:Ji.default,auth:!0},"/activity/fullphotovote/:id/joiners":{name:"fullphotovote-joiners",component:qi.default,auth:!0},"/activity/:id/joiners":{name:"joiners",component:Ui.default,auth:!0},"/activity/:id/statistics":{name:"statistics",component:Xi.default,auth:!0},"/activity/:id/complaint":{name:"complaint",component:go.default},"/activity/fish/:id":{name:"fish",component:to.default,share:!0},"/activity/fish/:id/editor":{name:"fish-editor",component:oo.default,auth:!0},"/activity/fish/:id/joiner/:joinerId":{name:"fish-joiner",component:ao.default,share:!0},"/activity/watermelon/:id":{name:"watermelon",component:Vi.default,share:!0},"/activity/watermelon/:id/editor":{name:"watermelon-editor",component:Ki.default,auth:!0},"/activity/watermelon/:id/joiner/:joinerId":{name:"watermelon-joiner",component:Zi.default,share:!0},"/flyer/categories":{name:"flyer-categories",component:so.default},"/flyer/category/:id":{name:"flyer-category",component:uo.default},"/flyers":{name:"flyers",component:fo.default,auth:!0},"/flyer/:id/editor":{name:"flyer-editor",component:po.default,auth:!0},"/flyer/:id/download":{name:"flyer-download",component:po.default,share:!0},"/404":{name:"404",component:yo.default},"/404/why":{name:"404why",component:_o.default},"/403":{name:"403",component:xo.default},"/messages":{name:"messages",component:$o.default,auth:!0},"/message/:id":{name:"message-detail",component:ko.default,auth:!0}},t.aliases={"/login":"/signin","/register":"/signup","/logout":"/signout","/my":"/ucenter","/my/invite":"/myinvite","/my/account":"/myaccount","/my/account/bind":"/account-bind","/activity":"/activities","/activity/vote/new":"/activity/vote/0/editor","/activity/star/new":"/activity/star/0/editor","/activity/bargain/new":"/activity/bargain/0/editor","/activity/group/new":"/activity/group/0/editor","/activity/moon/new":"/activity/moon/0/editor","/activity/nation/new":"/activity/nation/0/editor","/activity/doubleeleven/new":"/activity/doubleeleven/0/editor","/activity/daydaysale/new":"/activity/daydaysale/0/editor","/activity/bargain2/new":"/activity/bargain2/0/editor","/activity/bargain3/new":"/activity/bargain3/0/editor","/activity/snowman/new":"/activity/snowman/0/editor","/activity/goldcoin/new":"/activity/goldcoin/0/editor","/activity/christmasgift/new":"/activity/christmasgift/0/editor","/activity/fire/new":"/activity/fire/0/editor","/activity/ingots/new":"/activity/ingots/0/editor","/activity/lantern/new":"/activity/lantern/0/editor","/activity/solitaire/new":"/activity/solitaire/0/editor","/activity/tree/new":"/activity/tree/0/editor","/activity/earth/new":"/activity/earth/0/editor","/activity/lottery/new":"/activity/lottery/0/editor","/activity/labourday/new":"/activity/labourday/0/editor","/activity/form/new":"/activity/form/0/editor","/activity/form2/new":"/activity/form2/0/editor/form2","/activity/zongzi/new":"/activity/zongzi/0/editor","/activity/child/new":"/activity/child/0/editor","/activity/photovote/new":"/activity/photovote/0/editor","/activity/fullphotovote/new":"/activity/fullphotovote/0/editor","/activity/fish/new":"/activity/fish/0/editor","/activity/watermelon/new":"/activity/watermelon/0/editor","/message":"/messages","/flyer":"/flyers","/flyer/new":"/flyer/0/editor"},t.redirections={"*":"/404"}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(26),n=i(9);t.default={template:"#home",vuex:{getters:{user:function(e){return e.user},site:function(e){return e.site}},actions:{pageIn:o.pageIn}},ready:function(){this.stat("view"),this.pageIn()},methods:{stat:function(e){switch(e){case"view":(0,n.bdStat)("page_index","view","yes");break;case"categories":(0,n.bdStat)("page_index","go_categories","yes");break;case"signin":(0,n.bdStat)("page_index","go_signin","yes")}}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(9),a=i(10),r=o(a),s=i(12),c=o(s),u=i(26),d=$(document.body);t.default={template:"#signin",vuex:{getters:{visitor:function(e){return e.visitor}},actions:{showLoading:u.showLoading,hideLoading:u.hideLoading,pageIn:u.pageIn,signIn:u.signIn,showDialog:u.showDialog}},route:{activate:function(){var e=this,t=e.$route.query,i=t.from,o=t.user;o&&(o=(0,n.decode)(o),"reset-password"!=i&&"signup"!=i||(e.mobile=o.mobile,e.password=o.password,e.submit()))}},data:function(){return{mobile:"",password:"",force:0,logging:!1}},ready:function(){this.stat("view"),this.pageIn({title:"登录"})},methods:{stat:function(e){(0,n.bdStat)("page_signin",e,"yes")},showService:function(){var e=this;e.showDialog({title:"联系客服",confirm:!0,button:{confirm:"我知道了"},content:'<img src="images/signup/service.png?1" style="width: 100%;"/>'})},submit:function(e){var t=this,i=t.$route,o=t.password,n=$("#text_login_password");return e&&e.preventDefault(),/^\S{6,20}$/.test(o)?(t.showLoading(),t.logging=!0,void $.ajax(r.default.signIn,{method:"POST",data:{mobile:$.trim(t.mobile),password:t.password,force:t.force,open_id:t.visitor?t.visitor.openId:"wx"+Date.now()},success:function(e){return t.logging=!1,e.code?"1141"==e.code?void t.showDialog({title:"重要提示",content:"<p>该账号正在其他设备上登录中，是否强制登录并将对方下线<p>",confirm:function(){return t.force=1,t.$nextTick(function(){t.submit()}),!0},cancel:function(){return!0},button:{confirm:"继续登录",cancel:"取消登录"}}):void d.tooltip(c.default[e.code],"danger"):(d.one("hidden.tooltip",function(){var e=i.query.next;e&&(e=window.decodeURIComponent(e),/\/categories/.test(e)&&(e="")),t.$router.go(e||{name:"ucenter"})}).tooltip("show",{content:"登录成功",style:"success",duration:1e3}),void(e.data&&t.signIn(e.data)))},error:function(){t.logging=!1,d.tooltip("登录失败，请检查网络或联系客服","danger")},complete:function(){t.hideLoading()}})):(d.tooltip("密码格式不正确，密码最少6位，最多20位，不能包含空格","warning"),n.focus(),!1)}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),i(32),i(33);var n=i(10),a=o(n),r=i(12),s=o(r),c=i(35),u=o(c),d=i(11),l=(o(d),i(9)),f=i(26),h=$(document.body);t.default={template:"#signup",vuex:{getters:{visitor:function(e){return e.visitor}},actions:{showDialog:f.showDialog,showLoading:f.showLoading,hideLoading:f.hideLoading,pageIn:f.pageIn}},created:function(){var e=this;"public"!==e.$route.query.access&&e.$router.go("/")},data:function(){return{city:"",industry:"",mobile:"",organization:"",password:"",province:"",verify_code:"",invitecode:"",submitting:!1}},ready:function(){var e=this;e.pageIn({title:"账号申请-商家岛"}),e.$distpicker=$(e.$els.location).distpicker({autoSelect:!1})},beforeDestroy:function(){var e=this;e.countdown&&e.countdown.destroy(),e.$distpicker.distpicker("destroy")},methods:{showService:function(){var e=this;e.showDialog({title:"联系客服",confirm:!0,button:{confirm:"我知道了"},content:'<img src="images/signup/service.png?1" style="width: 100%;"/>'})},sendCaptcha:function(e){var t=this,i=e.target;if(!i.disabled&&!t.requesting){var o=$(t.$els.mobile),n=o.validator("v");if(o.validator("destroy"),!n)return h.tooltip(o.attr("title"),"warning"),void o.focus();t.requesting=!0,$.ajax(a.default.verifyCode,{data:{mobile:t.mobile,type:1},success:function(e){return e.code?void h.tooltip(s.default[e.code],"danger"):(h.tooltip("短信验证码发送成功","success"),void(t.countdown=new u.default(i,{template:"%d秒后重新获取",seconds:60})))},complete:function(){t.requesting=!1}})}},submit:function(e){var t=this;return e.preventDefault(),t.organization?t.industry?t.province?t.city?t.mobile?11!=t.mobile.length?void h.tooltip("请输入正确的手机号码","danger"):t.verify_code&&4==t.verify_code.length?!t.password||t.password.length<6?void h.tooltip("请输入正确的密码","danger"):$("#signup-protocol-chk").is(":checked")?(t.showLoading(),t.submitting=!0,t.$data.invitecode=t.$route.query.invitecode||"",void $.ajax(a.default.signUp,{method:"POST",data:$.extend({open_id:t.visitor?t.visitor.openId:"wx"+Date.now()},t.$data),success:function(e){return t.submitting=!1,e.code?void h.tooltip(s.default[e.code],"danger"):void h.one("hidden.tooltip",function(){var e="micromessenger"==navigator.userAgent.toLowerCase().match(/MicroMessenger/i);e?t.$router.go({name:"signin",query:{user:(0,l.encode)({mobile:t.mobile,password:t.password}),from:"signup"}}):t.showDialog({title:"请用微信扫一扫以下二维码",style:"text-align:center;",content:'<p><img style="width: 100%;" src="http://cdn.s.shangjiadao.cn/source/images/signup/mp_qrcode.png"/><p>',confirm:!1})}).tooltip("show",{content:"注册成功",style:"success",duration:1e3})},error:function(){t.submitting=!1,h.tooltip("提交申请失败，请检查网络或联系客服","danger")},complete:function(){t.hideLoading()}})):void h.tooltip("您还未接受商家岛用户协议","danger"):void h.tooltip("请输入正确的验证码","danger"):void h.tooltip("请输入手机号码","danger"):void h.tooltip("请选择所在城市","danger"):void h.tooltip("请选择所在省份","danger"):void h.tooltip("请选择所属行业","danger"):void h.tooltip("请输入机构名称","danger")},protocol:function(){var e=this;e.showLoading("正在加载..."),$.get(a.default.json.protocol+"?"+(new Date).getMonth(),function(t){e.hideLoading(),e.showDialog({title:"商家岛用户协议",confirm:!0,fullscreen:!0,style:"text-align: left;",button:{confirm:"我知道了"},content:t})},"html")}}}},function(e,t,i){var o,n,a;!function(i){n=[],o=i,a="function"==typeof o?o.apply(t,n):o,!(void 0!==a&&(e.exports=a))}(function(){var e={86:{11e4:"北京市",12e4:"天津市",13e4:"河北省",14e4:"山西省",15e4:"内蒙古自治区",21e4:"辽宁省",22e4:"吉林省",23e4:"黑龙江省",31e4:"上海市",32e4:"江苏省",33e4:"浙江省",34e4:"安徽省",35e4:"福建省",36e4:"江西省",37e4:"山东省",41e4:"河南省",42e4:"湖北省",43e4:"湖南省",44e4:"广东省",45e4:"广西壮族自治区",46e4:"海南省",5e5:"重庆市",51e4:"四川省",52e4:"贵州省",53e4:"云南省",54e4:"西藏自治区",61e4:"陕西省",62e4:"甘肃省",63e4:"青海省",64e4:"宁夏回族自治区",65e4:"新疆维吾尔自治区",71e4:"台湾省",81e4:"香港特别行政区",82e4:"澳门特别行政区"},11e4:{110100:"北京市市辖区"},110100:{110101:"东城区",110102:"西城区",110105:"朝阳区",110106:"丰台区",110107:"石景山区",110108:"海淀区",110109:"门头沟区",110111:"房山区",110112:"通州区",110113:"顺义区",110114:"昌平区",110115:"大兴区",110116:"怀柔区",110117:"平谷区",110118:"密云区",110119:"延庆区"},12e4:{120100:"天津市市辖区",120200:"天津市郊县"},120100:{120101:"和平区",120102:"河东区",120103:"河西区",120104:"南开区",120105:"河北区",120106:"红桥区",120110:"东丽区",120111:"西青区",120112:"津南区",120113:"北辰区",120114:"武清区",120115:"宝坻区",120116:"滨海新区",120117:"宁河区",120118:"静海区",120225:"蓟县"},13e4:{130100:"石家庄市",130200:"唐山市",130300:"秦皇岛市",130400:"邯郸市",130500:"邢台市",130600:"保定市",130700:"张家口市",130800:"承德市",130900:"沧州市",131e3:"廊坊市",131100:"衡水市"},130100:{130102:"长安区",130104:"桥西区",130105:"新华区",130107:"井陉矿区",130108:"裕华区",130109:"藁城区",130110:"鹿泉区",130111:"栾城区",130121:"井陉县",130123:"正定县",130125:"行唐县",130126:"灵寿县",130127:"高邑县",130128:"深泽县",130129:"赞皇县",130130:"无极县",130131:"平山县",130132:"元氏县",130133:"赵县",130181:"辛集市",130183:"晋州市",130184:"新乐市"},130200:{130202:"路南区",130203:"路北区",130204:"古冶区",130205:"开平区",130207:"丰南区",130208:"丰润区",130209:"曹妃甸区",130223:"滦县",130224:"滦南县",130225:"乐亭县",130227:"迁西县",130229:"玉田县",130281:"遵化市",130283:"迁安市"},130300:{130302:"海港区",130303:"山海关区",130304:"北戴河区",130306:"抚宁区",130321:"青龙满族自治县",130322:"昌黎县",130324:"卢龙县"},130400:{130402:"邯山区",130403:"丛台区",130404:"复兴区",130406:"峰峰矿区",130421:"邯郸县",130423:"临漳县",130424:"成安县",130425:"大名县",130426:"涉县",130427:"磁县",130428:"肥乡县",130429:"永年县",130430:"邱县",130431:"鸡泽县",130432:"广平县",130433:"馆陶县",130434:"魏县",130435:"曲周县",130481:"武安市"},130500:{130502:"桥东区",130503:"桥西区",130521:"邢台县",130522:"临城县",130523:"内丘县",130524:"柏乡县",130525:"隆尧县",130526:"任县",130527:"南和县",130528:"宁晋县",130529:"巨鹿县",130530:"新河县",130531:"广宗县",130532:"平乡县",130533:"威县",130534:"清河县",130535:"临西县",130581:"南宫市",130582:"沙河市"},130600:{130602:"竞秀区",130606:"莲池区",130607:"满城区",130608:"清苑区",130609:"徐水区",130623:"涞水县",130624:"阜平县",130626:"定兴县",130627:"唐县",130628:"高阳县",130629:"容城县",130630:"涞源县",130631:"望都县",130632:"安新县",130633:"易县",130634:"曲阳县",130635:"蠡县",130636:"顺平县",130637:"博野县",130638:"雄县",130681:"涿州市",130682:"定州市",130683:"安国市",130684:"高碑店市"},130700:{130702:"桥东区",130703:"桥西区",130705:"宣化区",130706:"下花园区",130721:"宣化县",130722:"张北县",130723:"康保县",130724:"沽源县",130725:"尚义县",130726:"蔚县",130727:"阳原县",130728:"怀安县",130729:"万全县",130730:"怀来县",130731:"涿鹿县",130732:"赤城县",130733:"崇礼县"},130800:{130802:"双桥区",130803:"双滦区",130804:"鹰手营子矿区",130821:"承德县",130822:"兴隆县",130823:"平泉县",130824:"滦平县",130825:"隆化县",130826:"丰宁满族自治县",130827:"宽城满族自治县",130828:"围场满族蒙古族自治县"},130900:{130902:"新华区",130903:"运河区",130921:"沧县",130922:"青县",130923:"东光县",130924:"海兴县",130925:"盐山县",130926:"肃宁县",130927:"南皮县",130928:"吴桥县",130929:"献县",130930:"孟村回族自治县",130981:"泊头市",130982:"任丘市",130983:"黄骅市",130984:"河间市"},131e3:{131002:"安次区",131003:"广阳区",131022:"固安县",131023:"永清县",131024:"香河县",131025:"大城县",131026:"文安县",131028:"大厂回族自治县",131081:"霸州市",131082:"三河市"},131100:{131102:"桃城区",131121:"枣强县",131122:"武邑县",131123:"武强县",131124:"饶阳县",131125:"安平县",131126:"故城县",131127:"景县",131128:"阜城县",131181:"冀州市",131182:"深州市"},14e4:{140100:"太原市",140200:"大同市",140300:"阳泉市",140400:"长治市",140500:"晋城市",140600:"朔州市",140700:"晋中市",140800:"运城市",140900:"忻州市",141e3:"临汾市",141100:"吕梁市"},140100:{140105:"小店区",140106:"迎泽区",140107:"杏花岭区",140108:"尖草坪区",140109:"万柏林区",140110:"晋源区",140121:"清徐县",140122:"阳曲县",140123:"娄烦县",140181:"古交市"},140200:{140202:"城区",140203:"矿区",140211:"南郊区",140212:"新荣区",140221:"阳高县",140222:"天镇县",140223:"广灵县",140224:"灵丘县",140225:"浑源县",140226:"左云县",140227:"大同县"},140300:{140302:"城区",140303:"矿区",140311:"郊区",140321:"平定县",140322:"盂县"},140400:{140402:"城区",140411:"郊区",140421:"长治县",140423:"襄垣县",140424:"屯留县",140425:"平顺县",140426:"黎城县",140427:"壶关县",140428:"长子县",140429:"武乡县",140430:"沁县",140431:"沁源县",140481:"潞城市"},140500:{140502:"城区",140521:"沁水县",140522:"阳城县",140524:"陵川县",140525:"泽州县",140581:"高平市"},140600:{140602:"朔城区",140603:"平鲁区",140621:"山阴县",140622:"应县",140623:"右玉县",140624:"怀仁县"},140700:{140702:"榆次区",140721:"榆社县",140722:"左权县",140723:"和顺县",140724:"昔阳县",140725:"寿阳县",140726:"太谷县",140727:"祁县",140728:"平遥县",140729:"灵石县",140781:"介休市"},140800:{140802:"盐湖区",140821:"临猗县",140822:"万荣县",140823:"闻喜县",140824:"稷山县",140825:"新绛县",140826:"绛县",140827:"垣曲县",140828:"夏县",140829:"平陆县",140830:"芮城县",140881:"永济市",140882:"河津市"},140900:{140902:"忻府区",140921:"定襄县",140922:"五台县",140923:"代县",140924:"繁峙县",140925:"宁武县",140926:"静乐县",140927:"神池县",140928:"五寨县",140929:"岢岚县",140930:"河曲县",140931:"保德县",140932:"偏关县",140981:"原平市"},141e3:{141002:"尧都区",141021:"曲沃县",141022:"翼城县",141023:"襄汾县",141024:"洪洞县",141025:"古县",141026:"安泽县",141027:"浮山县",141028:"吉县",141029:"乡宁县",141030:"大宁县",141031:"隰县",141032:"永和县",141033:"蒲县",141034:"汾西县",141081:"侯马市",141082:"霍州市"},141100:{141102:"离石区",141121:"文水县",141122:"交城县",141123:"兴县",141124:"临县",141125:"柳林县",141126:"石楼县",141127:"岚县",141128:"方山县",141129:"中阳县",141130:"交口县",141181:"孝义市",141182:"汾阳市"},15e4:{150100:"呼和浩特市",150200:"包头市",150300:"乌海市",150400:"赤峰市",150500:"通辽市",150600:"鄂尔多斯市",150700:"呼伦贝尔市",150800:"巴彦淖尔市",150900:"乌兰察布市",152200:"兴安盟",152500:"锡林郭勒盟",152900:"阿拉善盟"},150100:{150102:"新城区",150103:"回民区",150104:"玉泉区",150105:"赛罕区",150121:"土默特左旗",150122:"托克托县",150123:"和林格尔县",150124:"清水河县",150125:"武川县"},150200:{150202:"东河区",150203:"昆都仑区",150204:"青山区",150205:"石拐区",150206:"白云鄂博矿区",150207:"九原区",150221:"土默特右旗",150222:"固阳县",150223:"达尔罕茂明安联合旗"},150300:{150302:"海勃湾区",150303:"海南区",150304:"乌达区"},150400:{150402:"红山区",150403:"元宝山区",150404:"松山区",150421:"阿鲁科尔沁旗",150422:"巴林左旗",150423:"巴林右旗",150424:"林西县",150425:"克什克腾旗",150426:"翁牛特旗",150428:"喀喇沁旗",150429:"宁城县",150430:"敖汉旗"},150500:{150502:"科尔沁区",150521:"科尔沁左翼中旗",150522:"科尔沁左翼后旗",150523:"开鲁县",150524:"库伦旗",150525:"奈曼旗",150526:"扎鲁特旗",150581:"霍林郭勒市"},150600:{150602:"东胜区",150621:"达拉特旗",150622:"准格尔旗",150623:"鄂托克前旗",150624:"鄂托克旗",150625:"杭锦旗",150626:"乌审旗",150627:"伊金霍洛旗"},150700:{150702:"海拉尔区",150703:"扎赉诺尔区",150721:"阿荣旗",150722:"莫力达瓦达斡尔族自治旗",150723:"鄂伦春自治旗",150724:"鄂温克族自治旗",150725:"陈巴尔虎旗",150726:"新巴尔虎左旗",150727:"新巴尔虎右旗",150781:"满洲里市",150782:"牙克石市",150783:"扎兰屯市",150784:"额尔古纳市",150785:"根河市"},150800:{150802:"临河区",150821:"五原县",150822:"磴口县",150823:"乌拉特前旗",150824:"乌拉特中旗",150825:"乌拉特后旗",150826:"杭锦后旗"},150900:{150902:"集宁区",150921:"卓资县",150922:"化德县",150923:"商都县",150924:"兴和县",150925:"凉城县",150926:"察哈尔右翼前旗",150927:"察哈尔右翼中旗",150928:"察哈尔右翼后旗",150929:"四子王旗",150981:"丰镇市"},152200:{152201:"乌兰浩特市",152202:"阿尔山市",152221:"科尔沁右翼前旗",152222:"科尔沁右翼中旗",152223:"扎赉特旗",152224:"突泉县"},152500:{152501:"二连浩特市",152502:"锡林浩特市",152522:"阿巴嘎旗",152523:"苏尼特左旗",152524:"苏尼特右旗",152525:"东乌珠穆沁旗",152526:"西乌珠穆沁旗",152527:"太仆寺旗",152528:"镶黄旗",152529:"正镶白旗",152530:"正蓝旗",152531:"多伦县"},152900:{152921:"阿拉善左旗",152922:"阿拉善右旗",152923:"额济纳旗"},21e4:{210100:"沈阳市",210200:"大连市",210300:"鞍山市",210400:"抚顺市",210500:"本溪市",210600:"丹东市",210700:"锦州市",210800:"营口市",210900:"阜新市",211e3:"辽阳市",211100:"盘锦市",211200:"铁岭市",211300:"朝阳市",211400:"葫芦岛市"},210100:{210102:"和平区",210103:"沈河区",210104:"大东区",210105:"皇姑区",210106:"铁西区",210111:"苏家屯区",210112:"浑南区",210113:"沈北新区",210114:"于洪区",210122:"辽中县",210123:"康平县",210124:"法库县",210181:"新民市"},210200:{210202:"中山区",210203:"西岗区",210204:"沙河口区",210211:"甘井子区",210212:"旅顺口区",210213:"金州区",210214:"普兰店区",210224:"长海县",210281:"瓦房店市",210283:"庄河市"},210300:{210302:"铁东区",210303:"铁西区",210304:"立山区",210311:"千山区",210321:"台安县",210323:"岫岩满族自治县",210381:"海城市"},210400:{210402:"新抚区",210403:"东洲区",210404:"望花区",210411:"顺城区",210421:"抚顺县",210422:"新宾满族自治县",210423:"清原满族自治县"},210500:{210502:"平山区",210503:"溪湖区",210504:"明山区",210505:"南芬区",210521:"本溪满族自治县",210522:"桓仁满族自治县"},210600:{210602:"元宝区",210603:"振兴区",210604:"振安区",210624:"宽甸满族自治县",210681:"东港市",210682:"凤城市"},210700:{210702:"古塔区",210703:"凌河区",210711:"太和区",210726:"黑山县",210727:"义县",210781:"凌海市",210782:"北镇市"},210800:{210802:"站前区",210803:"西市区",210804:"鲅鱼圈区",210811:"老边区",210881:"盖州市",210882:"大石桥市"},210900:{210902:"海州区",210903:"新邱区",210904:"太平区",210905:"清河门区",210911:"细河区",210921:"阜新蒙古族自治县",210922:"彰武县"},211e3:{211002:"白塔区",211003:"文圣区",211004:"宏伟区",211005:"弓长岭区",211011:"太子河区",211021:"辽阳县",211081:"灯塔市"},211100:{211102:"双台子区",211103:"兴隆台区",211121:"大洼县",211122:"盘山县"},211200:{211202:"银州区",211204:"清河区",211221:"铁岭县",211223:"西丰县",211224:"昌图县",211281:"调兵山市",211282:"开原市"},211300:{211302:"双塔区",211303:"龙城区",211321:"朝阳县",211322:"建平县",211324:"喀喇沁左翼蒙古族自治县",211381:"北票市",211382:"凌源市"},211400:{211402:"连山区",211403:"龙港区",211404:"南票区",211421:"绥中县",211422:"建昌县",211481:"兴城市"},22e4:{220100:"长春市",220200:"吉林市",220300:"四平市",220400:"辽源市",220500:"通化市",220600:"白山市",220700:"松原市",220800:"白城市",222400:"延边朝鲜族自治州"},220100:{220102:"南关区",220103:"宽城区",220104:"朝阳区",220105:"二道区",220106:"绿园区",220112:"双阳区",220113:"九台区",220122:"农安县",220182:"榆树市",220183:"德惠市"},220200:{220202:"昌邑区",220203:"龙潭区",220204:"船营区",220211:"丰满区",220221:"永吉县",220281:"蛟河市",220282:"桦甸市",220283:"舒兰市",220284:"磐石市"},220300:{220302:"铁西区",220303:"铁东区",220322:"梨树县",220323:"伊通满族自治县",220381:"公主岭市",220382:"双辽市"},220400:{220402:"龙山区",220403:"西安区",220421:"东丰县",220422:"东辽县"},220500:{220502:"东昌区",220503:"二道江区",220521:"通化县",220523:"辉南县",220524:"柳河县",220581:"梅河口市",220582:"集安市"},220600:{220602:"浑江区",220605:"江源区",220621:"抚松县",220622:"靖宇县",220623:"长白朝鲜族自治县",220681:"临江市"},220700:{220702:"宁江区",220721:"前郭尔罗斯蒙古族自治县",220722:"长岭县",220723:"乾安县",220781:"扶余市"},220800:{220802:"洮北区",220821:"镇赉县",220822:"通榆县",220881:"洮南市",220882:"大安市"},222400:{222401:"延吉市",222402:"图们市",222403:"敦化市",222404:"珲春市",222405:"龙井市",222406:"和龙市",222424:"汪清县",222426:"安图县"},23e4:{230100:"哈尔滨市",230200:"齐齐哈尔市",230300:"鸡西市",230400:"鹤岗市",230500:"双鸭山市",230600:"大庆市",230700:"伊春市",230800:"佳木斯市",230900:"七台河市",231e3:"牡丹江市",231100:"黑河市",231200:"绥化市",232700:"大兴安岭地区"},230100:{230102:"道里区",230103:"南岗区",230104:"道外区",230108:"平房区",230109:"松北区",230110:"香坊区",230111:"呼兰区",230112:"阿城区",230113:"双城区",230123:"依兰县",230124:"方正县",230125:"宾县",230126:"巴彦县",230127:"木兰县",230128:"通河县",230129:"延寿县",230183:"尚志市",230184:"五常市"},230200:{230202:"龙沙区",230203:"建华区",230204:"铁锋区",230205:"昂昂溪区",230206:"富拉尔基区",230207:"碾子山区",230208:"梅里斯达斡尔族区",230221:"龙江县",230223:"依安县",230224:"泰来县",230225:"甘南县",230227:"富裕县",230229:"克山县",230230:"克东县",230231:"拜泉县",230281:"讷河市"},230300:{230302:"鸡冠区",230303:"恒山区",230304:"滴道区",230305:"梨树区",230306:"城子河区",230307:"麻山区",230321:"鸡东县",230381:"虎林市",230382:"密山市"},230400:{230402:"向阳区",230403:"工农区",230404:"南山区",230405:"兴安区",230406:"东山区",230407:"兴山区",230421:"萝北县",230422:"绥滨县"},230500:{230502:"尖山区",230503:"岭东区",230505:"四方台区",230506:"宝山区",230521:"集贤县",230522:"友谊县",230523:"宝清县",230524:"饶河县"},230600:{230602:"萨尔图区",230603:"龙凤区",230604:"让胡路区",230605:"红岗区",230606:"大同区",230621:"肇州县",230622:"肇源县",230623:"林甸县",230624:"杜尔伯特蒙古族自治县"},230700:{230702:"伊春区",230703:"南岔区",230704:"友好区",230705:"西林区",230706:"翠峦区",230707:"新青区",230708:"美溪区",230709:"金山屯区",230710:"五营区",230711:"乌马河区",230712:"汤旺河区",230713:"带岭区",230714:"乌伊岭区",230715:"红星区",230716:"上甘岭区",230722:"嘉荫县",230781:"铁力市"},230800:{230803:"向阳区",230804:"前进区",230805:"东风区",230811:"郊区",230822:"桦南县",230826:"桦川县",230828:"汤原县",230833:"抚远市",230881:"同江市",230882:"富锦市"},230900:{230902:"新兴区",230903:"桃山区",230904:"茄子河区",230921:"勃利县"},231e3:{231002:"东安区",231003:"阳明区",231004:"爱民区",231005:"西安区",231025:"林口县",231081:"绥芬河市",231083:"海林市",231084:"宁安市",231085:"穆棱市",231086:"东宁市"},231100:{231102:"爱辉区",231121:"嫩江县",231123:"逊克县",231124:"孙吴县",231181:"北安市",231182:"五大连池市"},231200:{231202:"北林区",231221:"望奎县",231222:"兰西县",231223:"青冈县",231224:"庆安县",231225:"明水县",231226:"绥棱县",231281:"安达市",231282:"肇东市",231283:"海伦市"},232700:{232701:"加格达奇区",232721:"呼玛县",232722:"塔河县",232723:"漠河县"},31e4:{310100:"上海市市辖区",310200:"上海市郊县"},310100:{310101:"黄浦区",310104:"徐汇区",310105:"长宁区",310106:"静安区",310107:"普陀区",310109:"虹口区",310110:"杨浦区",310112:"闵行区",310113:"宝山区",310114:"嘉定区",310115:"浦东新区",310116:"金山区",310117:"松江区",310118:"青浦区",310120:"奉贤区",310230:"崇明县"},32e4:{320100:"南京市",320200:"无锡市",320300:"徐州市",320400:"常州市",320500:"苏州市",320600:"南通市",320700:"连云港市",320800:"淮安市",320900:"盐城市",321e3:"扬州市",321100:"镇江市",321200:"泰州市",321300:"宿迁市"},320100:{320102:"玄武区",320104:"秦淮区",320105:"建邺区",320106:"鼓楼区",320111:"浦口区",320113:"栖霞区",320114:"雨花台区",320115:"江宁区",320116:"六合区",320117:"溧水区",320118:"高淳区"},320200:{320205:"锡山区",320206:"惠山区",320211:"滨湖区",320213:"梁溪区",320214:"新吴区",320281:"江阴市",320282:"宜兴市"},320300:{320302:"鼓楼区",320303:"云龙区",320305:"贾汪区",320311:"泉山区",320312:"铜山区",320321:"丰县",320322:"沛县",320324:"睢宁县",320381:"新沂市",320382:"邳州市"},320400:{320402:"天宁区",320404:"钟楼区",320411:"新北区",320412:"武进区",320413:"金坛区",320481:"溧阳市"},320500:{320505:"虎丘区",320506:"吴中区",320507:"相城区",320508:"姑苏区",320509:"吴江区",320581:"常熟市",320582:"张家港市",320583:"昆山市",320585:"太仓市"},320600:{320602:"崇川区",320611:"港闸区",320612:"通州区",320621:"海安县",320623:"如东县",320681:"启东市",320682:"如皋市",320684:"海门市"},320700:{320703:"连云区",320706:"海州区",320707:"赣榆区",320722:"东海县",320723:"灌云县",320724:"灌南县"},320800:{320802:"清河区",320803:"淮安区",320804:"淮阴区",320811:"清浦区",320826:"涟水县",320829:"洪泽县",320830:"盱眙县",320831:"金湖县"},320900:{320902:"亭湖区",320903:"盐都区",320904:"大丰区",320921:"响水县",320922:"滨海县",320923:"阜宁县",320924:"射阳县",320925:"建湖县",320981:"东台市"},321e3:{321002:"广陵区",321003:"邗江区",321012:"江都区",321023:"宝应县",321081:"仪征市",321084:"高邮市"},321100:{321102:"京口区",321111:"润州区",321112:"丹徒区",321181:"丹阳市",321182:"扬中市",321183:"句容市"},321200:{321202:"海陵区",321203:"高港区",321204:"姜堰区",321281:"兴化市",321282:"靖江市",321283:"泰兴市"},321300:{321302:"宿城区",321311:"宿豫区",321322:"沭阳县",321323:"泗阳县",321324:"泗洪县"},33e4:{330100:"杭州市",330200:"宁波市",330300:"温州市",330400:"嘉兴市",330500:"湖州市",330600:"绍兴市",330700:"金华市",330800:"衢州市",330900:"舟山市",331e3:"台州市",331100:"丽水市"},330100:{330102:"上城区",330103:"下城区",330104:"江干区",330105:"拱墅区",330106:"西湖区",330108:"滨江区",330109:"萧山区",330110:"余杭区",330111:"富阳区",330122:"桐庐县",330127:"淳安县",330182:"建德市",330185:"临安市"},330200:{330203:"海曙区",330204:"江东区",330205:"江北区",330206:"北仑区",330211:"镇海区",330212:"鄞州区",330225:"象山县",330226:"宁海县",330281:"余姚市",330282:"慈溪市",330283:"奉化市"},330300:{330302:"鹿城区",330303:"龙湾区",330304:"瓯海区",330305:"洞头区",330324:"永嘉县",330326:"平阳县",330327:"苍南县",330328:"文成县",330329:"泰顺县",330381:"瑞安市",330382:"乐清市"},330400:{330402:"南湖区",330411:"秀洲区",330421:"嘉善县",330424:"海盐县",330481:"海宁市",330482:"平湖市",330483:"桐乡市"},330500:{330502:"吴兴区",330503:"南浔区",330521:"德清县",330522:"长兴县",330523:"安吉县"},330600:{330602:"越城区",330603:"柯桥区",330604:"上虞区",330624:"新昌县",330681:"诸暨市",330683:"嵊州市"},330700:{330702:"婺城区",330703:"金东区",330723:"武义县",330726:"浦江县",330727:"磐安县",330781:"兰溪市",330782:"义乌市",330783:"东阳市",330784:"永康市"},330800:{330802:"柯城区",330803:"衢江区",330822:"常山县",330824:"开化县",330825:"龙游县",330881:"江山市"},330900:{330902:"定海区",330903:"普陀区",330921:"岱山县",330922:"嵊泗县"},331e3:{331002:"椒江区",331003:"黄岩区",331004:"路桥区",331021:"玉环县",331022:"三门县",331023:"天台县",331024:"仙居县",331081:"温岭市",331082:"临海市"},331100:{331102:"莲都区",331121:"青田县",331122:"缙云县",331123:"遂昌县",331124:"松阳县",331125:"云和县",331126:"庆元县",331127:"景宁畲族自治县",331181:"龙泉市"},34e4:{340100:"合肥市",340200:"芜湖市",340300:"蚌埠市",340400:"淮南市",340500:"马鞍山市",340600:"淮北市",340700:"铜陵市",340800:"安庆市",341e3:"黄山市",341100:"滁州市",341200:"阜阳市",341300:"宿州市",341500:"六安市",341600:"亳州市",341700:"池州市",341800:"宣城市"},340100:{340102:"瑶海区",340103:"庐阳区",340104:"蜀山区",340111:"包河区",340121:"长丰县",340122:"肥东县",340123:"肥西县",340124:"庐江县",340181:"巢湖市"},340200:{340202:"镜湖区",340203:"弋江区",340207:"鸠江区",340208:"三山区",340221:"芜湖县",340222:"繁昌县",340223:"南陵县",340225:"无为县"},340300:{340302:"龙子湖区",340303:"蚌山区",340304:"禹会区",340311:"淮上区",340321:"怀远县",340322:"五河县",340323:"固镇县"},340400:{340402:"大通区",340403:"田家庵区",340404:"谢家集区",340405:"八公山区",340406:"潘集区",340421:"凤台县",340422:"寿县"},340500:{340503:"花山区",340504:"雨山区",340506:"博望区",340521:"当涂县",340522:"含山县",340523:"和县"},340600:{340602:"杜集区",
340603:"相山区",340604:"烈山区",340621:"濉溪县"},340700:{340705:"铜官区",340706:"义安区",340711:"郊区",340722:"枞阳县"},340800:{340802:"迎江区",340803:"大观区",340811:"宜秀区",340822:"怀宁县",340824:"潜山县",340825:"太湖县",340826:"宿松县",340827:"望江县",340828:"岳西县",340881:"桐城市"},341e3:{341002:"屯溪区",341003:"黄山区",341004:"徽州区",341021:"歙县",341022:"休宁县",341023:"黟县",341024:"祁门县"},341100:{341102:"琅琊区",341103:"南谯区",341122:"来安县",341124:"全椒县",341125:"定远县",341126:"凤阳县",341181:"天长市",341182:"明光市"},341200:{341202:"颍州区",341203:"颍东区",341204:"颍泉区",341221:"临泉县",341222:"太和县",341225:"阜南县",341226:"颍上县",341282:"界首市"},341300:{341302:"埇桥区",341321:"砀山县",341322:"萧县",341323:"灵璧县",341324:"泗县"},341500:{341502:"金安区",341503:"裕安区",341504:"叶集区",341522:"霍邱县",341523:"舒城县",341524:"金寨县",341525:"霍山县"},341600:{341602:"谯城区",341621:"涡阳县",341622:"蒙城县",341623:"利辛县"},341700:{341702:"贵池区",341721:"东至县",341722:"石台县",341723:"青阳县"},341800:{341802:"宣州区",341821:"郎溪县",341822:"广德县",341823:"泾县",341824:"绩溪县",341825:"旌德县",341881:"宁国市"},35e4:{350100:"福州市",350200:"厦门市",350300:"莆田市",350400:"三明市",350500:"泉州市",350600:"漳州市",350700:"南平市",350800:"龙岩市",350900:"宁德市"},350100:{350102:"鼓楼区",350103:"台江区",350104:"仓山区",350105:"马尾区",350111:"晋安区",350121:"闽侯县",350122:"连江县",350123:"罗源县",350124:"闽清县",350125:"永泰县",350128:"平潭县",350181:"福清市",350182:"长乐市"},350200:{350203:"思明区",350205:"海沧区",350206:"湖里区",350211:"集美区",350212:"同安区",350213:"翔安区"},350300:{350302:"城厢区",350303:"涵江区",350304:"荔城区",350305:"秀屿区",350322:"仙游县"},350400:{350402:"梅列区",350403:"三元区",350421:"明溪县",350423:"清流县",350424:"宁化县",350425:"大田县",350426:"尤溪县",350427:"沙县",350428:"将乐县",350429:"泰宁县",350430:"建宁县",350481:"永安市"},350500:{350502:"鲤城区",350503:"丰泽区",350504:"洛江区",350505:"泉港区",350521:"惠安县",350524:"安溪县",350525:"永春县",350526:"德化县",350527:"金门县",350581:"石狮市",350582:"晋江市",350583:"南安市"},350600:{350602:"芗城区",350603:"龙文区",350622:"云霄县",350623:"漳浦县",350624:"诏安县",350625:"长泰县",350626:"东山县",350627:"南靖县",350628:"平和县",350629:"华安县",350681:"龙海市"},350700:{350702:"延平区",350703:"建阳区",350721:"顺昌县",350722:"浦城县",350723:"光泽县",350724:"松溪县",350725:"政和县",350781:"邵武市",350782:"武夷山市",350783:"建瓯市"},350800:{350802:"新罗区",350803:"永定区",350821:"长汀县",350823:"上杭县",350824:"武平县",350825:"连城县",350881:"漳平市"},350900:{350902:"蕉城区",350921:"霞浦县",350922:"古田县",350923:"屏南县",350924:"寿宁县",350925:"周宁县",350926:"柘荣县",350981:"福安市",350982:"福鼎市"},36e4:{360100:"南昌市",360200:"景德镇市",360300:"萍乡市",360400:"九江市",360500:"新余市",360600:"鹰潭市",360700:"赣州市",360800:"吉安市",360900:"宜春市",361e3:"抚州市",361100:"上饶市"},360100:{360102:"东湖区",360103:"西湖区",360104:"青云谱区",360105:"湾里区",360111:"青山湖区",360112:"新建区",360121:"南昌县",360123:"安义县",360124:"进贤县"},360200:{360202:"昌江区",360203:"珠山区",360222:"浮梁县",360281:"乐平市"},360300:{360302:"安源区",360313:"湘东区",360321:"莲花县",360322:"上栗县",360323:"芦溪县"},360400:{360402:"庐山区",360403:"浔阳区",360421:"九江县",360423:"武宁县",360424:"修水县",360425:"永修县",360426:"德安县",360427:"星子县",360428:"都昌县",360429:"湖口县",360430:"彭泽县",360481:"瑞昌市",360482:"共青城市"},360500:{360502:"渝水区",360521:"分宜县"},360600:{360602:"月湖区",360622:"余江县",360681:"贵溪市"},360700:{360702:"章贡区",360703:"南康区",360721:"赣县",360722:"信丰县",360723:"大余县",360724:"上犹县",360725:"崇义县",360726:"安远县",360727:"龙南县",360728:"定南县",360729:"全南县",360730:"宁都县",360731:"于都县",360732:"兴国县",360733:"会昌县",360734:"寻乌县",360735:"石城县",360781:"瑞金市"},360800:{360802:"吉州区",360803:"青原区",360821:"吉安县",360822:"吉水县",360823:"峡江县",360824:"新干县",360825:"永丰县",360826:"泰和县",360827:"遂川县",360828:"万安县",360829:"安福县",360830:"永新县",360881:"井冈山市"},360900:{360902:"袁州区",360921:"奉新县",360922:"万载县",360923:"上高县",360924:"宜丰县",360925:"靖安县",360926:"铜鼓县",360981:"丰城市",360982:"樟树市",360983:"高安市"},361e3:{361002:"临川区",361021:"南城县",361022:"黎川县",361023:"南丰县",361024:"崇仁县",361025:"乐安县",361026:"宜黄县",361027:"金溪县",361028:"资溪县",361029:"东乡县",361030:"广昌县"},361100:{361102:"信州区",361103:"广丰区",361121:"上饶县",361123:"玉山县",361124:"铅山县",361125:"横峰县",361126:"弋阳县",361127:"余干县",361128:"鄱阳县",361129:"万年县",361130:"婺源县",361181:"德兴市"},37e4:{370100:"济南市",370200:"青岛市",370300:"淄博市",370400:"枣庄市",370500:"东营市",370600:"烟台市",370700:"潍坊市",370800:"济宁市",370900:"泰安市",371e3:"威海市",371100:"日照市",371200:"莱芜市",371300:"临沂市",371400:"德州市",371500:"聊城市",371600:"滨州市",371700:"菏泽市"},370100:{370102:"历下区",370103:"市中区",370104:"槐荫区",370105:"天桥区",370112:"历城区",370113:"长清区",370124:"平阴县",370125:"济阳县",370126:"商河县",370181:"章丘市"},370200:{370202:"市南区",370203:"市北区",370211:"黄岛区",370212:"崂山区",370213:"李沧区",370214:"城阳区",370281:"胶州市",370282:"即墨市",370283:"平度市",370285:"莱西市"},370300:{370302:"淄川区",370303:"张店区",370304:"博山区",370305:"临淄区",370306:"周村区",370321:"桓台县",370322:"高青县",370323:"沂源县"},370400:{370402:"市中区",370403:"薛城区",370404:"峄城区",370405:"台儿庄区",370406:"山亭区",370481:"滕州市"},370500:{370502:"东营区",370503:"河口区",370521:"垦利县",370522:"利津县",370523:"广饶县"},370600:{370602:"芝罘区",370611:"福山区",370612:"牟平区",370613:"莱山区",370634:"长岛县",370681:"龙口市",370682:"莱阳市",370683:"莱州市",370684:"蓬莱市",370685:"招远市",370686:"栖霞市",370687:"海阳市"},370700:{370702:"潍城区",370703:"寒亭区",370704:"坊子区",370705:"奎文区",370724:"临朐县",370725:"昌乐县",370781:"青州市",370782:"诸城市",370783:"寿光市",370784:"安丘市",370785:"高密市",370786:"昌邑市"},370800:{370811:"任城区",370812:"兖州区",370826:"微山县",370827:"鱼台县",370828:"金乡县",370829:"嘉祥县",370830:"汶上县",370831:"泗水县",370832:"梁山县",370881:"曲阜市",370883:"邹城市"},370900:{370902:"泰山区",370911:"岱岳区",370921:"宁阳县",370923:"东平县",370982:"新泰市",370983:"肥城市"},371e3:{371002:"环翠区",371003:"文登区",371082:"荣成市",371083:"乳山市"},371100:{371102:"东港区",371103:"岚山区",371121:"五莲县",371122:"莒县"},371200:{371202:"莱城区",371203:"钢城区"},371300:{371302:"兰山区",371311:"罗庄区",371312:"河东区",371321:"沂南县",371322:"郯城县",371323:"沂水县",371324:"兰陵县",371325:"费县",371326:"平邑县",371327:"莒南县",371328:"蒙阴县",371329:"临沭县"},371400:{371402:"德城区",371403:"陵城区",371422:"宁津县",371423:"庆云县",371424:"临邑县",371425:"齐河县",371426:"平原县",371427:"夏津县",371428:"武城县",371481:"乐陵市",371482:"禹城市"},371500:{371502:"东昌府区",371521:"阳谷县",371522:"莘县",371523:"茌平县",371524:"东阿县",371525:"冠县",371526:"高唐县",371581:"临清市"},371600:{371602:"滨城区",371603:"沾化区",371621:"惠民县",371622:"阳信县",371623:"无棣县",371625:"博兴县",371626:"邹平县"},371700:{371702:"牡丹区",371721:"曹县",371722:"单县",371723:"成武县",371724:"巨野县",371725:"郓城县",371726:"鄄城县",371727:"定陶县",371728:"东明县"},41e4:{410100:"郑州市",410200:"开封市",410300:"洛阳市",410400:"平顶山市",410500:"安阳市",410600:"鹤壁市",410700:"新乡市",410800:"焦作市",410900:"濮阳市",411e3:"许昌市",411100:"漯河市",411200:"三门峡市",411300:"南阳市",411400:"商丘市",411500:"信阳市",411600:"周口市",411700:"驻马店市",419001:"济源市"},410100:{410102:"中原区",410103:"二七区",410104:"管城回族区",410105:"金水区",410106:"上街区",410108:"惠济区",410122:"中牟县",410181:"巩义市",410182:"荥阳市",410183:"新密市",410184:"新郑市",410185:"登封市"},410200:{410202:"龙亭区",410203:"顺河回族区",410204:"鼓楼区",410205:"禹王台区",410212:"祥符区",410221:"杞县",410222:"通许县",410223:"尉氏县",410225:"兰考县"},410300:{410302:"老城区",410303:"西工区",410304:"瀍河回族区",410305:"涧西区",410306:"吉利区",410311:"洛龙区",410322:"孟津县",410323:"新安县",410324:"栾川县",410325:"嵩县",410326:"汝阳县",410327:"宜阳县",410328:"洛宁县",410329:"伊川县",410381:"偃师市"},410400:{410402:"新华区",410403:"卫东区",410404:"石龙区",410411:"湛河区",410421:"宝丰县",410422:"叶县",410423:"鲁山县",410425:"郏县",410481:"舞钢市",410482:"汝州市"},410500:{410502:"文峰区",410503:"北关区",410505:"殷都区",410506:"龙安区",410522:"安阳县",410523:"汤阴县",410526:"滑县",410527:"内黄县",410581:"林州市"},410600:{410602:"鹤山区",410603:"山城区",410611:"淇滨区",410621:"浚县",410622:"淇县"},410700:{410702:"红旗区",410703:"卫滨区",410704:"凤泉区",410711:"牧野区",410721:"新乡县",410724:"获嘉县",410725:"原阳县",410726:"延津县",410727:"封丘县",410728:"长垣县",410781:"卫辉市",410782:"辉县市"},410800:{410802:"解放区",410803:"中站区",410804:"马村区",410811:"山阳区",410821:"修武县",410822:"博爱县",410823:"武陟县",410825:"温县",410882:"沁阳市",410883:"孟州市"},410900:{410902:"华龙区",410922:"清丰县",410923:"南乐县",410926:"范县",410927:"台前县",410928:"濮阳县"},411e3:{411002:"魏都区",411023:"许昌县",411024:"鄢陵县",411025:"襄城县",411081:"禹州市",411082:"长葛市"},411100:{411102:"源汇区",411103:"郾城区",411104:"召陵区",411121:"舞阳县",411122:"临颍县"},411200:{411202:"湖滨区",411203:"陕州区",411221:"渑池县",411224:"卢氏县",411281:"义马市",411282:"灵宝市"},411300:{411302:"宛城区",411303:"卧龙区",411321:"南召县",411322:"方城县",411323:"西峡县",411324:"镇平县",411325:"内乡县",411326:"淅川县",411327:"社旗县",411328:"唐河县",411329:"新野县",411330:"桐柏县",411381:"邓州市"},411400:{411402:"梁园区",411403:"睢阳区",411421:"民权县",411422:"睢县",411423:"宁陵县",411424:"柘城县",411425:"虞城县",411426:"夏邑县",411481:"永城市"},411500:{411502:"浉河区",411503:"平桥区",411521:"罗山县",411522:"光山县",411523:"新县",411524:"商城县",411525:"固始县",411526:"潢川县",411527:"淮滨县",411528:"息县"},411600:{411602:"川汇区",411621:"扶沟县",411622:"西华县",411623:"商水县",411624:"沈丘县",411625:"郸城县",411626:"淮阳县",411627:"太康县",411628:"鹿邑县",411681:"项城市"},411700:{411702:"驿城区",411721:"西平县",411722:"上蔡县",411723:"平舆县",411724:"正阳县",411725:"确山县",411726:"泌阳县",411727:"汝南县",411728:"遂平县",411729:"新蔡县"},42e4:{420100:"武汉市",420200:"黄石市",420300:"十堰市",420500:"宜昌市",420600:"襄阳市",420700:"鄂州市",420800:"荆门市",420900:"孝感市",421e3:"荆州市",421100:"黄冈市",421200:"咸宁市",421300:"随州市",422800:"恩施土家族苗族自治州",429004:"仙桃市",429005:"潜江市",429006:"天门市",429021:"神农架林区"},420100:{420102:"江岸区",420103:"江汉区",420104:"硚口区",420105:"汉阳区",420106:"武昌区",420107:"青山区",420111:"洪山区",420112:"东西湖区",420113:"汉南区",420114:"蔡甸区",420115:"江夏区",420116:"黄陂区",420117:"新洲区"},420200:{420202:"黄石港区",420203:"西塞山区",420204:"下陆区",420205:"铁山区",420222:"阳新县",420281:"大冶市"},420300:{420302:"茅箭区",420303:"张湾区",420304:"郧阳区",420322:"郧西县",420323:"竹山县",420324:"竹溪县",420325:"房县",420381:"丹江口市"},420500:{420502:"西陵区",420503:"伍家岗区",420504:"点军区",420505:"猇亭区",420506:"夷陵区",420525:"远安县",420526:"兴山县",420527:"秭归县",420528:"长阳土家族自治县",420529:"五峰土家族自治县",420581:"宜都市",420582:"当阳市",420583:"枝江市"},420600:{420602:"襄城区",420606:"樊城区",420607:"襄州区",420624:"南漳县",420625:"谷城县",420626:"保康县",420682:"老河口市",420683:"枣阳市",420684:"宜城市"},420700:{420702:"梁子湖区",420703:"华容区",420704:"鄂城区"},420800:{420802:"东宝区",420804:"掇刀区",420821:"京山县",420822:"沙洋县",420881:"钟祥市"},420900:{420902:"孝南区",420921:"孝昌县",420922:"大悟县",420923:"云梦县",420981:"应城市",420982:"安陆市",420984:"汉川市"},421e3:{421002:"沙市区",421003:"荆州区",421022:"公安县",421023:"监利县",421024:"江陵县",421081:"石首市",421083:"洪湖市",421087:"松滋市"},421100:{421102:"黄州区",421121:"团风县",421122:"红安县",421123:"罗田县",421124:"英山县",421125:"浠水县",421126:"蕲春县",421127:"黄梅县",421181:"麻城市",421182:"武穴市"},421200:{421202:"咸安区",421221:"嘉鱼县",421222:"通城县",421223:"崇阳县",421224:"通山县",421281:"赤壁市"},421300:{421303:"曾都区",421321:"随县",421381:"广水市"},422800:{422801:"恩施市",422802:"利川市",422822:"建始县",422823:"巴东县",422825:"宣恩县",422826:"咸丰县",422827:"来凤县",422828:"鹤峰县"},43e4:{430100:"长沙市",430200:"株洲市",430300:"湘潭市",430400:"衡阳市",430500:"邵阳市",430600:"岳阳市",430700:"常德市",430800:"张家界市",430900:"益阳市",431e3:"郴州市",431100:"永州市",431200:"怀化市",431300:"娄底市",433100:"湘西土家族苗族自治州"},430100:{430102:"芙蓉区",430103:"天心区",430104:"岳麓区",430105:"开福区",430111:"雨花区",430112:"望城区",430121:"长沙县",430124:"宁乡县",430181:"浏阳市"},430200:{430202:"荷塘区",430203:"芦淞区",430204:"石峰区",430211:"天元区",430221:"株洲县",430223:"攸县",430224:"茶陵县",430225:"炎陵县",430281:"醴陵市"},430300:{430302:"雨湖区",430304:"岳塘区",430321:"湘潭县",430381:"湘乡市",430382:"韶山市"},430400:{430405:"珠晖区",430406:"雁峰区",430407:"石鼓区",430408:"蒸湘区",430412:"南岳区",430421:"衡阳县",430422:"衡南县",430423:"衡山县",430424:"衡东县",430426:"祁东县",430481:"耒阳市",430482:"常宁市"},430500:{430502:"双清区",430503:"大祥区",430511:"北塔区",430521:"邵东县",430522:"新邵县",430523:"邵阳县",430524:"隆回县",430525:"洞口县",430527:"绥宁县",430528:"新宁县",430529:"城步苗族自治县",430581:"武冈市"},430600:{430602:"岳阳楼区",430603:"云溪区",430611:"君山区",430621:"岳阳县",430623:"华容县",430624:"湘阴县",430626:"平江县",430681:"汨罗市",430682:"临湘市"},430700:{430702:"武陵区",430703:"鼎城区",430721:"安乡县",430722:"汉寿县",430723:"澧县",430724:"临澧县",430725:"桃源县",430726:"石门县",430781:"津市市"},430800:{430802:"永定区",430811:"武陵源区",430821:"慈利县",430822:"桑植县"},430900:{430902:"资阳区",430903:"赫山区",430921:"南县",430922:"桃江县",430923:"安化县",430981:"沅江市"},431e3:{431002:"北湖区",431003:"苏仙区",431021:"桂阳县",431022:"宜章县",431023:"永兴县",431024:"嘉禾县",431025:"临武县",431026:"汝城县",431027:"桂东县",431028:"安仁县",431081:"资兴市"},431100:{431102:"零陵区",431103:"冷水滩区",431121:"祁阳县",431122:"东安县",431123:"双牌县",431124:"道县",431125:"江永县",431126:"宁远县",431127:"蓝山县",431128:"新田县",431129:"江华瑶族自治县"},431200:{431202:"鹤城区",431221:"中方县",431222:"沅陵县",431223:"辰溪县",431224:"溆浦县",431225:"会同县",431226:"麻阳苗族自治县",431227:"新晃侗族自治县",431228:"芷江侗族自治县",431229:"靖州苗族侗族自治县",431230:"通道侗族自治县",431281:"洪江市"},431300:{431302:"娄星区",431321:"双峰县",431322:"新化县",431381:"冷水江市",431382:"涟源市"},433100:{433101:"吉首市",433122:"泸溪县",433123:"凤凰县",433124:"花垣县",433125:"保靖县",433126:"古丈县",433127:"永顺县",433130:"龙山县"},44e4:{440100:"广州市",440200:"韶关市",440300:"深圳市",440400:"珠海市",440500:"汕头市",440600:"佛山市",440700:"江门市",440800:"湛江市",440900:"茂名市",441200:"肇庆市",441300:"惠州市",441400:"梅州市",441500:"汕尾市",441600:"河源市",441700:"阳江市",441800:"清远市",441900:"东莞市",442e3:"中山市",445100:"潮州市",445200:"揭阳市",445300:"云浮市"},440100:{440103:"荔湾区",440104:"越秀区",440105:"海珠区",440106:"天河区",440111:"白云区",440112:"黄埔区",440113:"番禺区",440114:"花都区",440115:"南沙区",440117:"从化区",440118:"增城区"},440200:{440203:"武江区",440204:"浈江区",440205:"曲江区",440222:"始兴县",440224:"仁化县",440229:"翁源县",440232:"乳源瑶族自治县",440233:"新丰县",440281:"乐昌市",440282:"南雄市"},440300:{440303:"罗湖区",440304:"福田区",440305:"南山区",440306:"宝安区",440307:"龙岗区",440308:"盐田区"},440400:{440402:"香洲区",440403:"斗门区",440404:"金湾区"},440500:{440507:"龙湖区",440511:"金平区",440512:"濠江区",440513:"潮阳区",440514:"潮南区",440515:"澄海区",440523:"南澳县"},440600:{440604:"禅城区",440605:"南海区",440606:"顺德区",440607:"三水区",440608:"高明区"},440700:{440703:"蓬江区",440704:"江海区",440705:"新会区",440781:"台山市",440783:"开平市",440784:"鹤山市",440785:"恩平市"},440800:{440802:"赤坎区",440803:"霞山区",440804:"坡头区",440811:"麻章区",440823:"遂溪县",440825:"徐闻县",440881:"廉江市",440882:"雷州市",440883:"吴川市"},440900:{440902:"茂南区",440904:"电白区",440981:"高州市",440982:"化州市",440983:"信宜市"},441200:{441202:"端州区",441203:"鼎湖区",441204:"高要区",441223:"广宁县",441224:"怀集县",441225:"封开县",441226:"德庆县",441284:"四会市"},441300:{441302:"惠城区",441303:"惠阳区",441322:"博罗县",441323:"惠东县",441324:"龙门县"},441400:{441402:"梅江区",441403:"梅县区",441422:"大埔县",441423:"丰顺县",441424:"五华县",441426:"平远县",441427:"蕉岭县",441481:"兴宁市"},441500:{441502:"城区",441521:"海丰县",441523:"陆河县",441581:"陆丰市"},441600:{441602:"源城区",441621:"紫金县",441622:"龙川县",441623:"连平县",441624:"和平县",441625:"东源县"},441700:{441702:"江城区",441704:"阳东区",441721:"阳西县",441781:"阳春市"},441800:{441802:"清城区",441803:"清新区",441821:"佛冈县",441823:"阳山县",441825:"连山壮族瑶族自治县",441826:"连南瑶族自治县",441881:"英德市",441882:"连州市"},441900:{441900:"三元里"},442e3:{442e3:"湖滨北路"},445100:{445102:"湘桥区",445103:"潮安区",445122:"饶平县"},445200:{445202:"榕城区",445203:"揭东区",445222:"揭西县",445224:"惠来县",445281:"普宁市"},445300:{445302:"云城区",445303:"云安区",445321:"新兴县",445322:"郁南县",445381:"罗定市"},45e4:{450100:"南宁市",450200:"柳州市",450300:"桂林市",450400:"梧州市",450500:"北海市",450600:"防城港市",450700:"钦州市",450800:"贵港市",450900:"玉林市",451e3:"百色市",451100:"贺州市",451200:"河池市",451300:"来宾市",451400:"崇左市"},450100:{450102:"兴宁区",450103:"青秀区",450105:"江南区",450107:"西乡塘区",450108:"良庆区",450109:"邕宁区",450110:"武鸣区",450123:"隆安县",450124:"马山县",450125:"上林县",450126:"宾阳县",450127:"横县"},450200:{450202:"城中区",450203:"鱼峰区",450204:"柳南区",450205:"柳北区",450221:"柳江县",450222:"柳城县",450223:"鹿寨县",450224:"融安县",450225:"融水苗族自治县",450226:"三江侗族自治县"},450300:{450302:"秀峰区",450303:"叠彩区",450304:"象山区",450305:"七星区",450311:"雁山区",450312:"临桂区",450321:"阳朔县",450323:"灵川县",450324:"全州县",450325:"兴安县",450326:"永福县",450327:"灌阳县",450328:"龙胜各族自治县",450329:"资源县",450330:"平乐县",450331:"荔浦县",450332:"恭城瑶族自治县"},450400:{450403:"万秀区",450405:"长洲区",450406:"龙圩区",450421:"苍梧县",450422:"藤县",450423:"蒙山县",450481:"岑溪市"},450500:{450502:"海城区",450503:"银海区",450512:"铁山港区",450521:"合浦县"},450600:{450602:"港口区",450603:"防城区",450621:"上思县",450681:"东兴市"},450700:{450702:"钦南区",450703:"钦北区",450721:"灵山县",450722:"浦北县"},450800:{450802:"港北区",450803:"港南区",450804:"覃塘区",450821:"平南县",450881:"桂平市"},450900:{450902:"玉州区",450903:"福绵区",450921:"容县",450922:"陆川县",450923:"博白县",450924:"兴业县",450981:"北流市"},451e3:{451002:"右江区",451021:"田阳县",451022:"田东县",451023:"平果县",451024:"德保县",451026:"那坡县",451027:"凌云县",451028:"乐业县",451029:"田林县",451030:"西林县",451031:"隆林各族自治县",451081:"靖西市"},451100:{451102:"八步区",451121:"昭平县",451122:"钟山县",451123:"富川瑶族自治县"},451200:{451202:"金城江区",451221:"南丹县",451222:"天峨县",451223:"凤山县",451224:"东兰县",451225:"罗城仫佬族自治县",451226:"环江毛南族自治县",451227:"巴马瑶族自治县",451228:"都安瑶族自治县",451229:"大化瑶族自治县",451281:"宜州市"},451300:{451302:"兴宾区",451321:"忻城县",451322:"象州县",451323:"武宣县",451324:"金秀瑶族自治县",451381:"合山市"},451400:{451402:"江州区",451421:"扶绥县",451422:"宁明县",451423:"龙州县",451424:"大新县",451425:"天等县",451481:"凭祥市"},46e4:{460100:"海口市",460200:"三亚市",460300:"三沙市",460400:"儋州市",469001:"五指山市",469002:"琼海市",469005:"文昌市",469006:"万宁市",469007:"东方市",469021:"定安县",469022:"屯昌县",469023:"澄迈县",469024:"临高县",469025:"白沙黎族自治县",469026:"昌江黎族自治县",469027:"乐东黎族自治县",469028:"陵水黎族自治县",469029:"保亭黎族苗族自治县",469030:"琼中黎族苗族自治县"},460100:{460105:"秀英区",460106:"龙华区",460107:"琼山区",460108:"美兰区"},460200:{460200:"三亚湾",460202:"海棠区",460203:"吉阳区",460204:"天涯区",460205:"崖州区"},460300:{460321:"西沙群岛",460322:"南沙群岛",460323:"中沙群岛的岛礁及其海域"},5e5:{500100:"重庆市市辖区",500200:"重庆市郊县"},500100:{500101:"万州区",500102:"涪陵区",500103:"渝中区",500104:"大渡口区",500105:"江北区",500106:"沙坪坝区",500107:"九龙坡区",500108:"南岸区",500109:"北碚区",500110:"綦江区",500111:"大足区",500112:"渝北区",500113:"巴南区",500114:"黔江区",500115:"长寿区",500116:"江津区",500117:"合川区",500118:"永川区",500119:"南川区",500120:"璧山区",500151:"铜梁区",500152:"潼南区",500153:"荣昌区",500228:"梁平县",500229:"城口县",500230:"丰都县",500231:"垫江县",500232:"武隆县",500233:"忠县",500234:"开县",500235:"云阳县",500236:"奉节县",500237:"巫山县",500238:"巫溪县",500240:"石柱土家族自治县",500241:"秀山土家族苗族自治县",500242:"酉阳土家族苗族自治县",500243:"彭水苗族土家族自治县"},51e4:{510100:"成都市",510300:"自贡市",510400:"攀枝花市",510500:"泸州市",510600:"德阳市",510700:"绵阳市",510800:"广元市",510900:"遂宁市",511e3:"内江市",511100:"乐山市",511300:"南充市",511400:"眉山市",511500:"宜宾市",511600:"广安市",511700:"达州市",511800:"雅安市",511900:"巴中市",512e3:"资阳市",513200:"阿坝藏族羌族自治州",513300:"甘孜藏族自治州",513400:"凉山彝族自治州"},510100:{510104:"锦江区",510105:"青羊区",510106:"金牛区",510107:"武侯区",510108:"成华区",510112:"龙泉驿区",510113:"青白江区",510114:"新都区",510115:"温江区",510116:"双流区",510121:"金堂县",510124:"郫县",510129:"大邑县",510131:"蒲江县",510132:"新津县",510181:"都江堰市",510182:"彭州市",510183:"邛崃市",510184:"崇州市"},510300:{510302:"自流井区",510303:"贡井区",510304:"大安区",510311:"沿滩区",510321:"荣县",510322:"富顺县"},510400:{510402:"东区",510403:"西区",510411:"仁和区",510421:"米易县",510422:"盐边县"},510500:{510502:"江阳区",510503:"纳溪区",510504:"龙马潭区",510521:"泸县",510522:"合江县",510524:"叙永县",510525:"古蔺县"},510600:{510603:"旌阳区",510623:"中江县",510626:"罗江县",510681:"广汉市",510682:"什邡市",510683:"绵竹市"},510700:{510703:"涪城区",510704:"游仙区",510722:"三台县",510723:"盐亭县",510724:"安县",510725:"梓潼县",510726:"北川羌族自治县",510727:"平武县",510781:"江油市"},510800:{510802:"利州区",510811:"昭化区",510812:"朝天区",510821:"旺苍县",510822:"青川县",510823:"剑阁县",510824:"苍溪县"},510900:{510903:"船山区",510904:"安居区",510921:"蓬溪县",510922:"射洪县",510923:"大英县"},511e3:{511002:"市中区",511011:"东兴区",511024:"威远县",511025:"资中县",511028:"隆昌县"},511100:{511102:"市中区",511111:"沙湾区",511112:"五通桥区",511113:"金口河区",511123:"犍为县",511124:"井研县",511126:"夹江县",511129:"沐川县",511132:"峨边彝族自治县",511133:"马边彝族自治县",511181:"峨眉山市"},511300:{511302:"顺庆区",511303:"高坪区",511304:"嘉陵区",511321:"南部县",511322:"营山县",511323:"蓬安县",511324:"仪陇县",511325:"西充县",511381:"阆中市"},511400:{511402:"东坡区",511403:"彭山区",511421:"仁寿县",511423:"洪雅县",511424:"丹棱县",511425:"青神县"},511500:{511502:"翠屏区",511503:"南溪区",511521:"宜宾县",511523:"江安县",511524:"长宁县",511525:"高县",511526:"珙县",511527:"筠连县",511528:"兴文县",511529:"屏山县"},511600:{511602:"广安区",511603:"前锋区",511621:"岳池县",511622:"武胜县",511623:"邻水县",511681:"华蓥市"},511700:{511702:"通川区",511703:"达川区",511722:"宣汉县",511723:"开江县",511724:"大竹县",511725:"渠县",511781:"万源市"},511800:{511802:"雨城区",511803:"名山区",511822:"荥经县",511823:"汉源县",511824:"石棉县",511825:"天全县",511826:"芦山县",511827:"宝兴县"},511900:{511902:"巴州区",511903:"恩阳区",511921:"通江县",511922:"南江县",511923:"平昌县"},512e3:{512002:"雁江区",512021:"安岳县",512022:"乐至县",512081:"简阳市"},513200:{513201:"马尔康市",513221:"汶川县",513222:"理县",513223:"茂县",513224:"松潘县",513225:"九寨沟县",513226:"金川县",513227:"小金县",513228:"黑水县",513230:"壤塘县",513231:"阿坝县",513232:"若尔盖县",513233:"红原县"},513300:{513301:"康定市",513322:"泸定县",513323:"丹巴县",513324:"九龙县",513325:"雅江县",513326:"道孚县",513327:"炉霍县",513328:"甘孜县",513329:"新龙县",513330:"德格县",513331:"白玉县",513332:"石渠县",513333:"色达县",513334:"理塘县",513335:"巴塘县",513336:"乡城县",513337:"稻城县",513338:"得荣县"},513400:{513401:"西昌市",513422:"木里藏族自治县",513423:"盐源县",513424:"德昌县",513425:"会理县",513426:"会东县",513427:"宁南县",513428:"普格县",513429:"布拖县",513430:"金阳县",513431:"昭觉县",513432:"喜德县",513433:"冕宁县",513434:"越西县",513435:"甘洛县",513436:"美姑县",513437:"雷波县"},52e4:{520100:"贵阳市",520200:"六盘水市",520300:"遵义市",520400:"安顺市",520500:"毕节市",520600:"铜仁市",522300:"黔西南布依族苗族自治州",522600:"黔东南苗族侗族自治州",522700:"黔南布依族苗族自治州"},520100:{520102:"南明区",520103:"云岩区",520111:"花溪区",520112:"乌当区",520113:"白云区",520115:"观山湖区",520121:"开阳县",520122:"息烽县",520123:"修文县",520181:"清镇市"},520200:{520201:"钟山区",520203:"六枝特区",520221:"水城县",520222:"盘县"},520300:{520302:"红花岗区",520303:"汇川区",520321:"遵义县",520322:"桐梓县",520323:"绥阳县",520324:"正安县",520325:"道真仡佬族苗族自治县",520326:"务川仡佬族苗族自治县",520327:"凤冈县",520328:"湄潭县",520329:"余庆县",520330:"习水县",520381:"赤水市",520382:"仁怀市"},520400:{520402:"西秀区",520403:"平坝区",520422:"普定县",520423:"镇宁布依族苗族自治县",520424:"关岭布依族苗族自治县",520425:"紫云苗族布依族自治县"},520500:{520502:"七星关区",520521:"大方县",520522:"黔西县",520523:"金沙县",520524:"织金县",520525:"纳雍县",520526:"威宁彝族回族苗族自治县",520527:"赫章县"},520600:{520602:"碧江区",520603:"万山区",520621:"江口县",520622:"玉屏侗族自治县",520623:"石阡县",520624:"思南县",520625:"印江土家族苗族自治县",520626:"德江县",520627:"沿河土家族自治县",520628:"松桃苗族自治县"},522300:{522301:"兴义市",522322:"兴仁县",522323:"普安县",522324:"晴隆县",522325:"贞丰县",522326:"望谟县",522327:"册亨县",522328:"安龙县"},522600:{522601:"凯里市",522622:"黄平县",522623:"施秉县",522624:"三穗县",522625:"镇远县",522626:"岑巩县",522627:"天柱县",522628:"锦屏县",522629:"剑河县",522630:"台江县",522631:"黎平县",522632:"榕江县",522633:"从江县",522634:"雷山县",522635:"麻江县",522636:"丹寨县"},522700:{522701:"都匀市",522702:"福泉市",522722:"荔波县",522723:"贵定县",522725:"瓮安县",522726:"独山县",522727:"平塘县",522728:"罗甸县",522729:"长顺县",522730:"龙里县",522731:"惠水县",522732:"三都水族自治县"},53e4:{530100:"昆明市",530300:"曲靖市",530400:"玉溪市",530500:"保山市",530600:"昭通市",530700:"丽江市",530800:"普洱市",530900:"临沧市",532300:"楚雄彝族自治州",532500:"红河哈尼族彝族自治州",532600:"文山壮族苗族自治州",532800:"西双版纳傣族自治州",532900:"大理白族自治州",533100:"德宏傣族景颇族自治州",533300:"怒江傈僳族自治州",533400:"迪庆藏族自治州"},530100:{530102:"五华区",530103:"盘龙区",530111:"官渡区",530112:"西山区",530113:"东川区",530114:"呈贡区",530122:"晋宁县",530124:"富民县",530125:"宜良县",530126:"石林彝族自治县",530127:"嵩明县",530128:"禄劝彝族苗族自治县",530129:"寻甸回族彝族自治县",530181:"安宁市"},530300:{530302:"麒麟区",530321:"马龙县",530322:"陆良县",530323:"师宗县",530324:"罗平县",530325:"富源县",530326:"会泽县",530328:"沾益县",530381:"宣威市"},530400:{530402:"红塔区",530403:"江川区",530422:"澄江县",530423:"通海县",530424:"华宁县",530425:"易门县",530426:"峨山彝族自治县",530427:"新平彝族傣族自治县",530428:"元江哈尼族彝族傣族自治县"},530500:{530502:"隆阳区",530521:"施甸县",530523:"龙陵县",530524:"昌宁县",530581:"腾冲市"},530600:{530602:"昭阳区",530621:"鲁甸县",530622:"巧家县",530623:"盐津县",530624:"大关县",530625:"永善县",530626:"绥江县",530627:"镇雄县",530628:"彝良县",530629:"威信县",530630:"水富县"},530700:{530702:"古城区",530721:"玉龙纳西族自治县",530722:"永胜县",530723:"华坪县",530724:"宁蒗彝族自治县"},530800:{530802:"思茅区",530821:"宁洱哈尼族彝族自治县",530822:"墨江哈尼族自治县",530823:"景东彝族自治县",530824:"景谷傣族彝族自治县",530825:"镇沅彝族哈尼族拉祜族自治县",530826:"江城哈尼族彝族自治县",530827:"孟连傣族拉祜族佤族自治县",530828:"澜沧拉祜族自治县",530829:"西盟佤族自治县"},530900:{530902:"临翔区",530921:"凤庆县",530922:"云县",530923:"永德县",530924:"镇康县",530925:"双江拉祜族佤族布朗族傣族自治县",530926:"耿马傣族佤族自治县",530927:"沧源佤族自治县"},532300:{532301:"楚雄市",532322:"双柏县",532323:"牟定县",532324:"南华县",532325:"姚安县",532326:"大姚县",532327:"永仁县",532328:"元谋县",532329:"武定县",532331:"禄丰县"},532500:{532501:"个旧市",532502:"开远市",532503:"蒙自市",532504:"弥勒市",532523:"屏边苗族自治县",532524:"建水县",532525:"石屏县",532527:"泸西县",532528:"元阳县",532529:"红河县",532530:"金平苗族瑶族傣族自治县",532531:"绿春县",532532:"河口瑶族自治县"},532600:{532601:"文山市",532622:"砚山县",532623:"西畴县",532624:"麻栗坡县",532625:"马关县",532626:"丘北县",532627:"广南县",532628:"富宁县"},532800:{532801:"景洪市",532822:"勐海县",532823:"勐腊县"},532900:{532901:"大理市",532922:"漾濞彝族自治县",532923:"祥云县",532924:"宾川县",532925:"弥渡县",532926:"南涧彝族自治县",532927:"巍山彝族回族自治县",532928:"永平县",532929:"云龙县",532930:"洱源县",532931:"剑川县",532932:"鹤庆县"},533100:{533102:"瑞丽市",533103:"芒市",533122:"梁河县",533123:"盈江县",533124:"陇川县"},533300:{533321:"泸水县",533323:"福贡县",533324:"贡山独龙族怒族自治县",533325:"兰坪白族普米族自治县"},533400:{533401:"香格里拉市",533422:"德钦县",533423:"维西傈僳族自治县"},54e4:{540100:"拉萨市",540200:"日喀则市",540300:"昌都市",540400:"林芝市",542200:"山南地区",542400:"那曲地区",542500:"阿里地区"},540100:{540102:"城关区",540103:"堆龙德庆区",540121:"林周县",540122:"当雄县",540123:"尼木县",540124:"曲水县",540126:"达孜县",540127:"墨竹工卡县"},540200:{540202:"桑珠孜区",540221:"南木林县",540222:"江孜县",540223:"定日县",540224:"萨迦县",540225:"拉孜县",540226:"昂仁县",540227:"谢通门县",540228:"白朗县",540229:"仁布县",540230:"康马县",540231:"定结县",540232:"仲巴县",540233:"亚东县",540234:"吉隆县",540235:"聂拉木县",540236:"萨嘎县",540237:"岗巴县"},540300:{540302:"卡若区",540321:"江达县",540322:"贡觉县",540323:"类乌齐县",540324:"丁青县",540325:"察雅县",540326:"八宿县",540327:"左贡县",540328:"芒康县",540329:"洛隆县",540330:"边坝县"},540400:{540402:"巴宜区",540421:"工布江达县",540422:"米林县",540423:"墨脱县",540424:"波密县",540425:"察隅县",540426:"朗县"},542200:{542221:"乃东县",542222:"扎囊县",542223:"贡嘎县",542224:"桑日县",542225:"琼结县",542226:"曲松县",542227:"措美县",542228:"洛扎县",542229:"加查县",542231:"隆子县",542232:"错那县",542233:"浪卡子县"},542400:{542421:"那曲县",542422:"嘉黎县",542423:"比如县",542424:"聂荣县",542425:"安多县",542426:"申扎县",542427:"索县",542428:"班戈县",542429:"巴青县",542430:"尼玛县",542431:"双湖县"},542500:{542521:"普兰县",542522:"札达县",542523:"噶尔县",542524:"日土县",542525:"革吉县",542526:"改则县",542527:"措勤县"},61e4:{610100:"西安市",610200:"铜川市",610300:"宝鸡市",610400:"咸阳市",610500:"渭南市",610600:"延安市",610700:"汉中市",610800:"榆林市",610900:"安康市",611e3:"商洛市"},610100:{610102:"新城区",610103:"碑林区",610104:"莲湖区",610111:"灞桥区",610112:"未央区",610113:"雁塔区",610114:"阎良区",610115:"临潼区",610116:"长安区",610117:"高陵区",610122:"蓝田县",610124:"周至县",610125:"户县"},610200:{610202:"王益区",610203:"印台区",610204:"耀州区",610222:"宜君县"},610300:{610302:"渭滨区",610303:"金台区",610304:"陈仓区",610322:"凤翔县",610323:"岐山县",610324:"扶风县",610326:"眉县",610327:"陇县",610328:"千阳县",610329:"麟游县",610330:"凤县",610331:"太白县"},610400:{610402:"秦都区",610403:"杨陵区",610404:"渭城区",610422:"三原县",610423:"泾阳县",610424:"乾县",610425:"礼泉县",610426:"永寿县",610427:"彬县",610428:"长武县",610429:"旬邑县",610430:"淳化县",610431:"武功县",610481:"兴平市"},610500:{610502:"临渭区",610503:"华州区",610522:"潼关县",610523:"大荔县",610524:"合阳县",610525:"澄城县",610526:"蒲城县",610527:"白水县",610528:"富平县",610581:"韩城市",610582:"华阴市"},610600:{610602:"宝塔区",610621:"延长县",610622:"延川县",610623:"子长县",610624:"安塞县",610625:"志丹县",610626:"吴起县",610627:"甘泉县",610628:"富县",610629:"洛川县",610630:"宜川县",610631:"黄龙县",610632:"黄陵县"},610700:{610702:"汉台区",610721:"南郑县",610722:"城固县",610723:"洋县",610724:"西乡县",610725:"勉县",610726:"宁强县",610727:"略阳县",610728:"镇巴县",610729:"留坝县",610730:"佛坪县"},610800:{610802:"榆阳区",610803:"横山区",610821:"神木县",610822:"府谷县",610824:"靖边县",610825:"定边县",610826:"绥德县",610827:"米脂县",610828:"佳县",610829:"吴堡县",610830:"清涧县",610831:"子洲县"},610900:{610902:"汉滨区",610921:"汉阴县",610922:"石泉县",610923:"宁陕县",610924:"紫阳县",610925:"岚皋县",610926:"平利县",610927:"镇坪县",610928:"旬阳县",610929:"白河县"},611e3:{611002:"商州区",611021:"洛南县",611022:"丹凤县",611023:"商南县",611024:"山阳县",611025:"镇安县",611026:"柞水县"},62e4:{620100:"兰州市",620200:"嘉峪关市",620300:"金昌市",620400:"白银市",620500:"天水市",620600:"武威市",620700:"张掖市",620800:"平凉市",620900:"酒泉市",621e3:"庆阳市",621100:"定西市",621200:"陇南市",622900:"临夏回族自治州",623e3:"甘南藏族自治州"},620100:{620102:"城关区",620103:"七里河区",620104:"西固区",620105:"安宁区",620111:"红古区",620121:"永登县",620122:"皋兰县",620123:"榆中县"},620300:{620302:"金川区",620321:"永昌县"},620400:{620402:"白银区",620403:"平川区",620421:"靖远县",620422:"会宁县",620423:"景泰县"},620500:{620502:"秦州区",620503:"麦积区",620521:"清水县",620522:"秦安县",620523:"甘谷县",620524:"武山县",620525:"张家川回族自治县"},620600:{620602:"凉州区",620621:"民勤县",620622:"古浪县",620623:"天祝藏族自治县"},620700:{620702:"甘州区",620721:"肃南裕固族自治县",620722:"民乐县",620723:"临泽县",620724:"高台县",620725:"山丹县"},620800:{620802:"崆峒区",620821:"泾川县",620822:"灵台县",620823:"崇信县",620824:"华亭县",620825:"庄浪县",620826:"静宁县"},620900:{620902:"肃州区",620921:"金塔县",620922:"瓜州县",620923:"肃北蒙古族自治县",620924:"阿克塞哈萨克族自治县",620981:"玉门市",620982:"敦煌市"},621e3:{621002:"西峰区",621021:"庆城县",621022:"环县",621023:"华池县",621024:"合水县",621025:"正宁县",621026:"宁县",621027:"镇原县"},621100:{621102:"安定区",621121:"通渭县",621122:"陇西县",621123:"渭源县",621124:"临洮县",621125:"漳县",621126:"岷县"},621200:{621202:"武都区",621221:"成县",621222:"文县",621223:"宕昌县",621224:"康县",621225:"西和县",621226:"礼县",621227:"徽县",621228:"两当县"},622900:{622901:"临夏市",622921:"临夏县",622922:"康乐县",622923:"永靖县",622924:"广河县",622925:"和政县",622926:"东乡族自治县",622927:"积石山保安族东乡族撒拉族自治县"},623e3:{623001:"合作市",623021:"临潭县",623022:"卓尼县",623023:"舟曲县",623024:"迭部县",623025:"玛曲县",623026:"碌曲县",623027:"夏河县"},63e4:{630100:"西宁市",630200:"海东市",632200:"海北藏族自治州",632300:"黄南藏族自治州",632500:"海南藏族自治州",632600:"果洛藏族自治州",632700:"玉树藏族自治州",632800:"海西蒙古族藏族自治州"},630100:{630102:"城东区",630103:"城中区",630104:"城西区",630105:"城北区",630121:"大通回族土族自治县",630122:"湟中县",630123:"湟源县"},630200:{630202:"乐都区",630203:"平安区",630222:"民和回族土族自治县",630223:"互助土族自治县",630224:"化隆回族自治县",630225:"循化撒拉族自治县"},632200:{632221:"门源回族自治县",632222:"祁连县",632223:"海晏县",632224:"刚察县"},632300:{632321:"同仁县",632322:"尖扎县",632323:"泽库县",632324:"河南蒙古族自治县"},632500:{632521:"共和县",632522:"同德县",632523:"贵德县",632524:"兴海县",632525:"贵南县"},632600:{632621:"玛沁县",632622:"班玛县",632623:"甘德县",632624:"达日县",632625:"久治县",632626:"玛多县"},632700:{632701:"玉树市",632722:"杂多县",632723:"称多县",632724:"治多县",632725:"囊谦县",632726:"曲麻莱县"},632800:{632801:"格尔木市",632802:"德令哈市",632821:"乌兰县",632822:"都兰县",632823:"天峻县",632825:"海西蒙古族藏族自治州直辖"},64e4:{640100:"银川市",640200:"石嘴山市",640300:"吴忠市",640400:"固原市",640500:"中卫市"},640100:{640104:"兴庆区",640105:"西夏区",640106:"金凤区",640121:"永宁县",640122:"贺兰县",640181:"灵武市"},640200:{640202:"大武口区",640205:"惠农区",640221:"平罗县"},640300:{640302:"利通区",640303:"红寺堡区",640323:"盐池县",640324:"同心县",640381:"青铜峡市"},640400:{640402:"原州区",640422:"西吉县",640423:"隆德县",640424:"泾源县",640425:"彭阳县"},640500:{640502:"沙坡头区",640521:"中宁县",640522:"海原县"},65e4:{650100:"乌鲁木齐市",650200:"克拉玛依市",650400:"吐鲁番市",652200:"哈密地区",652300:"昌吉回族自治州",652700:"博尔塔拉蒙古自治州",652800:"巴音郭楞蒙古自治州",652900:"阿克苏地区",653e3:"克孜勒苏柯尔克孜自治州",653100:"喀什地区",653200:"和田地区",654e3:"伊犁哈萨克自治州",654200:"塔城地区",654300:"阿勒泰地区",659001:"石河子市",659002:"阿拉尔市",659003:"图木舒克市",659004:"五家渠市",659005:"北屯市",659006:"铁门关市",659007:"双河市",659008:"可克达拉市"},650100:{650102:"天山区",650103:"沙依巴克区",650104:"新市区",650105:"水磨沟区",650106:"头屯河区",650107:"达坂城区",650109:"米东区",650121:"乌鲁木齐县"},650200:{650202:"独山子区",650203:"克拉玛依区",650204:"白碱滩区",650205:"乌尔禾区"},650400:{650402:"高昌区",650421:"鄯善县",650422:"托克逊县"},652200:{652201:"哈密市",652222:"巴里坤哈萨克自治县",652223:"伊吾县"},652300:{652301:"昌吉市",652302:"阜康市",652323:"呼图壁县",652324:"玛纳斯县",652325:"奇台县",652327:"吉木萨尔县",652328:"木垒哈萨克自治县"},652700:{652701:"博乐市",652702:"阿拉山口市",652722:"精河县",652723:"温泉县"},652800:{652801:"库尔勒市",652822:"轮台县",652823:"尉犁县",652824:"若羌县",652825:"且末县",652826:"焉耆回族自治县",652827:"和静县",652828:"和硕县",652829:"博湖县"},652900:{652901:"阿克苏市",652922:"温宿县",652923:"库车县",652924:"沙雅县",652925:"新和县",652926:"拜城县",652927:"乌什县",652928:"阿瓦提县",652929:"柯坪县"},653e3:{653001:"阿图什市",653022:"阿克陶县",653023:"阿合奇县",653024:"乌恰县"},653100:{653101:"喀什市",653121:"疏附县",653122:"疏勒县",653123:"英吉沙县",653124:"泽普县",653125:"莎车县",653126:"叶城县",653127:"麦盖提县",653128:"岳普湖县",653129:"伽师县",653130:"巴楚县",653131:"塔什库尔干塔吉克自治县"},653200:{653201:"和田市",653221:"和田县",653222:"墨玉县",653223:"皮山县",653224:"洛浦县",653225:"策勒县",653226:"于田县",653227:"民丰县"},654e3:{654002:"伊宁市",654003:"奎屯市",654004:"霍尔果斯市",654021:"伊宁县",654022:"察布查尔锡伯自治县",654023:"霍城县",654024:"巩留县",654025:"新源县",654026:"昭苏县",654027:"特克斯县",654028:"尼勒克县"},654200:{654201:"塔城市",654202:"乌苏市",654221:"额敏县",654223:"沙湾县",654224:"托里县",654225:"裕民县",654226:"和布克赛尔蒙古自治县"},654300:{654301:"阿勒泰市",654321:"布尔津县",654322:"富蕴县",654323:"福海县",654324:"哈巴河县",654325:"青河县",654326:"吉木乃县"},81e4:{810001:"中西区",810002:"湾仔区",810003:"东区",810004:"南区",810005:"油尖旺区",810006:"深水埗区",810007:"九龙城区",810008:"黄大仙区",810009:"观塘区",810010:"荃湾区",810011:"屯门区",810012:"元朗区",810013:"北区",810014:"大埔区",810015:"西贡区",810016:"沙田区",810017:"葵青区",810018:"离岛区"},82e4:{820001:"花地玛堂区",820002:"花王堂区",820003:"望德堂区",820004:"大堂区",820005:"风顺堂区",820006:"嘉模堂区",820007:"路凼填海区",820008:"圣方济各堂区"}};return"undefined"!=typeof window&&(window.ChineseDistricts=e),e})},function(e,t,i){var o,n,a;!function(r){n=[i(6),i(34)],o=r,a="function"==typeof o?o.apply(t,n):o,!(void 0!==a&&(e.exports=a))}(function(e,t){"use strict";function i(t,o){this.$element=e(t),this.options=e.extend({},i.DEFAULTS,e.isPlainObject(o)&&o),this.placeholders=e.extend({},i.DEFAULTS),this.active=!1,this.init()}if("undefined"==typeof t)throw new Error('The file "distpicker.data.js" must be included first!');var o="distpicker",n="change."+o,a="province",r="city",s="district";i.prototype={constructor:i,init:function(){var t=this.options,i=this.$element.find("select"),o=i.length,n={};i.each(function(){e.extend(n,e(this).data())}),e.each([a,r,s],e.proxy(function(e,a){n[a]?(t[a]=n[a],this["$"+a]=i.filter("[data-"+a+"]")):this["$"+a]=o>e?i.eq(e):null},this)),this.bind(),this.reset(),this.active=!0},bind:function(){this.$province&&this.$province.on(n,this._changeProvince=e.proxy(function(){
this.output(r),this.output(s)},this)),this.$city&&this.$city.on(n,this._changeCity=e.proxy(function(){this.output(s)},this))},unbind:function(){this.$province&&this.$province.off(n,this._changeProvince),this.$city&&this.$city.off(n,this._changeCity)},output:function(i){var o,n,c,u=this.options,d=this.placeholders,l=this["$"+i],f={},h=[];l&&l.length&&(c=u[i],o=i===a?86:i===r?this.$province&&this.$province.find(":selected").data("code"):i===s?this.$city&&this.$city.find(":selected").data("code"):o,f=e.isNumeric(o)?t[o]:null,e.isPlainObject(f)&&e.each(f,function(e,t){var i=t===c;i&&(n=!0),h.push({code:e,address:t,selected:i})}),n||(h.length&&(u.autoSelect||u.autoselect)&&(h[0].selected=!0),!this.active&&c&&(d[i]=c)),u.placeholder&&h.unshift({code:"",address:d[i],selected:!1}),l.html(this.getList(h)))},getList:function(t){var i=[];return e.each(t,function(e,t){i.push('<option value="'+(t.address&&t.code?t.address:"")+'" data-code="'+(t.code||"")+'"'+(t.selected?" selected":"")+">"+(t.address||"")+"</option>")}),i.join("")},reset:function(e){e?this.$province&&this.$province.find(":first").prop("selected",!0).trigger(n):(this.output(a),this.output(r),this.output(s))},destroy:function(){this.unbind(),this.$element.removeData(o)}},i.DEFAULTS={autoSelect:!0,placeholder:!0,province:"—— 省 ——",city:"—— 市 ——",district:"—— 区 ——"},i.setDefaults=function(t){e.extend(i.DEFAULTS,t)},i.other=e.fn.distpicker,e.fn.distpicker=function(t){var n=[].slice.call(arguments,1);return this.each(function(){var a,r,s=e(this),c=s.data(o);if(!c){if(/destroy/.test(t))return;a=e.extend({},s.data(),e.isPlainObject(t)&&t),s.data(o,c=new i(this,a))}"string"==typeof t&&e.isFunction(r=c[t])&&r.apply(c,n)})},e.fn.distpicker.Constructor=i,e.fn.distpicker.setDefaults=i.setDefaults,e.fn.distpicker.noConflict=function(){return e.fn.distpicker=i.other,this},e(function(){e('[data-toggle="distpicker"]').distpicker()})})},function(e,t){e.exports=window.ChineseDistricts},function(e,t){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),n={autoStart:!0,template:"%d",seconds:0},a=function(){function e(t,o){i(this,e);var a=this;a.element=t,a.options=$.extend({},n,o),a.counting=!1,a.init()}return o(e,[{key:"init",value:function(){var e=this,t=e.options;e.originalText=e.element.textContent,e.counter=t.seconds,t.autoStart&&e.start()}},{key:"start",value:function(){var e=this,t=e.element,i=e.options;e.counting||(e.counting=!0,t.disabled=!0,t.textContent=i.template.replace("%d",e.counter--),e.next())}},{key:"next",value:function(){var e=this;setTimeout(function(){e.counter>0?(e.counting=!1,e.start()):e.stop()},1e3)}},{key:"stop",value:function(){var e=this,t=e.element;e.counting&&(e.counting=!1,t.textContent=e.originalText,t.disabled=!1)}},{key:"destroy",value:function(){this.stop()}}]),e}();t.default=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(26);t.default={vuex:{actions:{signOut:o.signOut}},ready:function(){var e=this,t=e.$route.query;e.signOut(),t.kicked&&"1"==t.kicked?e.$router.go({name:"signup",query:{access:"public"}}):e.$router.go({name:"signin"})}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(10),a=o(n),r=i(12),s=o(r),c=i(35),u=o(c),d=i(9),l=i(26),f=$(document.body);t.default={template:"#reset-password",vuex:{getters:{user:function(e){return e.user}},actions:{showLoading:l.showLoading,hideLoading:l.hideLoading,pageIn:l.pageIn}},data:function(){var e=this.user||{mobile:""};return{mobile:e.mobile||"",verify_code:"",password:"",confirm_password:"",submitting:!1}},ready:function(){this.pageIn({title:"找回密码"})},beforeDestroy:function(){var e=this;e.countdown&&e.countdown.destroy()},methods:{sendCaptcha:function(e){var t=this,i=e.target;if(!i.disabled&&!t.requesting){var o=$(t.$els.mobile),n=o.validator("v");if(o.validator("destroy"),!n)return f.tooltip(o.attr("title"),"warning"),void o.focus();t.requesting=!0,$.ajax(a.default.verifyCode,{data:{mobile:t.mobile,type:2},success:function(e){return e.code?void f.tooltip(s.default[e.code],"danger"):(f.tooltip("短信验证码发送成功","success"),void(t.countdown=new u.default(i,{template:"%d秒后重新获取",seconds:60})))},complete:function(){t.requesting=!1}})}},submit:function(e){var t=this,i=(t.mobile,t.password),o=t.confirm_password,n=(t.verify_code,$("#text_mobile")),r=$("#text_verify_code"),c=$("#text_password"),u=$("#text_confirm_password");return e.preventDefault(),/^1[34578]{1}[0-9]{9}$/.test(t.mobile)?/^[0-9]{4,6}$/.test(t.verify_code)?/^\S{6,20}$/.test(t.password)?i!==o?(f.tooltip(u.attr("title"),"warning"),u.val("").focus(),!1):(t.showLoading(),t.submitting=!0,void $.ajax(a.default.resetPassword,{method:"PUT",data:t.$data,success:function(e){return t.submitting=!1,e.code?void f.tooltip(s.default[e.code],"danger"):void f.one("hidden.tooltip",function(){t.user.mobile?t.$router.go({name:"signout"}):t.$router.go({name:"signin",query:{user:(0,d.encode)({mobile:t.mobile,password:t.password}),from:"reset-password"}})}).tooltip("show",{content:"密码重置成功",style:"success",duration:1e3})},error:function(){t.submitting=!1,f.tooltip("操作失败，请检查网络或联系客服","danger")},complete:function(){t.hideLoading()}})):(f.tooltip(c.attr("title"),"warning"),c.focus(),!1):(f.tooltip(r.attr("title"),"warning"),r.focus(),!1):(f.tooltip(n.attr("title"),"warning"),n.focus(),!1)}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=(i(9),i(10)),a=(o(n),i(12)),r=(o(a),i(26));$(document.body);t.default={template:"#transfer",vuex:{getters:{visitor:function(e){return e.visitor}},actions:{showLoading:r.showLoading,hideLoading:r.hideLoading,pageIn:r.pageIn,signIn:r.signIn,showDialog:r.showDialog}},route:{activate:function(){}},data:function(){return{}},ready:function(){this.pageIn({title:"登录指引"})},methods:{}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(10),a=o(n),r=i(12),s=o(r),c=i(40),u=o(c);i(41);var d=i(26),l=i(9),f=$(document.body),h=(window.URL||window.webkitURL,/^image\/\w+/);t.default={template:"#ucenter",components:{Message:u.default},vuex:{getters:{user:function(e){return e.user},guider:function(e){return e.guider}},actions:{showDialog:d.showDialog,showLoading:d.showLoading,hideLoading:d.hideLoading,pageIn:d.pageIn,signIn:d.signIn,guideIn:d.guideIn,guideOut:d.guideOut}},data:function(){return{hasExpired:!1,expireEnd:0,expireDays:"",expireHours:"",expireFormat:"",maxsize:3072,latestMessagesCount:0,noMessage:!1,loadMessageCompleted:!1,messagerTimer:null,status:{menuExpanded:!1}}},computed:{},ready:function(){var e=this;e.loadProfile(),e.setMessagerTimer(),e.messagerTimer=setInterval(function(){e.setMessagerTimer()},3e5),this.pageIn({title:"个人中心"})},beforeDestroy:function(){$(".jquery-guide").remove()},methods:{showLook:function(){this.showDialog({title:"温馨提示",content:"即将上线，敬请期待。",button:{confirm:"我知道了"},confirm:!0})},expandMenu:function(){var e=this;e.status.menuExpanded?e.status.menuExpanded=!1:e.status.menuExpanded=!0},initGuide:function(){var e=this,t="ucenter-guide-2.0",i=!1;e.guider&&e.guider.cases.forEach(function(e){e.id==t&&(i=!0)}),i||setTimeout(function(){document.body.scrollTop=0;var i=$(".guide-step-1",e.$el),o=$(".guide-step-2",e.$el),n=$(".guide-step-3",e.$el),a=$(".guide-step-4",e.$el);$.guide({actions:[{element:i.show(),content:'<p style="font-size: 0.8rem;">账号到期前联系客服续费，以免影响使用</p><p style="text-align: right;"><a href="javascript:void(0);" class="gonext" style="font-size: 0.8rem;color:#fff;text-decoration:underline;">下一步</a></p>',offsetX:20,offsetY:150},{element:o.show(),content:'<p style="font-size: 0.8rem;">邀请好友功能上线，快来拿红包</p><p style="text-align: right;"><a href="javascript:void(0);" class="gonext" style="font-size: 0.8rem;color:#fff;text-decoration:underline;">下一步</a></p>',offsetX:20,offsetY:110,beforeFunc:function(e){i.hide()}},{element:n.show(),content:'<p style="font-size: 0.8rem;">做好的活动和传单在这里面哦</p><p style="text-align: right;"><a href="javascript:void(0);" class="gonext" style="font-size: 0.8rem;color:#fff;text-decoration:underline;">下一步</a></p>',offsetX:110,offsetY:110,beforeFunc:function(e){document.body.scrollTop=f.height()-$(window).height()}},{element:a,content:'\n                <p style="font-size: 0.8rem;">马上点击制作吧~</p>\n                <p><label for="jquery-guide-chk-reminder" style="font-size: 0.8rem;"><input type="checkbox" value="1" id="jquery-guide-chk-reminder"/>下次不再提示</label><a href="javascript:void(0);" id="jquery-guide-godone" class="godone" style="font-size: 1rem;margin-left: 1rem;color:#fff;text-decoration:underline;">我知道了</a></p>\n              ',offsetX:0,offsetY:-95,beforeFunc:function(e){},successFunc:function(){setTimeout(function(){$("#jquery-guide-godone").click(function(){$("#jquery-guide-chk-reminder").is(":checked")&&e.guideIn({case:{id:t,expires:Date.now()+63072e6}})})},50)}}]})},800)},loadProfile:function(){var e=this,t=e.user,i=""+a.default.profile,o={token:t?t.token:""};$.ajax({url:i,dataType:"text",data:o,success:function(t){return t=$.parseJSON(t),t.code?void e.fail(t):(e.initGuide(),e.expireDays=t.data.expire_days,e.expireHours=t.data.expire_hours,e.expireEnd=t.data.expire_end,void(e.expireFormat=t.data.expire_format))}})},fail:function(e){var t=this;if(1100==e.code)(0,l.showKickedOffline)(e.data.time,e.data.ip,t.showDialog);else if(1102==e.code)this.$router.go({name:"signout"});else{if(1152==e.code)return void this.$router.go({name:"signout",query:{kicked:"1"}});1101==e.code?e.data?(t.expireEnd=e.data.expire,t.expireFormat=e.data.expire_format,t.hasExpired=!0):t.showExpireNoitce():f.tooltip(s.default[e.code],"danger")}t.hideLoading()},questionMark:function(){var e=this;e.showDialog({title:"",content:'<img style="width:100%" src="http://cdn.s.shangjiadao.cn/source/images/ucenter/index/qmark.jpg?2"/>',button:{confirm:"我知道了"},confirm:!0})},showService:function(){var e=this;e.showDialog({title:"",content:'<img style="width:100%" src="images/signup/service.png?1"/>',button:{confirm:"我知道了"},confirm:!0})},showExpireNoitce:function(){var e=this;(0,l.showExpireTip)(e.showDialog)},go:function(e){var t=this;return t.hasExpired?(t.showExpireNoitce(),!1):void t.$router.go({name:e})},setMessagerTimer:function(){var e=this,t=e.user,i=a.default.message.root+"/latest",o={token:t?t.token:""};return"ucenter"!=e.$route.name?void clearInterval(e.messagerTimer):void $.ajax({url:i,dataType:"text",data:o,success:function(i){return e.loadMessageCompleted=!0,i=$.parseJSON(i),i.code?void e.fail(s.default[i.code]):void(i.data&&!function(){var o=i.data.list,n="message-view-"+t.id,a=l.LocalStorage.getItem(n)||[];o.length>0?!function(){e.noMessage=!1;var t=0;o.forEach(function(e){$.inArray(e,a)<0&&t++}),e.latestMessagesCount=t}():a.length||(e.noMessage=!0)}())},error:function(){console.log("load latest message error.")},complete:function(){}})},uploadAvator:function(e){var t=this,i=e.target,o=i.files?i.files[0]:null;if(o&&(h.test(o.type)||""==o.type)){var n=o.size/1024;if(n>t.maxsize)return t.showDialog({title:"提示",content:"图片大小请控制在 "+Math.floor(t.maxsize)+" KB 以内",confirm:!0}),!1;t.showLoading("正在上传头像..."),$.get(a.default.uploadSignature,{token:t.user.token,type:1},function(e){return e.code?void t.fail(e):void(e.data&&!function(){var i=e.data,n=""+i.dir+(0,l.getRandomFilename)(o.name),a=$("#avator_file");a.uploader({name:"file",url:i.host,data:{key:n,policy:i.policy,OSSAccessKeyId:i.accessid,signature:i.signature},done:function(){t.saveAvator(n)},fail:function(){f.tooltip("头像上传失败，请检查网络连接并重试","danger"),t.hideLoading()},uploaded:function(){a.uploader("destroy")}}).uploader("upload")}())})}else f.tooltip("请选择正确的图片文件","notice")},saveAvator:function(e){var t=this,i=t.user,o=""+a.default.avator,n={token:i?i.token:"",avator:e};$.ajax(o,{method:"PUT",data:n,success:function(i){return i.code?void t.fail(i):(t.signIn($.extend(!0,{},t.user,{avator:e})),t.user.avator=e,void f.tooltip("头像保存成功","success"))},error:function(){f.tooltip("头像上传失败，请检查网络连接并重试","danger")},complete:function(){t.hideLoading()}})}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={template:"#message",props:{type:String,title:String,content:String,primary:Object,default:Object,detail:Object}}},function(e,t,i){var o,n,a;!function(r){n=[i(6)],o=r,a="function"==typeof o?o.apply(t,n):o,!(void 0!==a&&(e.exports=a))}(function(e){"use strict";function t(i,o){this.$element=e(i),this.options=e.extend(!0,{},t.DEFAULTS,e.isPlainObject(o)&&o),this.disabled=!1,this.sync=!1,this.queues=0,this.init()}var i=window.FormData,o="uploader",n="change."+o,a="dragover."+o,r="drop."+o,s="upload."+o,c="start."+o,u="progress."+o,d="done."+o,l="fail."+o,f="end."+o,h="uploaded."+o;t.prototype={constructor:t,init:function(){var t=this.options,o=this.$element;t.name||(t.name=o.attr("name")||"file"),t.dropzone&&(this.$dropzone=e(t.dropzone)),i||(this.sync=!0,this.$clone=o.clone()),this.bind()},bind:function(){var t=this.options,i=this.$element;e.isFunction(t.upload)&&i.on(s,t.upload),e.isFunction(t.start)&&i.on(c,t.start),e.isFunction(t.progress)&&i.on(u,t.progress),e.isFunction(t.done)&&i.on(d,t.done),e.isFunction(t.fail)&&i.on(l,t.fail),e.isFunction(t.end)&&i.on(f,t.end),e.isFunction(t.uploaded)&&i.on(h,t.uploaded),i.on(n,e.proxy(this.change,this)),t.dropzone&&this.$dropzone.on(a,e.proxy(this.dragover,this)).on(r,e.proxy(this.drop,this))},unbind:function(){var t=this.options,i=this.$element;e.isFunction(t.upload)&&i.off(s,t.upload),e.isFunction(t.start)&&i.off(c,t.start),e.isFunction(t.progress)&&i.off(u,t.progress),e.isFunction(t.done)&&i.off(d,t.done),e.isFunction(t.fail)&&i.off(l,t.fail),e.isFunction(t.end)&&i.off(f,t.end),e.isFunction(t.uploaded)&&i.off(h,t.uploaded),i.off(n,this.change),t.dropzone&&this.$dropzone.off(a,this.dragover).off(r,this.drop)},change:function(){this.options.autoUpload&&this.upload()},dragover:function(e){e.preventDefault()},drop:function(e){var t=e.originalEvent;e.preventDefault(),t.dataTransfer&&this.upload(t.dataTransfer.files)},upload:function(t){var i,o=this.$element;t=t||o.prop("files"),(t&&t.length||o.val())&&(i=e.Event(s,{files:t}),o.trigger(i),i.isDefaultPrevented()||(t&&t.length?this.start(t):o.val()&&this.start()))},start:function(t){var i,o=this.options,n=this.$element,a=this;if(!this.disabled){if(!this.sync&&o.singleUpload&&t&&t.length)return this.disabled=!0,n.prop("disabled",!1),void e.each(t,function(t,i){var o=e.Event(c,{index:t,files:[i]});n.trigger(o),o.isDefaultPrevented()||(a.queues++,a.ajaxUpload(i,t))});i=e.Event(c,{index:0,files:t}),n.trigger(i),i.isDefaultPrevented()||(this.disabled=!0,this.sync?this.syncUpload():(n.prop("disabled",!1),this.ajaxUpload(t)))}},ajaxUpload:function(t,o){var n,a=this.options,r=this.$element,s=new i,c=this;e.isPlainObject(a.data)&&e.each(a.data,function(e,t){s.append(e,t)}),s.append(a.name,t),n=e.extend({},a,{method:a.method||"POST",data:s,processData:!1,contentType:!1,success:function(e,t,i){c.success(e,t,i,this,o)},error:function(e,t,i){c.error(e,t,i,this,o)},complete:function(e,t){c.complete(e,t,this,o)}}),e.isFunction(a.progress)&&(n.xhr=function(){var t=new XMLHttpRequest;return t.upload&&(t.upload.onprogress=function(t){r.trigger(e.Event(u,{index:o,lengthComputable:t.lengthComputable,total:t.total,loaded:t.loaded}))}),t}),e.ajax(n.url,n)},syncUpload:function(){var t=this.$element,i=this.$clone,n=this.options,a=(new Date).getTime(),r=o+a,s=function(){var t=[];return e.isPlainObject(n.data)&&e.each(n.data,function(e,i){t.push('<input type="hidden" name="'+e+'" value="'+i+'">')}),t.join("")}(),c=e("<form>").attr({method:n.method||"POST",action:function(e){return e+(e.indexOf("?")===-1?"?":"&")+"timestamp="+a}(n.url),enctype:"multipart/form-data",target:r}),d=e("<iframe>").attr({name:r,src:""}),l={lengthComputable:!0,total:100,loaded:0},f=!1,h=function(){f?l.loaded=100:l.loaded<100&&(l.loaded+=(100-l.loaded)/10,setTimeout(h,500)),t.trigger(e.Event(u,l))},p=this;d.one("load",function(){d.one("load",function(){var o,n;try{n=e(this).contents().find("body").text(),"json"===p.options.dataType&&(n=e.parseJSON(n))}catch(e){o=e.message}o?p.error(null,"error",o,null,0):p.success(n,"success",null,null,0),f=!0,c.get(0).reset(),i.after(t).detach(),c.empty().remove(),p.complete(null,"complete",null,0)}),t.after(i),c.append(s),c.append(t),c.one("submit",h).submit()}),c.append(d).hide().appendTo("body")},success:function(t,i,o,n,a){var r=this.options;e.isFunction(r.success)&&r.success.call(n,t,i,o),this.$element.trigger(e.Event(d,{index:a}),t,i)},error:function(t,i,o,n,a){var r=this.options;e.isFunction(r.error)&&r.error.call(n,t,i,o),this.$element.trigger(e.Event(l,{index:a}),i,o)},complete:function(t,i,o,n){var a=this.options,r=this.$element,s=!1,c=e.proxy(function(){s=!0,this.disabled=!1,r.prop("disabled",!1),this.reset()},this);!this.sync&&this.queues?(this.queues--,this.queues||c()):c(),e.isFunction(a.complete)&&a.complete.call(o,t,i),r.trigger(e.Event(f,{index:n}),i),s&&r.trigger(h)},reset:function(){var t,i=this.$element,o=this.$clone;i.val(""),i.val()&&(t=e("<form>"),i.after(o),t.append(i).hide().appendTo("body").get(0).reset(),o.after(i).detach(),t.remove())},destroy:function(){this.unbind(),this.$element.removeData(o)}},t.DEFAULTS={name:"",url:"",data:null,autoUpload:!0,singleUpload:!0,dropzone:"",upload:null,start:null,progress:null,done:null,fail:null,end:null,uploaded:null},t.setDefaults=function(i){e.extend(!0,t.DEFAULTS,i)},t.other=e.fn.uploader,e.fn.uploader=function(i){var n=[].slice.call(arguments,1);return this.each(function(){var a,r=e(this),s=r.data(o);if(!s){if(/destroy/.test(i))return;r.data(o,s=new t(this,i))}"string"==typeof i&&e.isFunction(a=s[i])&&a.apply(s,n)})},e.fn.uploader.Constructor=t,e.fn.uploader.setDefaults=t.setDefaults,e.fn.uploader.noConflict=function(){return e.fn.uploader=t.other,this}})},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(10),a=o(n),r=i(12),s=o(r),c=i(35),u=o(c),d=i(43),l=i(26),f=$(document.body);t.default={template:"#ucenter-withdraw",vuex:{getters:{user:function(e){return e.user},visitor:function(e){return e.visitor}},actions:{showDialog:l.showDialog,showLoading:l.showLoading,hideLoading:l.hideLoading,pageIn:l.pageIn}},data:function(){return{activated:!1,account:null,bound:null,code:"",account_type:3,submitting:!1,amount:!1,minAmount:50,maxAmount:2e4}},route:{data:function(e){function t(){e.next({activated:!0})}var i=this;i.$route;i.load(t)}},ready:function(){var e=this;e.pageIn({title:"提现"})},beforeDestroy:function(){var e=this;e.countdown&&e.countdown.destroy()},methods:{load:function(e){var t=this;t.showLoading(),$.get(""+a.default.accountBound,{token:t.user.token,type:0},function(i){if(t.hideLoading(),i=$.parseJSON(i),i.code)return void t.fail(i);if(i.data){var o=i.data;t.bound=o.bound,t.account=o.account,e&&e()}},"text")},fail:function(e){var t=this,i=e.code;if(1100==i)showKickedOffline(e.data.time,e.data.ip,t.showDialog);else if(1101==i)showExpireTip(t.showDialog);else{if(1102==i)return void t.$router.go({name:"signout"});t.$root.$emit("show.snackbar",{color:"accent",message:s.default[i]})}t.hideLoading()},sendCaptcha:function(e){var t=this,i=e.target,o=(0,d.pricify)(t.$route.query.amount);if(o=isNaN(o)?0:o,!i.disabled&&!t.requesting){if(!("3"==t.account_type||t.bound&&t.bound[["","alipay","bank"][t.account_type]]))return void t.showDialog({title:"提示",content:"请先设置提现账号",confirm:!0});if(o<=0)return void t.showDialog({title:"提示",content:"无可提现金额",confirm:!0});t.requesting=!0,$.ajax(a.default.accountWithdraw,{data:{token:t.user.token},success:function(e){return e.code?void t.fail(e):(f.tooltip("短信验证码发送成功","success"),void(t.countdown=new u.default(i,{template:"%d秒后重新获取",seconds:60})))},complete:function(){t.requesting=!1}})}},submit:function(e){var t=this,i=(0,d.pricify)(t.$route.query.amount);if(i=isNaN(i)?0:i,e.preventDefault(),!t.submitting){if(!(3==t.account_type||t.bound&&t.bound[["","alipay","bank"][t.account_type]]))return void t.showDialog({title:"提示",content:"请先设置提现账号",confirm:!0});if(i<=0)return void t.showDialog({title:"提示",content:"无可提现金额",confirm:!0});if(t.amount>i)return void t.showDialog({title:"提示",content:"提现金额不能大于 "+i+" 元",confirm:!0});if(t.amount<t.minAmount)return void t.showDialog({title:"提示",content:"提现金额不能小于 "+t.minAmount+" 元",confirm:!0});if(t.amount>t.maxAmount)return void t.showDialog({title:"提示",content:"单笔提现金额不能大于 "+t.maxAmount+" 元",confirm:!0});t.submitting=!0,$.ajax(a.default.accountWithdraw,{method:"POST",data:{open_id:t.visitor?t.visitor.openId:"wx"+Date.now(),amount:t.amount,code:t.code,token:t.user.token,account_type:t.account_type},success:function(e){return e.code?void t.fail(e):(t.$root.$emit("show.snackbar",{message:"提现申请已处理成功，我们将在"+["","7","30","7"][t.account_type]+"个工作日内进行转账请注意查收！"}),void setTimeout(function(){t.$router.go({name:"my-account"})},3e3))},complete:function(){t.submitting=!1}})}},toggle:function(e){var t=this;t.account_type=e}}}},function(e,t){"use strict";function i(e){var t=Number(e);if(isNaN(t)||t<=0)return"";var i=new Date(1e3*t),o=i.getFullYear(),n=1+i.getMonth(),a=i.getDate(),r=i.getHours(),s=i.getMinutes();return n<10&&(n="0"+n),a<10&&(a="0"+a),r<10&&(r="0"+r),s<10&&(s="0"+s),o+"-"+n+"-"+a+" "+r+":"+s}function o(e){var t=Number(e);if(isNaN(t)||t<=0)return"";var i=new Date(1e3*t),o=(i.getFullYear(),1+i.getMonth()),n=i.getDate(),a=i.getHours(),r=i.getMinutes();return o<10&&(o="0"+o),n<10&&(n="0"+n),a<10&&(a="0"+a),r<10&&(r="0"+r),o+"-"+n+" "+a+":"+r}function n(e){return e?unescape(String(e).replace(/\n/g,"<br>")):e}function a(e){return e=String(e),e.substr(0,3)+"****"+e.substr(-4,4)}function r(e){return e=String(e),e.substr(0,1)+(e.length>1?"*":"")+(e.length>2?e.substr(2):"")}function s(e,t){var i=e||"";return l.test(i)&&(i="http://cdn.img.shangjiadao.cn/"+i+"?x-oss-process="+t),i}function c(e){return e=Number(e),isNaN(e)?e:e/100}function u(e){return e=Number(e),isNaN(e)||e>10?e:["零","一","二","三","四","五","六","七","八","九","十"][e]}function d(e){var t=function(e){var t=void 0,i={},o={protocol:/([^\/]+:)\/\/(.*)/i,host:/(^[^\:\/]+)((?:\/|:|$)?.*)/,port:/\:?([^\/]*)(\/?.*)/,pathname:/([^\?#]+)(\??[^#]*)(#?.*)/};i.href=e;for(var n in o)t=o[n].exec(e),i[n]=t[1],e=t[2],""===e&&(e="/"),"pathname"===n&&(i.pathname=t[1],i.search=t[2],i.hash=t[3]);return i},i=void 0,o=void 0,n=void 0,a=void 0,r=void 0,s=void 0,c=void 0,u=void 0,d=[],l=!1;if(!e.length||e.indexOf("http://")<0&&e.indexOf("https://")<0)return'<img src="images/activity-common/error_video.jpg"/>';if(i={width:"",height:"",frameborder:"0",allowfullscreen:"",allowtransparency:!1,wmode:"transparent","data-height":"195","data-src":"",style:"height:195px;width:100%;"},e.indexOf("<iframe")>=0&&e.indexOf("src")>=0)return e;if((e.indexOf("v.youku.com")>=0||e.indexOf("m.youku.com")>=0)&&e.indexOf(".html")>=0?(e=t(e),o=e.pathname.split("."),n=o[0],n=n.split("/"),n="undefined"==typeof n[n.length-1]?"":n[n.length-1],e=n.replace("id_",""),e.length&&(i.src="http://player.youku.com/embed/"+e)):e.indexOf("v.qq.com")>=0&&e.indexOf(".html")>=0?(e=t(e),o=e.pathname.split("."),a=e.search.replace("?",""),a?i.src="http://v.qq.com/iframe/player.html?"+a+"&tiny=0&auto=0&wmode=transparent":(r=o[0],s=r.split("/"),c=s[s.length-1],c&&(i.src="http://v.qq.com/iframe/player.html?vid="+c+"&auto=0&tiny=0&wmode=transparent"+e))):e.indexOf(".mp4")>=0?i.src=e:l=!0,l)return'<img src="images/activity-common/error_video.jpg"/>';d.push("<iframe ");for(u in i)d.push(u+'="'+i[u]+'" ');return d.push("></iframe>"),d.join(" ")}Object.defineProperty(t,"__esModule",{value:!0}),t.formatDate=i,t.formatDateMini=o,t.formatText=n,t.asterisk=a,t.asteriskName=r,t.imagify=s,t.pricify=c,t.digital2chinese=u,t.videoify=d;var l=/^(activity|user|poster|joiner|flyer)\/\w+/},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(10),a=o(n),r=i(12),s=o(r),c=i(40),u=o(c),d=i(45),l=o(d),f=i(26),h=i(9);$(document.body);t.default={template:"#my-account",components:{Message:u.default,WaterfallFlowLoader:l.default},vuex:{getters:{user:function(e){return e.user}},actions:{showDialog:f.showDialog,showLoading:f.showLoading,hideLoading:f.hideLoading,pageIn:f.pageIn}},data:function(){return{flows:[],total_amount:0,loaders:{}}},computed:{loader:function(){var e=this,t=e.$route,i={token:e.user.token},o=a.default.accountFlows;return e.flows=[],t.query.flow_type&&(i.flow_type=t.query.flow_type),e.loaders=i,{params:i,url:o}}},ready:function(){this.pageIn({title:"我的钱包"})},beforeDestroy:function(){},methods:{load:function(e,t){var i=this;Array.isArray(e)&&e.forEach(function(e){i.flows.push(e)}),t&&t.account&&(i.total_amount=t.account.total_amount)},fail_action:function(e,t){var i=this,o=e.code;if(1100==o)(0,h.showKickedOffline)(e.data.time,e.data.ip,i.showDialog);else if(1101==o)(0,h.showExpireTip)(i.showDialog);else{if(1102==o)return void i.$router.go({name:"signout"});i.$root.$emit("show.snackbar",{color:"accent",message:s.default[o]})}i.hideLoading(),t&&t()},alert:function(){this.showDialog({title:"提示",content:"提现金额低于50元，无法提现哦",confirm:!0})}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(12),a=o(n),r="wheel mousewheel DOMMouseScroll",s="mousedown touchstart pointerdown MSPointerDown",c="mousemove touchmove pointermove MSPointerMove",u="mouseup touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel";t.default={template:"#waterfall-flow-loader",data:function(){return{count:0,total:0,loadable:!0,loading:!1}},props:{url:{type:String,required:!0},page:{type:Number,default:1},listrows:{type:Number,default:5},params:{type:Object,default:function(){return{}}},start:{type:Function,default:function(){}},done:{type:Function,default:function(){}},fail:{type:Function,default:function(){}},end:{type:Function,default:function(){}},lazy:{type:Boolean,default:!1}},computed:{reset:function(){return!!this.restart&&(this.load(),!0)}},ready:function(){var e=this;$(window).on(r,e.wheel).on(s,e.mousedown).on(c,e.mousemove).on(u,e.mouseup),!e.lazy&&this.load()},beforeDestroy:function(){var e=this;$(window).off(r,e.wheel).off(s,e.mousedown).off(c,e.mousemove).off(u,e.mouseup)},methods:{load:function(){var e=this;e.loading||(e.start(),e.loading=!0,$.ajax(e.url,{data:$.extend({},e.params,{page:e.page++,listrows:e.listrows}),dataType:"text",success:function(t){if(t=$.parseJSON(t),t.code)return e.loadable=!1,e.page--,void(t.data?e.fail(a.default[t.code],t.data):e.fail(a.default[t.code]));var i=t.data;if(i){var o=null,n=i.others||null;i.list?(o=i.list,i.total&&(e.total=i.total)):o=i,Array.isArray(o)?o.length?(e.count+=o.length,(e.count==e.total||o.length<e.listrows)&&(e.loadable=!1),e.done(o,n)):(e.loadable=!1,e.done(null,n)):e.done(null,n)}else e.loadable=!1,e.done()},error:function(t,i,o){e.fail(),e.page--,console.log("loader error:"+t+i+o)},complete:function(){e.loading=!1,e.end()}}))},wheel:function(e){var t=e.originalEvent,i=this,o=document.body;if(i.loadable&&t){var n=t.deltaY||-t.wheelDelta||t.detail;n>0&&window.innerHeight+o.scrollTop>=o.scrollHeight-300&&i.load()}},mousedown:function(e){var t=e.originalEvent,i=t.touches;this.pageY=i?i[0].pageY:t.pageY},mousemove:function(e){var t=e.originalEvent,i=this,o=document.body,n=t.touches;if(i.loadable&&t&&i.pageY){var a=n?n[0].pageY:t.pageY;a<i.pageY&&window.innerHeight+o.scrollTop>=o.scrollHeight-300&&i.load(),i.pageY=a}},mouseup:function(){this.pageY=0}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(10),a=o(n),r=i(12),s=o(r),c=i(35),u=o(c),d=(i(43),i(26)),l=i(9),f=$(document.body);t.default={template:"#account-bind",vuex:{getters:{user:function(e){return e.user},visitor:function(e){return e.visitor}},actions:{showDialog:d.showDialog,showLoading:d.showLoading,hideLoading:d.hideLoading,pageIn:d.pageIn}},data:function(){return{activated:!1,code:"",hasBound:!1,account:{type:"1",account:"",account_name:"",bank:""},submitting:!1}},ready:function(){var e=this;e.pageIn({title:"设置提现账号"})},beforeDestroy:function(){var e=this;e.countdown&&e.countdown.destroy()},route:{data:function(e){function t(){e.next({activated:!0})}var i=this,o=i.$route,n=o.query.account_type||"1";i.account.type=n,i.load(t)}},methods:{load:function(e){var t=this;t.showLoading(),$.get(""+a.default.accountBound,{token:t.user.token,type:t.account.type},function(i){if(t.hideLoading(),i=$.parseJSON(i),i.code)return void t.fail(i);if(i.data){var o=i.data;t.hasBound=o.has_bound,t.account=$.extend(t.account,t.hasBound?o.account:{account:"",account_name:"",bank:""}),t.code="",e&&e()}},"text")},fail:function(e){var t=this,i=e.code;if(1100==i)(0,l.showKickedOffline)(e.data.time,e.data.ip,t.showDialog);else if(1101==i)(0,l.showExpireTip)(t.showDialog);else{if(1102==i)return void t.$router.go({name:"signout"});t.$root.$emit("show.snackbar",{color:"accent",message:s.default[i]})}t.hideLoading()},sendCaptcha:function(e){var t=this,i=e.target;if(!i.disabled&&!t.requesting){if(t.hasBound)return void t.showDialog({title:"温馨提示",content:"已设置"+["","支付宝","银行卡"][t.account.type]+"信息",confirm:!0});t.requesting=!0,$.ajax(a.default.accountBind,{data:{token:t.user.token},success:function(e){return e.code?void t.fail(e):(f.tooltip("短信验证码发送成功","success"),void(t.countdown=new u.default(i,{template:"%d秒后重新获取",seconds:60})))},complete:function(){t.requesting=!1}})}},submit:function(e){var t=this,i=t.account,o="";if(e.preventDefault(),!t.submitting)return"1"==i.type?i.account?i.account_name||(o="收款人姓名不能为空"):o="支付宝账号不能为空":i.account?i.account_name?i.bank||(o="开户行不能为空"):o="收款账户名不能为空":o="银行卡号不能为空",o?void t.showDialog({title:"温馨提示",content:o,confirm:!0}):void t.showDialog({title:"温馨提示",content:"提现账号一经设置不可修改，请确认所填内容准确无误。",button:{confirm:"我再看看",cancel:"是的"},cancel:function(){return t.submitting=!0,$.ajax(a.default.accountBind,{method:"POST",data:$.extend(t.account,{code:t.code,token:t.user.token}),success:function(e){return e.code?void t.fail(e):(t.$root.$emit("show.snackbar",{message:["","支付宝","银行卡"][t.account.type]+" 信息保存成功"}),void(t.hasBound=!0))},complete:function(){t.submitting=!1}}),!0},confirm:!0})},toggle:function(e){var t=this,i=t.account;e==i.type||t.hasBound||!i.account&&!i.account_name?e!=i.type&&(t.account.type=e,t.load()):t.showDialog({title:"温馨提示",content:"请正在编辑"+["","支付宝","银行卡"][i.type]+"信息，切换后信息将丢失！",confirm:function(){return t.account.type=e,t.load(),!0},cancel:!0})}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(10),a=o(n),r=i(12),s=o(r),c=i(40),u=o(c),d=i(45),l=o(d),f=i(26),h=i(9);$(document.body);t.default={template:"#my-invite",components:{Message:u.default,WaterfallFlowLoader:l.default},vuex:{getters:{user:function(e){return e.user}},actions:{showDialog:f.showDialog,showLoading:f.showLoading,hideLoading:f.hideLoading,pageIn:f.pageIn}},data:function(){return{tabs:["我的邀请","奖励规则"],curTabIndex:0,loaders:{},invites:[],settlePeriod:0,invitecode:null,stat:{total:0,total_amount:0,settled_amount:0}}},computed:{loader:function(){var e=this,t=(e.$route,{token:e.user.token}),i=a.default.inviteList;return e.loaders=t,{params:t,url:i}}},ready:function(){this.pageIn({title:"我的邀请"})},beforeDestroy:function(){},methods:{load:function(e,t){var i=this;Array.isArray(e)&&e.forEach(function(e){i.invites.push(e)}),t&&t.stat&&(i.stat=t.stat),t&&t.settle_period&&(i.settlePeriod=t.settle_period),t&&t.invitecode&&(i.invitecode=t.invitecode);
},fail:function(e,t){var i=this;if(e==s.default[1100])(0,h.showKickedOffline)(t.time,t.ip,i.showDialog);else if(e==s.default[1101])(0,h.showExpireTip)(i.showDialog);else{if(e==s.default[1102])return void i.$router.go({name:"signout"});i.$root.$emit("show.snackbar",{color:"accent",message:e})}i.hideLoading()},toggle:function(e){this.curTabIndex=e}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(10),a=(o(n),i(12)),r=(o(a),i(40)),s=o(r),c=i(26);i(9);i(49);var u=($(document.body),window.location),d=window.jWeixin,l=u.protocol+"//"+u.host;t.default={template:"#invite-detail",components:{Message:s.default},vuex:{getters:{},actions:{showDialog:c.showDialog,showLoading:c.showLoading,hideLoading:c.hideLoading,pageIn:c.pageIn}},data:function(){return{hideShareTip:!1}},computed:{shareData:function(){var e=this,t=e.$route.params.code||"",i=l+"/#!/invite/"+t;return{desc:"砍价、拼团、接龙、投票，几十种活动任你选，还能做传单哦~",imgUrl:"http://cdn.s.shangjiadao.cn/source/images/logo-300.jpg",link:i,title:"微信营销认准商家岛，宣传推广就是这么简单！"}}},ready:function(){var e=this;e.setWX(),e.pageIn({title:"微信营销认准商家岛，宣传推广就是这么简单！"})},beforeDestroy:function(){var e=this;e.resetWX(),e.hideShareTip=!0},methods:{textillateSignup:function(){setTimeout(function(){$("#invite-gosignup").textillate({loop:!0,in:{effect:"rotateIn",delay:250},out:{effect:"fadeOut",sequence:!0,delay:1}})},1500)},hideShare:function(){this.hideShareTip=!0},setWX:function(){var e=this;if(d){var t=e.shareData,i=function(){},o=function(){e.$route.query.show_share&&(e.hideShareTip=!0,e.showDialog({title:"温馨提示",content:"恭喜您，分享成功啦 :)",confirm:!0}))};d.onMenuShareTimeline({cancel:i,imgUrl:t.imgUrl,link:t.link,success:o,title:t.title}),d.onMenuShareAppMessage({cancel:i,desc:t.desc,imgUrl:t.imgUrl,link:t.link,success:o,title:t.title})}},resetWX:function(){d&&(d.onMenuShareTimeline({}),d.onMenuShareAppMessage({}))}}}},function(e,t){!function(e){"use strict";function t(t){return/In/.test(t)||e.inArray(t,e.fn.textillate.defaults.inEffects)>=0}function i(t){return/Out/.test(t)||e.inArray(t,e.fn.textillate.defaults.outEffects)>=0}function o(e){return"true"!==e&&"false"!==e?e:"true"===e}function n(t){var i=t.attributes||[],n={};return i.length?(e.each(i,function(e,t){var i=t.nodeName.replace(/delayscale/,"delayScale");/^data-in-*/.test(i)?(n.in=n.in||{},n.in[i.replace(/data-in-/,"")]=o(t.nodeValue)):/^data-out-*/.test(i)?(n.out=n.out||{},n.out[i.replace(/data-out-/,"")]=o(t.nodeValue)):/^data-*/.test(i)&&(n[i.replace(/data-/,"")]=o(t.nodeValue))}),n):n}function a(e){for(var t,i,o=e.length;o;t=parseInt(Math.random()*o),i=e[--o],e[o]=e[t],e[t]=i);return e}function r(e,t,i){e.addClass("animated "+t).css("visibility","visible").show(),e.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){e.removeClass("animated "+t),i&&i()})}function s(o,n,s){var c=o.length;return c?(n.shuffle&&(o=a(o)),n.reverse&&(o=o.toArray().reverse()),void e.each(o,function(o,a){function u(){t(n.effect)?d.css("visibility","visible"):i(n.effect)&&d.css("visibility","hidden"),c-=1,!c&&s&&s()}var d=e(a),l=n.sync?n.delay:n.delay*o*n.delayScale;d.text()?setTimeout(function(){r(d,n.effect,u)},l):u()})):void(s&&s())}var c=function(o,a){var r=this,c=e(o);r.init=function(){r.$texts=c.find(a.selector),r.$texts.length||(r.$texts=e('<ul class="texts"><li>'+c.html()+"</li></ul>"),c.html(r.$texts)),r.$texts.hide(),r.$current=e("<span>").html(r.$texts.find(":first-child").html()).prependTo(c),t(a.in.effect)?r.$current.css("visibility","hidden"):i(a.out.effect)&&r.$current.css("visibility","visible"),r.setOptions(a),r.timeoutRun=null,setTimeout(function(){r.options.autoStart&&r.start()},r.options.initialDelay)},r.setOptions=function(e){r.options=e},r.triggerEvent=function(t){var i=e.Event(t+".tlt");return c.trigger(i,r),i},r.in=function(o,a){o=o||0;var u,d=r.$texts.find(":nth-child("+((o||0)+1)+")"),l=e.extend(!0,{},r.options,d.length?n(d[0]):{});d.addClass("current"),r.triggerEvent("inAnimationBegin"),c.attr("data-active",d.data("id")),r.$current.html(d.html()).lettering("words"),"char"==r.options.type&&r.$current.find('[class^="word"]').css({display:"inline-block","-webkit-transform":"translate3d(0,0,0)","-moz-transform":"translate3d(0,0,0)","-o-transform":"translate3d(0,0,0)",transform:"translate3d(0,0,0)"}).each(function(){e(this).lettering()}),u=r.$current.find('[class^="'+r.options.type+'"]').css("display","inline-block"),t(l.in.effect)?u.css("visibility","hidden"):i(l.in.effect)&&u.css("visibility","visible"),r.currentIndex=o,s(u,l.in,function(){r.triggerEvent("inAnimationEnd"),l.in.callback&&l.in.callback(),a&&a(r)})},r.out=function(t){var i=r.$texts.find(":nth-child("+((r.currentIndex||0)+1)+")"),o=r.$current.find('[class^="'+r.options.type+'"]'),a=e.extend(!0,{},r.options,i.length?n(i[0]):{});r.triggerEvent("outAnimationBegin"),s(o,a.out,function(){i.removeClass("current"),r.triggerEvent("outAnimationEnd"),c.removeAttr("data-active"),a.out.callback&&a.out.callback(),t&&t(r)})},r.start=function(e){setTimeout(function(){r.triggerEvent("start"),function e(t){r.in(t,function(){var i=r.$texts.children().length;t+=1,!r.options.loop&&t>=i?(r.options.callback&&r.options.callback(),r.triggerEvent("end")):(t%=i,r.timeoutRun=setTimeout(function(){r.out(function(){e(t)})},r.options.minDisplayTime))})}(e||0)},r.options.initialDelay)},r.stop=function(){r.timeoutRun&&(clearInterval(r.timeoutRun),r.timeoutRun=null)},r.init()};e.fn.textillate=function(t,i){return this.each(function(){var o=e(this),a=o.data("textillate"),r=e.extend(!0,{},e.fn.textillate.defaults,n(this),"object"==typeof t&&t);a?"string"==typeof t?a[t].apply(a,[].concat(i)):a.setOptions.call(a,r):o.data("textillate",a=new c(this,r))})},e.fn.textillate.defaults={selector:".texts",loop:!1,minDisplayTime:2e3,initialDelay:0,in:{effect:"fadeInLeftBig",delayScale:1.5,delay:50,sync:!1,reverse:!1,shuffle:!1,callback:function(){}},out:{effect:"hinge",delayScale:1.5,delay:50,sync:!1,reverse:!1,shuffle:!1,callback:function(){}},autoStart:!0,inEffects:[],outEffects:["hinge"],callback:function(){},type:"char"}}(jQuery)},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(10),a=o(n),r=i(12),s=o(r),c=i(40),u=o(c),d=i(51),l=o(d),f=i(56),h=o(f),p=i(45),m=o(p),g=i(57),v=o(g),y=i(26),w=i(9),_=$(document.body);t.default={template:"#activities",components:{Message:u.default,Sharer:l.default,WaterfallFlowLoader:m.default,Navbar:h.default},vuex:{getters:{user:function(e){return e.user}},actions:{showDialog:y.showDialog,showLoading:y.showLoading,hideLoading:y.hideLoading,pageIn:y.pageIn}},data:function(){return{activities:[],hasActivities:!0,sharer:null,type:0,loaders:{},qrcodeSkinIds:{original:[],cached:[]},carousel:null}},computed:{loader:function(){var e=this,t=e.user,i={token:t?t.token:""};return e.activities=[],e.type>0&&(i.type=e.type),e.loaders=i,{url:a.default.activity,params:i}}},ready:function(){var e=this;setTimeout(function(){e.startCarousel()},1500),this.pageIn({title:"我的活动"})},methods:{load:function(e){var t=this,i={lottery:"lottery-joiners",solitaire:"solitaire-joiners",group:"group-groups",form:"form-joiners",form2:"form-joiners",photovote:"photovote-joiners",fullphotovote:"fullphotovote-joiners"};Array.isArray(e)?e.forEach(function(e){e.category=(0,w.translateType)(e.type),e.joiners_route_name=i[e.category]||"joiners",e.link=(0,w.generalShareurlV2)(e.share_host,e.id,e.type,e.category),e.hideShareMenu=$.inArray(e.category,["bargain3","bargain2","daydaysale","vote","star","moon","child","snowman","christmasgift","labourday","lantern","zongzi","tree","doubleeleven","ingots","fire","goldcoin","earth","nation","fish","watermelon"])>=0,t.activities.push(e)}):t.hasActivities&&(t.hasActivities=!1)},fail:function(e,t){var i=this;if(e==s.default[1100])(0,w.showKickedOffline)(t.time,t.ip,i.showDialog);else if(e==s.default[1101])(0,w.showExpireTip)(i.showDialog);else if(e==s.default[1102])this.$router.go({name:"signout"});else{if(e==s.default[1152])return void this.$router.go({name:"signout",query:{kicked:"1"}});i.$root.$emit("show.snackbar",{color:"accent",message:e})}i.hideLoading()},startCarousel:function(){var e=this;e.stopCarousel(),e.carousel=new v.default(e.$els.carousel,{duration:3e3})},stopCarousel:function(){var e=this;e.carousel&&(e.carousel.stop(),e.carousel=null)},showActionsheet:function(e){var t=e.target.getAttribute("href")?$(e.target.getAttribute("href")):$($(e.target).parent().attr("href")),i=t.find(".weui_mask_transition");e.preventDefault(),i.show().addClass("weui_fade_toggle"),t.find(".weui_actionsheet").addClass("weui_actionsheet_toggle")},hideActionsheet:function(e,t){var i=$(e.target).closest(".weui_actionsheet_container"),o=i.find(".weui_mask_transition");i.find(".weui_actionsheet").removeClass("weui_actionsheet_toggle"),o.removeClass("weui_fade_toggle"),setTimeout(function(){o.hide(),t&&t()},300)},removeActivity:function(e){var t=this,i=e.target,o=$(i),n=Number("undefined"==typeof i.dataset.index?o.parent().data("index"):i.dataset.index),r=t.activities[n];e.preventDefault(),t.showDialog({title:"确认删除？",content:"注意：活动删除后不可恢复！",cancel:!0,confirm:function(){return t.showLoading(),$.ajax(a.default.activity+"/"+r.id+"?token="+t.user.token,{method:"DELETE",success:function(e){return t.hideLoading(),e.code?void _.tooltip(s.default[e.code],"danger"):(_.tooltip("活动删除成功","success"),void t.hideActionsheet({target:i},function(){t.activities.splice(n,1)}))},error:function(){_.tooltip("活动删除失败","danger")}}),!0}})},searchtype:function(e){this.type=e},showNoticeTiper:function(){this.showDialog({title:"商家须知",content:"活动结束后超过 2 天时间会自动下架，下架的活动可以在个人中心查看数据等操作，但在前台会显示“该活动已经结束”",confirm:!0})},goDetail:function(e){var t=this,i=t.activities[e];window.location.href=i.link},showShareGuide:function(e){var t=this,i=t.activities[e];t.genShorturl(i),t.showDialog({title:"温馨提示",content:""+t.getShortTip(i),confirm:function(){return!0},button:{confirm:"我知道了"}})},genShorturl:function(e){var t="#dialog-shorturl",i=(0,w.generalShareurlV2)(e.share_host,e.id,e.type,e.category);$.ajax({url:a.default.tools.shorturl+"?url="+encodeURIComponent(i),type:"GET",dataType:"json",success:function(e){var i=$(t);e.code?i.html('<font color="red">生成失败，请关闭弹窗重试</font>'):i.html(e.data.url)},error:function(e,i,o){$(t).html('<font color="red">生成失败，请关闭弹窗重试</font>')}})},getShortTip:function(e){var t=e.category,i={bargain3:"我要减减减",bargain2:"我要减减减",daydaysale:"我要减减减",vote:"自己加一点",star:"自己摘一颗",moon:"自己集一下",child:"我要抢糖果",snowman:"我要堆雪人",christmasgift:"自己集一次",labourday:"我要欢乐值",lantern:"我要点灯笼",zongzi:"我要吃粽子",tree:"自己种一次",doubleeleven:"自己集一次",ingots:"自己抢一次",fire:"自己点一次",goldcoin:"我要新年币",earth:"我要关爱地球",nation:"自己集一下",fish:"我要钓鱼",watermelon:"我要摘西瓜"}[t];return'<div style="font-size: 0.8rem;text-align: left;"><img src="http://cdn.s.shangjiadao.cn/source/images/bargain2/share_guide.png?3" style="width:100%;"/>'+('<p style="display: inline-block;-webkit-user-select: element;border: 1px dashed #ccc;margin-bottom:0.5rem;padding: 0.8rem;border-radius: 0.2rem;background: #ededed;">'+e.title+"，赶快点击链接火速参加哟：<br/>")+'<font id="dialog-shorturl">正在生成链接，请稍等...</font></p></div><p style="text-align:left;margin: 0.5rem 0;color:red;">用户如何分享朋友圈？</p><div style="border: 1px dashed #ccc;padding:0.5rem;margin-top:0.5rem;font-size: 0.8rem;text-align: left;"><p>①在活动页面点击【我要参加】报名<br/>'+("②点击【"+i+"】即可获得转发朋友圈方法</p></div>")},setQrcodeSkinId:function(e){var t=this,i=t.qrcodeSkinIds;i.original.length==i.cached.length?i.cached=[e]:$.inArray(e,i.cached)<0&&i.cached.push(e)},getQrcodeSkinIdByOrder:function(){var e=this,t=(0,w.getArrayDiff)(e.qrcodeSkinIds.original,e.qrcodeSkinIds.cached);return t.length?t[0]:e.qrcodeSkinIds.original[0]},goqrcode:function(e){var t=this,i=t.activities[e],o="16",n="这个活动太实惠了，赶快扫码来参加吧！",a=location.protocol+"//"+(0,w.pathify)(window.location.host),r=a+"/images/ucenter/activities/qrcode/loading.gif",s=(0,w.generalShareurlV2)(i.share_host,i.id,i.type,i.category),c="1",u="1",d="save",l={},f={text:n,logourl:"",fontsize:o,data:s};t.showLoading("正在生成二维码..."),(0,w.generateQrcode)({skin:c,options:f},function(e,i,a){t.qrcodeSkinIds.original=i.skin_ids,u=a,t.setQrcodeSkinId(a),l=i,t.hideLoading(),t.showDialog({title:"长按二维码，保存图片",content:'<div style="width: 100%;height: 360px;position:relative;margin: 0 auto;"> <img id="dialog_qrocde_demo" style="width: 200px;height: 260px;left:0;top:0;z-index:10;background:url('+r+') no-repeat center;" src="'+e+'"/> <p style="margin-top:1rem;font-size:0.8rem;"><i class="fa fa-hand-o-down" aria-hidden="true"></i>长按链接 => 全选 => 复制 </p>'+(' <input type="text" style="border:1px dashed #ccc;height:3rem;line-height:2.5rem;width:100%;" value="'+s+'"/>')+"</div>",button:{cancel:"换个样式",confirm:"修改文案"},cancel:function(){return c=t.getQrcodeSkinIdByOrder(),(0,w.generateQrcode)({skin:c,options:f},function(e,i,o){u=o,t.setQrcodeSkinId(o),$("#dialog_qrocde_demo").attr("src",e)}),!1},minicancel:!0,confirm:function(){return setTimeout(function(){t.showDialog({title:"修改文案",content:'<div style="width: 100%;height: 350px;position:relative;background:#fff;margin: 0 auto;"> <img style="display:none;width: 200px;height: 260px;left:0;top:0;z-index:10;background:url('+r+') no-repeat center;" src="" id="dialog_qrcode_demo"/> <div id="dialog_qrcode_edit_layer">   <img style="height:200px;width:200px;" src="'+i.default_img["skin"+u]+'" id="dialog_qrcode_edit_img"/>   <input type="hidden" id="dialog_qrcode_logourl" value=""/>   <p><input type="text" id="dialog_qrcode_text" style="width:90%;border:none;border-bottom:1px dashed #aaa;padding:.5rem;line-height: 1.1;font-size:16px;" maxlength="18" placeholder="请输入描述文案（18字以内）" value=""/></p> </div> <p style="margin-top:1rem;font-size:0.8rem;"><i class="fa fa-hand-o-down" aria-hidden="true"></i>长按链接 => 全选 => 复制</p>'+(' <input type="text" style="border:1px dashed #ccc;height:3rem;line-height:2.5rem;width:100%;" value="'+s+'"/>')+"</div>",cancel:function(){if("edit"==d){c=t.getQrcodeSkinIdByOrder();var e=$.trim($("#dialog_qrcode_text").val())||n;return $("#dialog_qrcode_edit_layer").hide(),(0,w.generateQrcode)({skin:c,options:{text:e,logourl:"",fontsize:o,data:s}},function(e,i,o){u=o,t.setQrcodeSkinId(o),$("#dialog_qrcode_demo").attr("src",e).show()}),!1}return u=t.getQrcodeSkinIdByOrder(),t.setQrcodeSkinId(u),$("#dialog_qrcode_edit_img").attr("src",i.default_img["skin"+u]),!1},minicancel:!0,button:{confirm:"保存文案",cancel:"换个样式"},confirm:function(){if("save"==d){var e=$.trim($("#dialog_qrcode_text").val())||n;$("#dialog_qrcode_edit_layer").hide(),(0,w.generateQrcode)({skin:u,options:{text:e,logourl:"",fontsize:o,data:s}},function(e,i,o){d="edit",$("#weui_dialog_box").find(".btn_confirm").html("修改文案"),$("#weui_dialog_box").find(".dialog_title").html("长按二维码，保存图片"),u=o,t.setQrcodeSkinId(o),$("#dialog_qrcode_demo").attr("src",e).show()})}else d="save",$("#weui_dialog_box").find(".btn_confirm").html("保存文案"),$("#weui_dialog_box").find(".dialog_title").html("修改文案"),$("#dialog_qrcode_demo").hide(),$("#dialog_qrcode_edit_layer").show()}})},10),!0}})})},goClone:function(e,t){var i=this;"bargain2"==e?i.showDialog({title:"温馨提示",content:"此版本为下架版本，无法复制，请制作 砍价（升级版）。",confirm:!0}):i.$router.go({path:"/activity/"+e+"/"+t+"/editor",query:{action:"clone"}})}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),i(41);var n=i(10),a=o(n),r=i(11),s=o(r),c=i(52),u=i(26),d=i(9),l=i(43),f=window.location,h=window.jWeixin,p=(f.protocol+"//"+f.host,/^image\/\w+/),m="localhost"==f.hostname||f.hostname.indexOf("local")>=0||f.hash.indexOf("noweixin=1")>=0;t.default={template:"#sharer",vuex:{getters:{user:function(e){return e.user}},actions:{showDialog:u.showDialog,showLoading:u.showLoading,hideLoading:u.hideLoading}},props:{autoShare:{type:Boolean,default:!1},autoShow:{type:Boolean,default:!0},data:{type:Object,default:function(){return{}}},desc:{type:String,default:""},imgUrl:{type:String,default:""},link:{type:String,default:""},title:{type:String,default:""},storeShareUrl:{type:Boolean,default:!1},joinJoinerId:{type:Boolean,default:!0},editable:{type:Boolean,default:!1}},data:function(){return{guiding:!1,sharing:!1,visible:!1}},computed:{shareData:function(){var e=this,t=e.data,i=(0,d.pathify)(f.pathname).replace(/(\/*$)/g,""),o=(s.default.share,["activity="+t.id,"type="+t.type]),n=e.shareHost(),a=t.joinerId||0;e.joinJoinerId&&t.joinerId&&o.push("joiner="+t.joinerId);var r=f.protocol+"//"+n+i+"/sjd_"+a+"?"+o.join("&");if(m){var c="#!activity/"+(0,d.translateType)(t.type)+"/"+t.id;e.joinJoinerId&&t.joinerId&&(c+="/joiner/"+t.joinerId),r=f.protocol+"//"+n+i+c}console.log("分享域名："+r);var u="shareurl",h=d.LocalStorage.getItem(u)||{};return e.storeShareUrl?(h["k"+t.id]=r,d.LocalStorage.setItem(u,h)):h["k"+t.id]&&($.isEmptyObject(h)?d.LocalStorage.removeItem(u):d.LocalStorage.setItem(u,h)),{desc:e.desc||e.getDesc(),imgUrl:(0,l.imagify)(e.imgUrl,"image/resize,w_160,h_160/quality,q_80")||e.getImgUrl(),link:r,title:e.title||e.getTitle()}}},ready:function(){var e=this;e.autoShow&&e.show(),e.autoShare&&e.share(),!e.editable&&e.setWX(),e.editable&&e.update()},beforeDestroy:function(){this.resetWX()},methods:{shareHost:function(e){var t=this,i=t.data,o=s.default.share,n=f.hostname;return m||(i.category&&o[i.category]&&(n=o[i.category]),i.share_host&&(n=i.share_host),e||s.default.fetch_openids[n]||(n=i.id+"."+n)),n},getTitle:function(){var e=this.data;return e.title},getDesc:function(){var e=["","超级加油，赢好礼。","摘星星，赢好礼。","疯狂减价，赢好礼。","每人仅限拼团一次。","集月牙，得好礼。","集欢乐值迎国庆，赢好礼。","集福抢折扣，赢好礼。","天天减价，赢好礼。","疯狂减价，赢好礼。","大家一起堆雪人，赢取好礼咯。","圣诞节抢礼物啦，人人有份哦~~","收集新年币过新年，赢取礼品咯。","春节点鞭炮，抢礼物咯，人人有份","全民抢元宝，奖品疯狂大派送哦~~","元宵节点灯笼，赢取礼品咯。","优惠接龙，超值优惠，等你来报名","全民种树赢好礼，快来参加吧~","关爱地球，赢取礼品咯~","幸运大转盘，免费抽好礼！","五一乐翻天，好礼抢不停！","这个活动很赞，就等你来报名参加了！","这个活动很赞，就等你来报名参加了！","端午节吃粽子咯，还有好礼赠送！","疯狂减价，赢好礼。","抢糖果，赢好礼！","你就是评委！","你就是评委！","钓鱼，赢好礼！","呼朋唤友摘西瓜拿好礼！"][this.data.type];return e},getImgUrl:function(){var e=(0,d.translateType)(this.data.type),t=e+"/index.jpg";return"http://cdn.s.shangjiadao.cn/source/images/"+t},show:function(){var e=this;e.$emit("show"),e.visible=!0,setTimeout(function(){e.sharing=!0,setTimeout(function(){e.$emit("shown")},300)},0)},hide:function(){var e=this;e.$emit("hide"),e.sharing=!1,setTimeout(function(){e.visible=!1,e.$emit("hidden")},300)},change:function(e){var t=this,i=e.target;t[i.name]=i.value,t.update()},update:function(e){var t=this,i={activity_id:t.data.id,share_content:t.desc,share_img:t.imgUrl,share_title:t.title,share_host:m?"":t.shareHost(!0),token:t.user.token},o=(0,c.match)(JSON.stringify(i));return o.length?void t.showDialog({title:"提示",content:"发现微信违规词："+o.join("、")+"，请修改！",confirm:!0}):void $.ajax(a.default.activityShare,{method:"PUT",data:i,success:function(){t.hideLoading(),e&&e()}})},upload:function(e){var t=this,i=e.target,o=i.files?i.files[0]:null;if(o&&(p.test(o.type)||""==o.type)){if(t.uploading)return;t.uploading=!0,t.showLoading("图片上传中"),$.get(a.default.uploadSignature,{token:t.user.token,type:2},function(e){e.data&&t.initUploader({input:i,signature:e.data},function(){t.hideLoading(),t.uploading=!1,t.update()})})}},initUploader:function(e,t){var i=e.input,o=e.signature,n=this,a=""+o.dir+(0,d.getRandomFilename)(i.files[0].name);$(i).uploader({name:"file",url:o.host,data:{key:a,policy:o.policy,OSSAccessKeyId:o.accessid,signature:o.signature},done:function(){n.imgUrl=a,n.data.share_img=a,t()},uploaded:function(){$(i).uploader("destroy")}}).uploader("upload")},close:function(e){var t=this;"close"==e.target.dataset.action&&(this.hide(),e.target.dataset.target&&"notshare"==e.target.dataset.target&&t.$root.$emit("show.snackbar",{color:"active",message:"【活动发布成功】活动已保存至个人中心，可在“个人中心”进行查看并再次编辑",timeout:5e3}))},share:function(){this.guiding=!0},updateShareCount:function(){$.post(a.default.statistic.activity,{activity_id:this.data.id,type:2})},setWX:function(){var e=this;if(console.log("call setWX"),h){var t=e.shareData,i=function(){return e.hide()},o=function(){e.updateShareCount(),e.hide()};h.onMenuShareTimeline({cancel:i,imgUrl:t.imgUrl,link:t.link,success:o,title:t.title}),h.onMenuShareAppMessage({cancel:i,desc:t.desc,imgUrl:t.imgUrl,link:t.link,success:o,title:t.title})}},resetWX:function(){h&&(h.onMenuShareTimeline({}),h.onMenuShareAppMessage({}))},clearShareImage:function(){var e=this;e.imgUrl="",e.update()},showNotice:function(){var e=this;e.hide(),e.showDialog({title:"重要提示",content:("fullphotovote"==e.data.category?"上传选手资料，请进入商家岛公众号--点击个人中心--我的活动--报名表里上传内容。":'<p style="text-align: left;">如需编辑修改活动，请从“商家岛”公众号进入个人中心进行操作。</p>')+($.inArray(e.data.category,["bargain3","bargain2","daydaysale","vote","star","moon","child","snowman","christmasgift","labourday","lantern","zongzi","tree","doubleeleven","ingots","fire","goldcoin","earth","nation","fish","watermelon"])>=0?'<p style="text-align:left;"><strong style="color:red;">《商家如何发活动到朋友圈》</strong><br/>请进入【个人中心】-【我的活动】，点击【分享】按钮进行查看</p>':""),confirm:function(){return console.log("活动跳出地址："+e.shareData.link),e.showLoading("正在前往活动页..."),e.update(function(){window.location.href=e.shareData.link}),!0},button:{confirm:"我知道了"}})},goActivities:function(){var e=this;e.showLoading("正在前往..."),e.update(function(){e.$router.go({name:"activities"})})}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e){var t=[];return f.forEach(function(i){e.indexOf(i)>-1&&t.push(i)}),t}function a(e){var t=[];return h.forEach(function(i){e.indexOf(i)>-1&&t.push(i)}),t}Object.defineProperty(t,"__esModule",{value:!0}),t.match=n,t.matchJoin=a;var r=i(53),s=o(r),c=i(54),u=o(c),d=i(55),l=o(d),f=s.default.concat(u.default),h=l.default;t.default=f},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=["阿扁推翻","阿宾","阿賓","挨了一炮","爱液横流","安街逆","安局办公楼","安局豪华","安门事","安眠藥","案的准确","八九民","八九学","八九政治","把病人整","把邓小平","把学生整","罢工门","白黄牙签","败培训","办本科","办理本科","办理各种","办理票据","办理文凭","办理真实","办理证书","办理资格","办文凭","办怔","办证","半刺刀","辦毕业","辦證","谤罪获刑","磅解码器","磅遥控器","宝在甘肃修","保过答案","报复执法","爆发骚","北省委门","被打死","被指抄袭","被中共","本公司担","本无码","毕业證","变牌绝","辩词与梦","冰毒","冰火毒","冰火佳","冰火九重","冰火漫","冰淫传","冰在火上","波推龙","博彩娱","博会暂停","博园区伪","不查都","不查全","不思四化","布卖淫女","部忙组阁","部是这样","才知道只生","财众科技","采花堂","踩踏事","苍山兰","苍蝇水","藏春阁","藏獨","操了嫂","操嫂子","策没有不","插屁屁","察象蚂","拆迁灭","车牌隐","成人电","成人卡通","成人聊","成人片","成人视","成人图","成人文","成人小","城管灭","惩公安","惩贪难","充气娃","冲凉死","抽着大中","抽着芙蓉","出成绩付","出售发票","出售军","穿透仪器","春水横溢","纯度白","纯度黄","次通过考","催眠水","催情粉","催情药","催情藥","挫仑","达毕业证","答案包","答案提供","打标语","打错门","打飞机专","打死经过","打死人","打砸办公","大鸡巴","大雞巴","大纪元","大揭露","大奶子","大批贪官","大肉棒","大嘴歌","代办发票","代办各","代办文","代办学","代办制","代辦","代表烦","代開","代考","代理发票","代理票据","代您考","代您考","代写毕","代写论","代孕","贷办","贷借款","贷开","戴海静","当代七整","当官要精","当官在于","党的官","党后萎","党前干劲","刀架保安","导的情人","导叫失","导人的最","导人最","导小商","到花心","得财兼","的同修","灯草和","等级證","等屁民","等人老百","等人是老","等人手术","邓爷爷转","邓玉娇","地产之歌","地下先烈","地震哥","帝国之梦","递纸死","点数优惠","电狗","电话监","电鸡","甸果敢","蝶舞按","丁香社","丁子霖","顶花心","东北独立","东复活","东京热","東京熱","洞小口紧","都当警","都当小姐","都进中央","毒蛇钻","独立台湾","赌球网","短信截","对日强硬","多美康","躲猫猫","俄羅斯","恶势力操","恶势力插","恩氟烷","儿园惨","儿园砍","儿园杀","儿园凶","二奶大","发牌绝","发票出","发票代","发票销","發票","法车仑","法伦功","法轮","法轮佛","法维权","法一轮","法院给废","法正乾","反测速雷","反雷达测","反屏蔽","范燕琼","方迷香","防电子眼","防身药水","房贷给废","仿真枪","仿真证","诽谤罪","费私服","封锁消","佛同修","夫妻交换","福尔马林","福娃的預","福娃頭上","福香巴","府包庇","府集中领","妇销魂","附送枪","复印件生","复印件制","富民穷","富婆给废","改号软件","感扑克","冈本真","肛交","肛门是邻","岡本真","钢针狗","钢珠枪","港澳博球","港馬會","港鑫華","高就在政","高考黑","高莺莺","搞媛交","告长期","告洋状","格证考试","各类考试","各类文凭","跟踪器","工程吞得","工力人","公安错打","公安网监","公开小姐","攻官小姐","共狗","共王储","狗粮","狗屁专家","鼓动一些","乖乖粉","官商勾","官也不容","官因发帖","光学真题","跪真相","滚圆大乳","国际投注","国家妓","国家软弱","国家吞得","国库折","国一九五七","國內美","哈药直销","海访民","豪圈钱","号屏蔽器","和狗交","和狗性","和狗做","黑火药的","红色恐怖","红外透视","紅色恐","胡江内斗","胡紧套","胡錦濤","胡适眼","胡耀邦","湖淫娘","虎头猎","华国锋","华门开","化学扫盲","划老公","还会吹萧","还看锦涛","环球证件","换妻","皇冠投注","黄冰","浑圆豪乳","活不起","火车也疯","机定位器","机号定","机号卫","机卡密","机屏蔽器","基本靠吼","绩过后付","激情电","激情短","激情妹","激情炮","级办理","级答案","急需嫖","集体打砸","集体腐","挤乳汁","擠乳汁","佳静安定","家一样饱","家属被打","甲虫跳","甲流了","奸成瘾","兼职上门","监听器","监听王","简易炸","江胡内斗","江太上","江系人","江贼民","疆獨","蒋彦永","叫自慰","揭贪难","姐包夜","姐服务","姐兼职","姐上门","金扎金","金钟气","津大地震","津地震","进来的罪","京地震","京要地震","经典谎言","精子射在","警察被","警察的幌","警察殴打","警察说保","警车雷达","警方包庇","警用品","径步枪","敬请忍","究生答案","九龙论坛","九评共","酒象喝汤","酒像喝汤","就爱插","就要色","举国体","巨乳","据说全民","绝食声","军长发威","军刺","军品特","军用手","开邓选","开锁工具","開碼","開票","砍杀幼","砍伤儿","康没有不","康跳楼","考答案","考后付款","考机构","考考邓","考联盟","考前答","考前答案","考前付","考设备","考试包过","考试保","考试答案","考试机构","考试联盟","考试枪","考研考中","考中答案","磕彰","克分析","克千术","克透视","空和雅典","孔摄像","控诉世博","控制媒","口手枪","骷髅死","快速办","矿难不公","拉登说","拉开水晶","来福猎","拦截器","狼全部跪","浪穴","老虎机","雷人女官","类准确答","黎阳平","李洪志","李咏曰","理各种证","理是影帝","理证件","理做帐报","力骗中央","力月西","丽媛离","利他林","连发手","聯繫電","炼大法","两岸才子","两会代","两会又三","聊视频","聊斋艳","了件渔袍","猎好帮手","猎枪销","猎槍","獵槍","领土拿","流血事","六合彩","六死","六四事","六月联盟","龙湾事件","隆手指","陆封锁","陆同修","氯胺酮","乱奸","乱伦类","乱伦小","亂倫","伦理大","伦理电影","伦理毛","伦理片","轮功","轮手枪","论文代","罗斯小姐","裸聊网","裸舞视","落霞缀","麻古","麻果配","麻果丸","麻将透","麻醉狗","麻醉枪","麻醉槍","麻醉藥","蟆叫专家","卖地财政","卖发票","卖银行卡","卖自考","漫步丝","忙爱国","猫眼工具","毛一鲜","媒体封锁","每周一死","美艳少妇","妹按摩","妹上门","门按摩","门保健","門服務","氓培训","蒙汗药","迷幻型","迷幻药","迷幻藥","迷昏口","迷昏药","迷昏藥","迷魂香","迷魂药","迷魂藥","迷奸药","迷情水","迷情药","迷藥","谜奸药","蜜穴","灭绝罪","民储害","民九亿商","民抗议","明慧网","铭记印尼","摩小姐","母乳家","木齐针","幕没有不","幕前戲","内射","南充针","嫩穴","嫩阴","泥马之歌","你的西域","拟涛哥","娘两腿之间","妞上门","浓精","怒的志愿","女被人家搞","女激情","女技师","女人和狗","女任职名","女上门","女優","鸥之歌","拍肩神药","拍肩型","牌分析","牌技网","炮的小蜜","陪考枪","配有消","喷尿","嫖俄罗","嫖鸡","平惨案","平叫到床","仆不怕饮","普通嘌","期货配","奇迹的黄","奇淫散","骑单车出","气狗","气枪","汽狗","汽枪","氣槍","铅弹","钱三字经","枪出售","枪的参","枪的分","枪的结","枪的制","枪货到","枪决女犯","枪决现场","枪模","枪手队","枪手网","枪销售","枪械制","枪子弹","强权政府","强硬发言","抢其火炬","切听器","窃听器","禽流感了","勤捞致","氢弹手","清除负面","清純壆","情聊天室","情妹妹","情视频","情自拍","氰化钾","氰化钠","请集会","请示威","请愿","琼花问","区的雷人","娶韩国","全真证","群奸暴","群起抗暴","群体性事","绕过封锁","惹的国","人权律","人体艺","人游行","人在云上","人真钱","认牌绝","任于斯国","柔胸粉","肉洞","肉棍","如厕死","乳交","软弱的国","赛后骚","三挫","三级片","三秒倒","三网友","三唑","骚妇","骚浪","骚穴","骚嘴","扫了爷爷","色电影","色妹妹","色视频","色小说","杀指南","山涉黑","煽动不明","煽动群众","上门激","烧公安局","烧瓶的","韶关斗","韶关玩","韶关旭","射网枪","涉嫌抄袭","深喉冰","神七假","神韵艺术","生被砍","生踩踏","生肖中特","圣战不息","盛行在舞","尸博","失身水","失意药","狮子旗","十八等","十大谎","十大禁","十个预言","十类人不","十七大幕","实毕业证","实体娃","实学历文","士康事件","式粉推","视解密","是躲猫","手变牌","手答案","手狗","手机跟","手机监","手机窃","手机追","手拉鸡","手木仓","手槍","守所死法","兽交","售步枪","售纯度","售单管","售弹簧刀","售防身","售狗子","售虎头","售火药","售假币","售健卫","售军用","售猎枪","售氯胺","售麻醉","售冒名","售枪支","售热武","售三棱","售手枪","售五四","售信用","售一元硬","售子弹","售左轮","书办理","熟妇","术牌具","双管立","双管平","水阎王","丝护士","丝情侣","丝袜保","丝袜恋","丝袜美","丝袜妹","丝袜网","丝足按","司长期有","司法黑","私房写真","死法分布","死要见毛","四博会","四大扯","四小码","苏家屯集","诉讼集团","素女心","速代办","速取证","酸羟亚胺","蹋纳税","太王四神","泰兴幼","泰兴镇中","泰州幼","贪官也辛","探测狗","涛共产","涛一样胡","特工资","特码","特上门","体透视镜","替考","替人体","天朝特","天鹅之旅","天推广歌","田罢工","田田桑","田停工","庭保养","庭审直播","通钢总经","偷電器","偷肃贪","偷听器","偷偷贪","头双管","透视功能","透视镜","透视扑","透视器","透视眼镜","透视药","透视仪","秃鹰汽","突破封锁","突破网路","推油按","脱衣艳","瓦斯手","袜按摩","外透视镜","外围赌球","湾版假","万能钥匙","万人骚动","王立军","王益案","网民案","网民获刑","网民诬","微型摄像","围攻警","围攻上海","维汉员","维权基","维权人","维权谈","委坐船","谓的和谐","温家堡","温切斯特","温影帝","溫家寶","瘟加饱","瘟假饱","文凭证","文强","纹了毛","闻被控制","闻封锁","瓮安","我的西域","我搞台独","乌蝇水","无耻语录","无码专","五套功","五月天","午夜电","午夜极","武警暴","武警殴","武警已增","务员答案","务员考试","雾型迷","西藏限","西服进去","希脏","习进平","习晋平","席复活","席临终前","席指着护","洗澡死","喜贪赃","先烈纷纷","现大地震","现金投注","线透视镜","限制言","陷害案","陷害罪","相自首","香港论坛","香港马会","香港一类","香港总彩","硝化甘","小穴","校骚乱","协晃悠","写两会","泄漏的内","新建户","新疆叛","新疆限","新金瓶","新唐人","信访专班","信接收器","兴中心幼","星上门","行长王益","形透视镜","型手枪","姓忽悠","幸运码","性爱日","性福情","性感少","性推广歌","胸主席","徐玉元","学骚乱","学位證","學生妹","丫与王益","烟感器","严晓玲","言被劳教","言论罪","盐酸曲","颜射","恙虫病","姚明进去","要人权","要射精了","要射了","要泄了","夜激情","液体炸","一小撮别","遗情书","蚁力神","益关注组","益受贿","阴间来电","陰唇","陰道","陰戶","淫魔舞","淫情女","淫肉","淫騷妹","淫兽","淫兽学","淫水","淫穴","隐形耳","隐形喷剂","应子弹","婴儿命","咏妓","用手枪","幽谷三","游精佑","有奶不一","右转是政","幼齿类","娱乐透视","愚民同","愚民政","与狗性","玉蒲团","育部女官","冤民大","鸳鸯洗","园惨案","园发生砍","园砍杀","园凶杀","园血案","原一九五七","原装弹","袁腾飞","晕倒型","韵徐娘","遭便衣","遭到警","遭警察","遭武警","择油录","曾道人","炸弹教","炸弹遥控","炸广州","炸立交","炸药的制","炸药配","炸药制","张春桥","找枪手","找援交","找政法委副","赵紫阳","针刺案","针刺伤","针刺事","针刺死","侦探设备","真钱斗地","真钱投注","真善忍","真实文凭","真实资格","震惊一个民","震其国土","证到付款","证件办","证件集团","证生成器","证书办","证一次性","政府操","政论区","證件","植物冰","殖器护","指纹考勤","指纹膜","指纹套","至国家高","志不愿跟","制服诱","制手枪","制证定金","制作证件","中的班禅","中共黑","中国不强","种公务员","种学历证","众像羔","州惨案","州大批贪","州三箭","宙最高法","昼将近","主席忏","住英国房","助考","助考网","专业办理","专业代","专业代写","专业助","转是政府","赚钱资料","装弹甲","装枪套","装消音","着护士的胸","着涛哥","姿不对死","资格證","资料泄","梓健特药","字牌汽","自己找枪","自慰用","自由圣","自由亚","总会美女","足球玩法","最牛公安","醉钢枪","醉迷药","醉乙醚","尊爵粉","左转是政","作弊器","作各种证","作硝化甘","唑仑","做爱小","做原子弹","做证件"]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=["账号","卡号","打款","汇款","转账","付款","网银","付钱","现金","支付宝","银行卡","多少钱","集赞","分享","转发","邀请好友","朋友圈","点赞","助力","邀请","关注","吸粉","发送好友","发送","发给","发出去","好友"]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=["商家","商家岛","家岛","sjd","shangjiadao","shangjd","测试","测 试","test","傻","病","神经","残","0","1","2","3","4","5","6","7","8","9"]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});({results:Array});t.default={template:"#navbar",props:{searchtype:{type:Function,default:function(){}}},data:function(){return{currenttype:0,types:["全部","未开始","进行中","已结束","已下架"]}},methods:{click:function(e){var t=this;t.currenttype=Number(e.target.dataset.index),t.searchtype(t.currenttype)}}}},function(e,t){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),n={autoStart:!0,duration:5e3},a=function(){function e(t,o){i(this,e);var a=this;a.element=t,a.options=$.extend({},n,o),a.slidable=!1,a.init()}return o(e,[{key:"init",value:function(){var e=this,t=e.options,i=e.element,o=i?i.firstElementChild:null;o&&(e.item=o,e.slidable=!!o,t.autoStart&&i.children.length>1&&e.start())}},{key:"slide",value:function(){var e=this,t=e.element,i=e.item,o=i.nextElementSibling;o||(o=t.firstElementChild),i.className+=" out",o.className+=" in",e.item=o,setTimeout(function(){i.className="slide",e.slidable&&e.start()},300)}},{key:"start",value:function(){var e=this;setTimeout(function(){return e.slide()},e.options.duration)}},{key:"stop",value:function(){this.slidable=!1}}]),e}();t.default=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(26),n=i(9);t.default={template:"#categories",vuex:{actions:{pageIn:o.pageIn,showDialog:o.showDialog}},ready:function(){this.stat("view","yes"),this.pageIn({title:"活动类型"})},data:function(){return{currentMenu:"sjd",sjttCategories:[{title:"砍价（朋友圈版）",desc:"邀请好友帮忙砍价，获得好礼。",icon:"http://cdn.s.shangjiadao.cn/source/images/sjtt/bargain/index.jpg?3",example:"",do:""}],categories:[{title:"多商品砍价（支付版）",desc:"支持多商品砍价、支持在线支付、商品数量不限<br/>头图、字体样式、音乐特效均可自定义",icon:"http://cdn.s.shangjiadao.cn/source/images/goodbargain/index.jpg?2",example:"",do:"",showLooking:!0},{title:"照片投票（礼物版）",desc:"选手自行上传照片或作品参与公开评选。头图、字体格式等均可自定义。<br/>投票者可以花钱送礼物，为选手增加人气，商家赚钱利器",icon:"http://cdn.s.shangjiadao.cn/source/images/giftvote/index.jpg?2",example:"",do:"",showLooking:!0},{title:"摘西瓜",desc:"完成摘西瓜任务即可领取相应奖品。<br/>头部精彩动画，字体格式、信息采集项、背景音乐、前景特效均可自定义，支持一键拨号。",icon:"http://cdn.s.shangjiadao.cn/source/images/watermelon/index.jpg?2",example:"http://104825.wx.zxingxing.cn/sjd_7853394?activity=104825&type=29&joiner=7853394",do:"#!/activity/watermelon/new",showNotice:!0},{title:"钓鱼大作战",desc:"完成钓鱼任务即可领取相应奖品。<br/>头部精彩动画，字体格式、信息采集项、背景音乐、前景特效均可自定义，支持一键拨号。",icon:"http://cdn.s.shangjiadao.cn/source/images/fish/index.jpg",example:"http://44.wx.zxingxing.cn/sjd_0?activity=44&type=28",do:"#!/activity/fish/new",showNotice:!0},{title:"全民票选",desc:"该活动为预设内容投票版，由主办方上传参赛内容进行投票，用户无法上传。<br/>头图、字体格式、信息采集项、背景音乐、前景特效可自定义，支持一键拨号。",icon:"http://cdn.s.shangjiadao.cn/source/images/fullphotovote/index.jpg?3",example:"http://wx.ddenglong.cn/sjd_0?activity=43&type=27",
do:"#!/activity/fullphotovote/new",small:"HOT"},{title:"照片投票",desc:"选手自行上传照片或作品参与公开投票评选。<br/>头图、字体格式、信息采集项、背景音乐、前景特效可自定义，支持一键拨号。",icon:"http://cdn.s.shangjiadao.cn/source/images/photovote/index.jpg?3",example:"http://wx.ddenglong.cn/sjd_0?activity=42&type=26",do:"#!/activity/photovote/new",small:"HOT"},{title:"微报名",desc:"线下活动报名、促销团购、邀请都很适用。<br/>头图、字体格式、信息采集项、背景音乐、前景特效可自定义，支持一键拨号。",icon:"http://cdn.s.shangjiadao.cn/source/images/form2/index.jpg?3",example:"http://38.form2.shangjd.cn/sjd_0?activity=38&type=22",do:"#!/activity/form2/new",small:"HOT"},{title:"幸运大转盘",desc:"好玩的抽奖活动，可设置抽奖次数、中奖率、中奖次数、兑奖密码，实现完美互动。<br/>头图、字体格式、信息采集项、背景音乐、前景特效可自定义，支持一键拨号。",icon:"http://cdn.s.shangjiadao.cn/source/images/lottery/index.jpg",example:"http://35.lottery.shangjd.cn/sjd_0?activity=35&type=19",do:"#!/activity/lottery/new",small:"HOT"},{title:"微报名（线上支付版）",desc:"线下活动报名、促销团购、邀请都很适用，可实现在线支付。<br/>头图、字体格式、信息采集项、背景音乐、前景特效可自定义，支持一键拨号。",icon:"http://cdn.s.shangjiadao.cn/source/images/form/index.jpg?3",example:"http://wx.m.shangjiadao.cn/sjd_0?activity=37&type=21",do:"#!/activity/form/new"},{title:"吃糖果",desc:"邀请好友帮忙吃够预设的糖果数量，则可获得奖品。<br/>头图、字体格式、信息采集项、背景音乐、前景特效可自定义，支持一键拨号。",icon:"http://cdn.s.shangjiadao.cn/source/images/child/index.jpg?3",example:"http://41.child.huanmanyue.cn/sjd_0?activity=41&type=25",do:"#!/activity/child/new",small:"NEW",showNotice:!0},{title:"吃粽子",desc:"邀请好友帮忙把粽子吃完，则可获得奖品。（有吃粽子的动画交互）<br/>头图、字体格式、信息采集项、背景音乐、前景特效可自定义，支持一键拨号。",icon:"http://cdn.s.shangjiadao.cn/source/images/zongzi/index.jpg?2",example:"http://39.zongzi.huandu51.cn/sjd_0?activity=39&type=23",do:"#!/activity/zongzi/new",small:"HOT",showNotice:!0},{title:"疯狂砍价（升级版）",desc:"全新夏日风格砍价模板，商家设定原价底价和砍幅，报名者邀请好友来帮减价直到减至底价。<br/>头图、字体格式、信息采集项、背景音乐、前景特效可自定义，支持一键拨号。",icon:"http://cdn.s.shangjiadao.cn/source/images/bargain3/index.jpg?2",example:"http://40.wx.huandugq.cn/sjd_0?activity=40&type=24",do:"#!/activity/bargain3/new",showNotice:!0,small:"NEW"},{title:"疯狂砍价",desc:"商家设定原价底价和砍幅，报名者邀请好友来帮减价直到减至底价。<br/>字体格式、信息采集项、背景音乐、前景特效可自定义，支持一键拨号。",icon:"http://cdn.s.shangjiadao.cn/source/images/bargain2/index.jpg",example:"http://9.wx.1kanjia.cn/sjd_0?activity=9&type=9",do:"#!/activity/bargain2/new",showNotice:!0},{title:"天天减价",desc:"商家设定原价底价和砍幅，报名者邀请好友来帮减价直到减至底价。<br/>字体格式、信息采集项、背景音乐、前景特效可自定义，支持一键拨号。",icon:"http://cdn.s.shangjiadao.cn/source/images/daydaysale/index.jpg",example:"http://8.wx.1kanjia.cn/sjd_0?activity=8&type=8",do:"#!/activity/daydaysale/new",showNotice:!0},{title:"全民拼团",desc:"通过好友拼团的形式低价购买商品或服务。人越多越优惠，商家可自行设定每天投票数。<br/>海量背景音乐和特效随心挑选，支持一键拨号和在线收预付款。",icon:"http://cdn.s.shangjiadao.cn/source/images/group/index.jpg",example:"http://wx.m.shangjiadao.cn/sjd_0?activity=4&type=4",do:"#!/activity/group/new",showTimelineWarning:!0},{title:"关爱地球",desc:"邀请好友一起关爱地球，就可以领取奖品。<br/>字体格式、信息采集项、背景音乐、前景特效可自定义，支持一键拨号。",icon:"http://cdn.s.shangjiadao.cn/source/images/earth/index.jpg",example:"http://34.wx.huanmanyue.cn/sjd_0?activity=34&type=18",do:"#!/activity/earth/new",showNotice:!0},{title:"种树",desc:"邀请好友一起种树，用树苗换奖品，可设置多档奖品。<br/>字体格式、信息采集项、背景音乐、前景特效可自定义，支持一键拨号。",icon:"http://cdn.s.shangjiadao.cn/source/images/tree/index.jpg",example:"http://33.wx.huanmanyue.cn/sjd_0?activity=33&type=17",do:"#!/activity/tree/new",showNotice:!0},{title:"全民抢元宝",desc:"邀请好友抢元宝，攒够元宝换奖品，可设置多档奖品。<br/>字体格式、信息采集项、背景音乐、前景特效可自定义，支持一键拨号。",icon:"http://cdn.s.shangjiadao.cn/source/images/ingots/index.jpg",example:"http://30.wx.huanmanyue.cn/sjd_0?activity=30&type=14",do:"#!/activity/ingots/new",showNotice:!0},{title:"全民摘星星",desc:"邀请好友摘星星，凑够星星换奖品。<br/>字体格式、信息采集项、背景音乐、前景特效可自定义，支持一键拨号。",icon:"http://cdn.s.shangjiadao.cn/source/images/star/index.jpg",example:"http://2.wx.zxingxing.cn/sjd_0?activity=2&type=2",do:"#!/activity/star/new",showNotice:!0},{title:"全民唤满月",desc:"邀请好友集月牙，凑成满月换奖品。<br/>字体格式、信息采集项、背景音乐、前景特效可自定义，支持一键拨号。",icon:"http://cdn.s.shangjiadao.cn/source/images/moon/index.jpg",example:"http://5.wx.zxingxing.cn/sjd_0?activity=5&type=5",do:"#!/activity/moon/new",showNotice:!0},{title:"优惠接龙",desc:"通过群策群力低价购买商品或服务。人越多越优惠，可设置多档位。<br/>字体格式、信息采集项、背景音乐、前景特效可自定义，支持一键拨号。",icon:"http://cdn.s.shangjiadao.cn/source/images/solitaire/index.jpg",example:"http://wx.m.shangjiadao.cn/sjd_0?activity=32&type=16",do:"#!/activity/solitaire/new",showTimelineWarning:!0},{title:"超级加油",desc:"邀请好友加油，依据人气排行获取奖品，可自由编辑内容。<br/>字体格式、信息采集项、背景音乐、前景特效可自定义，支持一键拨号。",icon:"http://cdn.s.shangjiadao.cn/source/images/vote/index.jpg",example:"http://1.wx.1kanjia.cn/sjd_0?activity=1&type=1",do:"#!/activity/vote/new",showNotice:!0},{title:"点灯笼",desc:"邀请好友点亮全部灯笼，即可兑换奖品，灯笼上的文字可修改。<br/>字体格式、信息采集项、背景音乐、前景特效可自定义，支持一键拨号。",icon:"http://cdn.s.shangjiadao.cn/source/images/lantern/index.jpg",example:"http://31.lantern.huandu51.cn/sjd_0?activity=31&type=15",do:"#!/activity/lantern/new",showNotice:!0},{title:"新年抢金币",desc:"邀请好友抢金币，凑齐金币兑换奖品。<br/>字体格式、信息采集项、背景音乐、前景特效可自定义，支持一键拨号。",icon:"http://cdn.s.shangjiadao.cn/source/images/goldcoin/index.jpg",example:"http://28.wx.huanmanyue.cn/sjd_0?activity=28&type=12",do:"#!/activity/goldcoin/new",showNotice:!0},{title:"集福抢折扣",desc:"邀请好友集福，凑齐福气赢取对应折扣。<br/>字体格式、信息采集项、背景音乐、前景特效可自定义，支持一键拨号。",icon:"http://cdn.s.shangjiadao.cn/source/images/doubleeleven/index.jpg",example:"http://7.wx.huanmanyue.cn/sjd_0?activity=7&type=7",do:"#!/activity/doubleeleven/new",showNotice:!0},{title:"春节点鞭炮",desc:"邀请好友点鞭炮，点的越多奖品越多，一路抢光光。<br/>字体格式、信息采集项、背景音乐、前景特效可自定义，支持一键拨号。",icon:"http://cdn.s.shangjiadao.cn/source/images/fire/index.jpg",example:"http://29.wx.huanmanyue.cn/sjd_0?activity=29&type=13",do:"#!/activity/fire/new",showNotice:!0},{title:"圣诞礼物大派送",desc:"邀请好友帮忙集袜子，集够换奖品，可设置多档奖品。<br/>字体格式、信息采集项、背景音乐、前景特效可自定义，支持一键拨号。",icon:"http://cdn.s.shangjiadao.cn/source/images/christmasgift/index.jpg",example:"http://27.christmasgift.huandu51.cn/sjd_0?activity=27&type=11",do:"#!/activity/christmasgift/new",showNotice:!0},{title:"全民堆雪人",desc:"邀请好友堆雪人，换奖品。<br/>字体格式、信息采集项、背景音乐、前景特效可自定义，支持一键拨号。",icon:"http://cdn.s.shangjiadao.cn/source/images/snowman/index.jpg",example:"http://10.snowman.huandu51.cn/sjd_0?activity=10&type=10",do:"#!/activity/snowman/new",showNotice:!0},{title:"欢度五一",desc:"邀请足够好友点亮头部字牌，即可兑换奖品，。<br/>头图、字体格式、信息采集项、背景音乐、前景特效可自定义，支持一键拨号。",icon:"http://cdn.s.shangjiadao.cn/source/images/labourday/index.jpg",example:"http://36.labourday.huandu51.cn/sjd_0?activity=36&type=20",do:"#!/activity/labourday/new",showNotice:!0},{title:"欢度国庆",desc:"邀请足够好友点亮头部字牌，即可兑换奖品。<br/>字体格式、信息采集项、背景音乐、前景特效可自定义，支持一键拨号。",icon:"http://cdn.s.shangjiadao.cn/source/images/nation/index.jpg",example:"http://6.nation.huandu51.cn/sjd_0?activity=6&type=6",do:"#!/activity/nation/new",showNotice:!0}]}},methods:{goMenu:function(e){this.currentMenu=e},showSjttNotice:function(){var e=this;e.showDialog({title:"温馨提示",cancel:function(){e.showDialog({title:"扫码进入【商家推推公众号】",confirm:!0,fullscreen:!0,style:"text-align: left;",button:{confirm:"我知道了"},content:'<p><img src="images/ucenter/before/qr_go_sjtt.jpg" style="width: 100%;"/></p>'})},confirm:!0,style:"text-align: left;",button:{cancel:"确认",confirm:"再想想"},content:"将前往商家推推平台制作活动，确认前往吗？"})},stat:function(e,t){(0,n.bdStat)("page_categories",e,t)},showLooking:function(){this.showDialog({title:"温馨提示",content:"技术哥哥疯狂开发中，敬请期待哦 :)",button:{confirm:"我知道了"},confirm:function(){return!0}})},showExample:function(e){window.location.href=e},showNotice:function(e,t){(0,n.showCreateNotice)(e,t,this.showDialog)},showTimelineWarning:function(e,t){(0,n.showCreateTimelineWarning)(e,t,this.showDialog)}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(60),a=o(n),r=i(67),s=o(r),c=i(68),u=o(c),d=i(9);t.default={mixins:[a.default,s.default,u.default],vuex:{getters:{user:function(e){return e.user}}},ready:function(){this.showShareGuide()},methods:{click:function(){var e=this,t=e.my.joinerId;t?e.$router.go({name:"vote-joiner",params:{id:e.activityId,joinerId:t}}):(0,d.showBeforeJoinTiper)(e.showDialog,function(){e.visible=!0,setTimeout(function(){e.joining=!0},0)})},showShareGuide:function(){var e=this,t=Number(e.$route.query.user_id)||0;e.user&&e.user.id==t&&e.showDialog({title:"商家如何发活动到朋友圈",content:"请进入【个人中心】-【我的活动】，点击【分享】按钮进行查看",button:{confirm:"我知道了"},confirm:function(){return!0}})}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=i(61),r=o(a),s=i(10),c=o(s),u=i(12),d=o(u),l=i(40),f=o(l),h=i(51),p=o(h),m=i(45),g=o(m),v=i(62),y=o(v),w=i(63),_=o(w),b=i(64),x=o(b),j=i(65),D=i(9),k=i(26),S=i(52),T=$(document.body),z=window.location;t.default={components:{Message:f.default,Sharer:p.default,WaterfallFlowLoader:g.default,Musician:y.default,Foreground:_.default,Imager:x.default},vuex:{getters:{user:function(e){return e.user},joiner:function(e){return e.joiner},reminded:function(e){return e.reminded},sharable:function(e){return e.sharable},voter:function(e){return e.voter},visitor:function(e){return e.visitor}},actions:{showDialog:k.showDialog,showLoading:k.showLoading,hideLoading:k.hideLoading,joinIn:k.joinIn,joinOut:k.joinOut,pageIn:k.pageIn,toggleReminder:k.toggleReminder,toggleSharable:k.toggleSharable,voteIn:k.voteIn,voteOut:k.voteOut}},route:{data:function(e){var t=this,i=e.to,o=Number(i.params.id)||0,n=Number(i.params.joinerId)||0,a=n?t.api&&t.api.joiner?t.api.joiner:r.default.activity.joiner:t.api&&t.api.activity?t.api.activity+"/"+o:r.default.activity.root+"/"+o;t.activity=null,t.carousel=null,t.loader=null,t.sharer=null,t.showLoading(),$.ajax({type:"get",url:a,dataType:"text",data:{activity_id:o,joiner_id:n},success:function(i){if(t.hideLoading(),i=$.parseJSON(i),i.data&&i.data.mobile&&(t.activityMobile=i.data.mobile),i.code){if("1005"==i.code)return z.hash="#!403",void e.abort();if("1217"==i.code)return void(t.hasActivity=!1);if("1252"==i.code){var a=!1;return t.joiner&&t.joiner.activities&&t.joiner.activities.forEach(function(e){e.joinerId==n&&(a=!0,t.joinOut(n),t.voteOut(n))}),void(a?t.showDialog({title:"重要提示",button:{confirm:"我知道了"},style:"text-align: left;",content:"您已被活动主办方取消名额，如有疑问，请联系主办方！",confirm:function(){return(0,D.redirectToActivityIndex)(),!0}}):(0,D.redirectToActivityIndex)())}return void t.$root.$emit("show.snackbar",{color:"accent",message:d.default[i.code]})}if(i.data){var s=i.data.activity,c=i.data.joiner,u=i.data.statistics,l=t.sharable;if(s.type!=t.code)return void(t.hasActivity=!1);!(0,j.matchCases)(s.user_id)&&s.completed_delay_days>=2&&(t.hasCompleted=!0),l&&t.toggleSharable(),t.pageIn({title:s.title,description:s.rules}),t.loadCompletedJoiners(o);var f={};try{f=JSON.parse(s.prizes)}catch(e){console.log("parse prizes error: "+e.message)}var h={};try{h=s.others&&JSON.parse((0,D.jsonFilter)(s.others))}catch(e){console.log("parse others error: "+e.message)}t.pageSwitch.countdown&&t.$nextTick(function(){t.startCountdown()});var p={},m={};if(h.join_customize){var g=void 0,v=void 0;for(g in h.join_customize)v=h.join_customize[g],""!=v.name&&(v.placeholder="请输入"+v.name,m[g]="",p[g]=v)}e.next({activity:$.extend({},s,{host_img:String(s.host_img).split(","),prizes:f,others:h,category:t.category||(0,D.translateType)(s.type)}),activityId:o,joinerId:n,joiners:[],newJoiner:$.extend({},t.newJoiner,m),joinCustomize:$.extend({},t.joinCustomize,p),loader:{url:r.default.activity.ranking+"?activity_id="+o,params:{activity_id:o}},participant:c,sharer:{autoShare:!l,autoShow:l,data:$.extend({joinerId:n,category:t.category||""},s),desc:s.share_content,imgUrl:s.share_img,link:window.location.href,title:s.share_title},statistics:u}),setTimeout(function(){$("div.about").find("img").scrollLoading()},100),t.bindQrcodeAnimate()}},error:function(){T.tooltip("活动加载失败","danger")}})}},data:function(){return{activityMobile:null,activity:null,activityId:0,hasDown:!1,hasActivity:!0,hasCompleted:!1,carousel:null,completedJoiners:{total:0,list:[]},joinerId:0,joiners:[],joining:!1,loader:null,newJoiner:{name:"",mobile:""},joinCustomize:{},joinFields:["name","mobile"],joinFieldNames:["姓名","手机号码"],participant:null,sharer:null,statistics:null,visible:!1,pageSwitch:{countdown:!1}}},computed:{remainder:function(){var e=this;return Math.max(0,e.activity.prizes.count-e.completedJoiners.total)},my:function(){var e=this,t=e.joinerId,i=e.activityId,o=0,n=!1;return e.joiner&&e.joiner.activities.forEach(function(e){e.joinerId==t?n=!0:e.id==i&&(o=e.joinerId)}),{joinerId:o,self:n}},button:function(){var e=this,t=e.activity,i=Math.round(Date.now()/1e3),o="",n=!1,a=e.completed;return t&&(t.start_time>i?(o="活动未开始",n=!0):t.end_time<i?(o="活动已结束",n=!0):o=e.my.self?"返回我的报名页":e.my.joinerId?"返回我的报名页":"我要参加"),{text:o,disabled:n,completed:a}},countdown:function(){var e=this,t=e.activity,i=Date.now(),o=1e3*t.start_time,n=1e3*t.end_time,a=o<=i;return{time:a?n:o,text:a?"结束":"开始"}},hostinfo:function(){var e=this,t=e.activity.host_info,i=!1;try{t=JSON.parse((0,D.jsonFilter)(e.activity.host_info))}catch(e){console.log("parse host_info error: "+e.message)}return i=!(t.length&&"object"===("undefined"==typeof t?"undefined":n(t))),{content:i?e.activity.host_info:t,is_normal:i}},tellink:function(){return"tel://"+this.activityMobile}},beforeDestroy:function(){this.pageSwitch.countdown&&this.stopCountdown()},methods:{load:function(e){var t=this;Array.isArray(e)&&e.forEach(function(e){return t.joiners.push(e)})},joinerfound:function(){var e=this;e.showDialog({content:'<p><input id="dialog-joiner-mobile" type="text" style="width: 14rem;" placeholder="输入手机号码，回到报名页" maxlength="11"/></p>',minicancel:!0,confirm:function(){var t=$.trim($("#dialog-joiner-mobile").val());return 11!=t.length?void e.$root.$emit("show.snackbar",{color:"accent",message:"请输入正确的手机号码"}):(e.showLoading(),$.post(c.default.activity+"/joinerfound",{mobile:t,activity_id:e.activityId}).then(function(t){var i=t.data?Number(t.data.joiner_id):0;e.hideLoading(),i?(e.joined(i),e.$router.go({name:e.category+"-joiner",params:{id:e.activityId,joinerId:i}})):T.one("hidden.tooltip",function(){showBeforeJoinTiper(e.showDialog,function(){e.visible=!0,setTimeout(function(){e.joining=!0},0)})}).tooltip("show",{content:"没有找到您的报名信息，请先报名参加哟！",style:"info",duration:3e3})}),!0)},button:{confirm:"提交"}})},join:function(e){var t=this,i=t.newJoiner,o=i.name,n=(i.mobile,(0,S.matchJoin)(JSON.stringify({name:o}))),a=t.joinCustomize,s=void 0,c=!0;if(e.preventDefault(),n.length)return void(0,D.showJoinNotice)(t.showDialog);for(s in t.newJoiner)if(a[s]&&a[s].required&&""==$.trim(t.newJoiner[s])){T.tooltip(a[s].name+"不能为空","danger"),c=!1;break}return!!c&&(t.showLoading(),void $.post(r.default.activity.join,$.extend({},t.newJoiner,{activity_id:t.activityId})).then(function(e){var i=e.data?Number(e.data.joiner_id):0;return t.hideLoading(),e.code?(i&&(t.joined(i),t.$router.go({name:t.category+"-joiner",params:{id:t.activityId,joinerId:i}})),void t.$root.$emit("show.snackbar",{color:"accent",message:d.default[e.code]})):void(i&&(t.joined(i),t.showDialog({title:"报名成功",content:'<p style="font-weight: bold;">如何找人帮忙<i class="fa fa-hand-o-down" aria-hidden="true"></i></p>'+t.getShortTip(),confirm:function(){return t.$router.go({name:t.category+"-joiner",params:{id:t.activityId,joinerId:i}}),!0},button:{confirm:"我知道了"}}),t.genShorturl()))}))},joined:function(e){var t=this,i=t.newJoiner,o=i.name,n=i.mobile;t.joining=!1,setTimeout(function(){t.visible=!1},500),t.joinIn({activity:{id:t.activityId,joinerId:e,expires:1e3*t.activity.end_time},mobile:n,name:o})},close:function(e){var t=this;t[e]=!1,setTimeout(function(){t.visible=!1},500)},showSharer:function(){this.$refs.sharer.show()},showqrcode:function(){var e=this;(0,D.displayShareQrcode)({type:this.category||"",name:e.participant?e.participant.name:"",title:e.activity.title,activityId:e.activity.id,joinerId:e.joinerId||0},e.showDialog,e.showLoading,e.hideLoading)},startCountdown:function(){var e=this;e.stopCountdown(),e.$countdown=$(e.$els.countdown).countdown()},stopCountdown:function(){var e=this;e.$countdown&&(e.$countdown.countdown("destroy"),e.$countdown=null)},genShorturl:function(){var e=this,t="#dialog-shorturl",i=e.activity,o=(0,D.generalShareurlV2)(i.share_host,i.id,i.type,i.category,e.joinerId);$.ajax({url:c.default.tools.shorturl+"?url="+encodeURIComponent(o),type:"GET",dataType:"json",success:function(e){var i=$(t);e.code?i.html('<font color="red">生成失败，请关闭弹窗重试</font>'):i.html(e.data.url)},error:function(e,i,o){$(t).html('<font color="red">生成失败，请关闭弹窗重试</font>')}})},getShortTip:function(){var e=this.activity,t={bargain3:"砍价",bargain2:"砍价",daydaysale:"砍价",vote:"加油",star:"摘星星",moon:"集月牙",child:"抢糖果",snowman:"堆雪人",christmasgift:"抢礼物",labourday:"集欢乐值",lantern:"点灯笼",zongzi:"吃粽子",tree:"种树",doubleeleven:"集福",ingots:"抢元宝",fire:"放鞭炮",goldcoin:"抢金币",earth:"关爱地球",nation:"集欢乐值",fish:"钓鱼",watermelon:"摘西瓜"}[e.category];return console.log("short tip category:"+e.category),'<div style="border: 1px dashed #ccc;padding:0.5rem;margin-top:0.5rem;font-size: 0.8rem;text-align: left;"><img src="http://cdn.s.shangjiadao.cn/source/images/bargain2/share_guide_for_joiner.png?3" style="width:100%;"/>'+('<p style="display: inline-block;-webkit-user-select: element;border: 1px dashed #ccc;margin-bottom:0.5rem;padding: 0.8rem;border-radius: 0.2rem;background: #ededed;">'+e.title+"，点击链接帮我"+t+"：<br/>")+'<font id="dialog-shorturl">正在生成您的专属链接，请稍等...</font></p></div>'},bindQrcodeAnimate:function(){setTimeout(function(){var e=$("header").find("a.qrcode");e.length&&setInterval(function(){e.addClass("ani"),setTimeout(function(){e.removeClass("ani")},2e3)},6e3)},500)},showNotice:function(e,t){(0,D.showCreateNotice)(e,t,this.showDialog)},showTimelineWarning:function(e,t){(0,D.showCreateTimelineWarning)(e,t,this.showDialog)}}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(9),n=(0,o.pathify)(window.location.pathname)+"api/";t.default={user:{signIn:n+"v1/user/login",signUp:n+"v1/user/register",resetPassword:n+"v1/user/reset_password",verifyCode:n+"v1/user/verify_code"},activity:{root:n+"v1/activity",vote:n+"v1/activity/vote",join:n+"v1/activity/join",share:n+"v1/activity/share",joiner:n+"v1/activity/joiner",joiners:n+"v1/activity/joiners",ranking:n+"v1/activity/ranking",complete:n+"v1/activity/complete",exchange:n+"v1/activity/exchange",search:n+"v1/activity/search",statistics:n+"v1/activity/statistics"},group:{root:n+"v1/group",order:n+"v1/group/order",pay:n+"v1/group/pay",my:n+"v1/group/mygroup",one:n+"v1/group/onegroup",all:n+"v1/group/allgroups",joiners:n+"v1/group/joiners",complete:n+"v1/group/complete",incomplete:n+"v1/group/incomplete",withdraw:n+"v1/group/withdraw",remove:n+"v1/group/remove"},statistic:{activity:n+"v1/statistic/activity"},complaint:{root:n+"v1/complaint",type:n+"v1/complaint/type"},upload:{signature:n+"v1/upload/signature"},wechat:{access:n+"v1/wechat/access",signature:n+"v1/wechat/signature"}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(10),a=o(n),r=i(26),s=(i(9),$(document.body)),c=$("html"),u="http://cdn.s.shangjiadao.cn/source/mp3/",d=!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);t.default={template:"#musician",vuex:{actions:{showLoading:r.showLoading,hideLoading:r.hideLoading,showDialog:r.showDialog}},props:{autoPlay:{type:Boolean,default:!0},loopPlay:{type:Boolean,default:!0},pause:{type:Boolean,default:!1},activityType:{type:String,default:""},src:{type:String,default:""},editable:{type:Boolean,default:!0},callback:{type:Function,default:function(){return function(){}}},error:{type:Function,default:function(){return function(){}}}},data:function(){return{cached:[],firstTaped:!1,clicked:!1,display:!1}},computed:{},ready:function(){var e=this;e.autoPlay&&e.play(),e.loopPlay&&e.loop(),e.pause&&e.vpause()},beforeDestroy:function(){},methods:{show:function(){var e=this;e.display?e.display=!1:e.display=!0},play:function(){var e=this,t=$("audio",e.$el);$("a.music",e.$el);t.removeClass("off").addClass("on"),d&&!e.firstTaped?c.on("touchstart",function(){e.firstTaped||(e.src&&t[0].play(),e.firstTaped=!0)}):e.src&&t[0].play(),e.src&&e.callback(e.src)},vpause:function(){var e=this,t=$("audio",e.$el),i=$("a.music",e.$el);i.removeClass("on").addClass("off"),e.src&&t[0].pause()},loop:function(){var e=this,t=$("audio",e.$el);t[0].loop=e.loopPlay},getMusicList:function(e){var t=this,i=t.activityType,o=[],n=void 0;if(i=i.split("-"),i.length)for(n=0;n<i.length;n++)"undefined"!=typeof e[i[n]]&&o.push.apply(o,e[i[n]]);return o.length?$.unique(o):(s.tooltip("貌似没找到音乐库哟","info"),[])},selector:function(){var e=this;e.clicked=!0,e.showLoading("正在加载音乐列表..."),$.getJSON(a.default.json.music+"?2"+(new Date).getHours(),function(t){var i=t,o=($("audio",e.$el),e.getMusicList(i)||[]),n=[],a=e.src;if(e.hideLoading(),!o.length)return void(e.src&&e.vpause());e.src&&e.vpause();var r=0,s=o.length,c=void 0,d=void 0;for(n.push('<select id="dialog-music-selector" style="width:90%;height:40px;"><option value="">--请选择音乐--</option>'),r=0;r<s;r++)c=u+o[r].url,d=o[r].name,n.push('<option value="'+c+'" '+(c==e.src?'selected="selected"':"")+">"+(r+1)+"、"+d+"</option>");n.push("</select>"),setTimeout(function(){$("#dialog-music-selector").change(function(){e.src=$(this).val(),e.$nextTick(function(){e.play()})})},500),e.showDialog({title:"选择音乐",button:{confirm:"选好了",cancel:"取消"},style:"text-align: center;",content:n.join(""),cancel:function(){return e.src=a,e.$nextTick(function(){e.play()}),!0},confirm:function(){var t=$("#dialog-music-selector").val();return t?e.src=t:e.src=a,e.$nextTick(function(){e.play()}),!0}})})},toggle:function(){var e=this,t=$("a.music",e.$el);t.hasClass("on")?(e.vpause(),t.removeClass("on").addClass("off")):(e.play(),t.removeClass("off").addClass("on"))},clear:function(){var e=this;e.src="",e.vpause(),e.callback(e.src)},onerror:function(){var e=this;e.hideLoading(),e.src&&(s.tooltip("音乐加载失败，请刷新页面重试","info"),e.vpause(),e.error())},onloadstart:function(){var e=this;!d&&e.src&&e.showLoading("正在拉取音乐...")},oncanplaythrough:function(){var e=this;!d&&e.src&&e.hideLoading()}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(10),a=o(n),r=i(26),s=($(document.body),$(window)),c="http://cdn.s.shangjiadao.cn/source/images/components/foreground/";t.default={template:"#foreground",vuex:{actions:{showLoading:r.showLoading,hideLoading:r.hideLoading,showDialog:r.showDialog}},props:{type:{type:String,default:""},direction:{type:String,default:"down"},editable:{type:Boolean,default:!0},preview:{type:Boolean,default:!1},callback:{type:Function,default:function(){return function(){}}}},data:function(){return{nums:8,display:!1,clicked:!1,directions:{down:"向下",up:"向上"}}},computed:{},ready:function(){var e=this;e.type&&setTimeout(function(){e.play()},100)},beforeDestroy:function(){},methods:{show:function(){var e=this;e.display?e.display=!1:e.display=!0},play:function(){var e=this,t=$(e.$el),i=void 0,o=void 0,n=void 0,a="foreground_piece_style",r=[],c="",u="";e.stop(),e.type&&(setTimeout(function(){for(i=0;i<e.nums;i++)r.push(e._createPiece());t.append(r.join(""))},100),setTimeout(function(){o=document.createElement("style"),o.type="text/css",o.id=a,document.getElementsByTagName("head")[0].appendChild(o),n=s.height()+50,"down"==e.direction?(c="translate(0px, -50px)",u="translate(0px,"+n+"px)"):(c="translate(0px,"+n+"px)",u="translate(0px, -50px)"),o=document.getElementById("foreground_piece_style"),o.innerHTML="@-webkit-keyframes drop{0% {-webkit-transform: "+c+";} 100% {-webkit-transform: "+u+";}}\n@-moz-keyframes drop{0% {-moz-transform: "+c+";} 100% {-moz-transform: "+u+";}}\n@-o-keyframes drop{0% {-o-transform: "+c+";} 100% {-o-transform: "+u+";}}\n@keyframes drop{0% {transform: "+c+";} 100% {transform: "+u+";}}\n"},10))},stop:function(){var e=this,t=$(e.$el),i="foreground_piece_style";t.find(".piece").remove(),$("#"+i).length&&$("#"+i).remove()},selector:function(){var e=this,t=e.type;e.clicked=!0,e.showLoading("正在加载列表..."),$.getJSON(a.default.json.foreground+"?"+(new Date).getSeconds(),function(i){var o=i,n=[],a=e.direction;if(e.hideLoading(),!$.isEmptyObject(o)){var r=(o.length,void 0),s=0,c=void 0,u=e.directions;n.push('<select id="dialog-foreground-direction-selector" style="width:90%;height:40px;margin-bottom: 1rem;"><option value="">--请选择飘落方向--</option>');for(c in u)n.push('<option value="'+c+'" '+(c==a?'selected="selected"':"")+">"+u[c]+"</option>");n.push('</select><input type="hidden" value="'+e.type+'" id="dialog-foreground-type-hidden"><input type="hidden" value="'+e.direction+'" id="dialog-foreground-direction-hidden">'),n.push('<select id="dialog-foreground-selector" style="width:90%;height:40px;"><option value="">--请选择前景特效--</option>');for(r in o)s++,n.push('<option value="'+r+'" '+(r==t?'selected="selected"':"")+">"+o[r]+"</option>");n.push("</select>"),setTimeout(function(){$("#dialog-foreground-direction-selector").change(function(){e.direction=$(this).val(),e.$nextTick(function(){e.play()})}),$("#dialog-foreground-selector").change(function(){return""==$("#dialog-foreground-direction-selector").val()?(e.$root.$emit("show.snackbar",{message:"请先选择飘落方向"}),!0):(e.type=$(this).val(),void e.$nextTick(function(){e.play()}))})},500),e.showDialog({title:"选择前景特效",button:{confirm:"选好了",cancel:"取消"},style:"text-align: center;",content:n.join(""),cancel:function(){return e.type=$("#dialog-foreground-type-hidden").val(),e.direction=$("#dialog-foreground-direction-hidden").val(),e.$nextTick(function(){e.play()}),!0},confirm:function(){var i=$("#dialog-foreground-selector").val();return i?e.type=i:e.type=t,e.$nextTick(function(){e.play(),e.type&&e.callback({type:e.type,direction:e.direction})}),!0}})}})},clear:function(){var e=this;e.type="",e.stop(),e.callback({type:e.type,direction:e.direction})},_randomInteger:function(e,t){return e+Math.floor(Math.random()*(t-e))},_durationValue:function(e){return e+"s"},_randomFloat:function(e,t){return e+Math.random()*(t-e)},_pixelValue:function(e){return e+"px"},_createPiece:function(e){var t=this,i=[],o=[],n="",a=void 0,r=void 0,u=void 0,d=void 0,l=void 0;return n=""+c+t.type+t._randomInteger(1,5)+".png?"+(new Date).getHours(),a=s.width()-100,i.push("position:fixed;top:-50px;left:"+t._pixelValue(t._randomInteger(0,a))+";"),r=Math.random()<.5?"clockwiseSpin":"counterclockwiseSpinAndFlip",i.push("-moz-animation-name:fade, drop;-webkit-animation-name:fade, drop;animation-name:fade, drop;"),o.push("-moz-animation-name:"+r+";-webkit-animation-name:"+r+";animation-name:"+r+";"),u=t._durationValue(t._randomFloat(10,30)),d=t._durationValue(t._randomFloat(4,8)),i.push("-moz-animation-duration:"+u+", "+u+";-webkit-animation-duration:"+u+", "+u+";animation-duration:"+u+", "+u+";"),l=t._durationValue(t._randomFloat(0,2)),i.push("-moz-animation-delay:"+l+", "+l+";-webkit-animation-delay:"+l+", "+l+";animation-delay:"+l+", "+l+";"),o.push("-moz-animation-duration:"+d+";-webkit-animation-duration:"+d+";animation-duration:"+d+";"),['<div style="'+i.join("")+'" class="piece">',' <img style="'+o.join("")+'" src="'+n+'"></div>'].join("")}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(10),a=o(n);i(41);var r=i(12),s=o(r),c=i(26),u=i(9),d=$(document.body),l=($(window),/^image\/\w+/);t.default={template:"#imager",vuex:{getters:{user:function(e){return e.user}},actions:{showLoading:c.showLoading,hideLoading:c.hideLoading,showDialog:c.showDialog}},props:{skin:{type:String,default:""},type:{type:String,default:""},content:{type:Object,default:function(){return{}}},width:{type:String,default:"640"},height:{type:String,default:"360"},autoHeight:{type:Boolean,default:!0},editable:{type:Boolean,default:!1},showUploadNotice:{type:Boolean,default:!1},callback:{type:Function,default:function(){return function(){}}},switcies:{type:Object,default:function(){return{font:!0}}}},data:function(){return{limit:{image:{maxsize:3072,types:""}},imager:{types:[],data:[],d:[]},showImager:!1,hidingImager:!1}},computed:{},ready:function(){},beforeDestroy:function(){},methods:{fail:function(e){var t=this;1102==e.code?this.$router.go({name:"signout"}):1101==e.code?(0,u.showExpireTip)(t.showDialog):d.tooltip(s.default[e.code],"danger"),t.hideLoading()},exchange:function(){var e=this;return e.imager.data.length?void(e.showImager=!0):(e.showLoading("正在加载列表..."),void $.getJSON(a.default.json.imager+"?"+(new Date).getHours(),function(t){e._setImagerData(t),e.showImager=!0,e.hideLoading()}))},closeImager:function(){var e=this;e.hidingImager=!0,setTimeout(function(){e.showImager=!1,e.hidingImager=!1},600)},selectType:function(e){var t=this,i=Number(e.target.dataset.index),o=t.imager.data;o[i]&&($(e.target).addClass("cur").parent().siblings().find("a").removeClass("cur"),t.imager.d=o[i].data)},selectImager:function(e){var t=this,i=Number(e.target.dataset.index),o=t.imager.d,n=void 0;o[i]&&(n=o[i],t.content.src=n.src,n.font&&(console.log(n.font),console.log(t.content.font),t.content.font?t.content.font=$.extend(!0,{},t.content.font,n.font):t.content.font=n.font),$(e.target).addClass("cur").siblings().removeClass("cur"),t._callback(),t.closeImager())},upload:function(e){var t=this,i=e.target,o=i.files?i.files[0]:null;if(o&&(l.test(o.type)||""==o.type)){var n=o.size/1024;if(n>t.limit.image.maxsize)return t.showDialog({title:"提示",content:"图片大小请控制在 "+Math.floor(t.limit.image.maxsize)+" KB 以内",confirm:!0}),!1;t.showLoading("正在拼命上传..."),$.get(a.default.uploadSignature,{token:t.user.token,type:2},function(e){return e.code?void t.fail(e):void(e.data&&!function(){var i=e.data,n=""+i.dir+(0,u.getRandomFilename)(o.name),a=$("#imager-filer");a.uploader({name:"file",url:i.host,data:{key:n,policy:i.policy,OSSAccessKeyId:i.accessid,signature:i.signature},done:function(){t.content.src=n,t.hideLoading(),t._callback()},fail:function(){d.tooltip("图片上传失败","danger"),t.hideLoading()},uploaded:function(){a.uploader("destroy")}}).uploader("upload")}())})}else d.tooltip("请选择正确的图片文件","notice")},_setImagerData:function(e){var t=this,i=t.type,o=[],n=[],a=void 0;if(i=i.split("-"),i.length)for(a=0;a<i.length;a++)"undefined"!=typeof e[i[a]]&&(o.push(e[i[a]]),n.push({key:i[a],name:e[i[a]].name}));return o.length?(t.imager.data=o,t.imager.types=n,void(t.imager.d=o[0].data)):(d.tooltip("貌似没找到素材","info"),[])},_callback:function(){var e=this;"function"==typeof e.callback&&e.callback(e.content)},showNotice:function(){var e=this;e.showUploadNotice&&alert("严禁植入二维码，一经发现直接删除活动")}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e){var t=!1;return s.forEach(function(i){if(e==i)return t=!0,!1}),t}Object.defineProperty(t,"__esModule",{value:!0}),t.matchCases=n;var a=i(66),r=o(a),s=r.default;t.default=s},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=["9998"]},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(61),a=o(n),r=i(57),s=o(r);t.default={data:function(){return{carousel:null,completedJoiners:{total:0,list:[]}}},beforeDestroy:function(){this.stopCarousel()},methods:{loadCompletedJoiners:function(e){var t=this;$.ajax(a.default.activity.complete,{data:{activity_id:e},success:function(e){e.data&&(t.completedJoiners=e.data,t.$nextTick(function(){t.startCarousel()}))}})},startCarousel:function(){var e=this;e.stopCarousel(),e.carousel=new s.default(e.$els.carousel,{duration:3e3})},stopCarousel:function(){var e=this;e.carousel&&(e.carousel.stop(),e.carousel=null)}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),a=o(n);t.default={template:"#vote",data:function(){return $.extend({voting:!1},a.default)}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{
value:!0}),t.default={category:"vote",code:1,name:"超级加油"}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(10),a=o(n),r=i(69),s=(o(r),i(12)),c=o(s),u=i(60),d=o(u),l=i(67),f=o(l),h=i(68),p=o(h),m=i(9),g=$(document.body);t.default={mixins:[d.default,f.default,p.default],route:{data:function(){var e=this;e.my.self||e.$nextTick(function(){e.vote()})}},data:function(){return{personal:!0}},methods:{click:function(){var e=this,t=e.my.joinerId;e.my.self?e.showSharer():t?e.$router.go({name:"vote-joiner",params:{id:e.activityId,joinerId:t}}):(0,m.showBeforeJoinTiper)(e.showDialog,function(){e.visible=!0,setTimeout(function(){e.joining=!0},0)})},vote:function(){var e=this,t=e.joinerId,i=!1,o=0;return e.voter&&(e.voter.joiners.forEach(function(n){n.id==t&&(i=!0,e.my.self&&n.next_vote_date&&(o=n.next_vote_date,o<=Date.now()/1e3&&(i=!1)))}),i)?(e.showDialog({title:"温馨提示",content:e.my.self?"你今天已经加过了[自己每天可以加一点]"+e.getShortTip():"您已经帮TA加过了！",confirm:!0}),void(e.my.self&&e.genShorturl())):(e.showLoading(),void $.ajax(a.default.activityVote,{method:"POST",data:{joiner_id:t,open_id:e.visitor?e.visitor.openId:"wx"+Date.now(),next_vote_date:o},success:function(i){return i.code?void g.tooltip(c.default[i.code],"danger"):(e.participant.vote_count++,e.voteIn({joiner:{id:t,next_vote_date:i.data.next_vote_date,expires:1e3*e.activity.end_time}}),void(e.my.self?(e.genShorturl(),e.showDialog({title:"加油成功",content:'<p><i class="fa fa-smile-o" aria-hidden="true"></i> 哟，厉害了，成功为自己加油</p><p style="font-weight: bold;">如何找人帮忙<i class="fa fa-hand-o-down" aria-hidden="true"></i></p>'+e.getShortTip(),confirm:function(){return!0},button:{confirm:"我知道了"}})):(e.visible=!0,setTimeout(function(){e.voting=!0},0))))},complete:function(){e.hideLoading()}}))}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=i(72),r=o(a),s=i(69),c=o(s),u=i(10),d=o(u),l=i(12),f=o(l),h=i(73),p=o(h),m=i(74),g=o(m),v=i(62),y=o(v),w=i(75),_=o(w),b=i(77),x=o(b),j=i(63),D=o(j),k=i(78),S=o(k),T=i(76),z=o(T),I=i(51),M=o(I),L=i(52),C=i(9),O=i(26),P=$(document.body);t.default={template:"#vote-editor",components:{Uploader:p.default,Userguide:g.default,Musician:y.default,miniEditor:_.default,miniLogin:x.default,Foreground:D.default,joinCustomize:S.default,Sharer:M.default},vuex:{getters:{user:function(e){return e.user}},actions:{showDialog:O.showDialog,showLoading:O.showLoading,hideLoading:O.hideLoading,pageIn:O.pageIn,toggleSharable:O.toggleSharable}},route:{data:function(e){function t(t){var o="超级加油",n="制作";t&&(o=t.title,n="clone"==i.$route.query.action?"复制":"编辑"),i.pageIn({title:"【"+n+"】"+o}),i.$nextTick(function(){i.initPicker()}),e.next({activated:!0})}var i=this,o=i.$route,a=Number(o.params.id)||0;return a?(i.showLoading(),void $.ajax(d.default.activity+"/"+a,{data:{token:i.user.token},dataType:"text",success:function(a){if(a=$.parseJSON(a),a.code)return void i.fail(a);if(a.data){var r=a.data.activity;r.user_id!=i.user.id&&e.abort(),"clone"==o.query.action&&(r.id="");var s={};try{s=JSON.parse(r.prizes),Array.isArray(s)&&!function(){var e=[],t="根据所得票数排名，可获得以下奖品";s.forEach(function(i){t+="\n\n"+i.name+"（"+i.count+"名）\n"+i.desc,i.image&&e.push(i.image)}),s={text:t,images:e}}()}catch(e){console.log(e.message)}s.images.forEach(function(e){e&&i.prizes.uploader.images.push({suffix:"image/resize,w_640/quality,q_40",url:e})});var c=r.host_img.split(",");c.forEach(function(e){e&&i.intro.uploader.images.push({suffix:"image/resize,w_640/quality,q_40",url:e})});var u=r.host_info;try{u=r.host_info&&JSON.parse((0,C.jsonFilter)(r.host_info))}catch(e){console.log("parse host_info error: "+e.message)}u.length&&"object"===("undefined"==typeof u?"undefined":n(u))&&(r.host_info=u);var d={};try{d=r.others&&JSON.parse((0,C.jsonFilter)(r.others)),d="object"===("undefined"==typeof d?"undefined":n(d))?$.extend(i.activity.others,d):i.activity.others}catch(e){console.log("parse others error: "+e.message)}r.others=d,r.prizes=s,r.host_img=c,i.activity=r,t(r)}},error:function(){P.tooltip("活动加载失败","danger")},complete:function(){i.hideLoading()}})):void t()}},data:function(){var e=this,t=new Date,i=t.getFullYear(),o=t.getMonth(),n=t.getDate(),a=new Date(i,o,n),r=new Date(i,o,n+3);return{activated:!1,expired:!1,activity:{id:"",type:1,title:"超级加油送好礼，免费赢取跆拳道课程一个月",start_time:a.valueOf()/1e3,end_time:r.valueOf()/1e3,rules:"1.点击上方按钮“我要参加”参加活动。\n\n2.自己每天可以点击【自己加一点】，增加一点油量。\n\n3.别人可以帮忙增加油量。\n\n",prizes:{text:"根据所得点数排名，可获得以下奖品\n\n一等奖（1名）\n奖励XXX奖品\n\n二等奖（10名）\n奖励XXX奖品\n\n三等奖（100名）\n奖励XXX奖品\n\n点数超过48点，可获得以下奖品：\n\n100元学费券一张，小礼物一个。",images:[]},receive_info:"领奖时间：\n领奖地址：\n领奖电话："+e.user.mobile,host_info:"",host_img:[],others:{musician:"",foreground:{type:"",direction:""},section_text:{receive_info:"领奖信息",intro:"机构介绍"},join_customize:{customize_1:{name:"",required:0},customize_2:{name:"",required:0},customize_3:{name:"",required:0}}}},intro:{uploaded:!1,uploader:{error:function(){e.submitting=!1,P.tooltip("机构介绍图片上传失败","danger")},images:[],success:function(t){e.activity.host_img=t,e.intro.uploaded=!0,e.publish()}},minieditor:{uploader:{maxlength:10,placeholder:"（点击选择图片，不上传则不显示）",description:"添加图片（最多添加 10 张图片）",error:function(){e.submitting=!1,$("body").tooltip("机构介绍图片上传失败","danger")},success:function(t){e.activity.host_info=t,e.intro.uploaded=!0,e.publish()}},texter:{placeholder:"此处可修改字体样式：加粗、斜体、下划线、字体大小颜色...",description:"添加文本（最多添加 10 个文本内容）",maxlength:10},video:{placeholder:"请输入视频地址【支持优酷、腾讯视频】",description:"添加视频（最多添加 5 个视频）",maxlength:5}}},editable:!0,prizes:{uploaded:!1,uploader:{error:function(){e.submitting=!1,P.tooltip("奖品图片上传失败","danger")},images:[],success:function(t){e.activity.prizes.images=t,e.prizes.uploaded=!0,e.publish()}}},others:{musician:{callback:function(t){e.activity.others.musician=t}},foreground:{callback:function(t){e.activity.others.foreground=t}},join_customize:{callback:function(t){e.activity.others.join_customize=t}}},submitting:!1,sharer:null}},computed:{isNormalHostInfo:function(){var e=this,t=e.activity;return t.id>0&&(""!==t.host_info&&"object"!=n(t.host_info)||$.trim(t.host_img).length>0)}},ready:function(){var e=this;"clone"==e.$route.query.action&&(0,C.showCloneTiper)(e.showDialog),setTimeout(function(){(0,z.default)($("textarea",e.$el))},2e3)},beforeDestroy:function(){var e=this;e.startDatePicker&&e.startDatePicker.destroy(),e.endDatePicker&&e.endDatePicker.destroy()},methods:{initPicker:function(){var e=this,t=$(e.$el),i=t.find(".start-date"),o=t.find(".end-date"),n={format:"YYYY-MM-DD HH:mm",increment:{minute:10},text:{cancel:"取消",confirm:"确认"},translate:function(e,t){var i={year:"年",month:"月",day:"日",hour:"点",minute:"分"};return Number(t)+i[e]}},a=$.extend(!0,{},n,{text:{title:"请选择活动开始时间"}}),s=$.extend(!0,{},n,{text:{title:"请选择活动结束时间"}}),c=new r.default(i[0],a),u=new r.default(o[0],s);e.startDatePicker=c,e.endDatePicker=u,i.on("change",function(){var t=c.getDate();e.activity.start_time=Math.round(t.getTime()/1e3),e.activity.end_time<=e.activity.start_time&&(t.setDate(t.getDate()+1),e.activity.end_time=Math.round(t.getTime()/1e3),e.$nextTick(function(){return u.update()}))}),o.on("change",function(t){var i=Math.round(u.getDate().getTime()/1e3);return i<=e.activity.start_time?void t.preventDefault():void(e.activity.end_time=i)})},toggle:function(){var e=this;e.editable=!e.editable,document.body.scrollTop=0,setTimeout(function(){(0,z.default)($("textarea",e.$el))},2e3)},fail:function(e,t){var i=this,o=e.code;1100==o?(0,C.showKickedOffline)(e.data.time,e.data.ip,i.showDialog,function(){i.expired=!0}):1101==o?(0,C.showExpireTip)(i.showDialog):1102==o?i.expired=!0:i.$root.$emit("show.snackbar",{color:"accent",message:f.default[o]}),i.hideLoading(),t&&t()},submit:function(e){var t=this,i=t.activity;if(e.preventDefault(),!i.title)return void t.showDialog({title:"提示",content:"请设置活动标题",confirm:!0});if(!i.prizes.text)return void t.showDialog({title:"提示",content:"请设置奖项信息",confirm:!0});if(!i.receive_info)return void t.showDialog({title:"提示",content:"请设置领奖信息",confirm:!0});var o=!1,n=2;if($.each(i.others.join_customize,function(e,i){if(n++,i.required&&""==$.trim(i.name))return t.showDialog({title:"提示",content:"【信息收集设置】第 "+n+" 个信息项由于设置为必填项，因此名称不能为空！",confirm:!0}),void(o=!0)}),!o){var a=(0,L.match)(JSON.stringify(i));return a.length?void t.showDialog({title:"提示",content:"发现微信违规词："+a.join("、")+"，请修改后再发布！",confirm:!0}):void(t.submitting||(t.submitting=!0,t.showLoading("正在提交数据..."),$.ajax(d.default.uploadSignature,{method:"get",data:{token:t.user.token,type:2},dataType:"json",success:function(e){return e.code?(t.submitting=!1,t.hideLoading(),void t.fail(e)):(t.showLoading("正在上传图片，请勿离开或关闭页面"),void(e.data&&t.$root.$emit("upload.uploader",e.data)))},error:function(){t.submitting=!1,t.hideLoading(),t.$root.$emit("show.snackbar",{color:"accent",message:"保存失败，请检查网络是否正常连接！"})}})))}},publish:function(){var e=this;if(e.prizes.uploaded&&e.intro.uploaded&&!e.publishing){e.sharer=null,e.publishing=!0,e.showLoading("正在提交数据，请勿离开或关闭页面");var t=(0,C.expressionFilter)($.extend(!0,{},e.activity));$.ajax(d.default.activity,{method:t.id?"put":"post",data:$.extend(t,{host_img:t.host_img.join(),prizes:JSON.stringify(t.prizes),others:JSON.stringify(t.others),token:e.user.token}),success:function(i){return i.code?void e.fail(i):void P.one("hidden.tooltip",function(){e.sharer={autoShare:!1,autoShow:!0,data:$.extend(t,{category:c.default.category,id:t.id||i.data.id}),desc:t.share_content,imgUrl:t.share_img,title:t.share_title}}).tooltip("show",{content:"活动保存成功",style:"success",duration:1e3})},error:function(){P.tooltip("活动发布失败","danger")},complete:function(){e.submitting=!1,e.publishing=!1,e.hideLoading()}})}}}}},function(e,t,i){!function(t,i){e.exports=i()}(this,function(){return function(e){function t(o){if(i[o])return i[o].exports;var n=i[o]={exports:{},id:o,loaded:!1};return e[o].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),s=i(1),c=n(s),u=i(2),d=n(u),l=i(3),f=n(l),h=i(5),p=n(h),m=i(6),g=n(m),v=i(7),y=n(v),w=i(4),_=o(w),b={},x=/\{\{\s*(\w+)\s*\}\}/g,j=/input|textarea/i,$=void 0,D=function(){function e(t,i){a(this,e);var o=this;i=_.isPlainObject(i)?i:{},i.language&&(i=_.extend(!0,{},b[i.language],i)),o.element=t,o.options=_.extend(!0,{},c.default,i),o.shown=!1,o.init()}return r(e,[{key:"init",value:function(){var e=this,t=e.element;if(!_.getData(t,"picker")){_.setData(t,"picker",e);var i=e.options,o=j.test(t.tagName),n=i.inline&&(i.container||!o),a=document.createElement("div");a.insertAdjacentHTML("afterbegin",d.default.replace(x,function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];return i.text[t[1]]}));var r=a.getElementsByClassName("picker")[0],s=r.getElementsByClassName("picker-grid")[0],c=i.container;"string"==typeof c&&(c=document.querySelector(c)),n?(_.addClass(r,"picker-open"),_.addClass(r,"picker-opened"),c||(c=t)):(e.scrollbarWidth=window.innerWidth-document.body.clientWidth,_.addClass(r,"picker-fixed"),c||(c=document.body)),e.isInput=o,e.inline=n,e.container=c,e.picker=r,e.grid=s,e.cell=null,e.format=_.parseFormat(i.format);var u=e.getValue(),l=e.parseDate(i.date||u);e.date=l,e.initialDate=new Date(l),e.initialValue=u,e.data={};var f=Number(i.rows);f%2||(f+=1),i.rows=f||5,_.addClass(s,f>1?"picker-multiple":"picker-single");var h=i.increment;_.isPlainObject(h)||(h={year:h,month:h,day:h,hour:h,minute:h,second:h,millisecond:h}),e.format.tokens.forEach(function(t){var o=_.tokenToType(t),n=document.createElement("div"),a=document.createElement("ul"),r={digit:t.length,increment:Math.abs(Number(h[o]))||1,list:a,max:1/0,min:-(1/0),index:Math.floor((i.rows+2)/2),offset:0};switch(t.charAt(0)){case"Y":2===r.digit&&(r.max=99,r.min=0);break;case"M":r.max=11,r.min=0,r.offset=1,3===r.digit?r.aliases=i.monthsShort:4===r.digit&&(r.aliases=i.months);break;case"D":r.max=function(){return _.getDaysInMonth(l.getFullYear(),l.getMonth())},r.min=1;break;case"H":r.max=23,r.min=0;break;case"m":r.max=59,r.min=0;break;case"s":r.max=59,r.min=0;break;case"S":r.max=999,r.min=0}_.setData(n,"type",o),_.setData(n,"token",t),_.addClass(a,"picker-list"),_.addClass(n,"picker-cell"),_.addClass(n,"picker-"+o+"s"),n.appendChild(a),s.appendChild(n),e.data[o]=r,e.render(o)}),n&&_.empty(c),c.appendChild(r),e.bind()}}}],[{key:"noConflict",value:function(){return window.Picker=$,e}},{key:"setDefaults",value:function(e){e=_.isPlainObject(e)?e:{},e.language&&(e=_.extend(!0,{},b[e.language],e)),_.extend(!0,c.default,e)}}]),e}();_.extend(D.prototype,f.default),_.extend(D.prototype,p.default),_.extend(D.prototype,g.default),_.extend(D.prototype,y.default),D.languages=b,"undefined"!=typeof window&&($=window.Picker,window.Picker=D),t.default=D},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={container:null,date:null,format:"YYYY-MM-DD HH:mm",increment:1,inline:!1,language:"",months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],translate:function(e,t){return t},rows:5,text:{title:"Pick a date / time",cancel:"Cancel",confirm:"OK"},show:null,shown:null,hide:null,hidden:null,pick:null}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default='<div class="picker" data-action="hide"><div class="picker-content"><div class="picker-header"><h4 class="picker-title">{{ title }}</h4><button data-action="hide" class="picker-close" type="button">&times;</button></div><div class="picker-body"><div class="picker-grid"></div></div><div class="picker-footer"><button class="picker-cancel" data-action="hide" type="button">{{ cancel }}</button><button class="picker-confirm" data-action="pick" type="button">{{ confirm }}</button></div></div></div>'},function(e,t,i){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0});var n=i(4),a=o(n),r="mousedown touchstart pointerdown MSPointerDown",s="mousemove touchmove pointermove MSPointerMove",c="mouseup touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel",u="keydown",d="wheel",l="click",f="focus",h="show",p="shown",m="hide",g="hidden",v="pick";t.default={bind:function(){var e=this,t=e.element,i=e.options,o=e.picker,n=e.grid;a.isFunction(i.show)&&a.addListener(t,h,i.show),a.isFunction(i.shown)&&a.addListener(t,p,i.shown),a.isFunction(i.hide)&&a.addListener(t,m,i.hide),a.isFunction(i.hidden)&&a.addListener(t,g,i.hidden),a.isFunction(i.pick)&&a.addListener(t,v,i.pick),a.addListener(t,f,e.onFocus=e.focus.bind(e)),a.addListener(t,l,e.onFocus),a.addListener(o,l,e.onClick=e.click.bind(e)),a.addListener(n,d,e.onWheel=e.wheel.bind(e)),a.addListener(n,r,e.onMouseDown=e.mousedown.bind(e)),a.addListener(document,s,e.onMouseMove=e.mousemove.bind(e)),a.addListener(document,c,e.onMouseUp=e.mouseup.bind(e)),a.addListener(document,u,e.onKeyDown=e.keydown.bind(e))},unbind:function(){var e=this,t=e.element,i=e.options,o=e.picker,n=e.grid;a.isFunction(i.show)&&a.removeListener(t,h,i.show),a.isFunction(i.shown)&&a.removeListener(t,p,i.shown),a.isFunction(i.hide)&&a.removeListener(t,m,i.hide),a.isFunction(i.hidden)&&a.removeListener(t,g,i.hidden),a.isFunction(i.pick)&&a.removeListener(t,v,i.pick),a.removeListener(t,f,e.onFocus),a.removeListener(t,l,e.onFocus),a.removeListener(o,l,e.onClick),a.removeListener(n,d,e.onWheel),a.removeListener(n,r,e.onMouseDown),a.removeListener(document,s,e.onMouseMove),a.removeListener(document,c,e.onMouseUp),a.removeListener(document,u,e.onKeyDown)}}},function(e,t){"use strict";function i(e){return M.call(e).slice(8,-1).toLowerCase()}function o(e){return"object"===("undefined"==typeof e?"undefined":S(e))&&null!==e}function n(e){return"function"==typeof e}function a(e){return"number"==typeof e&&!isNaN(e)}function r(e){return"date"===i(e)}function s(e){return r(e)&&"Invalid Date"!==e.toString()}function c(e){return e%4===0&&e%100!==0||e%400===0}function u(e){if(!o(e))return!1;try{var t=e.constructor,i=t.prototype;return t&&i&&L.call(i,"isPrototypeOf")}catch(e){return!1}}function d(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var o=t[0]===!0,n=o?t[1]:t[0];return t.length>1&&(t.shift(),t.forEach(function(e){Object.keys(e).forEach(function(t){o&&u(n[t])?d(!0,n[t],e[t]):n[t]=e[t]})})),n}function l(e,t){return e.classList?e.classList.contains(t):e.className.indexOf(t)>-1}function f(e,t){if(e.classList)return void e.classList.add(t);var i=e.className.trim();i?i.indexOf(t)<0&&(e.className=i+" "+t):e.className=t}function h(e,t){if(e.classList)return void e.classList.remove(t);var i=e.className;i.indexOf(t)>-1&&(e.className=i.replace(t,"").trim())}function p(e,t,i){i?f(e,t):h(e,t)}function m(e){return e.replace(I,"$1-$2").toLowerCase()}function g(e,t){return o(e[t])?e[t]:e.dataset?e.dataset[t]:e.getAttribute("data-"+m(t))}function v(e,t,i){o(i)?e[t]=i:e.dataset?e.dataset[t]=i:e.setAttribute("data-"+m(t),i)}function y(e,t){o(e[t])?delete e[t]:e.dataset?delete e.dataset[t]:e.removeAttribute("data-"+m(t))}function w(e,t,i){var o=t.trim().split(T);return o.length>1?void o.forEach(function(t){return w(e,t,i)}):void(e.removeEventListener?e.removeEventListener(t,i,!1):e.detachEvent&&e.detachEvent("on"+t,i))}function _(e,t,i,o){var n=t.trim().split(T),a=i;return n.length>1?void n.forEach(function(t){return _(e,t,i)}):(o&&(i=function(){for(var o=arguments.length,n=Array(o),r=0;r<o;r++)n[r]=arguments[r];return w(e,t,i),a.apply(e,n)}),void e.addEventListener(t,i,!1))}function b(e,t,i){var o=void 0;return"function"==typeof Event&&"function"==typeof CustomEvent?o=void 0===i?new Event(t,{bubbles:!0,cancelable:!0}):new CustomEvent(t,{detail:i,bubbles:!0,cancelable:!0}):void 0===i?(o=document.createEvent("Event"),o.initEvent(t,!0,!0)):(o=document.createEvent("CustomEvent"),o.initCustomEvent(t,!0,!0,i)),e.dispatchEvent(o)}function x(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function j(e,t){return[31,c(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]}function $(e){var t=arguments.length<=1||void 0===arguments[1]?1:arguments[1],i=String(Math.abs(e)),o=i.length,n="";for(e<0&&(n+="-");o++<t;)n+="0";return n+i}function D(e){return{Y:"year",M:"month",D:"day",H:"hour",m:"minute",s:"second",S:"millisecond"}[e.charAt(0)]}function k(e){var t=e.match(z);if(!t)throw new Error("Invalid format");var i={tokens:t};return t.forEach(function(e){i[D(e)]=e}),i}Object.defineProperty(t,"__esModule",{value:!0});var S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};t.typeOf=i,t.isObject=o,t.isFunction=n,t.isNumber=a,t.isDate=r,t.isValidDate=s,t.isLeapYear=c,t.isPlainObject=u,t.extend=d,t.hasClass=l,t.addClass=f,t.removeClass=h,t.toggleClass=p,t.toHyphenCase=m,t.getData=g,t.setData=v,t.removeData=y,t.removeListener=w,t.dispatchEvent=b,t.empty=x,t.getDaysInMonth=j,t.addLeadingZero=$,t.tokenToType=D,t.parseFormat=k;var T=/\s+/,z=/(Y|M|D|H|m|s|S)+/g,I=/([a-z\d])([A-Z])/g,M=Object.prototype.toString,L=Object.prototype.hasOwnProperty;t.addListener=_},function(e,t,i){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0});var n=i(4),a=o(n);t.default={focus:function(e){e.target.blur(),this.show()},click:function(e){var t=a.getData(e.target,"action");"hide"===t?this.hide():"pick"===t&&this.pick()},wheel:function(e){var t=this,i=e.target;if(i!==t.grid){e.preventDefault(),"li"===i.tagName.toLowerCase()&&(i=i.parentNode),"ul"===i.tagName.toLowerCase()&&(i=i.parentNode);var o=a.getData(i,"type");e.deltaY<0?t.prev(o):t.next(o)}},mousedown:function(e){var t=this,i=e.touches,o=e.target;if(o!==t.grid){"li"===o.tagName.toLowerCase()&&(o=o.parentNode),"ul"===o.tagName.toLowerCase()&&(o=o.parentNode);var n=o.firstElementChild,r=n.firstElementChild.offsetHeight;t.cell={elem:o,list:n,moveY:0,maxMoveY:r,minMoveY:r/2,startY:i?i[0].pageY:e.pageY,type:a.getData(o,"type")}}},mousemove:function(e){var t=this,i=t.cell;if(i){e.preventDefault();var o=e.touches,n=o?o[0].pageY:e.pageY,a=i.moveY+(n-i.startY);if(i.startY=n,i.moveY=a,Math.abs(a)<i.maxMoveY)return void(i.list.style.top=a+"px");i.list.style.top=0,i.moveY=0,a>=i.maxMoveY?t.prev(i.type):a<=-i.maxMoveY&&t.next(i.type)}},mouseup:function(){var e=this,t=e.cell;t&&(t.list.style.top=0,t.moveY>=t.minMoveY?e.prev(t.type):t.moveY<=-t.minMoveY&&e.next(t.type),e.cell=null)},keydown:function(e){var t=this;!t.shown||"Escape"!==e.key&&27!==e.keyCode||t.hide()}}},function(e,t,i){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0});var n=i(4),a=o(n);t.default={render:function(e){var t=this;if(!e)return void t.format.tokens.forEach(function(e){return t.render(a.tokenToType(e))});var i=t.options,o=t.data[e],n=t.current(e),r=a.isFunction(o.max)?o.max():o.max,s=a.isFunction(o.min)?o.min():o.min,c=0;isFinite(r)&&(c=s>0?r:r+1),a.empty(o.list),o.current=n;for(var u=0;u<i.rows+2;u++){var d=document.createElement("li"),l=u-o.index,f=n+l*o.increment;c&&(f%=c,f<s&&(f+=c)),d.textContent=i.translate(e,o.aliases?o.aliases[f]:a.addLeadingZero(f+o.offset,o.digit)),a.setData(d,"name",e),a.setData(d,"value",f),a.addClass(d,"picker-item"),0===l&&(a.addClass(d,"picker-picked"),o.item=d),o.list.appendChild(d)}},current:function(e,t){var i=this,o=i.date,n=i.format,r=n[e];switch(r.charAt(0)){case"Y":return a.isNumber(t)&&(o.setFullYear(2===r.length?2e3+t:t),n.month&&i.render(a.tokenToType(n.month)),n.day&&i.render(a.tokenToType(n.day))),o.getFullYear();case"M":return a.isNumber(t)&&(o.setMonth(t),n.day&&i.render(a.tokenToType(n.day))),o.getMonth();case"D":return a.isNumber(t)&&o.setDate(t),o.getDate();case"H":return a.isNumber(t)&&o.setHours(t),o.getHours();case"m":return a.isNumber(t)&&o.setMinutes(t),o.getMinutes();case"s":return a.isNumber(t)&&o.setSeconds(t),o.getSeconds();case"S":return a.isNumber(t)&&o.setMilliseconds(t),o.getMilliseconds()}return o},getValue:function(){var e=this,t=e.element;return e.isInput?t.value:t.textContent},setValue:function(e){var t=this,i=t.element;t.isInput?i.value=e:t.options.container&&(i.textContent=e)}}},function(e,t,i){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0});var n=i(4),a=o(n);t.default={show:function(){var e=this,t=e.element,i=e.picker;if(e.inline||e.shown)return e;if(a.dispatchEvent(t,"show")===!1)return e;e.shown=!0;var o=document.body.style;return o.overflow="hidden",o.paddingRight=e.scrollbarWidth+"px",a.addClass(i,"picker-open"),i.offsetWidth,a.addClass(i,"picker-opened"),setTimeout(function(){a.dispatchEvent(t,"shown")},300),e},hide:function(){var e=this,t=e.element,i=e.picker;return e.inline||!e.shown?e:a.dispatchEvent(t,"hide")===!1?e:(e.shown=!1,a.removeClass(i,"picker-opened"),setTimeout(function(){var e=document.body.style;a.removeClass(i,"picker-open"),e.overflow="auto",e.paddingRight=0,a.dispatchEvent(t,"hidden")},300),e)},prev:function e(t){var i=this,o=i.options,n=i.format[t],r=i.data[t],s=r.list,c=s.lastElementChild,u=a.isFunction(r.max)?r.max():r.max,d=a.isFunction(r.min)?r.min():r.min,e=r.item.previousElementSibling,l=Number(a.getData(s.firstElementChild,"value"))-r.increment;return l<d?l=u:l>u&&(l=d),c.textContent=o.translate(t,r.aliases?r.aliases[l]:a.addLeadingZero(l+r.offset,n.length)),a.setData(c,"value",l),e&&(a.removeClass(r.item,"picker-picked"),a.addClass(e,"picker-picked"),r.item=e),s.insertBefore(c,s.firstElementChild),r.current=Number(a.getData(r.item,"value")),i.current(t,r.current),i.inline&&o.container&&i.pick(),i},next:function e(t){var i=this,o=i.options,n=i.format[t],r=i.data[t],s=r.list,c=s.firstElementChild,u=a.isFunction(r.max)?r.max():r.max,d=a.isFunction(r.min)?r.min():r.min,e=r.item.nextElementSibling,l=Number(a.getData(s.lastElementChild,"value"))+r.increment;return l<d?l=u:l>u&&(l=d),c.textContent=o.translate(t,r.aliases?r.aliases[l]:a.addLeadingZero(l+r.offset,n.length)),a.setData(c,"value",l),s.appendChild(c),e&&(a.removeClass(r.item,"picker-picked"),a.addClass(e,"picker-picked"),r.item=e),r.current=Number(a.getData(r.item,"value")),i.current(t,r.current),i.inline&&o.container&&i.pick(),i},pick:function(){var e=this,t=e.element;if(a.dispatchEvent(t,"pick")===!1)return e;var i=e.formatDate(e.date);return e.setValue(i),e.isInput&&a.dispatchEvent(t,"change")===!1&&e.reset(),e.hide(),e},getDate:function(e){var t=this,i=t.date;return e?t.formatDate(i):new Date(i)},setDate:function(e){var t=this;return e&&(t.date=t.parseDate(e),t.render()),t},update:function(){var e=this;return e.date=e.parseDate(e.getValue()),e.render(),e},reset:function(){var e=this;return e.setValue(e.initialValue),e.date=new Date(e.initialDate),e.render(),e},parseDate:function(e){var t=this,i=t.options,o=t.format,n=[];if(a.isDate(e))return new Date(e);if("string"==typeof e){var r=i.months.join("|"),s=i.monthsShort.join("|");if(n=e.match(new RegExp("("+r+"|"+s+"|\\d+)","g")),!n||n.length!==o.tokens.length)return new Date}var c=new Date;return n.forEach(function(t,n){var a=o.tokens[n],r=Number(t);switch(a){case"YYYY":case"YYY":case"Y":c.setFullYear("-"===e.substr(e.indexOf(t)-1,1)?-r:r);break;case"YY":c.setFullYear(2e3+r);break;case"MMMM":c.setMonth(i.months.indexOf(t));break;case"MMM":c.setMonth(i.monthsShort.indexOf(t));break;case"MM":case"M":c.setMonth(r-1);break;case"DD":case"D":c.setDate(r);break;case"HH":case"H":c.setHours(r);break;case"mm":case"m":c.setMinutes(r);break;case"ss":case"s":c.setSeconds(r);break;case"SSS":case"SS":case"S":c.setMilliseconds(r)}}),c},formatDate:function(e){var t=this,i=t.options,o=t.format,n="";return a.isValidDate(e)&&!function(){var t=e.getFullYear(),r=e.getMonth(),s=e.getDate(),c=e.getHours(),u=e.getMinutes(),d=e.getSeconds(),l=e.getMilliseconds();n=i.format,o.tokens.forEach(function(e){var o="";switch(e){case"YYYY":case"YYY":case"Y":o=a.addLeadingZero(t,e.length);break;case"YY":o=a.addLeadingZero(t%100,2);break;case"MMMM":o=i.months[r];break;case"MMM":o=i.monthsShort[r];break;case"MM":case"M":o=a.addLeadingZero(r+1,e.length);break;case"DD":case"D":o=a.addLeadingZero(s,e.length);break;case"HH":case"H":o=a.addLeadingZero(c,e.length);break;case"mm":case"m":o=a.addLeadingZero(u,e.length);break;case"ss":case"s":o=a.addLeadingZero(d,e.length);break;case"SSS":case"SS":case"S":o=a.addLeadingZero(l,e.length)}n=n.replace(e,o)})}(),n},destroy:function(){var e=this,t=e.element,i=e.picker;return e.unbind(),a.removeData(t,"picker"),i.parentNode.removeChild(i),e}}}])})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i(41);var o=i(26),n=i(9),a=window.URL||window.webkitURL,r=/^blob:/,s=/^image\/\w+/;t.default={template:"#uploader",vuex:{actions:{showLoading:o.showLoading,hideLoading:o.hideLoading,showDialog:o.showDialog}},props:{skin:{type:String,default:""},description:{type:String,default:""},maxsize:{type:Number,default:3072},error:{type:Function,default:function(){return function(){}}},images:{type:Array,default:function(){return[]}},mini:{type:Boolean,default:!1},maxlength:{type:Number,default:1},placeholder:{type:String,default:""},preview:{type:Boolean,default:!1},reverse:{type:Boolean,default:!1},success:{type:Function,default:function(){return function(){}}}},data:function(){return{signature:null,uploading:!1}},ready:function(){var e=this;e.check(),e.$root.$on("upload.uploader",e.upload)},beforeDestroy:function(){var e=this;e.$root.$off("upload.uploader",e.upload)},methods:{read:function(e){var t=this,i=e.target,o=i.files?i.files[0]:null;if(o&&(s.test(o.type)||""==o.type)){var n=o.size/1024;if(n>t.maxsize)return t.showDialog({title:"提示",content:"图片大小请控制在 "+Math.floor(t.maxsize)+" KB 以内",confirm:!0}),!1;t.images[Number(i.dataset.index)].url=a.createObjectURL(o),t.check()}else t.showDialog({title:"提示",content:"亲，请选择正确的图片文件",confirm:!0})},load:function(e){var t=e.target.src;r.test(t)&&a.revokeObjectURL(t)},clear:function(e){var t=this;t.images.splice(e,1),t.check()},check:function(){var e=this,t=e.images,i=!1;t.length<e.maxlength&&(t.forEach(function(e){e.url||(i=!0)}),i||t.push({url:""}))},upload:function(e){var t=this;!t.uploading&&e&&(t.signature=e,t.uploading=!0,t.showLoading("图片上传中"),t.initUploader(function(e){t.hideLoading(),t.uploading=!1,e?t.success(e):t.error()}))},initUploader:function(e){var t=this,i=$(":file",t.$el).filter(function(){return this.files&&this.files.length}),o=i.length,a=[];if(t.images.forEach(function(e,t){e.url&&!r.test(e.url)&&(a[t]=e.url)}),!o)return void e.call(t,a);var s=t.signature,c=0,u=0;i.each(function(i,r){var d=$(r),l=""+s.dir+(0,n.getRandomFilename)(r.files[0].name);d.uploader({name:"file",url:s.host,data:{key:l,policy:s.policy,OSSAccessKeyId:s.accessid,signature:s.signature},done:function(){a[Number(r.dataset.index)]=l},fail:function(){u++},uploaded:function(){d.uploader("destroy"),++c==o&&(u?e.call(t):e.call(t,a))}}).uploader("upload")})}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={template:"#user-guide",data:function(){return{visible:!0,countdown_timer:5,countdown_stop:!1,countdown_interval:null}},ready:function(){var e=this;e.starttimer()},methods:{hide:function(){var e=this;e.countdown_stop&&setTimeout(function(){e.visible=!1},300)},update:function(){this.countdown_timer<=1?this.countdown_stop=!0:this.countdown_timer--},starttimer:function(){0==this.countdown_stop?this.countdown_interval=setInterval(this.update,1e3):clearInterval(this.countdown_interval)}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),i(41);var n=i(26),a=i(9),r=i(76),s=o(r),c=window.URL||window.webkitURL,u=/^blob:/,d=/^image\/\w+/,l=$("body");t.default={template:"#mini-editor",vuex:{actions:{showLoading:n.showLoading,hideLoading:n.hideLoading,showDialog:n.showDialog}},props:{alias:{type:String,default:"default"},skin:{type:String,default:""},mini:{type:Boolean,default:!1},preview:{type:Boolean,default:!1},reverse:{type:Boolean,default:!1},uploader:{type:Object,default:{showNotice:!1,disable:!1,maxsize:3072,maxlength:1,placeholder:"",description:"",error:function(){},success:function(){}}},texter:{type:Object,default:{disable:!1,description:"",placeholder:"",maxlength:10}},video:{type:Object,default:{disable:!1,description:"",placeholder:"",maxlength:10}},contents:{type:Array,default:function(){return[]}}},data:function(){return{signature:null,uploading:!1,textenough:!0,videoenough:!0,imgenough:!0,cachefiles:[],done_total:0,undo_total:0,wait_secs:0,waitTimer:null,fontSetting:{attrs:["font-weight","font-style","text-decoration","line-height","font-size","color"],
size:[["普通","1rem"],["小","0.8rem"],["中","1.2rem"],["大","1.6rem"]],sizeLineHeight:{"0.8rem":"1.5","1rem":"1.4","1.2rem":"1.4","1.6rem":"1.3"},color:["#333333","#0b2497","#6de0ff","#da650a","#888888","#6699cc","#f1ca18","#670d7e","#17844c","#d0060e","#ff2d3c","#a47ed2","#a6c568","#f48287","#ffffff"]}}},ready:function(){var e=this;e.$root.$on("upload.uploader",e.upload),e.bindAutoSize()},beforeDestroy:function(){var e=this;e.$root.$off("upload.uploader",e.upload),e.hideTexterStyleSetting(!0)},methods:{read:function(e){var t=this,i=e.target,o=i.files?i.files[0]:null,n=Number(i.dataset.index),a=($(i),t.uploader.maxsize||3072);if(o&&(d.test(o.type)||""==o.type)){var r=o.size/1024;if(r>=2048&&t.$root.$emit("show.snackbar",{message:"亲，图片太大保存的时候需要等很久哟，建议先将图片压缩后再上传 :)"}),r>=a)return t.showDialog({title:"提示",content:"图片大小请控制在 "+Math.floor(a)+" KB 以内",confirm:!0}),!1;t.cachefiles.push(e.target),t.contents.splice(n,1,{url:c.createObjectURL(o),type:"image"})}else t.showDialog({title:"提示",content:"亲，请选择正确的图片文件",confirm:!0})},load:function(e){var t=e.target.src;u.test(t)&&c.revokeObjectURL(t)},clear:function(e){var t=this,i=e.target,o=Number(i.dataset.index),n=i.dataset.type,a=t.contents,r=-1;e.preventDefault(),a.forEach(function(e,t){"image"==e.type&&t<=o&&r++}),t.contents.splice(o,1),"image"==n&&t.cachefiles.splice(r,1)},showProgress:function(){var e=this,t=e.done_total,i=e.undo_total;e.hideLoading(),e.showLoading("图片上传中("+t+"/"+i+")")},waitCounter:function(){var e=this;e.waitTimer=setInterval(function(){e.wait_secs++,30==e.wait_secs&&(e.$root.$emit("show.snackbar",{message:"亲，您的网速实在太慢了，可能需要检查下是否传了很大的图片 :)"}),e.wait_secs=0,clearInterval(e.waitTimer)),10==e.wait_secs&&e.$root.$emit("show.snackbar",{message:"亲，你的网速貌似有点慢哟，再耐心等下呗 :)"})},1e3)},upload:function(e){var t=this;!t.uploading&&e&&(t.signature=e,t.uploading=!0,(0,a.isIOS)()?t.showLoading("图片上传中,大约需要1分钟..."):t.showLoading("图片上传中..."),t.initUploader(function(e){t.hideLoading(),t.uploading=!1,e?t.uploader.success(e):t.uploader.error()}))},initUploader:function(e){var t=this,i=this;i.$nextTick(function(){var i=t,o=i.cachefiles,n=o.length,r={},s=i.contents,c=[],d=[],l={},f=i.alias,h=i.getSettingTexterBox(),p=0,m=(0,a.isIOS)()?{}:{progress:function(e){e.total==e.loaded&&(i.done_total++,i.$nextTick(function(){i.showProgress()}))}};if(s.forEach(function(e,t){var o=(0,a.deepCopy)(e);if("image"==o.type&&o.url)r[f+"_"+t]=o.url,c.push(o),l[f+"_"+t]=p,p++,u.test(o.url)||d.push(o);else if("text"==o.type){var n=h.find("textarea.texter"+t),s=n.val();""!=$.trim(s)&&(o.v=(0,a.utf16toEntities)($.trim(s).replace(new RegExp(/(\')/g),"‘").replace(new RegExp(/(\")/g),"“")),o.style&&!function(){var e=[];o.style.split(";").forEach(function(t,o){$.inArray($.trim(t).split(":")[0],i.fontSetting.attrs)>=0&&e.push(t)}),o.style=e.join(";")}(),c.push(o),d.push(o),l[f+"_"+t]=p,p++)}else if("video"==o.type){var m=h.find("textarea.video"+t),g=m.val();""!=$.trim(g)&&(o.v=$.trim(g),c.push(o),d.push(o),l[f+"_"+t]=p,p++)}}),console.log("mini-editor: "),console.log(c),!n)return void e.call(i,d);var g=i.signature,v=0,y=0;i.undo_total=o.length,!a.isIOS&&i.$nextTick(function(){i.showProgress()}),i.waitCounter();var w=[],_=void 0,b=void 0;o.forEach(function(t,o){var s=$(t);t.files.length&&!function(){var o=t.files[0].name,u=""+g.dir+(0,a.getRandomFilename)(o);s.uploader($.extend({name:"file",url:g.host,data:{key:u,policy:g.policy,OSSAccessKeyId:g.accessid,signature:g.signature},done:function(){_=Number(t.dataset.index),r[f+"_"+_]=u,i.contents[_].stat="success"},fail:function(){_=Number(t.dataset.index),b=_+1,w.push(o+("【第 "+b+" 张】")),i.contents[_].stat="fail",y++},uploaded:function(){if(s.uploader("destroy"),++v==n){if(i.cachefiles=[],y)i.$root.$emit("show.snackbar",{color:"accent",message:"图片上传失败（共: "+n+"，失败: "+y+"）<br/><br/>以下图片请重新上传: <br/>"+w.join("<br/> ")+'<br/><br/><p style="animation:flash 3s infinite ease-in-out;-webkit-animation:flash 3s infinite ease-in-out;">温馨提示：<br/>1、请将图片压缩处理后会更流畅哦(建议图片控制在2M以内)；<br/> 2、如果多次尝试失败，请检查网络是否有问题；<br/>3、如果图片不重新上传直接点保存，原先上传失败的图片将丢失；</p>',timeout:15e3}),e.call(i);else{var t=void 0;for(t in r){var o=t;t=t.split("_"),t=l[f+"_"+t[1]],c[t].url=r[o],c[t].stat&&delete c[t].stat}e.call(i,c)}i.waitTimer&&clearInterval(i.waitTimer),i.wait_secs=0,i.hideLoading()}}},m)).uploader("upload")}()})})},add:function(e){var t=this;"text"==e?t.textenough&&t.contents.push({type:"text",v:"",style:"",style_config:{}})&&t.bindAutoSize():"video"==e?(t.videoenough&&t.contents.push({type:"video",v:""})&&t.bindAutoSize(),t.hideTexterStyleSetting(!0)):t.imgenough&&t.contents.push({type:"image",src:""}),t.hideTexterStyleSetting(!0)},texterset:function(e){var t=this,i=e.target,o=Number(i.dataset.index),n=$(i);setTimeout(function(){var e=t.contents[o].style||"",i=t.contents[o].style_config||{};t.contents.splice(o,1,{v:n.val(),style:e,style_config:i,type:"text"}),t.bindAutoSize()},100)},videoset:function(e){var t=this,i=e.target,o=Number(i.dataset.index),n=$(i),a=void 0,r="";setTimeout(function(){a=$.trim(n.val()),a.length&&(a.indexOf("v.youku.com")<0&&a.indexOf("m.youku.com")<0&&a.indexOf("v.qq.com")<0?r="您填写的视频地址不在支持范围哟，我们只支持优酷、腾讯视频":a.indexOf("http")<0&&(r="您输入的视频地址格式不正确，请确认是否缺失了 http:// 或 https://"),r.length&&t.showDialog({title:"提示",content:r,confirm:!0})),t.contents.splice(o,1,{v:a,type:"video"}),t.bindAutoSize()},100)},bindAutoSize:function(){var e=this;setTimeout(function(){(0,s.default)(e.getSettingTexterBox().find("textarea"))},10)},texterFocus:function(e){var t=this,i=e.target,o=Number(i.dataset.index),n=($(i),$("#mini-editor-texter-setting")),a=t.contents[o],r=t.fontSetting,s=a.style_config||{},c=s.fontsize?s.fontsize:"",u=s.color?s.color:"",d=s.bold?s.bold:"",f=s.italic?s.italic:"",h=s.underline?s.underline:"",p="",m=[],g=[];r.size.forEach(function(e,t){c==e[1]&&(p=e[0]),m.push('<li class="target cell-3 '+(c==e[1]?"selected":"")+('" data-type="fontsize" data-name="'+e[0]+'" data-value="'+e[1]+'">'+e[0]+"</li>"))}),g.push('<li><span class="clean_color"> <i class="weui_icon_cancel" aria-hidden="true"></i></span</li>'),r.color.forEach(function(e,t){g.push('<li><span class="target" data-type="color" data-value="'+e+'" style="background-color: '+e+';"> <i class="checked weui_icon_success_no_circle" '+(e==u?"":'style="display:none"')+"></i></span</li>")});var v='<div id="mini-editor-texter-setting">  <div class="title"><i class="fa fa-eraser clean" aria-hidden="true">清除</i>设置字体样式<i class="fa fa-caret-up more" aria-hidden="true">收起</i></div>  <div class="items">    <ul class="normal item">      <li class="cell-4 "><i class="target fa fa-bold '+(d?"selected":"")+'" aria-hidden="true" data-type="bold""></i></li>      <li class="cell-4 "><i class="target fa fa-italic '+(f?"selected":"")+'" aria-hidden="true" data-type="italic"></i></li>      <li class="cell-4 "><i class="target fa fa-underline '+(h?"selected":"")+'" aria-hidden="true" data-type="underline"></i></li>    </ul>    <div class="font-item">      <div class="title item expand-fontsize">        <div class="cell-3">字体大小</div>        <div class="cell-9"><font class="mini-fontsize">'+(p.length?p:"")+'</font><i class="fa fa-chevron-down" aria-hidden="true"></i></div>      </div>'+('      <ul class="item fontsize-box" style="display: none;">'+m.join("")+"</ul>")+'    </div>    <div class="color-item">      <div class="title item expand-color">        <div class="cell-3">颜色</div>        <div class="cell-9">'+(u.length?'<span class="mini-color" style="background-color: '+u+';"></span>':'<span class="mini-color" style="display:none;"></span>')+'<i class="fa fa-chevron-down" aria-hidden="true"></i></div>      </div>'+('      <ul class="item flexbox color-box" style="display: none;border:none;">'+g.join("")+"</ul>")+"    </div>  </div></div>";n.length&&n.remove(),l.append(v);var y=$("#mini-editor-texter-setting");y.find(".more").unbind("click").click(function(){t.hideTexterStyleSetting()}),y.find(".clean").unbind("click").click(function(){t.contents[o].style="",t.contents[o].style_config={},y.find(".mini-color").hide().css("background","none"),y.find(".mini-fontsize").html(""),y.find(".target").removeClass("selected")}),y.find(".expand-fontsize").unbind("click").click(function(){y.find(".fontsize-box").slideToggle()}),y.find(".expand-color").unbind("click").click(function(){y.find(".color-box").slideToggle()}),y.find(".clean_color").unbind("click").click(function(){t.contents[o].style&&!function(){var e=[];t.contents[o].style.split(";").forEach(function(t,i){$.inArray($.trim(t).split(":")[0],["color"])<0&&e.push(t)}),t.contents[o].style=e.join(";")}(),t.contents[o].style_config&&t.contents[o].style_config.color&&delete t.contents[o].style_config.color,y.find(".mini-color").hide().css("background","none")}),y.find(".target").each(function(){$(this).unbind("click").click(function(){var e=$(this),i=e.data("type"),n=e.data("value"),a=e.data("name"),r=void 0;switch(t.contents[o].style_config||(t.contents[o].style_config={}),i){case"bold":case"italic":case"underline":r="1";break;case"fontsize":r=n,y.find(".mini-fontsize").html(a),e.addClass("selected").siblings().removeClass("selected");break;case"color":r=n,y.find(".mini-color").show().css("background-color",r),e.find(".checked").show().parent().parent().siblings().find(".checked").hide()}$.inArray(i,["bold","italic","underline"])<0?t.contents[o].style_config[i]=r:t.contents[o].style_config[i]?(e.removeClass("selected"),delete t.contents[o].style_config[i]):(e.addClass("selected"),t.contents[o].style_config[i]=r),t.filterTexterStyle(o)})})},filterTexterStyle:function(e){var t=this,i=t.contents[e].style_config,o=t.fontSetting.sizeLineHeight,n=[],a=void 0,r=void 0;t.contents[e].style||(t.contents[e].style="");for(r in i)switch(a=i[r],r){case"bold":n.push("font-weight:bold");break;case"italic":n.push("font-style:italic");break;case"underline":n.push("text-decoration:underline;");break;case"fontsize":n.push("font-size:"+a+";line-height:"+o[a]);break;case"color":n.push("color:"+a)}var s=t.getSettingTexterBox().find(".texter"+e),c=s.attr("style")||"";c=c.split(";"),c.forEach(function(e,i){$.inArray($.trim(e).split(":")[0],t.fontSetting.attrs)<0&&n.push(e)}),s.attr("style",n.join(";")),t.contents[e].style=n.join(";"),n=[]},hideTexterStyleSetting:function(e){var t=$("#mini-editor-texter-setting");t.addClass("hide"),setTimeout(function(){e?t.hide().removeClass("hide").remove():t.hide().removeClass("hide")},500)},getSettingTexterBox:function(e){var t=this;return t.alias?$(".mini-editor-container-for-"+t.alias):$(".mini-editor-container")},showUploaderNotice:function(){var e=this;e.uploader.showNotice&&alert("严禁上传二维码，一经发现，直接删除活动。")}},computed:{imgCounter:function(){var e=this.contents;return e.reduce(function(e,t){return"image"==t.type?e+1:e},0)},texterCounter:function(){var e=this.contents;return e.reduce(function(e,t){return"text"==t.type?e+1:e},0)},videoCounter:function(){var e=this.contents;return e.reduce(function(e,t){return"video"==t.type?e+1:e},0)},parseContents:function(){var e=this,t=[];return e.contents.forEach(function(i,o){"text"==i.type&&i.style&&!function(){var t=[];i.style.split(";").forEach(function(i,o){$.inArray($.trim(i).split(":")[0],e.fontSetting.attrs)>=0&&t.push(i)}),i.style=t.join(";")}(),t.push(i)}),t}}}},function(e,t,i){var o,n,a;!function(i,r){n=[t,e],o=r,a="function"==typeof o?o.apply(t,n):o,!(void 0!==a&&(e.exports=a))}(this,function(e,t){"use strict";function i(e){function t(){var t=window.getComputedStyle(e,null);"vertical"===t.resize?e.style.resize="none":"both"===t.resize&&(e.style.resize="horizontal"),c="content-box"===t.boxSizing?-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)):parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth),isNaN(c)&&(c=0),s()}function i(t){var i=e.style.width;e.style.width="0px",e.offsetWidth,e.style.width=i,e.style.overflowY=t}function o(e){for(var t=[];e&&e.parentNode&&e.parentNode instanceof Element;)e.parentNode.scrollTop&&t.push({node:e.parentNode,scrollTop:e.parentNode.scrollTop}),e=e.parentNode;return t}function n(){var t=e.style.height,i=o(e),n=document.documentElement&&document.documentElement.scrollTop;e.style.height="auto";var a=e.scrollHeight+c;return 0===e.scrollHeight?void(e.style.height=t):(e.style.height=a+"px",u=e.clientWidth,i.forEach(function(e){e.node.scrollTop=e.scrollTop}),void(n&&(document.documentElement.scrollTop=n)))}function s(){n();var t=Math.round(parseFloat(e.style.height)),o=window.getComputedStyle(e,null),a=Math.round(parseFloat(o.height));if(a!==t?"visible"!==o.overflowY&&(i("visible"),n(),a=Math.round(parseFloat(window.getComputedStyle(e,null).height))):"hidden"!==o.overflowY&&(i("hidden"),n(),a=Math.round(parseFloat(window.getComputedStyle(e,null).height))),d!==a){d=a;var s=r("autosize:resized");try{e.dispatchEvent(s)}catch(e){}}}if(e&&e.nodeName&&"TEXTAREA"===e.nodeName&&!a.has(e)){var c=null,u=e.clientWidth,d=null,l=function(){e.clientWidth!==u&&s()},f=function(t){window.removeEventListener("resize",l,!1),e.removeEventListener("input",s,!1),e.removeEventListener("keyup",s,!1),e.removeEventListener("autosize:destroy",f,!1),e.removeEventListener("autosize:update",s,!1),Object.keys(t).forEach(function(i){e.style[i]=t[i]}),a.delete(e)}.bind(e,{height:e.style.height,resize:e.style.resize,overflowY:e.style.overflowY,overflowX:e.style.overflowX,wordWrap:e.style.wordWrap});e.addEventListener("autosize:destroy",f,!1),"onpropertychange"in e&&"oninput"in e&&e.addEventListener("keyup",s,!1),window.addEventListener("resize",l,!1),e.addEventListener("input",s,!1),e.addEventListener("autosize:update",s,!1),e.style.overflowX="hidden",e.style.wordWrap="break-word",a.set(e,{destroy:f,update:s}),t()}}function o(e){var t=a.get(e);t&&t.destroy()}function n(e){var t=a.get(e);t&&t.update()}var a="function"==typeof Map?new Map:function(){var e=[],t=[];return{has:function(t){return e.indexOf(t)>-1},get:function(i){return t[e.indexOf(i)]},set:function(i,o){e.indexOf(i)===-1&&(e.push(i),t.push(o))},delete:function(i){var o=e.indexOf(i);o>-1&&(e.splice(o,1),t.splice(o,1))}}}(),r=function(e){return new Event(e,{bubbles:!0})};try{new Event("test")}catch(e){r=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!1),t}}var s=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?(s=function(e){return e},s.destroy=function(e){return e},s.update=function(e){return e}):(s=function(e,t){return e&&Array.prototype.forEach.call(e.length?e:[e],function(e){return i(e,t)}),e},s.destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],o),e},s.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],n),e}),t.exports=s})},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(10),a=o(n),r=i(12),s=o(r),c=i(26),u=$(document.body);t.default={template:"#mini-login",vuex:{getters:{user:function(e){return e.user},visitor:function(e){return e.visitor}},actions:{showLoading:c.showLoading,hideLoading:c.hideLoading,signIn:c.signIn,showDialog:c.showDialog}},props:{refresh:{type:Boolean,default:!1}},data:function(){var e=this;return{mobile:e.user?e.user.mobile:"",password:"",force:0,logging:!1,loginSuccess:!1,loginSuccessAnimated:!1,loginDone:!1,rippleP:null}},ready:function(){var e=this;e.$root.$emit("show.snackbar",{message:"登录超时，请重新登录!"})},beforeDestroy:function(){var e=this;e.loginDone=!1,e.logging=!1,e.loginSuccess=!1,e.loginSuccessAnimated=!1},methods:{submit:function(e){var t=this,i=(t.$route,t.password),o=$("#text_login_password"),n=$("#btn-login-submit");return e&&e.preventDefault(),/^\S{6,20}$/.test(i)?void(t.logging||(t.logging=!0,t.ripple(n,e),$.ajax(a.default.signIn,{method:"POST",data:{mobile:$.trim(t.mobile),password:t.password,force:t.force,open_id:t.visitor?t.visitor.openId:"wx"+Date.now()},success:function(e){return t.logging=!1,e.code?"1141"==e.code?void t.showDialog({title:"重要提示",content:"<p>该账号正在其他设备上登录中，是否强制登录并将对方下线<p>",confirm:function(){return t.force=1,t.$nextTick(function(){t.submit()}),!0},cancel:function(){return!0},button:{confirm:"继续登录",cancel:"取消登录"}}):void u.tooltip(s.default[e.code],"danger"):void(e.data&&(u.tooltip("登录成功，您可以继续操作了 :)","success"),t.loginSuccess=!0,t.signIn(e.data),setTimeout(function(){t.loginSuccessAnimated=!0,setTimeout(function(){t.loginDone=!0,t.refresh&&window.location.reload()},1)},400)))},error:function(){t.logging=!1,u.tooltip("登录失败，请检查网络或联系客服","danger")},complete:function(){t.logging=!1}}))):(u.tooltip("密码格式不正确，密码最少6位，最多20位，不能包含空格","warning"),o.focus(),!1)},ripple:function(e,t){var i=this,o=e.offset().top,n=e.offset().left,a=i.rippleP?0:t.pageX-n,r=i.rippleP?0:t.pageY-o,s=$("<div class='ripple'></div>");$(".ripple",this.$el).remove(),i.rippleP||(i.rippleP={top:r,left:a}),s.css(i.rippleP),e.append(s)}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={template:"#join-customize",vuex:{actions:{}},props:{skin:{type:String,default:""},data:{type:Object,default:function(){return{}}},locked:{type:Boolean,default:!1},editable:{type:Boolean,default:!1},callback:{type:Function,default:function(){return function(){}}}},methods:{returnVal:function(){this.callback&&this.callback(this.data)}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(60),a=o(n),r=i(67),s=o(r),c=i(80),u=o(c),d=i(9);t.default={mixins:[a.default,s.default,u.default],methods:{click:function(){var e=this,t=e.my.joinerId;t?e.$router.go({name:"star-joiner",params:{id:e.activityId,joinerId:t}}):(0,d.showBeforeJoinTiper)(e.showDialog,function(){e.visible=!0,setTimeout(function(){e.joining=!0},0)})}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(81),a=o(n);t.default={template:"#star",data:function(){return $.extend({personal:!1,visible:!1,haloing:!1},a.default)},beforeDestroy:function(){this.stopCarousel(),this.stopCountdown()}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={category:"star",code:2,name:"全民摘星星"}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(10),a=o(n),r=i(12),s=o(r),c=i(60),u=o(c),d=i(67),l=o(d),f=i(80),h=o(f),p=i(9),m=$(document.body);t.default={mixins:[u.default,l.default,h.default],route:{data:function(){var e=this;e.my.self||e.$nextTick(function(){e.vote()})}},data:function(){return{personal:!0}},computed:{basin:function(){var e=this,t=e.activity,i=t?e.participant.vote_count/t.prizes.limit:1,o=isNaN(i)?1:Math.floor(5*i);return"basin-"+o},required:function(){var e=this,t=e.activity;return t?t.prizes.limit-e.participant.vote_count:0},completed:function(){var e=this,t=e.activity;return!!t&&t.prizes.limit==e.participant.vote_count},ended:function(){var e=this,t=e.activity;return t.end_time<Math.round(Date.now()/1e3)}},methods:{alert:function(){var e=this;e.completed&&e.showDialog({title:"提示",content:e.my.self?"已完成，可以兑奖咯（商家联系方式可在活动页面上查找）":"TA已完成摘星星任务",confirm:!0})},click:function(){var e=this,t=e.my.joinerId;e.my.self?e.completed?e.alert():e.showSharer():t?e.$router.go({name:"star-joiner",params:{id:e.activityId,joinerId:t}}):(0,p.showBeforeJoinTiper)(e.showDialog,function(){e.visible=!0,setTimeout(function(){e.joining=!0},0)})},vote:function(){var e=this,t=e.joinerId,i=!1,o=0;return e.completed?void e.alert():e.voter&&(e.voter.joiners.forEach(function(n){n.id==t&&(i=!0,e.my.self&&n.next_vote_date&&(o=n.next_vote_date,o<=Date.now()/1e3&&(i=!1)))}),i)?(e.showDialog({title:"提示",content:e.my.self?"你今天已经摘过了[自己每天可以摘一次]"+e.getShortTip():"您已经帮TA摘过星了！",confirm:!0}),void(e.my.self&&e.genShorturl())):(e.showLoading(),void $.ajax(a.default.activityVote,{method:"POST",data:{joiner_id:t,open_id:e.visitor?e.visitor.openId:"wx"+Date.now(),next_vote_date:o},success:function(i){if(i.code)return void m.tooltip(s.default[i.code],"danger");e.voteIn({joiner:{id:t,next_vote_date:i.data.next_vote_date,expires:1e3*e.activity.end_time}});var o=$(e.$els.smile);o.addClass("picked"),setTimeout(function(){e.participant.vote_count++,o.removeClass("active picked"),e.my.self?(e.genShorturl(),e.showDialog({title:"恭喜您",content:'<p><i class="fa fa-smile-o" aria-hidden="true"></i> 您已成功摘取一颗星星</p><p style="font-weight: bold;">如何找人帮忙<i class="fa fa-hand-o-down" aria-hidden="true"></i></p>'+e.getShortTip(),confirm:function(){return!0},button:{confirm:"我知道了"}})):e.showDialog({title:"提示",content:"你已成功帮TA摘取一颗星星！",confirm:!0}),setTimeout(function(){o.addClass("active")},2e3)},1e3)},complete:function(){e.hideLoading()}}))}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=i(72),r=o(a),s=i(81),c=o(s),u=i(10),d=o(u),l=i(12),f=o(l),h=i(73),p=o(h),m=i(74),g=o(m),v=i(62),y=o(v),w=i(75),_=o(w),b=i(77),x=o(b),j=i(63),D=o(j),k=i(78),S=o(k),T=i(76),z=o(T),I=i(51),M=o(I),L=i(52),C=i(9),O=i(26),P=$(document.body);t.default={template:"#star-editor",components:{Uploader:p.default,Userguide:g.default,Musician:y.default,miniEditor:_.default,miniLogin:x.default,Foreground:D.default,joinCustomize:S.default,Sharer:M.default},vuex:{getters:{user:function(e){return e.user}},actions:{showDialog:O.showDialog,showLoading:O.showLoading,hideLoading:O.hideLoading,pageIn:O.pageIn,toggleSharable:O.toggleSharable}},route:{data:function(e){function t(t){var o="全民摘星星",n="制作";t&&(o=t.title,n="clone"==i.$route.query.action?"复制":"编辑"),i.pageIn({title:"【"+n+"】"+o}),i.$nextTick(function(){i.initPicker()}),e.next({activated:!0})}var i=this,o=i.$route,a=Number(o.params.id)||0;return a?(i.showLoading(),void $.ajax(d.default.activity+"/"+a,{data:{token:i.user.token},dataType:"text",success:function(a){if(a=$.parseJSON(a),a.code)return void i.fail(a);if(a.data){var r=a.data.activity;r.user_id!=i.user.id&&e.abort(),"clone"==o.query.action&&(r.id="");var s=r.host_img.split(","),c={};try{c=JSON.parse(r.prizes)}catch(e){console.log(e.message)}c.img&&i.prize.uploader.images.push({suffix:"image/resize,w_640/quality,q_40",url:c.img}),s.forEach(function(e){e&&i.intro.uploader.images.push({suffix:"image/resize,w_640/quality,q_40",url:e})});var u=r.host_info;try{u=r.host_info&&JSON.parse((0,C.jsonFilter)(r.host_info))}catch(e){console.log("parse host_info error: "+e.message)}u.length&&"object"===("undefined"==typeof u?"undefined":n(u))&&(r.host_info=u);var d={};try{d=r.others&&JSON.parse((0,C.jsonFilter)(r.others)),d="object"===("undefined"==typeof d?"undefined":n(d))?$.extend(i.activity.others,d):i.activity.others}catch(e){console.log("parse others error: "+e.message)}r.prizes=c,r.host_img=s,r.others=d,i.activity=r,i.statistics=a.data.statistics,r.prizes.count&&(i.clone_activity.prizes.count=r.prizes.count),t(r)}},error:function(){P.tooltip("活动加载失败","danger")},complete:function(){i.hideLoading()}})):void t()}},data:function(){var e=this,t=new Date,i=t.getFullYear(),o=t.getMonth(),n=t.getDate(),a=new Date(i,o,n),r=new Date(i,o,n+5);return{activated:!1,expired:!1,activity:{id:"",type:2,title:"摘满30个星星送价值200元的跆拳道课程",start_time:a.valueOf()/1e3,end_time:r.valueOf()/1e3,rules:"1.点击上方按钮“我要参加”参加活动。\n\n2.报名者自己每天可以【自己摘一颗】，增加一颗星星。\n\n3.别人可以帮忙增加星星数。\n\n4.奖品份数有限，达标就会减少一份，份数领完则无法继续报名，亲速度哦！\n\n5.完成后，马上联系商家兑奖吧。",prizes:{count:100,limit:30,text:"免费获得珊瑚岛英语6节课程",img:""},receive_info:"领奖时间：\n领奖地址：\n领奖电话："+e.user.mobile,host_info:"",host_img:[],others:{musician:"",foreground:{type:"",direction:""},section_text:{receive_info:"领奖信息",intro:"机构介绍"},join_customize:{customize_1:{name:"",required:0},customize_2:{name:"",required:0},customize_3:{name:"",required:0}}}},editable:!0,intro:{uploaded:!1,uploader:{error:function(){e.submitting=!1,P.tooltip("机构介绍图片上传失败","danger")},images:[],success:function(t){e.activity.host_img=t,e.intro.uploaded=!0,e.publish()}},minieditor:{uploader:{maxlength:10,placeholder:"（点击选择图片，不上传则不显示）",description:"添加图片（最多添加 10 张图片）",error:function(){e.submitting=!1,$("body").tooltip("机构介绍图片上传失败","danger")},success:function(t){e.activity.host_info=t,e.intro.uploaded=!0,e.publish()}},texter:{placeholder:"此处可修改字体样式：加粗、斜体、下划线、字体大小颜色...",description:"添加文本（最多添加 10 个文本内容）",maxlength:10},video:{placeholder:"请输入视频地址【支持优酷、腾讯视频】",description:"添加视频（最多添加 5 个视频）",maxlength:5}}},prize:{uploaded:!1,uploader:{error:function(){e.submitting=!1,P.tooltip("奖品图片上传失败","danger")},images:[],success:function(t){e.activity.prizes.img=t[0]||"",e.prize.uploaded=!0,e.publish()}}},clone_activity:{prizes:{count:0}},others:{musician:{callback:function(t){e.activity.others.musician=t}},foreground:{callback:function(t){e.activity.others.foreground=t}},join_customize:{callback:function(t){e.activity.others.join_customize=t}}},statistics:null,submitting:!1,sharer:null}},computed:{locked:function(){var e=this,t=e.statistics;return e.activity.id>0&&t&&t.join_count>0},isNormalHostInfo:function(){var e=this,t=e.activity;return t.id>0&&(""!==t.host_info&&"object"!=n(t.host_info)||$.trim(t.host_img).length>0)}},ready:function(){var e=this;"clone"==e.$route.query.action&&(0,C.showCloneTiper)(e.showDialog),setTimeout(function(){(0,z.default)($("textarea",e.$el))},2e3)},beforeDestroy:function(){var e=this;e.startDatePicker&&e.startDatePicker.destroy(),e.endDatePicker&&e.endDatePicker.destroy()},methods:{initPicker:function(){var e=this,t=$(e.$el),i=t.find(".start-date"),o=t.find(".end-date"),n={format:"YYYY-MM-DD HH:mm",increment:{minute:10},text:{cancel:"取消",confirm:"确认"},translate:function(e,t){var i={year:"年",month:"月",day:"日",hour:"点",minute:"分"};return Number(t)+i[e]}},a=$.extend(!0,{},n,{text:{title:"请选择活动开始时间"}}),s=$.extend(!0,{},n,{text:{title:"请选择活动结束时间"}}),c=new r.default(i[0],a),u=new r.default(o[0],s);e.startDatePicker=c,e.endDatePicker=u,i.on("change",function(){var t=c.getDate();e.activity.start_time=Math.round(t.getTime()/1e3),e.activity.end_time<=e.activity.start_time&&(t.setDate(t.getDate()+1),e.activity.end_time=Math.round(t.getTime()/1e3),e.$nextTick(function(){return u.update()}))}),o.on("change",function(t){var i=Math.round(u.getDate().getTime()/1e3);return i<=e.activity.start_time?void t.preventDefault():void(e.activity.end_time=i)})},toggle:function(){var e=this;e.editable=!e.editable,document.body.scrollTop=0,setTimeout(function(){(0,z.default)($("textarea",e.$el))},2e3)},fail:function(e,t){var i=this,o=e.code;1100==o?(0,C.showKickedOffline)(e.data.time,e.data.ip,i.showDialog,function(){i.expired=!0}):1101==o?(0,C.showExpireTip)(i.showDialog):1102==o?i.expired=!0:i.$root.$emit("show.snackbar",{color:"accent",message:f.default[o]}),i.hideLoading(),t&&t()},submit:function(e){var t=this,i=t.activity,o=(0,L.match)(JSON.stringify(i));if(e.preventDefault(),!i.title)return void t.showDialog({title:"提示",content:"请设置活动标题",confirm:!0});if(!i.prizes.limit)return void t.showDialog({title:"提示",content:"请输入星星数量",confirm:!0});if(!i.prizes.text)return void t.showDialog({title:"提示",content:"请输入奖品描述",confirm:!0});if(!i.receive_info)return void t.showDialog({title:"提示",content:"请设置领奖信息",confirm:!0});if(t.locked&&i.prizes.count<t.clone_activity.prizes.count)return void t.showDialog({title:"提示",content:"已有用户报名，因此奖品数量必须大于原值【"+t.clone_activity.prizes.count+"】",confirm:!0});var n=!1,a=2;return $.each(i.others.join_customize,function(e,i){if(a++,i.required&&""==$.trim(i.name))return t.showDialog({title:"提示",content:"【信息收集设置】第 "+a+" 个信息项由于设置为必填项，因此名称不能为空！",confirm:!0}),void(n=!0)}),n?void 0:o.length?void t.showDialog({title:"提示",content:"发现微信违规词："+o.join("、")+"，请修改后再发布！",confirm:!0}):void(i.prizes.count>1e3&&!window.confirm("哇，土豪，您的奖品份数超过 1000 了，是否继续保存?")||t.submitting||(t.submitting=!0,t.showLoading("正在提交数据..."),$.ajax(d.default.uploadSignature,{method:"get",data:{token:t.user.token,type:2},dataType:"json",success:function(e){return e.code?(t.submitting=!1,t.hideLoading(),void t.fail(e)):(t.showLoading("正在上传图片，请勿离开或关闭页面"),void(e.data&&t.$root.$emit("upload.uploader",e.data)))},error:function(){t.submitting=!1,t.hideLoading(),t.$root.$emit("show.snackbar",{color:"accent",message:"保存失败，请检查网络是否正常连接！"})}})))},publish:function(){var e=this;if(e.prize.uploaded&&e.intro.uploaded&&!e.publishing){e.sharer=null,e.publishing=!0,e.showLoading("正在提交数据，请勿离开或关闭页面");var t=(0,C.expressionFilter)($.extend(!0,{},e.activity));$.ajax(d.default.activity,{method:t.id?"put":"post",data:$.extend(t,{host_img:t.host_img.join(),prizes:JSON.stringify(t.prizes),others:JSON.stringify(t.others),token:e.user.token}),success:function(i){return i.code?void e.fail(i):void P.one("hidden.tooltip",function(){e.sharer={autoShare:!1,autoShow:!0,data:$.extend(t,{category:c.default.category,id:t.id||i.data.id}),desc:t.share_content,imgUrl:t.share_img,title:t.share_title}}).tooltip("show",{content:"活动保存成功",style:"success",duration:1e3})},error:function(){P.tooltip("活动发布失败","danger")},complete:function(){e.submitting=!1,e.publishing=!1,e.hideLoading()}})}}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(85),a=o(n),r=i(9);t.default={mixins:[a.default],methods:{click:function(){var e=this,t=e.my.joinerId;t?e.$router.go({name:"bargain-joiner",params:{id:e.activityId,joinerId:t}}):(0,r.showBeforeJoinTiper)(e.showDialog,function(){e.visible=!0,setTimeout(function(){e.joining=!0},0)})}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(10),a=o(n),r=i(12),s=o(r),c=i(57),u=o(c),d=i(40),l=o(d),f=i(51),h=o(f),p=i(45),m=o(p),g=i(65),v=i(9),y=i(26),w=i(52),_=$(document.body);t.default={template:"#bargain",components:{Message:l.default,Sharer:h.default,WaterfallFlowLoader:m.default},vuex:{getters:{user:function(e){return e.user},joiner:function(e){return e.joiner},reminded:function(e){return e.reminded},sharable:function(e){return e.sharable},voter:function(e){return e.voter},visitor:function(e){return e.visitor}},actions:{showDialog:y.showDialog,showLoading:y.showLoading,hideLoading:y.hideLoading,joinIn:y.joinIn,joinOut:y.joinOut,pageIn:y.pageIn,toggleReminder:y.toggleReminder,toggleSharable:y.toggleSharable,voteIn:y.voteIn,voteOut:y.voteOut}},route:{data:function e(t){var i=this,o=t.to,n=Number(o.params.id)||0,r=Number(o.params.joinerId)||0,c=r?a.default.activityJoiner:a.default.activity+"/"+n,e={activity_id:n,joiner_id:r};return i.activity=null,i.carousel=null,i.loader=null,i.sharer=null,!i.hasDown&&(i.showLoading(),void $.ajax({url:c,dataType:"text",data:e,success:function(e){if(e=$.parseJSON(e),e.data&&e.data.mobile&&(i.activityMobile=e.data.mobile),e.code){if("1217"==e.code)return void(i.hasActivity=!1);if("1252"==e.code){var o=!1;return i.joiner&&i.joiner.activities&&i.joiner.activities.forEach(function(e){e.joinerId==r&&(o=!0,i.joinOut(r),i.voteOut(r))}),void(o?i.showDialog({title:"重要提示",button:{confirm:"我知道了"},style:"text-align: left;",content:"您已被活动主办方取消名额，如有疑问，请联系主办方！",confirm:function(){return(0,v.redirectToActivityIndex)(),!0}}):(0,v.redirectToActivityIndex)())}return void _.tooltip(s.default[e.code],"danger")}if(e.data){var c=e.data.activity,u=e.data.joiner,d=e.data.statistics,l=i.sharable;if("3"!=c.type)return void(i.hasActivity=!1);!(0,g.matchCases)(c.user_id)&&c.completed_delay_days>=2&&(i.hasCompleted=!0),l&&i.toggleSharable(),i.pageIn({title:c.title,description:c.rules}),i.loadCompletedJoiners(n);var f={};try{f=JSON.parse(c.prizes)}catch(e){console.log(e.message)}i.$nextTick(function(){i.startCountdown()}),t.next({activity:$.extend(c,{host_img:String(c.host_img).split(","),prizes:f}),activityId:n,joinerId:r,joiners:[],loader:{url:a.default.activityRanking+"?activity_id="+n,params:{activity_id:n}},participant:u,sharer:{autoShare:!l,autoShow:l,data:$.extend({joinerId:r,category:"bargain"},c),desc:c.share_content,imgUrl:c.share_img,link:window.location.href,
title:c.share_title},statistics:d})}},error:function(){_.tooltip("活动加载失败","danger")},complete:function(){setTimeout(function(){$("div.about").find("img").scrollLoading()},100),i.hideLoading()}}))}},data:function(){return{activityMobile:null,activity:null,activityId:0,hasActivity:!0,hasDown:!1,hasCompleted:!1,carousel:null,completedJoiners:{total:0,list:[]},haloing:!1,joinerId:0,joiners:[],joining:!1,loader:null,newJoiner:{name:"",mobile:""},participant:null,sharer:null,statistics:null,visible:!1}},computed:{my:function(){var e=this,t=e.joinerId,i=e.activityId,o=0,n=!1;return e.joiner&&e.joiner.activities.forEach(function(e){e.joinerId==t?n=!0:e.id==i&&(o=e.joinerId)}),{joinerId:o,self:n}},button:function(){var e=this,t=e.activity,i=Math.round(Date.now()/1e3),o="",n=!1,a=e.completed;return t&&(t.start_time>i?(o="活动未开始",n=!0):t.end_time<i?(o="活动已结束",n=!0):o=e.my.self?"返回我的报名页":e.my.joinerId?"返回我的报名页":"我要参加"),{text:o,disabled:n,completed:a}},countdown:function(){var e=this,t=e.activity,i=Date.now(),o=1e3*t.start_time,n=1e3*t.end_time,a=o<=i;return{time:a?n:o,text:a?"结束":"开始"}},tellink:function(){return"tel://"+this.activityMobile}},beforeDestroy:function(){this.stopCarousel(),this.stopCountdown()},methods:{load:function(e){var t=this;Array.isArray(e)&&e.forEach(function(e){return t.joiners.push(e)})},join:function(e){var t=this,i=t.newJoiner,o=i.name,n=i.mobile,r=(0,w.matchJoin)(JSON.stringify({name:o}));return e.preventDefault(),r.length?void(0,v.showJoinNotice)(t.showDialog):(t.showLoading(),void $.ajax(a.default.activityJoin,{method:"POST",data:{activity_id:t.activityId,mobile:n,name:o},success:function(e){var i=e.data?Number(e.data.joiner_id):0;return e.code?(i&&t.joined(i),void _.tooltip(s.default[e.code],"danger")):void(e.data&&i&&(t.joined(i),t.showDialog({title:"报名成功",content:"点击“确定”进入你自己的活动页面",confirm:function(){return t.$router.go({name:"bargain-joiner",params:{id:t.activityId,joinerId:i}}),!0}})))},error:function(){_.tooltip("报名失败","danger")},complete:function(){t.hideLoading()}}))},joined:function(e){var t=this,i=t.newJoiner,o=i.name,n=i.mobile;t.joining=!1,setTimeout(function(){t.visible=!1},500),t.joinIn({activity:{id:t.activityId,joinerId:e,expires:1e3*t.activity.end_time},mobile:n,name:o})},close:function(e){var t=this;t[e]=!1,setTimeout(function(){t.visible=!1},500)},loadCompletedJoiners:function(e){var t=this;$.ajax(a.default.activityComplete,{data:{activity_id:e},success:function(e){e.data&&(t.completedJoiners=e.data,t.$nextTick(function(){t.startCarousel()}))}})},startCarousel:function(){var e=this;e.stopCarousel(),e.carousel=new u.default(e.$els.carousel,{duration:3e3})},stopCarousel:function(){var e=this;e.carousel&&(e.carousel.stop(),e.carousel=null)},startCountdown:function(){var e=this;e.stopCountdown(),e.$countdown=$(e.$els.countdown).countdown()},stopCountdown:function(){var e=this;e.$countdown&&(e.$countdown.countdown("destroy"),e.$countdown=null)},showSharer:function(){this.$refs.sharer.show()},showqrcode:function(){(0,v.displayShareQrcode)(this.activityId,this.showDialog,this.showLoading,this.hideLoading)}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(10),a=o(n),r=i(12),s=o(r),c=i(85),u=o(c),d=i(9),l=$(document.body);t.default={mixins:[u.default],route:{data:function(){var e=this;e.my.self||e.$nextTick(function(){e.vote()})}},data:function(){return{personal:!0,cutted_price:0}},computed:{cutted:function(){var e=this,t=e.activity;return t?t.prizes.original_price-e.participant.current_price:0},completed:function(){var e=this,t=e.activity;return!!t&&t.prizes.floor_price==e.participant.current_price},ended:function(){var e=this,t=e.activity;return t.end_time<Math.round(Date.now()/1e3)}},methods:{alert:function(){var e=this;e.completed&&e.showDialog({title:"提示",content:e.my.self?"已到底价，赶紧联系商家吧！（商家联系方式详见活动页面）":"TA已减至底价",confirm:!0})},click:function(){var e=this,t=e.my.joinerId;e.my.self?e.completed?e.alert():e.showSharer():t?e.$router.go({name:"bargain-joiner",params:{id:e.activityId,joinerId:t}}):(0,d.showBeforeJoinTiper)(e.showDialog,function(){e.visible=!0,setTimeout(function(){e.joining=!0},0)})},vote:function(){var e=this,t=e.joinerId,i=!1,o=0;return e.completed?void e.alert():e.voter&&(e.voter.joiners.forEach(function(n){n.id==t&&(i=!0,e.my.self&&n.next_vote_date&&(o=n.next_vote_date,o<=Date.now()/1e3&&(i=!1)))}),i)?void e.showDialog({title:"提示",content:e.my.self?"你今天已经减过了（自己每天可以减一次）":"您已经帮TA减过价了！",confirm:!0}):(e.showLoading(),void $.ajax(a.default.activityVote,{method:"POST",data:{joiner_id:t,open_id:e.visitor?e.visitor.openId:"wx"+Date.now(),next_vote_date:o},success:function(i){if(i.code)return void l.tooltip(s.default[i.code],"danger");if(i.data){var o=i.data.cutted_price;e.cutted_price=o,e.participant.current_price-=o,e.activity.vote_count++,e.voteIn({joiner:{id:t,next_vote_date:i.data.next_vote_date,expires:1e3*e.activity.end_time}}),e.showHalo()}},complete:function(){e.hideLoading()}}))},showHalo:function(){var e=this;e.visible=!0,setTimeout(function(){e.haloing=!0},0)},hideHalo:function(){var e=this;e.haloing=!1,setTimeout(function(){e.visible=!1},300)}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(72),a=o(n),r=i(10),s=o(r),c=i(12),u=o(c),d=i(73),l=o(d),f=i(74),h=o(f),p=i(76),m=o(p),g=i(52),v=i(9),y=i(26),w=$(document.body);t.default={template:"#bargain-editor",components:{Uploader:l.default,Userguide:h.default},vuex:{getters:{user:function(e){return e.user}},actions:{showDialog:y.showDialog,showLoading:y.showLoading,hideLoading:y.hideLoading,pageIn:y.pageIn,toggleSharable:y.toggleSharable}},route:{data:function(e){function t(t){var o="疯狂减价",n="制作";t&&(o=t.title,n="clone"==i.$route.query.action?"复制":"编辑"),i.pageIn({title:"【"+n+"】"+o}),i.$nextTick(function(){i.initPicker()}),e.next({activated:!0})}var i=this,o=i.$route,n=Number(o.params.id)||0;return n?(i.showLoading(),void $.ajax(s.default.activity+"/"+n,{data:{token:i.user.token},dataType:"text",success:function(n){if(n=$.parseJSON(n),n.code)return void w.tooltip(u.default[n.code],"danger");if(n.data){var a=n.data.activity;a.user_id!=i.user.id&&e.abort(),"clone"==o.query.action&&(a.id="");var r=a.host_img.split(","),s={};try{s=(0,v.priceFilter)(JSON.parse(a.prizes))}catch(e){console.log(e.message)}s.image&&i.prize.uploader.images.push({suffix:"image/resize,w_640/quality,q_40",url:s.image}),r.forEach(function(e){e&&i.intro.uploader.images.push({suffix:"image/resize,w_640/quality,q_40",url:e})}),a.prizes=s,a.host_img=r,i.activity=a,i.statistics=n.data.statistics,t(a)}},error:function(){w.tooltip("活动加载失败","danger")},complete:function(){i.hideLoading()}})):void t()}},data:function(){var e=this,t=new Date,i=t.getFullYear(),o=t.getMonth(),n=t.getDate(),a=new Date(i,o,n),r=new Date(i,o,n+5);return{activated:!1,activity:{id:"",type:3,title:"珊瑚岛英语课程疯狂减, 最低2元赢取6节课程",start_time:a.valueOf()/1e3,end_time:r.valueOf()/1e3,rules:"1、点击上方按钮“我要参加”进行报名。\n\n2、每人每天可以点击【自己减一下】随机减少价格。\n\n3、减少到心仪价格，马上联系商家兑奖吧。",prizes:{floor_price:2,image:"",max_cutted_price:11,min_cutted_price:1,original_price:300,text:"少儿班6课时，一个月课程，新老学生均可参加此活动，原价300元，最低可减至2元。"},receive_info:"领奖时间：\n领奖地址：\n领奖电话："+e.user.mobile,host_info:"",host_img:[]},editable:!0,intro:{uploaded:!1,uploader:{error:function(){e.submitting=!1,w.tooltip("机构介绍图片上传失败","danger")},images:[],success:function(t){e.activity.host_img=t,e.intro.uploaded=!0,e.publish()}}},prize:{uploaded:!1,uploader:{error:function(){e.submitting=!1,w.tooltip("奖品图片上传失败","danger")},images:[],success:function(t){e.activity.prizes.image=t[0]||"",e.prize.uploaded=!0,e.publish()}}},statistics:null,submitting:!1}},computed:{locked:function(){var e=this,t=e.statistics;return e.activity.id>0&&t&&t.join_count}},ready:function(){var e=this;"clone"==e.$route.query.action&&(0,v.showCloneTiper)(e.showDialog),setTimeout(function(){(0,m.default)($("textarea",e.$el))},2e3)},beforeDestroy:function(){var e=this;e.startDatePicker&&e.startDatePicker.destroy(),e.endDatePicker&&e.endDatePicker.destroy()},methods:{initPicker:function(){var e=this,t=$(e.$el),i=t.find(".start-date"),o=t.find(".end-date"),n={format:"YYYY-MM-DD HH:mm",increment:{minute:10},text:{cancel:"取消",confirm:"确认"},translate:function(e,t){var i={year:"年",month:"月",day:"日",hour:"点",minute:"分"};return Number(t)+i[e]}},r=$.extend(!0,{},n,{text:{title:"请选择活动开始时间"}}),s=$.extend(!0,{},n,{text:{title:"请选择活动结束时间"}}),c=new a.default(i[0],r),u=new a.default(o[0],s);e.startDatePicker=c,e.endDatePicker=u,i.on("change",function(){var t=c.getDate();e.activity.start_time=Math.round(t.getTime()/1e3),e.activity.end_time<=e.activity.start_time&&(t.setDate(t.getDate()+1),e.activity.end_time=Math.round(t.getTime()/1e3),e.$nextTick(function(){return u.update()}))}),o.on("change",function(t){var i=Math.round(u.getDate().getTime()/1e3);return i<=e.activity.start_time?void t.preventDefault():void(e.activity.end_time=i)})},toggle:function(){var e=this;e.editable=!e.editable,document.body.scrollTop=0},submit:function(e){var t=this,i=t.activity,o=(0,g.match)(JSON.stringify(i));return e.preventDefault(),i.title?i.prizes.original_price?i.prizes.floor_price?i.prizes.floor_price<=1?void t.showDialog({title:"提示",content:"底价必须大于 1 元",confirm:!0}):i.prizes.floor_price>i.prizes.original_price?void t.showDialog({title:"提示",content:"底价不能大于原价",confirm:!0}):i.prizes.min_cutted_price?i.prizes.max_cutted_price?i.prizes.max_cutted_price>i.prizes.original_price?void t.showDialog({title:"提示",content:"最大减价数不能大于原价",confirm:!0}):i.prizes.min_cutted_price>=i.prizes.max_cutted_price?void t.showDialog({title:"提示",content:"最大减价数不能小于最小减价数",confirm:!0}):i.prizes.text?i.receive_info?o.length?void t.showDialog({title:"提示",content:"发现微信违规词："+o.join("、")+"，请修改后再发布！",confirm:!0}):void(t.submitting||(t.submitting=!0,t.showLoading("正在提交数据..."),$.get(s.default.uploadSignature,{token:t.user.token,type:2},function(e){return 1101==e.code?(t.hideLoading(),void(0,v.showExpireTip)(t.showDialog)):(t.showLoading("正在上传图片，请勿离开或关闭页面"),void(e.data&&t.$root.$emit("upload.uploader",e.data)))}))):void t.showDialog({title:"提示",content:"请设置领奖信息",confirm:!0}):void t.showDialog({title:"提示",content:"请输入奖品描述",confirm:!0}):void t.showDialog({title:"提示",content:"请设置最大减价数",confirm:!0}):void t.showDialog({title:"提示",content:"请设置最小减价数",confirm:!0}):void t.showDialog({title:"提示",content:"请设置底价",confirm:!0}):void t.showDialog({title:"提示",content:"请设置原价",confirm:!0}):void t.showDialog({title:"提示",content:"请设置活动标题",confirm:!0})},publish:function(){var e=this;if(e.prize.uploaded&&e.intro.uploaded&&!e.publishing){e.publishing=!0,e.showLoading("正在提交数据，请勿离开或关闭页面");var t=$.extend(!0,{},e.activity);$.ajax(s.default.activity,{method:t.id?"put":"post",data:$.extend(t,{host_img:t.host_img.join(),prizes:JSON.stringify((0,v.priceFilter)(t.prizes,{reversed:!0})),token:e.user.token}),success:function(i){return i.code?void e.showDialog({title:"提示",content:u.default[i.code],confirm:!0}):void w.one("hidden.tooltip",function(){e.toggleSharable(),e.$router.go({name:"bargain",params:{id:t.id||i.data.id}})}).tooltip("show",{content:"活动保存成功",style:"success",duration:1e3})},error:function(){w.tooltip("活动发布失败","danger")},complete:function(){e.submitting=!1,e.publishing=!1,e.hideLoading()}})}}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(60),a=o(n),r=i(67),s=o(r),c=i(89),u=o(c),d=i(9);t.default={mixins:[a.default,s.default,u.default],vuex:{getters:{user:function(e){return e.user}}},ready:function(){this.showShareGuide()},methods:{click:function(){var e=this,t=e.my.joinerId;t?e.$router.go({name:"bargain2-joiner",params:{id:e.activityId,joinerId:t}}):(0,d.showBeforeJoinTiper)(e.showDialog,function(){e.visible=!0,setTimeout(function(){e.joining=!0},0)})},showShareGuide:function(){var e=this,t=Number(e.$route.query.user_id)||0;e.user&&e.user.id==t&&e.showDialog({title:"商家如何发活动到朋友圈",content:"请进入【个人中心】-【我的活动】，点击【分享】按钮进行查看",button:{confirm:"我知道了"},confirm:function(){return!0}})}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(90),a=o(n);t.default={template:"#bargain2",data:function(){return $.extend({personal:!1,visible:!1,haloing:!1,pageSwitch:{countdown:!0}},a.default)},beforeDestroy:function(){this.stopCarousel(),this.stopCountdown()}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={category:"bargain2",code:9,name:"疯狂砍价"}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(10),a=o(n),r=i(90),s=(o(r),i(12)),c=o(s),u=i(60),d=o(u),l=i(67),f=o(l),h=i(89),p=o(h),m=i(9),g=i(43),v=$(document.body);t.default={mixins:[d.default,f.default,p.default],route:{data:function(){var e=this;e.my.self||e.$nextTick(function(){e.vote()})}},data:function(){return{personal:!0,cutted_price:0}},computed:{cutted:function(){var e=this,t=e.activity;return t?t.prizes.original_price-e.participant.current_price:0},completed:function(){var e=this,t=e.activity;return!!t&&t.prizes.floor_price==e.participant.current_price},ended:function(){var e=this,t=e.activity;return t.end_time<Math.round(Date.now()/1e3)}},methods:{alert:function(){var e=this;e.completed&&e.showDialog({title:"提示",content:e.my.self?"已到底价，可以兑奖咯（商家联系方式可在活动页面上查找）":"TA已减至底价",confirm:!0})},click:function(){var e=this,t=e.my.joinerId;e.my.self?e.completed?e.alert():e.showSharer():t?e.$router.go({name:"bargain2-joiner",params:{id:e.activityId,joinerId:t}}):(0,m.showBeforeJoinTiper)(e.showDialog,function(){e.visible=!0,setTimeout(function(){e.joining=!0},0)})},vote:function(){var e=this,t=e.joinerId,i=!1,o=0,n=0,r=[];e.activity;if(e.completed)return void e.alert();if(e.voter&&(e.voter.joiners.forEach(function(a){a.id==t&&(i=!0,e.my.self&&a.next_vote_date&&(o=a.next_vote_date,o<=Date.now()/1e3?i=!1:n=o-Date.now()/1e3))}),i)){if(n){var s=Math.floor(n/3600),u=Math.floor((n-3600*s)/60);s&&r.push(s+" 小时 "),u&&r.push(u+" 分钟")}return r=r.join(""),e.showDialog({title:"温馨提示",content:e.my.self?'<font color="red">'+r+"</font> 后再点哦，朋友也能帮你哦！"+e.getShortTip():"您已经帮TA减过价了！",confirm:function(){return!0},button:{confirm:"我知道了"}}),void(e.my.self&&e.genShorturl())}e.showLoading(),$.ajax(a.default.activityVote,{method:"POST",data:{joiner_id:t,open_id:e.visitor?e.visitor.openId:"wx"+Date.now(),next_vote_date:o},success:function(i){if(i.code)return void v.tooltip(c.default[i.code],"danger");if(i.data){var o=i.data.cutted_price;e.cutted_price=o,e.participant.current_price-=o,e.activity.vote_count++,e.voteIn({joiner:{id:t,next_vote_date:i.data.next_vote_date,expires:1e3*e.activity.end_time}}),e.my.self?(e.genShorturl(),e.showDialog({title:"砍价成功",content:'<p><i class="fa fa-smile-o" aria-hidden="true"></i> 哟，厉害了，成功帮自己减价：<font color="red">'+(0,g.pricify)(e.cutted_price)+'</font> 元</p><p style="font-weight: bold;">如何找人帮忙<i class="fa fa-hand-o-down" aria-hidden="true"></i></p>'+e.getShortTip(),confirm:function(){return!0},button:{confirm:"我知道了"}})):e.showHalo()}},complete:function(){e.hideLoading()}})},showHalo:function(){var e=this;e.visible=!0,setTimeout(function(){e.haloing=!0},0)},hideHalo:function(){var e=this;e.haloing=!1,setTimeout(function(){e.visible=!1},300)}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=i(72),r=o(a),s=i(90),c=o(s),u=i(10),d=o(u),l=i(12),f=o(l),h=i(73),p=o(h),m=i(74),g=o(m),v=i(62),y=o(v),w=i(75),_=o(w),b=i(77),x=o(b),j=i(63),D=o(j),k=i(78),S=o(k),T=i(76),z=o(T),I=i(51),M=o(I),L=i(52),C=i(9),O=i(26),P=$(document.body);t.default={template:"#bargain2-editor",components:{Uploader:p.default,Userguide:g.default,Musician:y.default,miniEditor:_.default,miniLogin:x.default,Foreground:D.default,joinCustomize:S.default,Sharer:M.default},vuex:{getters:{user:function(e){return e.user}},actions:{showDialog:O.showDialog,showLoading:O.showLoading,hideLoading:O.hideLoading,pageIn:O.pageIn,toggleSharable:O.toggleSharable}},route:{data:function(e){function t(t){var o="疯狂砍价",n="制作";t&&(o=t.title,n="clone"==i.$route.query.action?"复制":"编辑"),i.pageIn({title:"【"+n+"】"+o}),i.$nextTick(function(){i.initPicker()}),e.next({activated:!0})}var i=this,o=i.$route,a=Number(o.params.id)||0;return i.is_clone="clone"==o.query.action,a?(i.showLoading(),void $.ajax(d.default.activity+"/"+a,{data:{token:i.user.token},dataType:"text",success:function(a){if(a=$.parseJSON(a),a.code)return void i.fail(a);if(a.data){var r=a.data.activity;r.user_id!=i.user.id&&e.abort(),"clone"==o.query.action&&(r.id="");var s=r.host_img.split(","),c={};try{c=(0,C.priceFilter)(JSON.parse(r.prizes))}catch(e){console.log(e.message)}c.image&&i.prize.uploader.images.push({suffix:"image/resize,w_640/quality,q_40",url:c.image}),s.forEach(function(e){e&&i.intro.uploader.images.push({suffix:"image/resize,w_640/quality,q_40",url:e})});var u=r.host_info;try{u=r.host_info&&JSON.parse((0,C.jsonFilter)(r.host_info))}catch(e){console.log("parse host_info error: "+e.message)}u.length&&"object"===("undefined"==typeof u?"undefined":n(u))&&(r.host_info=u);var d={};try{d=r.others&&JSON.parse((0,C.jsonFilter)(r.others)),d="object"===("undefined"==typeof d?"undefined":n(d))?$.extend(i.activity.others,d):i.activity.others}catch(e){console.log("parse others error: "+e.message)}r.prizes=c,r.others=d,r.host_img=s,i.activity=r,i.statistics=a.data.statistics,i.clone_activity.prizes.count=r.prizes.count,i.clone_activity.prizes.vote_hours=r.prizes.vote_hours,i.clone_activity.prizes.floor_price=r.prizes.floor_price,t(r)}},error:function(){P.tooltip("活动加载失败","danger")},complete:function(){i.hideLoading()}})):void t()}},data:function(){var e=this,t=new Date,i=t.getFullYear(),o=t.getMonth(),n=t.getDate(),a=new Date(i,o,n),r=new Date(i,o,n+5);return{activated:!1,expired:!1,activity:{id:"",type:9,title:"珊瑚岛英语课程疯狂减, 最低2元赢取6节课程",start_time:a.valueOf()/1e3,end_time:r.valueOf()/1e3,rules:"1.点击上方按钮“我要参加”参加活动。\n\n2.报名者自己每2小时可以点击【我要减减减】随机减少价格。\n\n3.别人可以帮忙砍价。\n\n4.奖品份数有限，达标就会减少一份，份数领完则无法继续报名，亲速度哦！\n\n5.完成后，马上联系商家兑奖吧。",prizes:{floor_price:2,image:"",max_cutted_price:11,min_cutted_price:1,original_price:300,count:100,vote_hours:2,text:"少儿班6课时，一个月课程，新老学生均可参加此活动，原价300元，最低可减至2元。",receive_prize_mobile:""+e.user.mobile},receive_info:"领奖时间：\n领奖地址：\n领奖电话："+e.user.mobile,host_info:"",host_img:[],others:{musician:"",foreground:{type:"",direction:""},section_text:{receive_info:"领奖信息",intro:"机构介绍"},join_customize:{customize_1:{name:"",required:0},customize_2:{name:"",required:0},customize_3:{name:"",required:0}}}},clone_activity:{prizes:{count:0,vote_hours:0,floor_price:1.01}},editable:!0,intro:{uploaded:!1,uploader:{error:function(){e.submitting=!1,P.tooltip("机构介绍图片上传失败","danger")},images:[],success:function(t){e.activity.host_img=t,e.intro.uploaded=!0,e.publish()}},minieditor:{uploader:{maxlength:10,placeholder:"（点击选择图片，不上传则不显示）",description:"添加图片（最多添加 10 张图片）",error:function(){e.submitting=!1,$("body").tooltip("机构介绍图片上传失败","danger")},success:function(t){e.activity.host_info=t,e.intro.uploaded=!0,e.publish()}},texter:{placeholder:"此处可修改字体样式：加粗、斜体、下划线、字体大小颜色...",description:"添加文本（最多添加 10 个文本内容）",maxlength:10},video:{placeholder:"请输入视频地址【支持优酷、腾讯视频】",description:"添加视频（最多添加 5 个视频）",maxlength:5}}},prize:{uploaded:!1,uploader:{error:function(){e.submitting=!1,P.tooltip("奖品图片上传失败","danger")},images:[],success:function(t){e.activity.prizes.image=t[0]||"",e.prize.uploaded=!0,e.publish()}}},others:{musician:{callback:function(t){e.activity.others.musician=t}},foreground:{callback:function(t){e.activity.others.foreground=t}},join_customize:{callback:function(t){e.activity.others.join_customize=t}}},statistics:null,is_clone:!1,submitting:!1,sharer:null}},computed:{locked:function(){var e=this,t=e.statistics;return e.activity.id>0&&t&&t.join_count>0},isNormalHostInfo:function(){var e=this,t=e.activity;return t.id>0&&(""!==t.host_info&&"object"!=n(t.host_info)||$.trim(t.host_img).length>0)}},ready:function(){var e=this;"clone"==e.$route.query.action&&(0,C.showCloneTiper)(e.showDialog),setTimeout(function(){(0,z.default)($("textarea",e.$el))},2e3)},beforeDestroy:function(){var e=this;e.startDatePicker&&e.startDatePicker.destroy(),e.endDatePicker&&e.endDatePicker.destroy()},methods:{initPicker:function(){var e=this,t=$(e.$el),i=t.find(".start-date"),o=t.find(".end-date"),n={format:"YYYY-MM-DD HH:mm",increment:{minute:10},text:{cancel:"取消",confirm:"确认"},translate:function(e,t){var i={year:"年",month:"月",day:"日",hour:"点",minute:"分"};return Number(t)+i[e]}},a=$.extend(!0,{},n,{text:{title:"请选择活动开始时间"}}),s=$.extend(!0,{},n,{text:{title:"请选择活动结束时间"}}),c=new r.default(i[0],a),u=new r.default(o[0],s);e.startDatePicker=c,e.endDatePicker=u,i.on("change",function(){var t=c.getDate();e.activity.start_time=Math.round(t.getTime()/1e3),e.activity.end_time<=e.activity.start_time&&(t.setDate(t.getDate()+1),e.activity.end_time=Math.round(t.getTime()/1e3),e.$nextTick(function(){return u.update()}))}),o.on("change",function(t){var i=Math.round(u.getDate().getTime()/1e3);return i<=e.activity.start_time?void t.preventDefault():void(e.activity.end_time=i)})},toggle:function(){var e=this;e.editable=!e.editable,document.body.scrollTop=0,setTimeout(function(){(0,z.default)($("textarea",e.$el))},2e3)},fail:function(e,t){var i=this,o=e.code;1100==o?(0,C.showKickedOffline)(e.data.time,e.data.ip,i.showDialog,function(){i.expired=!0}):1101==o?(0,C.showExpireTip)(i.showDialog):1102==o?i.expired=!0:i.$root.$emit("show.snackbar",{color:"accent",message:f.default[o]}),i.hideLoading(),t&&t()},submit:function(e){var t=this,i=t.activity,o=(0,L.match)(JSON.stringify(i));if(e.preventDefault(),!i.title)return void t.showDialog({title:"提示",content:"请设置活动标题",confirm:!0});if(!i.prizes.original_price)return void t.showDialog({title:"提示",content:"请设置原价",confirm:!0});if(!i.prizes.floor_price)return void t.showDialog({title:"提示",content:"请设置底价",confirm:!0});if(t.clone_activity.prizes.floor_price>1&&i.prizes.floor_price<=1)return void t.showDialog({title:"提示",content:"底价必须大于 1 元",confirm:!0});if(i.prizes.floor_price>i.prizes.original_price)return void t.showDialog({title:"提示",content:"底价不能大于原价",confirm:!0});if(!i.prizes.min_cutted_price)return void t.showDialog({title:"提示",content:"请设置最小减价数",confirm:!0});if(!i.prizes.max_cutted_price)return void t.showDialog({title:"提示",content:"请设置最大减价数",confirm:!0});if(i.prizes.max_cutted_price>i.prizes.original_price)return void t.showDialog({title:"提示",content:"最大减价数不能大于原价",confirm:!0});if(i.prizes.min_cutted_price>=i.prizes.max_cutted_price)return void t.showDialog({title:"提示",content:"最大减价数不能小于最小减价数",confirm:!0});if(!i.prizes.vote_hours||i.prizes.vote_hours>24||i.prizes.vote_hours<1)return void t.showDialog({title:"提示",content:"每次投票时间间隔必须在1~24小时之间，请检查",confirm:!0});if(t.clone_activity&&t.statistics&&t.statistics.join_count&&!t.is_clone&&i.prizes.vote_hours>t.clone_activity.prizes.vote_hours)return void t.showDialog({title:"提示",content:"【温馨提示】为了保证活动公平性，活动期间，报名者投票时间间隔只减不增",confirm:!0});if(!i.prizes.count)return void t.showDialog({title:"提示",content:"请设置奖品份数",confirm:!0});if(t.locked&&t.activity.prizes.count<t.clone_activity.prizes.count)return void t.showDialog({title:"提示",content:"已有用户报名，因此奖品数量必须大于原值【"+t.clone_activity.prizes.count+"】",confirm:!0});if(!i.prizes.text)return void t.showDialog({title:"提示",content:"请输入奖品描述",confirm:!0});if(!i.receive_info)return void t.showDialog({title:"提示",content:"请设置领奖信息",confirm:!0});if(!i.prizes.receive_prize_mobile)return void t.showDialog({title:"提示",content:"请设置咨询热线电话",confirm:!0});var n=!1,a=2;return $.each(i.others.join_customize,function(e,i){if(a++,i.required&&""==$.trim(i.name))return t.showDialog({title:"提示",content:"【信息收集设置】第 "+a+" 个信息项由于设置为必填项，因此名称不能为空！",confirm:!0}),void(n=!0)}),n?void 0:o.length?void t.showDialog({title:"提示",content:"发现微信违规词："+o.join("、")+"，请修改后再发布！",confirm:!0}):void(i.prizes.count>1e3&&!window.confirm("哇，土豪，您的奖品份数超过 1000 了，是否继续保存?")||t.submitting||(t.submitting=!0,t.showLoading("正在提交数据..."),$.ajax(d.default.uploadSignature,{method:"get",data:{token:t.user.token,type:2},dataType:"json",success:function(e){return e.code?(t.submitting=!1,t.hideLoading(),void t.fail(e)):(t.showLoading("正在上传图片，请勿离开或关闭页面"),void(e.data&&t.$root.$emit("upload.uploader",e.data)))},error:function(){t.submitting=!1,t.hideLoading(),t.$root.$emit("show.snackbar",{color:"accent",message:"保存失败，请检查网络是否正常连接！"})}})))},publish:function(){var e=this;if(e.prize.uploaded&&e.intro.uploaded&&!e.publishing){e.sharer=null,e.publishing=!0,e.showLoading("正在提交数据，请勿离开或关闭页面");var t=(0,C.expressionFilter)($.extend(!0,{},e.activity));$.ajax(d.default.activity,{method:t.id?"put":"post",data:$.extend(t,{host_img:t.host_img.join(),prizes:JSON.stringify((0,C.priceFilter)(t.prizes,{reversed:!0})),others:JSON.stringify(t.others),token:e.user.token}),success:function(i){return i.code?void e.fail(i):void P.one("hidden.tooltip",function(){e.sharer={autoShare:!1,autoShow:!0,data:$.extend(t,{category:c.default.category,id:t.id||i.data.id}),desc:t.share_content,imgUrl:t.share_img,title:t.share_title}}).tooltip("show",{content:"活动保存成功",style:"success",duration:1e3})},error:function(){P.tooltip("活动发布失败","danger")},complete:function(){e.submitting=!1,e.publishing=!1,e.hideLoading()}})}}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(60),a=o(n),r=i(67),s=o(r),c=i(94),u=o(c),d=i(9);t.default={mixins:[a.default,s.default,u.default],vuex:{getters:{user:function(e){return e.user}}},ready:function(){this.showShareGuide()},methods:{click:function(){var e=this,t=e.my.joinerId;t?e.$router.go({name:"bargain3-joiner",params:{id:e.activityId,joinerId:t}}):(0,d.showBeforeJoinTiper)(e.showDialog,function(){e.visible=!0,setTimeout(function(){e.joining=!0},0)})},showShareGuide:function(){var e=this,t=Number(e.$route.query.user_id)||0;e.user&&e.user.id==t&&e.showDialog({title:"商家如何发活动到朋友圈",content:"请进入【个人中心】-【我的活动】，点击【分享】按钮进行查看",button:{confirm:"我知道了"},confirm:function(){return!0}})}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(95),a=o(n);t.default={template:"#bargain3",data:function(){return $.extend({personal:!1,visible:!1,haloing:!1,hidingHalo:!1,pageSwitch:{countdown:!0}},a.default)},beforeDestroy:function(){this.stopCarousel(),this.stopCountdown()},methods:{textillateJoin:function(){setTimeout(function(){$("#bargain3-join-btn").find("a").textillate({loop:!0,in:{effect:"rotateIn",delay:100},out:{effect:"fadeOut",sequence:!0,delay:1}})},2500)}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={category:"bargain3",code:24,name:"疯狂砍价（升级版）"}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(10),a=o(n),r=i(95),s=(o(r),i(12)),c=o(s),u=i(60),d=o(u),l=i(67),f=o(l),h=i(94),p=o(h),m=i(9),g=i(43),v=$(document.body);t.default={mixins:[d.default,f.default,p.default],route:{data:function(){var e=this;e.my.self||e.$nextTick(function(){e.vote()})}},data:function(){return{personal:!0,cutted_price:0}},computed:{cutted:function(){var e=this,t=e.activity;return t?t.prizes.original_price-e.participant.current_price:0},completed:function(){var e=this,t=e.activity;return!!t&&t.prizes.floor_price==e.participant.current_price},ended:function(){var e=this,t=e.activity;return t.end_time<Math.round(Date.now()/1e3)}},methods:{alert:function(){var e=this;e.completed&&e.showDialog({title:"提示",content:e.my.self?"已到底价，可以兑奖咯（商家联系方式可在活动页面上查找）":"TA已减至底价",confirm:!0})},click:function(){var e=this,t=e.my.joinerId;e.my.self?e.completed?e.alert():e.showSharer():t?e.$router.go({name:"bargain3-joiner",params:{id:e.activityId,joinerId:t}}):(0,m.showBeforeJoinTiper)(e.showDialog,function(){e.visible=!0,setTimeout(function(){e.joining=!0},0)})},vote:function(){var e=this,t=e.joinerId,i=!1,o=0,n=0,r=[];e.activity;if(e.completed)return void e.alert();if(e.voter&&(e.voter.joiners.forEach(function(a){a.id==t&&(i=!0,e.my.self&&a.next_vote_date&&(o=a.next_vote_date,o<=Date.now()/1e3?i=!1:n=o-Date.now()/1e3))}),i)){if(n){var s=Math.floor(n/3600),u=Math.floor((n-3600*s)/60);s&&r.push(s+" 小时 "),u&&r.push(u+" 分钟")}return r=r.join(""),e.showDialog({title:"温馨提示",content:e.my.self?'<font color="red">'+r+"</font> 后再点哦，朋友也能帮你哦！"+e.getShortTip():"您已经帮TA减过价了！",confirm:function(){return!0},button:{confirm:"我知道了"}}),void(e.my.self&&e.genShorturl())}e.showLoading(),$.ajax(a.default.activityVote,{method:"POST",data:{joiner_id:t,open_id:e.visitor?e.visitor.openId:"wx"+Date.now(),next_vote_date:o},success:function(i){if(i.code)return void v.tooltip(c.default[i.code],"danger");if(i.data){var o=i.data.cutted_price;e.cutted_price=o,e.participant.current_price-=o,e.activity.vote_count++,e.voteIn({joiner:{id:t,next_vote_date:i.data.next_vote_date,expires:1e3*e.activity.end_time}}),e.my.self?(e.genShorturl(),e.showDialog({title:"砍价成功",content:'<p><i class="fa fa-smile-o" aria-hidden="true"></i> 哟，厉害了，成功帮自己减价：<font color="red">'+(0,g.pricify)(e.cutted_price)+'</font> 元</p><p style="font-weight: bold;">如何找人帮忙<i class="fa fa-hand-o-down" aria-hidden="true"></i></p>'+e.getShortTip(),confirm:function(){return!0},button:{confirm:"我知道了"}})):e.showHalo()}},complete:function(){e.hideLoading()}})},showHalo:function(){var e=this;e.visible=!0,setTimeout(function(){e.haloing=!0},0)},hideHalo:function(){var e=this;e.hidingHalo=!0,e.haloing=!1,setTimeout(function(){e.hidingHalo=!1,e.visible=!1},900)}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=i(72),r=o(a),s=i(95),c=o(s),u=i(10),d=o(u),l=i(12),f=o(l),h=i(73),p=o(h),m=i(74),g=o(m),v=i(62),y=o(v),w=i(75),_=o(w),b=i(77),x=o(b),j=i(63),D=o(j),k=i(78),S=o(k),T=i(76),z=o(T),I=i(51),M=o(I),L=i(64),C=o(L),O=i(52),P=i(9),E=i(26),A=$(document.body);t.default={template:"#bargain3-editor",components:{Uploader:p.default,Userguide:g.default,Musician:y.default,miniEditor:_.default,miniLogin:x.default,Foreground:D.default,joinCustomize:S.default,Sharer:M.default,Imager:C.default},vuex:{getters:{user:function(e){return e.user}},actions:{showDialog:E.showDialog,showLoading:E.showLoading,hideLoading:E.hideLoading,pageIn:E.pageIn,toggleSharable:E.toggleSharable}},route:{data:function(e){function t(t){var o="疯狂砍价",n="制作";t&&(o=t.title,n="clone"==i.$route.query.action?"复制":"编辑"),i.pageIn({title:"【"+n+"】"+o}),i.$nextTick(function(){i.initPicker()}),e.next({activated:!0})}var i=this,o=i.$route,a=Number(o.params.id)||0;return i.is_clone="clone"==o.query.action,a?(i.showLoading(),void $.ajax(d.default.activity+"/"+a,{data:{token:i.user.token},dataType:"text",success:function(a){if(a=$.parseJSON(a),a.code)return void i.fail(a);if(a.data){var r=a.data.activity;r.user_id!=i.user.id&&e.abort(),"clone"==o.query.action&&(r.id="");var s=r.host_img.split(","),c={};try{c=(0,P.priceFilter)(JSON.parse(r.prizes))}catch(e){console.log(e.message)}c.image&&i.prize.uploader.images.push({suffix:"image/resize,w_640/quality,q_40",url:c.image}),s.forEach(function(e){e&&i.intro.uploader.images.push({suffix:"image/resize,w_640/quality,q_40",url:e})});var u=r.host_info;try{u=r.host_info&&JSON.parse((0,P.jsonFilter)(r.host_info))}catch(e){console.log("parse host_info error: "+e.message)}u.length&&"object"===("undefined"==typeof u?"undefined":n(u))&&(r.host_info=u);var d={};try{d=r.others&&JSON.parse((0,
P.jsonFilter)(r.others)),d="object"===("undefined"==typeof d?"undefined":n(d))?$.extend(i.activity.others,d):i.activity.others}catch(e){console.log("parse others error: "+e.message)}r.prizes=c,r.others=d,r.host_img=s,i.activity=r,i.statistics=a.data.statistics,i.clone_activity.prizes.count=r.prizes.count,i.clone_activity.prizes.vote_hours=r.prizes.vote_hours,i.clone_activity.prizes.floor_price=r.prizes.floor_price,t(r)}},error:function(){A.tooltip("活动加载失败","danger")},complete:function(){i.hideLoading()}})):void t()}},data:function(){var e=this,t=new Date,i=t.getFullYear(),o=t.getMonth(),n=t.getDate(),a=new Date(i,o,n),r=new Date(i,o,n+5);return{activated:!1,expired:!1,activity:{id:"",type:24,title:"xxx机构暑招进行中，课程底价疯狂抢！",start_time:a.valueOf()/1e3,end_time:r.valueOf()/1e3,rules:"1.点击上方按钮“我要参加”参加活动。\n\n2.报名者自己每2小时可以点击【我要减减减】随机减少价格。\n\n3.别人可以帮忙砍价。\n\n4.奖品份数有限，达标就会减少一份，份数领完则无法继续报名，亲速度哦！\n\n5.完成后，马上联系商家兑奖吧。",prizes:{floor_price:2,image:"",max_cutted_price:11,min_cutted_price:1,original_price:300,count:100,vote_hours:2,text:"少儿班6课时，一个月课程，新老学生均可参加此活动，原价300元，最低可减至2元。",receive_prize_mobile:""+e.user.mobile},receive_info:"领奖时间：\n领奖地址：\n领奖电话："+e.user.mobile,host_info:"",host_img:[],others:{musician:"",foreground:{type:"",direction:""},section_text:{receive_info:"领奖信息",intro:"机构介绍"},join_customize:{customize_1:{name:"",required:0},customize_2:{name:"",required:0},customize_3:{name:"",required:0}},banner:{src:"http://cdn.s.shangjiadao.cn/source/images/components/imager/bargain3/01.jpg"}}},clone_activity:{prizes:{count:0,vote_hours:0,floor_price:1.01}},editable:!0,intro:{uploaded:!1,uploader:{error:function(){e.submitting=!1,A.tooltip("机构介绍图片上传失败","danger")},images:[],success:function(t){e.activity.host_img=t,e.intro.uploaded=!0,e.publish()}},minieditor:{uploader:{maxlength:10,placeholder:"（点击选择图片，不上传则不显示）",description:"添加图片（最多添加 10 张图片）",error:function(){e.submitting=!1,$("body").tooltip("机构介绍图片上传失败","danger")},success:function(t){e.activity.host_info=t,e.intro.uploaded=!0,e.publish()}},texter:{placeholder:"此处可修改字体样式：加粗、斜体、下划线、字体大小颜色...",description:"添加文本（最多添加 10 个文本内容）",maxlength:10},video:{placeholder:"请输入视频地址【支持优酷、腾讯视频】",description:"添加视频（最多添加 5 个视频）",maxlength:5}}},prize:{uploaded:!1,uploader:{error:function(){e.submitting=!1,A.tooltip("奖品图片上传失败","danger")},images:[],success:function(t){e.activity.prizes.image=t[0]||"",e.prize.uploaded=!0,e.publish()}}},others:{musician:{callback:function(t){e.activity.others.musician=t}},foreground:{callback:function(t){e.activity.others.foreground=t}},join_customize:{callback:function(t){e.activity.others.join_customize=t}},imager:{switcies:{font:!1},callback:function(t){e.activity.others.banner=t}}},statistics:null,is_clone:!1,submitting:!1,sharer:null}},computed:{locked:function(){var e=this,t=e.statistics;return e.activity.id>0&&t&&t.join_count>0},isNormalHostInfo:function(){var e=this,t=e.activity;return t.id>0&&(""!==t.host_info&&"object"!=n(t.host_info)||$.trim(t.host_img).length>0)}},ready:function(){var e=this;"clone"==e.$route.query.action&&(0,P.showCloneTiper)(e.showDialog),setTimeout(function(){(0,z.default)($("textarea",e.$el))},2e3)},beforeDestroy:function(){var e=this;e.startDatePicker&&e.startDatePicker.destroy(),e.endDatePicker&&e.endDatePicker.destroy()},methods:{initPicker:function(){var e=this,t=$(e.$el),i=t.find(".start-date"),o=t.find(".end-date"),n={format:"YYYY-MM-DD HH:mm",increment:{minute:10},text:{cancel:"取消",confirm:"确认"},translate:function(e,t){var i={year:"年",month:"月",day:"日",hour:"点",minute:"分"};return Number(t)+i[e]}},a=$.extend(!0,{},n,{text:{title:"请选择活动开始时间"}}),s=$.extend(!0,{},n,{text:{title:"请选择活动结束时间"}}),c=new r.default(i[0],a),u=new r.default(o[0],s);e.startDatePicker=c,e.endDatePicker=u,i.on("change",function(){var t=c.getDate();e.activity.start_time=Math.round(t.getTime()/1e3),e.activity.end_time<=e.activity.start_time&&(t.setDate(t.getDate()+1),e.activity.end_time=Math.round(t.getTime()/1e3),e.$nextTick(function(){return u.update()}))}),o.on("change",function(t){var i=Math.round(u.getDate().getTime()/1e3);return i<=e.activity.start_time?void t.preventDefault():void(e.activity.end_time=i)})},toggle:function(){var e=this;e.editable=!e.editable,document.body.scrollTop=0,setTimeout(function(){(0,z.default)($("textarea",e.$el))},2e3)},fail:function(e,t){var i=this,o=e.code;1100==o?(0,P.showKickedOffline)(e.data.time,e.data.ip,i.showDialog,function(){i.expired=!0}):1101==o?(0,P.showExpireTip)(i.showDialog):1102==o?i.expired=!0:i.$root.$emit("show.snackbar",{color:"accent",message:f.default[o]}),i.hideLoading(),t&&t()},submit:function(e){var t=this,i=t.activity,o=(0,O.match)(JSON.stringify(i));if(e.preventDefault(),!i.title)return void t.showDialog({title:"提示",content:"请设置活动标题",confirm:!0});if(!i.prizes.original_price)return void t.showDialog({title:"提示",content:"请设置原价",confirm:!0});if(!i.prizes.floor_price)return void t.showDialog({title:"提示",content:"请设置底价",confirm:!0});if(t.clone_activity.prizes.floor_price>1&&i.prizes.floor_price<=1)return void t.showDialog({title:"提示",content:"底价必须大于 1 元",confirm:!0});if(i.prizes.floor_price>=i.prizes.original_price)return void t.showDialog({title:"提示",content:"底价必须小于原价",confirm:!0});if(!i.prizes.min_cutted_price)return void t.showDialog({title:"提示",content:"请设置最小减价数",confirm:!0});if(!i.prizes.max_cutted_price)return void t.showDialog({title:"提示",content:"请设置最大减价数",confirm:!0});if(i.prizes.max_cutted_price>i.prizes.original_price)return void t.showDialog({title:"提示",content:"最大减价数不能大于原价",confirm:!0});if(i.prizes.min_cutted_price>=i.prizes.max_cutted_price)return void t.showDialog({title:"提示",content:"最大减价数不能小于最小减价数",confirm:!0});if(!i.prizes.vote_hours||i.prizes.vote_hours>24||i.prizes.vote_hours<1)return void t.showDialog({title:"提示",content:"每次投票时间间隔必须在1~24小时之间，请检查",confirm:!0});if(t.clone_activity&&t.statistics&&t.statistics.join_count&&!t.is_clone&&i.prizes.vote_hours>t.clone_activity.prizes.vote_hours)return void t.showDialog({title:"提示",content:"【温馨提示】为了保证活动公平性，活动期间，报名者投票时间间隔只减不增",confirm:!0});if(!i.prizes.count)return void t.showDialog({title:"提示",content:"请设置奖品份数",confirm:!0});if(t.locked&&t.activity.prizes.count<t.clone_activity.prizes.count)return void t.showDialog({title:"提示",content:"已有用户报名，因此奖品数量必须大于原值【"+t.clone_activity.prizes.count+"】",confirm:!0});if(!i.prizes.text)return void t.showDialog({title:"提示",content:"请输入奖品描述",confirm:!0});if(!i.receive_info)return void t.showDialog({title:"提示",content:"请设置领奖信息",confirm:!0});if(!i.prizes.receive_prize_mobile)return void t.showDialog({title:"提示",content:"请设置咨询热线电话",confirm:!0});var n=!1,a=2;return $.each(i.others.join_customize,function(e,i){if(a++,i.required&&""==$.trim(i.name))return t.showDialog({title:"提示",content:"【信息收集设置】第 "+a+" 个信息项由于设置为必填项，因此名称不能为空！",confirm:!0}),void(n=!0)}),n?void 0:o.length?void t.showDialog({title:"提示",content:"发现微信违规词："+o.join("、")+"，请修改后再发布！",confirm:!0}):void(i.prizes.count>1e3&&!window.confirm("哇，土豪，您的奖品份数超过 1000 了，是否继续保存?")||t.submitting||(t.submitting=!0,t.showLoading("正在提交数据..."),$.ajax(d.default.uploadSignature,{method:"get",data:{token:t.user.token,type:2},dataType:"json",success:function(e){return e.code?(t.submitting=!1,t.hideLoading(),void t.fail(e)):(t.showLoading("正在上传图片，请勿离开或关闭页面"),void(e.data&&t.$root.$emit("upload.uploader",e.data)))},error:function(){t.submitting=!1,t.hideLoading(),t.$root.$emit("show.snackbar",{color:"accent",message:"保存失败，请检查网络是否正常连接！"})}})))},publish:function(){var e=this;if(e.prize.uploaded&&e.intro.uploaded&&!e.publishing){e.sharer=null,e.publishing=!0,e.showLoading("正在提交数据，请勿离开或关闭页面");var t=(0,P.expressionFilter)($.extend(!0,{},e.activity));$.ajax(d.default.activity,{method:t.id?"put":"post",data:$.extend(t,{host_img:t.host_img.join(),prizes:JSON.stringify((0,P.priceFilter)(t.prizes,{reversed:!0})),others:JSON.stringify(t.others),token:e.user.token}),success:function(i){return i.code?void e.fail(i):void A.one("hidden.tooltip",function(){e.sharer={autoShare:!1,autoShow:!0,data:$.extend(t,{category:c.default.category,id:t.id||i.data.id}),desc:t.share_content,imgUrl:t.share_img,title:t.share_title}}).tooltip("show",{content:"活动保存成功",style:"success",duration:1e3})},error:function(){A.tooltip("活动发布失败","danger")},complete:function(){e.submitting=!1,e.publishing=!1,e.hideLoading()}})}}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(60),a=o(n),r=i(67),s=o(r),c=i(99),u=o(c),d=i(9);t.default={mixins:[a.default,s.default,u.default],vuex:{getters:{user:function(e){return e.user}}},ready:function(){this.showShareGuide()},methods:{click:function(){var e=this,t=e.my.joinerId;t?e.$router.go({name:"daydaysale-joiner",params:{id:e.activityId,joinerId:t}}):(0,d.showBeforeJoinTiper)(e.showDialog,function(){e.visible=!0,setTimeout(function(){e.joining=!0},0)})},showShareGuide:function(){var e=this,t=Number(e.$route.query.user_id)||0;e.user&&e.user.id==t&&e.showDialog({title:"商家如何发活动到朋友圈",content:"请进入【个人中心】-【我的活动】，点击【分享】按钮进行查看",button:{confirm:"我知道了"},confirm:function(){return!0}})}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(100),a=o(n);t.default={template:"#daydaysale",data:function(){return $.extend({personal:!1,visible:!1,haloing:!1,pageSwitch:{countdown:!0}},a.default)},beforeDestroy:function(){this.stopCarousel(),this.stopCountdown()}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={category:"daydaysale",code:8,name:"天天减价"}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(10),a=o(n),r=i(100),s=(o(r),i(12)),c=o(s),u=i(60),d=o(u),l=i(67),f=o(l),h=i(99),p=o(h),m=i(9),g=i(43),v=$(document.body);t.default={mixins:[d.default,f.default,p.default],route:{data:function(){var e=this;e.my.self||e.$nextTick(function(){e.vote()})}},data:function(){return{personal:!0,cutted_price:0}},computed:{cutted:function(){var e=this,t=e.activity;return t?t.prizes.original_price-e.participant.current_price:0},completed:function(){var e=this,t=e.activity;return!!t&&t.prizes.floor_price==e.participant.current_price},ended:function(){var e=this,t=e.activity;return t.end_time<Math.round(Date.now()/1e3)}},methods:{alert:function(){var e=this;e.completed&&e.showDialog({title:"提示",content:e.my.self?"已到底价，可以兑奖咯（商家联系方式可在活动页面上查找）":"TA已减至底价",confirm:!0})},click:function(){var e=this,t=e.my.joinerId;e.my.self?e.completed?e.alert():e.showSharer():t?e.$router.go({name:"daydaysale-joiner",params:{id:e.activityId,joinerId:t}}):(0,m.showBeforeJoinTiper)(e.showDialog,function(){e.visible=!0,setTimeout(function(){e.joining=!0},0)})},vote:function(){var e=this,t=e.joinerId,i=!1,o=0,n=0,r=[];if(e.completed)return void e.alert();if(e.voter&&(e.voter.joiners.forEach(function(a){a.id==t&&(i=!0,e.my.self&&a.next_vote_date&&(o=a.next_vote_date,o<=Date.now()/1e3?i=!1:n=o-Date.now()/1e3))}),i)){if(n){var s=Math.floor(n/3600),u=Math.floor((n-3600*s)/60);s&&r.push(s+" 小时 "),u&&r.push(u+" 分钟")}return r=r.join(""),e.showDialog({title:"温馨提示",content:e.my.self?'<font color="red">'+r+"</font> 后再点哦，朋友也能帮你哦！"+e.getShortTip():"您已经帮TA减过价了！",confirm:!0,button:{confirm:"我知道了"}}),void(e.my.self&&e.genShorturl())}e.showLoading(),$.ajax(a.default.activityVote,{method:"POST",data:{joiner_id:t,open_id:e.visitor?e.visitor.openId:"wx"+Date.now(),next_vote_date:o},success:function(i){if(i.code)return void v.tooltip(c.default[i.code],"danger");if(i.data){var o=i.data.cutted_price;e.cutted_price=o,e.participant.current_price-=o,e.activity.vote_count++,e.voteIn({joiner:{id:t,next_vote_date:i.data.next_vote_date,expires:1e3*e.activity.end_time}}),e.my.self?(e.genShorturl(),e.showDialog({title:"砍价成功",content:'<p><i class="fa fa-smile-o" aria-hidden="true"></i> 哟，厉害了，成功帮自己减价：<font color="red">'+(0,g.pricify)(e.cutted_price)+'</font> 元</p><p style="font-weight: bold;">如何找人帮忙<i class="fa fa-hand-o-down" aria-hidden="true"></i></p>'+e.getShortTip(),confirm:function(){return!0},button:{confirm:"我知道了"}})):e.showHalo()}},complete:function(){e.hideLoading()}})},showHalo:function(){var e=this;e.visible=!0,setTimeout(function(){e.haloing=!0},0)},hideHalo:function(){var e=this;e.haloing=!1,setTimeout(function(){e.visible=!1},300)}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=i(72),r=o(a),s=i(10),c=o(s),u=i(100),d=o(u),l=i(12),f=o(l),h=i(73),p=o(h),m=i(74),g=o(m),v=i(62),y=o(v),w=i(75),_=o(w),b=i(77),x=o(b),j=i(63),D=o(j),k=i(78),S=o(k),T=i(51),z=o(T),I=i(76),M=o(I),L=i(52),C=i(9),O=i(26),P=$(document.body);t.default={template:"#daydaysale-editor",components:{Uploader:p.default,Userguide:g.default,Musician:y.default,miniEditor:_.default,miniLogin:x.default,Foreground:D.default,joinCustomize:S.default,Sharer:z.default},vuex:{getters:{user:function(e){return e.user}},actions:{showDialog:O.showDialog,showLoading:O.showLoading,hideLoading:O.hideLoading,pageIn:O.pageIn,toggleSharable:O.toggleSharable}},route:{data:function(e){function t(t){var o="天天减价",n="制作";t&&(o=t.title,n="clone"==i.$route.query.action?"复制":"编辑"),i.pageIn({title:"【"+n+"】"+o}),i.$nextTick(function(){i.initPicker()}),e.next({activated:!0})}var i=this,o=i.$route,a=Number(o.params.id)||0;return i.is_clone="clone"==o.query.action,a?(i.showLoading(),void $.ajax(c.default.activity+"/"+a,{data:{token:i.user.token},dataType:"text",success:function(a){if(a=$.parseJSON(a),a.code)return void i.fail(a);if(a.data){var r=a.data.activity;r.user_id!=i.user.id&&e.abort(),"clone"==o.query.action&&(r.id="");var s=r.host_img.split(","),c={};try{c=(0,C.priceFilter)(JSON.parse(r.prizes))}catch(e){console.log(e.message)}c.image&&i.prize.uploader.images.push({suffix:"image/resize,w_640/quality,q_40",url:c.image}),s.forEach(function(e){e&&i.intro.uploader.images.push({suffix:"image/resize,w_640/quality,q_40",url:e})});var u=r.host_info;try{u=r.host_info&&JSON.parse((0,C.jsonFilter)(r.host_info))}catch(e){console.log("parse host_info error: "+e.message)}u.length&&"object"===("undefined"==typeof u?"undefined":n(u))&&(r.host_info=u);var d={};try{d=r.others&&JSON.parse((0,C.jsonFilter)(r.others)),d="object"===("undefined"==typeof d?"undefined":n(d))?$.extend(i.activity.others,d):i.activity.others}catch(e){console.log("parse others error: "+e.message)}r.others=d,r.prizes=c,r.host_img=s,i.activity=r,i.statistics=a.data.statistics,i.clone_activity.prizes.count=r.prizes.count,i.clone_activity.prizes.vote_hours=r.prizes.vote_hours,i.clone_activity.prizes.floor_price=r.prizes.floor_price,t(r)}},error:function(){P.tooltip("活动加载失败","danger")},complete:function(){i.hideLoading()}})):void t()}},data:function(){var e=this,t=new Date,i=t.getFullYear(),o=t.getMonth(),n=t.getDate(),a=new Date(i,o,n),r=new Date(i,o,n+5);return{activated:!1,expired:!1,activity:{id:"",type:8,title:"珊瑚岛英语课程疯狂减, 最低2元赢取6节课程",start_time:a.valueOf()/1e3,end_time:r.valueOf()/1e3,rules:"1.点击上方按钮“我要参加”参加活动。\n\n2.报名者自己每2小时可以点击【我要减减减】随机减少价格。\n\n3.别人可以帮忙砍价。\n\n4.奖品份数有限，达标就会减少一份，份数领完则无法继续报名，亲速度哦！\n\n5.完成后，马上联系商家兑奖吧。",prizes:{floor_price:2,image:"",max_cutted_price:11,min_cutted_price:1,original_price:300,text:"少儿班6课时，一个月课程，新老学生均可参加此活动，原价300元，最低可减至2元。",count:100,vote_hours:2,receive_prize_mobile:""+e.user.mobile},receive_info:"领奖时间：\n领奖地址：\n领奖电话："+e.user.mobile,host_info:"",host_img:[],others:{musician:"",foreground:{type:"",direction:""},section_text:{receive_info:"领奖信息",intro:"机构介绍"},join_customize:{customize_1:{name:"",required:0},customize_2:{name:"",required:0},customize_3:{name:"",required:0}}}},clone_activity:{prizes:{count:0,vote_hours:0,floor_price:1.01}},editable:!0,intro:{uploaded:!1,uploader:{error:function(){e.submitting=!1,P.tooltip("机构介绍图片上传失败","danger")},images:[],success:function(t){e.activity.host_img=t,e.intro.uploaded=!0,e.publish()}},minieditor:{uploader:{maxlength:10,placeholder:"（点击选择图片，不上传则不显示）",description:"添加图片（最多添加 10 张图片）",error:function(){e.submitting=!1,$("body").tooltip("机构介绍图片上传失败","danger")},success:function(t){e.activity.host_info=t,e.intro.uploaded=!0,e.publish()}},texter:{placeholder:"此处可修改字体样式：加粗、斜体、下划线、字体大小颜色...",description:"添加文本（最多添加 10 个文本内容）",maxlength:10},video:{placeholder:"请输入视频地址【支持优酷、腾讯视频】",description:"添加视频（最多添加 5 个视频）",maxlength:5}}},prize:{uploaded:!1,uploader:{error:function(){e.submitting=!1,P.tooltip("奖品图片上传失败","danger")},images:[],success:function(t){e.activity.prizes.image=t[0]||"",e.prize.uploaded=!0,e.publish()}}},others:{musician:{callback:function(t){e.activity.others.musician=t}},foreground:{callback:function(t){e.activity.others.foreground=t}},join_customize:{callback:function(t){e.activity.others.join_customize=t}}},statistics:null,is_clone:!1,submitting:!1,sharer:null}},computed:{locked:function(){var e=this,t=e.statistics;return e.activity.id>0&&t&&t.join_count>0},isNormalHostInfo:function(){var e=this,t=e.activity;return t.id>0&&(""!==t.host_info&&"object"!=n(t.host_info)||$.trim(t.host_img).length>0)}},ready:function(){var e=this;"clone"==e.$route.query.action&&(0,C.showCloneTiper)(e.showDialog),setTimeout(function(){(0,M.default)($("textarea",e.$el))},2e3)},beforeDestroy:function(){var e=this;e.startDatePicker&&e.startDatePicker.destroy(),e.endDatePicker&&e.endDatePicker.destroy()},methods:{initPicker:function(){var e=this,t=$(e.$el),i=t.find(".start-date"),o=t.find(".end-date"),n={format:"YYYY-MM-DD HH:mm",increment:{minute:10},text:{cancel:"取消",confirm:"确认"},translate:function(e,t){var i={year:"年",month:"月",day:"日",hour:"点",minute:"分"};return Number(t)+i[e]}},a=$.extend(!0,{},n,{text:{title:"请选择活动开始时间"}}),s=$.extend(!0,{},n,{text:{title:"请选择活动结束时间"}}),c=new r.default(i[0],a),u=new r.default(o[0],s);e.startDatePicker=c,e.endDatePicker=u,i.on("change",function(){var t=c.getDate();e.activity.start_time=Math.round(t.getTime()/1e3),e.activity.end_time<=e.activity.start_time&&(t.setDate(t.getDate()+1),e.activity.end_time=Math.round(t.getTime()/1e3),e.$nextTick(function(){return u.update()}))}),o.on("change",function(t){var i=Math.round(u.getDate().getTime()/1e3);return i<=e.activity.start_time?void t.preventDefault():void(e.activity.end_time=i)})},toggle:function(){var e=this;e.editable=!e.editable,document.body.scrollTop=0,setTimeout(function(){(0,M.default)($("textarea",e.$el))},2e3)},fail:function(e,t){var i=this,o=e.code;1100==o?(0,C.showKickedOffline)(e.data.time,e.data.ip,i.showDialog,function(){i.expired=!0}):1101==o?(0,C.showExpireTip)(i.showDialog):1102==o?i.expired=!0:i.$root.$emit("show.snackbar",{color:"accent",message:f.default[o]}),i.hideLoading(),t&&t()},submit:function(e){var t=this,i=t.activity,o=(0,L.match)(JSON.stringify(i));if(e.preventDefault(),!i.title)return void t.showDialog({title:"提示",content:"请设置活动标题",confirm:!0});if(!i.prizes.original_price)return void t.showDialog({title:"提示",content:"请设置原价",confirm:!0});if(!i.prizes.floor_price)return void t.showDialog({title:"提示",content:"请设置底价",confirm:!0});if(t.clone_activity.prizes.floor_price>1&&i.prizes.floor_price<=1)return void t.showDialog({title:"提示",content:"底价必须大于 1 元",confirm:!0});if(i.prizes.floor_price>i.prizes.original_price)return void t.showDialog({title:"提示",content:"底价不能大于原价",confirm:!0});if(!i.prizes.min_cutted_price)return void t.showDialog({title:"提示",content:"请设置最小减价数",confirm:!0});if(!i.prizes.max_cutted_price)return void t.showDialog({title:"提示",content:"请设置最大减价数",confirm:!0});if(i.prizes.max_cutted_price>i.prizes.original_price)return void t.showDialog({title:"提示",content:"最大减价数不能大于原价",confirm:!0});if(i.prizes.min_cutted_price>=i.prizes.max_cutted_price)return void t.showDialog({title:"提示",content:"最大减价数不能小于最小减价数",confirm:!0});if(!i.prizes.vote_hours||i.prizes.vote_hours>24||i.prizes.vote_hours<1)return void t.showDialog({title:"提示",content:"每次投票时间间隔必须在1~24小时之间，请检查",confirm:!0});if(t.clone_activity&&t.statistics&&t.statistics.join_count&&!t.is_clone&&i.prizes.vote_hours>t.clone_activity.prizes.vote_hours)return void t.showDialog({title:"提示",content:"【温馨提示】为了保证活动公平性，活动期间，报名者投票时间间隔只减不增",confirm:!0});if(!i.prizes.count)return void t.showDialog({title:"提示",content:"请设置奖品份数",confirm:!0});if(t.locked&&t.activity.prizes.count<t.clone_activity.prizes.count)return void t.showDialog({title:"提示",content:"已有用户报名，因此奖品数量必须大于原值【"+t.clone_activity.prizes.count+"】",confirm:!0});if(!i.prizes.text)return void t.showDialog({title:"提示",content:"请输入奖品描述",confirm:!0});if(!i.receive_info)return void t.showDialog({title:"提示",content:"请设置领奖信息",confirm:!0});if(!i.prizes.receive_prize_mobile)return void t.showDialog({title:"提示",content:"请设置咨询热线电话",confirm:!0});var n=!1,a=2;return $.each(i.others.join_customize,function(e,i){if(a++,i.required&&""==$.trim(i.name))return t.showDialog({title:"提示",content:"【信息收集设置】第 "+a+" 个信息项由于设置为必填项，因此名称不能为空！",confirm:!0}),void(n=!0)}),n?void 0:o.length?void t.showDialog({title:"提示",content:"发现微信违规词："+o.join("、")+"，请修改后再发布！",confirm:!0}):void(i.prizes.count>1e3&&!window.confirm("哇，土豪，您的奖品份数超过 1000 了，是否继续保存?")||t.submitting||(t.submitting=!0,t.showLoading("正在提交数据..."),$.ajax(c.default.uploadSignature,{method:"get",data:{token:t.user.token,type:2},dataType:"json",success:function(e){return e.code?(t.submitting=!1,t.hideLoading(),void t.fail(e)):(t.showLoading("正在上传图片，请勿离开或关闭页面"),void(e.data&&t.$root.$emit("upload.uploader",e.data)))},error:function(){t.submitting=!1,t.hideLoading(),t.$root.$emit("show.snackbar",{color:"accent",message:"保存失败，请检查网络是否正常连接！"})}})))},publish:function(){var e=this;if(e.prize.uploaded&&e.intro.uploaded&&!e.publishing){e.sharer=null,e.publishing=!0,e.showLoading("正在提交数据，请勿离开或关闭页面");var t=(0,C.expressionFilter)($.extend(!0,{},e.activity));$.ajax(c.default.activity,{method:t.id?"put":"post",data:$.extend(t,{host_img:t.host_img.join(),prizes:JSON.stringify((0,C.priceFilter)(t.prizes,{reversed:!0})),others:JSON.stringify(t.others),token:e.user.token}),success:function(i){return i.code?void e.fail(i):void P.one("hidden.tooltip",function(){e.sharer={autoShare:!1,autoShow:!0,data:$.extend(t,{category:d.default.category,id:t.id||i.data.id}),desc:t.share_content,imgUrl:t.share_img,title:t.share_title}}).tooltip("show",{content:"活动保存成功",style:"success",duration:1e3})},error:function(){P.tooltip("活动发布失败","danger")},complete:function(){e.submitting=!1,e.publishing=!1,e.hideLoading()}})}}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(60),a=o(n),r=i(67),s=o(r),c=i(104),u=o(c),d=i(9);t.default={mixins:[a.default,s.default,u.default],methods:{vote:function(){var e=this;if(!e.personal||e.my.self)return void e.showDialog({title:"提示",content:"需要打开别人报名的页面，才能帮TA集福",confirm:!0})},click:function(){var e=this,t=e.my.joinerId,i=e.activity,o=Math.round(Date.now()/1e3);return i?void(i.start_time>o?e.showDialog({title:"提示",content:"活动还未开始",confirm:!0}):i.end_time<o?e.showDialog({title:"提示",content:"活动已结束",confirm:!0}):e.my.self?e.showSharer():e.my.joinerId?e.$router.go({name:"doubleeleven-joiner",params:{id:e.activityId,joinerId:e.my.joinerId}}):(0,d.showBeforeJoinTiper)(e.showDialog,function(){e.visible=!0,setTimeout(function(){e.joining=!0},0)})):void(t?e.$router.go({name:"doubleeleven-joiner",params:{id:e.activityId,joinerId:t}}):(0,d.showBeforeJoinTiper)(e.showDialog,function(){e.visible=!0,setTimeout(function(){e.joining=!0},0)}))}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(105),a=o(n),r=i(12),s=o(r),c=i(10),u=o(c),d=$(document.body);t.default={template:"#doubleeleven",data:function(){return $.extend({personal:!1,visible:!1,haloing:!1,pageSwitch:{countdown:!0}},a.default)},beforeDestroy:function(){this.stopCarousel(),this.stopCountdown()},methods:{getDoubleCoupon:function(e,t){var i=this,o=i.activity,n=Math.round(Date.now()/1e3),a=i.my.joinerId,r=i.activity.prizes.discount_level[t];if(o){if(o.start_time>n)return void this.showDialog({title:"提示",content:"活动未开始",confirm:!0});if(o.end_time<n)return void this.showDialog({title:"提示",content:"活动已结束",confirm:!0})}return i.my.self||(a?i.showDialog({title:"提示",content:"请返回我的页面中抢折扣",confirm:!0}):i.showDialog({title:"提示",content:"参加后才能抢折扣",confirm:!0})),r.percent<=0?void i.showDialog({title:"提示",content:"该产品已被抢完，试试其他礼物吧 :)",confirm:!0}):void(e?i.showDialog({title:"提示",content:"每人仅可抢一个折扣名额，请确认抢此折扣？",cancel:!0,confirm:function(){return i.showLoading("正在火拼中..."),$.ajax(u.default.activityPrize,{method:"POST",data:{joiner_id:i.joinerId,level:t},success:function(e){return e.code?void d.tooltip(s.default[e.code],"danger"):void i.showDialog({title:"提示",content:"恭喜抢得【"+i.activity.prizes.discount_level[t].discount+" 折】，赶快联系商家购买吧 :)",confirm:function(){return window.location.reload(),!0}})},error:function(){d.tooltip("报名失败","danger")},complete:function(){i.hideLoading()}}),!0}}):i.my.self?i.showDialog({title:"提示",content:"福气还不够，赶紧请朋友增加福气吧",confirm:!0}):a?i.showDialog({title:"提示",content:"请返回我的页面中抢折扣",confirm:!0}):i.showDialog({title:"提示",content:"参加后才能抢折扣",confirm:!0}))},showDetail:function(){this.showDialog({title:"折扣玩法",style:{"text-align":"left"},button:{confirm:"我知道了"},content:"①点击【我要参加】报名活动；<br/>  ②自己每天可集福一次； <br/> ③别人也能帮你集福；<br/>④集够福气，点击【马上抢】抢占名额；<br/>⑤联系商家兑奖",confirm:!0})}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={category:"doubleeleven",code:7,name:"集福抢折扣"}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(10),a=o(n),r=i(12),s=o(r),c=i(60),u=o(c),d=i(67),l=o(d),f=i(104),h=o(f),p=i(9),m=$(document.body);t.default={mixins:[u.default,l.default,h.default],route:{data:function(){var e=this;e.my.self||e.$nextTick(function(){e.vote()})}},data:function(){return{personal:!0,cutted_price:0}},computed:{cutted:function(){var e=this,t=e.activity;return t?t.prizes.original_price-e.participant.current_price:0},completed:function(){},ended:function(){var e=this,t=e.activity;return t.end_time<Math.round(Date.now()/1e3)}},methods:{alert:function(){},click:function(){var e=this,t=e.my.joinerId,i=e.activity,o=Math.round(Date.now()/1e3);return i?void(i.start_time>o?e.showDialog({title:"提示",content:"活动还未开始",confirm:!0}):i.end_time<o?e.showDialog({title:"提示",content:"活动已结束",confirm:!0}):e.my.self?e.showSharer():e.my.joinerId?e.$router.go({name:"doubleeleven-joiner",params:{id:e.activityId,joinerId:e.my.joinerId}}):(0,p.showBeforeJoinTiper)(e.showDialog,function(){e.visible=!0,setTimeout(function(){e.joining=!0},0)})):void(e.my.self?e.showSharer():t?e.$router.go({name:"doubleeleven-joiner",params:{id:e.activityId,joinerId:t}}):(0,p.showBeforeJoinTiper)(e.showDialog,function(){e.visible=!0,setTimeout(function(){e.joining=!0},0)}))},vote:function(){var e=this,t=e.joinerId,i=!1,o=0;return e.completed?void e.alert():e.voter&&(e.voter.joiners.forEach(function(n){n.id==t&&(i=!0,e.my.self&&n.next_vote_date&&(o=n.next_vote_date,o<=Date.now()/1e3&&(i=!1)))}),i)?(e.showDialog({title:"提示",content:e.my.self?"你今天已经集过了[自己每天可以集一次]"+e.getShortTip():"你已经帮TA集过了",confirm:!0}),void(e.my.self&&e.genShorturl())):(e.showLoading(),void $.ajax(a.default.activityVote,{method:"POST",data:{joiner_id:t,open_id:e.visitor?e.visitor.openId:"wx"+Date.now(),next_vote_date:o},success:function(i){if(i.code)return void m.tooltip(s.default[i.code],"danger");if(i.data){var o=i.data.cutted_price;e.cutted_price=o,e.participant.current_price-=o,e.activity.vote_count++,e.voteIn({joiner:{id:t,next_vote_date:i.data.next_vote_date,expires:1e3*e.activity.end_time}}),e.participant.vote_count++,e.my.self?(e.genShorturl(),e.showDialog({title:"恭喜您",content:'<p><i class="fa fa-smile-o" aria-hidden="true"></i> 成功增加 1 点福气</p><p style="font-weight: bold;">如何找人帮忙<i class="fa fa-hand-o-down" aria-hidden="true"></i></p>'+e.getShortTip(),confirm:function(){return!0},button:{confirm:"我知道了"}})):(e.showHalo(),setTimeout(function(){e.haloing=!1},2e3))}},complete:function(){e.hideLoading()}}))},showHalo:function(){var e=this;e.visible=!0,setTimeout(function(){e.haloing=!0},0)},hideHalo:function(){var e=this;e.haloing=!1,setTimeout(function(){e.visible=!1},300)}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=i(72),r=o(a),s=i(10),c=o(s),u=i(105),d=o(u),l=i(12),f=o(l),h=i(73),p=o(h),m=i(74),g=o(m),v=i(62),y=o(v),w=i(75),_=o(w),b=i(77),x=o(b),j=i(63),D=o(j),k=i(78),S=o(k),T=i(76),z=o(T),I=i(51),M=o(I),L=i(52),C=i(9),O=i(26),P=$(document.body);t.default={template:"#doubleeleven-editor",components:{Uploader:p.default,Userguide:g.default,Musician:y.default,miniEditor:_.default,miniLogin:x.default,Foreground:D.default,joinCustomize:S.default,Sharer:M.default},vuex:{getters:{user:function(e){return e.user}},actions:{showDialog:O.showDialog,showLoading:O.showLoading,hideLoading:O.hideLoading,pageIn:O.pageIn,toggleSharable:O.toggleSharable}},route:{data:function(e){function t(t){var o="集福抢折扣",n="制作";t&&(o=t.title,n="clone"==i.$route.query.action?"复制":"编辑"),i.clearActivityAttrs(),i.pageIn({title:"【"+n+"】"+o}),i.$nextTick(function(){i.initPicker()}),e.next({activated:!0})}var i=this,o=i.$route,a=Number(o.params.id)||0;return i.is_clone="clone"==o.query.action,a?(i.showLoading(),void $.ajax(c.default.activity+"/"+a,{data:{token:i.user.token},dataType:"text",success:function(a){if(a=$.parseJSON(a),a.code)return void i.fail(a);if(a.data){var r=a.data.activity;r.user_id!=i.user.id&&e.abort(),"clone"==o.query.action&&(r.id="");var s=r.host_img.split(","),c={},u={};try{c=(0,C.priceFilter)(JSON.parse(r.prizes)),c.discount_level||(c.discount_level=i.activity.prizes.discount_level),u=(0,C.priceFilter)(JSON.parse(r.prizes))}catch(e){console.log(e.message)}c.prize_image.length>0&&i.prize_image.uploader.images.push({suffix:"image/resize,w_640/quality,q_40",url:c.prize_image}),s.forEach(function(e){e&&i.intro.uploader.images.push({suffix:"image/resize,w_640/quality,q_40",url:e})});var d=r.host_info;try{d=r.host_info&&JSON.parse((0,C.jsonFilter)(r.host_info))}catch(e){console.log("parse host_info error: "+e.message)}d.length&&"object"===("undefined"==typeof d?"undefined":n(d))&&(r.host_info=d);var l={};try{l=r.others&&JSON.parse((0,C.jsonFilter)(r.others)),l="object"===("undefined"==typeof l?"undefined":n(l))?$.extend(i.activity.others,l):i.activity.others}catch(e){console.log("parse others error: "+e.message)}r.others=l,r.prizes=c,i.copy_prizes=u,r.host_img=s,i.activity=r,i.statistics=a.data.statistics,t(r)}},error:function(){P.tooltip("活动加载失败","danger")},complete:function(){i.hideLoading()}})):void t()}},data:function(){var e=this,t=new Date,i=t.getFullYear(),o=t.getMonth(),n=t.getDate(),a=new Date(i,o,n),r=new Date(i,o,n+5);return{activated:!1,expired:!1,copy_prizes:null,activity:{id:"",type:7,title:"珊瑚岛英语集福抢折扣，0.1折等你来抢",start_time:a.valueOf()/1e3,end_time:r.valueOf()/1e3,rules:"本期奖品为珊瑚岛英语一个月课程，总计4节课，每周一节，原价299元",prizes:{text:"珊瑚岛英语一个月课程",original_price:1999,receive_prize_mobile:""+e.user.mobile,discount_level:[{discount:.1,help_value:500,left_stock:5}],prize_image:[],qrcode_image:[]},receive_info:"领奖时间：\n领奖地址：\n领奖电话："+e.user.mobile,host_info:"",host_img:[],others:{musician:"",foreground:{type:"",direction:""},section_text:{receive_info:"兑奖信息",intro:"机构介绍"},join_customize:{customize_1:{name:"",required:0},customize_2:{name:"",required:0},customize_3:{name:"",required:0}}}},intro:{uploaded:!1,uploader:{error:function(){e.submitting=!1,P.tooltip("机构介绍图片上传失败","danger")},images:[],success:function(t){e.activity.host_img=t,e.intro.uploaded=!0,e.publish()}},minieditor:{uploader:{maxlength:10,
placeholder:"（点击选择图片，不上传则不显示）",description:"添加图片（最多添加 10 张图片）",error:function(){e.submitting=!1,$("body").tooltip("机构介绍图片上传失败","danger")},success:function(t){e.activity.host_info=t,e.intro.uploaded=!0,e.publish()}},texter:{placeholder:"此处可修改字体样式：加粗、斜体、下划线、字体大小颜色...",description:"添加文本（最多添加 10 个文本内容）",maxlength:10},video:{placeholder:"请输入视频地址【支持优酷、腾讯视频】",description:"添加视频（最多添加 5 个视频）",maxlength:5}}},prize_image:{uploaded:!1,uploader:{error:function(){e.submitting=!1,P.tooltip("奖品图片上传失败","danger")},images:[],success:function(t){e.activity.prizes.prize_image=t,e.prize_image.uploaded=!0,e.publish()}}},qrcode_image:{uploaded:!1,uploader:{error:function(){e.submitting=!1,P.tooltip("个人二维码上传失败","danger")},images:[],success:function(t){e.activity.prizes.qrcode_image=t,e.qrcode_image.uploaded=!0,e.publish()}}},others:{musician:{callback:function(t){e.activity.others.musician=t}},foreground:{callback:function(t){e.activity.others.foreground=t}},join_customize:{callback:function(t){e.activity.others.join_customize=t}}},editable:!0,statistics:null,is_clone:!1,sharer:null}},computed:{locked:function(){var e=this,t=e.statistics;return e.activity.id>0&&t&&t.join_count>0&&!e.is_clone},isNormalHostInfo:function(){var e=this,t=e.activity;return t.id>0&&(""!==t.host_info&&"object"!=n(t.host_info)||$.trim(t.host_img).length>0)}},ready:function(){var e=this;"clone"==e.$route.query.action&&(0,C.showCloneTiper)(e.showDialog),setTimeout(function(){(0,z.default)($("textarea",e.$el))},2e3)},beforeDestroy:function(){var e=this;e.startDatePicker&&e.startDatePicker.destroy(),e.endDatePicker&&e.endDatePicker.destroy()},methods:{clearActivityAttrs:function(){var e=this;e.is_clone&&e.activity.prizes.discount_level&&e.activity.prizes.discount_level.forEach(function(e){e.used_stock&&delete e.used_stock,e.winning_ids&&delete e.winning_ids,e.discount_price&&delete e.discount_price,e.true_left_stock&&delete e.true_left_stock,e.percent&&delete e.percent})},addCoupon:function(){this.activity.prizes.discount_level.push({discount:.1,help_value:500,left_stock:500})},deleteCoupon:function(e){var t=this;t.activity.prizes.discount_level.splice(e,1)},initPicker:function(){var e=this,t=$(e.$el),i=t.find(".start-date"),o=t.find(".end-date"),n={format:"YYYY-MM-DD HH:mm",increment:{minute:10},text:{cancel:"取消",confirm:"确认"},translate:function(e,t){var i={year:"年",month:"月",day:"日",hour:"点",minute:"分"};return Number(t)+i[e]}},a=$.extend(!0,{},n,{text:{title:"请选择活动开始时间"}}),s=$.extend(!0,{},n,{text:{title:"请选择活动结束时间"}}),c=new r.default(i[0],a),u=new r.default(o[0],s);e.startDatePicker=c,e.endDatePicker=u,i.on("change",function(){var t=c.getDate();e.activity.start_time=Math.round(t.getTime()/1e3),e.activity.end_time<=e.activity.start_time&&(t.setDate(t.getDate()+1),e.activity.end_time=Math.round(t.getTime()/1e3),e.$nextTick(function(){return u.update()}))}),o.on("change",function(t){var i=Math.round(u.getDate().getTime()/1e3);return i<=e.activity.start_time?void t.preventDefault():void(e.activity.end_time=i)})},toggle:function(){var e=this;e.editable=!e.editable,document.body.scrollTop=0,setTimeout(function(){(0,z.default)($("textarea",e.$el))},2e3)},fail:function(e,t){var i=this,o=e.code;1100==o?(0,C.showKickedOffline)(e.data.time,e.data.ip,i.showDialog,function(){i.expired=!0}):1101==o?(0,C.showExpireTip)(i.showDialog):1102==o?i.expired=!0:i.$root.$emit("show.snackbar",{color:"accent",message:f.default[o]}),i.hideLoading(),t&&t()},submit:function(e){var t=this,i=t.activity,o=(0,L.match)(JSON.stringify(i));if(e.preventDefault(),!i.title)return void t.showDialog({title:"提示",content:"请设置活动标题",confirm:!0});if(!i.prizes.original_price)return void t.showDialog({title:"提示",content:"请设置原价",confirm:!0});if(i.prizes.original_price>99999)return void t.showDialog({title:"提示",content:"原价不能大于99999",confirm:!0});if(i.prizes.original_price<1)return void t.showDialog({title:"提示",content:"原价不能小于1",confirm:!0});var n=!1,a=!1,r=!1,s=!1,u=["一","二","三"];if($.each(i.prizes.discount_level,function(e,i){var o=i.discount,c=i.help_value,d=i.left_stock,l=u[e];if(o>9.99)return t.showDialog({title:"提示",content:"[第 "+l+" 档]折扣 不能大于9.99",confirm:!0}),void(n=!0);if(o<.01)return t.showDialog({title:"提示",content:"[第 "+l+" 档]折扣 不能小于0.01",confirm:!0}),void(n=!0);if(c>99999)return t.showDialog({title:"提示",content:"[第 "+l+" 档]福气 不能大于99999",confirm:!0}),void(a=!0);if(c<1)return t.showDialog({title:"提示",content:"[第 "+l+" 档]福气 不能小于1",confirm:!0}),void(a=!0);if(d>99999)return t.showDialog({title:"提示",content:"[第 "+l+" 档]剩余件数 不能大于9999",confirm:!0}),void(r=!0);if(d<1)return t.showDialog({title:"提示",content:"[第 "+l+" 档]剩余件数 不能小于1",confirm:!0}),void(r=!0);if(d>1e3&&(s=!0),t.copy_prizes&&t.statistics&&t.statistics.join_count&&!t.is_clone){var f=(t.copy_prizes.discount_level[e].discount,t.copy_prizes.discount_level[e].help_value),h=t.copy_prizes.discount_level[e].left_stock;if(c>f)return t.$root.$emit("show.snackbar",{color:"active",message:"【温馨提示】为了保证活动公平性，活动期间，福气只减不增"}),t.showDialog({title:"提示",content:"[第 "+l+" 档]福气不能大于"+f,confirm:!0}),void(r=!0);if(d<h)return t.$root.$emit("show.snackbar",{color:"active",message:"【温馨提示】为了保证活动公平性，活动期间，奖品余量只增不减"}),t.showDialog({title:"提示",content:"[第 "+l+" 档]剩余量不能小于"+h,confirm:!0}),void(r=!0)}}),!(n||a||r)){if(!i.prizes.text)return void t.showDialog({title:"提示",content:"请输入产品名称",confirm:!0});if(!i.receive_info)return void t.showDialog({title:"提示",content:"请设置产品描述",confirm:!0});if(!i.prizes.receive_prize_mobile)return void t.showDialog({title:"提示",content:"请设置咨询热线电话",confirm:!0});var d=!1,l=2;if($.each(i.others.join_customize,function(e,i){if(l++,i.required&&""==$.trim(i.name))return t.showDialog({title:"提示",content:"【信息收集设置】第 "+l+" 个信息项由于设置为必填项，因此名称不能为空！",confirm:!0}),void(d=!0)}),!d)return o.length?void t.showDialog({title:"提示",content:"发现微信违规词："+o.join("、")+"，请修改后再发布！",confirm:!0}):void(s&&!window.confirm("您的奖品份数有包含大于1000，是否继续保存?")||t.submitting||(t.submitting=!0,t.showLoading("正在提交数据..."),$.ajax(c.default.uploadSignature,{method:"get",data:{token:t.user.token,type:2},dataType:"json",success:function(e){return e.code?(t.submitting=!1,t.hideLoading(),void t.fail(e)):(t.showLoading("正在上传图片，请勿离开或关闭页面"),void(e.data&&t.$root.$emit("upload.uploader",e.data)))},error:function(){t.submitting=!1,t.hideLoading(),t.$root.$emit("show.snackbar",{color:"accent",message:"保存失败，请检查网络是否正常连接！"})}})))}},publish:function(){var e=this;if(e.prize_image.uploaded&&e.intro.uploaded&&!e.publishing){e.sharer=null,e.publishing=!0,e.showLoading("正在提交数据，请勿离开或关闭页面");var t=(0,C.expressionFilter)($.extend(!0,{},e.activity));$.ajax(c.default.activity,{method:t.id?"put":"post",data:$.extend(t,{host_img:t.host_img.join(),prizes:JSON.stringify((0,C.priceFilter)(t.prizes,{reversed:!0})),others:JSON.stringify(t.others),token:e.user.token}),success:function(i){return i.code?void e.fail(i):void P.one("hidden.tooltip",function(){e.sharer={autoShare:!1,autoShow:!0,data:$.extend(t,{category:d.default.category,id:t.id||i.data.id}),desc:t.share_content,imgUrl:t.share_img,title:t.share_title}}).tooltip("show",{content:"活动保存成功",style:"success",duration:1e3})},error:function(){P.tooltip("活动发布失败","danger")},complete:function(){e.submitting=!1,e.publishing=!1,e.hideLoading()}})}}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(109),a=o(n),r=i(9);t.default={mixins:[a.default],data:function(){return{personal:!1}},computed:{completed:function(){return!this.personal}},methods:{click:function(){var e=this,t=e.my.joinerId;t?e.$router.go({name:"group-joiner",params:{id:e.activityId,joinerId:t}}):(0,r.showBeforeJoinTiper)(e.showDialog,function(){e.visible=!0,setTimeout(function(){e.joining=!0},0)})}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(21),a=o(n),r=i(10),s=o(r),c=i(110),u=o(c),d=i(11),l=o(d),f=i(12),h=o(f),p=i(40),m=o(p),g=i(51),v=o(g),y=i(45),w=o(y),_=i(62),b=o(_),x=i(63),j=o(x),D=i(65),k=i(9),S=i(26),T=i(52),z=$(document.body),I=window.location;t.default={template:"#group",components:{Message:m.default,Sharer:v.default,WaterfallFlowLoader:w.default,Musician:b.default,Foreground:j.default},vuex:{getters:{user:function(e){return e.user},joiner:function(e){return e.joiner},reminded:function(e){return e.reminded},sharable:function(e){return e.sharable},voter:function(e){return e.voter},visitor:function(e){return e.visitor}},actions:{showDialog:S.showDialog,showLoading:S.showLoading,hideLoading:S.hideLoading,joinIn:S.joinIn,joinOut:S.joinOut,pageIn:S.pageIn,toggleReminder:S.toggleReminder,toggleSharable:S.toggleSharable,voteIn:S.voteIn}},route:{data:function e(t){var i=this,o=t.to,n=Number(o.params.id)||0,a=Number(o.params.joinerId)||0,r=a?s.default.groupMy:s.default.group+"/"+n,e={activity_id:n,group_id:a};i.activity=null,i.loader=null,i.sharer=null,i.showLoading(),$.ajax({url:r,dataType:"text",data:e,success:function(e){if(e=$.parseJSON(e),e.data&&e.data.mobile&&(i.activityMobile=e.data.mobile),e.code)return"1005"==e.code?(I.href="/403.html",void t.abort()):"1217"==e.code?void(i.hasActivity=!1):"1504"==e.code?(i.hasActivity=!1,void i.joinOut(a)):void z.tooltip(h.default[e.code],"danger");if(e.data){var o=e.data.activity||e.data,r=e.data.my_group,c=e.data.statistics,d=i.sharable;if("4"!=o.type)return void(i.hasActivity=!1);!(0,D.matchCases)(o.user_id)&&o.completed_delay_days>=2&&(i.hasCompleted=!0),d&&i.toggleSharable(),i.pageIn({title:o.title,description:o.rules});var l={};try{l=JSON.parse(o.prizes)}catch(e){console.log(e.message)}if(r)try{r.joiners=JSON.parse(r.joiners)}catch(e){r.joiners=[]}var f={};try{f=o.others&&JSON.parse((0,k.jsonFilter)(o.others))}catch(e){console.log("parse others error: "+e.message)}i.$nextTick(function(){i.startCountdown()}),t.next({activity:$.extend({},o,{host_img:String(o.host_img).split(","),prizes:l,others:f}),activityId:n,groups:e.data.groups,joinerId:a,joiners:[],loader:{url:s.default.activityRanking+"?activity_id="+n,params:{activity_id:n}},myGroup:r,sharer:{autoShare:!d,autoShow:d,data:$.extend({joinerId:a,category:u.default.category},o),desc:o.share_content,imgUrl:o.share_img,link:window.location.href,title:o.share_title},statistics:c})}},error:function(){z.tooltip("活动加载失败","danger")},complete:function(){setTimeout(function(){$("div.about").find("img").scrollLoading()},100),i.bindQrcodeAnimate(),i.hideLoading()}})}},data:function(){return{activityMobile:null,activity:null,activityId:0,completedJoiners:{total:0,list:[]},groups:[],hasActivity:!0,hasCompleted:!1,joinerId:0,joiners:[],joining:!1,loader:null,myGroup:null,newJoiner:{name:"",mobile:""},opening:!0,sharer:null,statistics:null,visible:!1}},computed:{my:function(){var e=this,t=e.joinerId,i=e.activityId,o=0,n=!1;return e.joiner&&e.joiner.activities.forEach(function(e){e.joinerId==t?(n=!0,o=t):e.id==i&&(o=e.joinerId)}),{joinerId:o,self:n}},button:function(){var e=this,t=e.activity,i=Math.round(Date.now()/1e3),o=!1,n="";return t&&(t.start_time>i?(n="活动未开始",o=!0):t.end_time<i?(n="活动已结束",o=!0):n=e.my.self?"发送给朋友":e.my.joinerId?"返回我的报名页":e.personal?"单独开团":"我要开团"),{disabled:o,text:n}},footerButton:function(){var e=this,t=e.activity,i=Math.round(Date.now()/1e3),o=!1,n="";return t&&(t.start_time>i?(n="活动未开始",o=!0):t.end_time<i?(n="活动已结束",o=!0):n=e.my.self?"发送给朋友":e.my.joinerId?"返回我的报名页":e.completed?"我要开团":"参加此团"),{disabled:o,open:open,text:n}},countdown:function(){var e=this,t=e.activity,i=Date.now(),o=1e3*t.start_time,n=1e3*t.end_time,a=o<=i;return{time:a?n:o,text:a?"结束":"开始"}},tellink:function(){return"tel://"+this.activityMobile}},ready:function(){this.checkOrder(!0)},beforeDestroy:function(){this.stopCountdown()},methods:{load:function(e){var t=this;Array.isArray(e)&&e.forEach(function(e){return t.joiners.push(e)})},join:function(e){var t=this,i=t.newJoiner,o=i.name,n=i.mobile,a=(0,T.matchJoin)(JSON.stringify({name:o}));return e.preventDefault(),a.length?void(0,k.showJoinNotice)(t.showDialog):(t.showLoading(),void $.ajax(s.default.groupOrder,{method:"POST",data:{amount:t.activity.prizes.prepaid,id:t.activityId,group_id:!t.personal||t.completed||t.opening?0:t.joinerId,mobile:n,name:o,open_id:t.visitor?t.visitor.openId:"wx"+Date.now()},success:function(e){var i=e.data?Number(e.data.group_id):0;return e.code?(i&&t.joined(i),void z.tooltip(h.default[e.code],"danger")):void(e.data&&t.pay(e.data))},error:function(){z.tooltip("报名失败","danger")},complete:function(){t.hideLoading()}}))},joined:function(e){var t=this,i=t.newJoiner,o=i.name,n=i.mobile;e&&(t.joining=!1,setTimeout(function(){t.visible=!1},500),t.joinIn({activity:{id:t.activityId,joinerId:e,expires:1e3*t.activity.end_time},mobile:n,name:o}))},pay:function(e){var t=this,i=window.jWeixin;i&&!function(){var o=JSON.parse(e.api_parameters),n=t.newJoiner,a=n.name,r=n.mobile,s={count:0,limit:1,duration:1e3,id:e.order_id,message:"",mobile:r,name:a,status:0};i.chooseWXPay({timestamp:o.timeStamp,nonceStr:o.nonceStr,package:o.package,signType:o.signType,paySign:o.paySign,success:function(e){"chooseWXPay:ok"==e.errMsg&&(s.limit=15,s.status=1,t.showLoading("正在拼命开团中，请勿离开或关闭此页面，否则将无法正常开团...")),s.message=e.errMsg,t.updateOrder(s)},cancel:function(e){s.message=e.errMsg,t.updateOrder(s)},fail:function(e){s.message="["+e.errMsg+"] ["+navigator.userAgent.toLowerCase()+"]",t.updateOrder(s),t.showDialog({title:"提示",content:"网络通信出现问题，无法弹出微信支付界面，请换个网络或稍微再试。",confirm:!0})}})}()},updateOrder:function(e){var t=this;e&&(e.count++,k.LocalStorage.setItem("order",e),$.post(s.default.groupPay,{message:e.message,status:e.status,order_id:e.id,token:(0,a.default)(""+e.mobile+l.default.token)}).then(function(e){return e.code?void t.checkOrder():(k.LocalStorage.removeItem("order"),void(e.data&&!function(){var i=Number(e.data.group_id);i&&(t.joined(i),t.hideLoading(),t.showDialog({title:"预付成功",content:"点击“确定”进入你自己的拼团页面",confirm:function(){return i==t.joinerId?window.location.reload():t.$router.go({name:"group-joiner",params:{id:t.activityId,joinerId:i}}),!0}}))}()))},function(){t.checkOrder()}))},checkOrder:function(e){var t=this,i=k.LocalStorage.getItem("order");if($.isPlainObject(i))if(i.count<i.limit){if(e)return void t.updateOrder(i);setTimeout(function(){t.updateOrder(i)},i.count*i.duration)}else k.LocalStorage.removeItem("order")},close:function(e){var t=this;t[e]=!1,setTimeout(function(){t.visible=!1},500)},startCountdown:function(){var e=this;e.stopCountdown(),e.$countdown=$(e.$els.countdown).countdown()},stopCountdown:function(){var e=this;e.$countdown&&(e.$countdown.countdown("destroy"),e.$countdown=null)},showSharer:function(){this.$refs.sharer.show()},showqrcode:function(){var e=this;(0,k.displayShareQrcode)({type:u.default.category||"",name:e.myGroup?e.myGroup.leader_name:"",title:e.activity.title,activityId:e.activity.id,joinerId:e.joinerId||0},e.showDialog,e.showLoading,e.hideLoading)},bindQrcodeAnimate:function(){setTimeout(function(){var e=$("header").find("a.qrcode");e.length&&setInterval(function(){e.addClass("ani"),setTimeout(function(){e.removeClass("ani")},2e3)},6e3)},500)},showNotice:function(e,t){(0,k.showCreateNotice)(e,t,this.showDialog)},showTimelineWarning:function(e,t){(0,k.showCreateTimelineWarning)(e,t,this.showDialog)}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={category:"group",code:4,name:"拼团"}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(109),a=o(n),r=i(9);t.default={mixins:[a.default],route:{data:function(){var e=this;e.$nextTick(function(){if(e.alert(),e.joiner&&e.my.self){var t=e.myGroup.leader_mobile==e.joiner.mobile;if(t||e.myGroup.joiners.forEach(function(i){i.mobile==e.joiner.mobile&&(t=!0)}),!t){var i=e.joiner.activities;i.forEach(function(t){t.joinerId==e.joinerId&&e.joinOut(t.joinerId)})}}})}},data:function(){return{personal:!0}},computed:{completed:function e(){var t=this,e=!1,i=0;return t.activity&&(t.activity.prizes.groups.forEach(function(e){i=Math.max(e.limit,i)}),e=t.myGroup.joined_num>=i),e}},methods:{alert:function(){var e=this;e.completed&&e.showDialog({title:"提示",content:e.my.self?"你的拼团已满员":"TA的拼团已满员",confirm:!0})},click:function(e){var t=this,i=t.my.joinerId;t.opening="open"==e.target.dataset.action,t.my.self?t.completed?t.alert():t.showSharer():i?t.$router.go({name:"group-joiner",params:{id:t.activityId,joinerId:i}}):(0,r.showBeforeJoinTiper)(t.showDialog,function(){t.visible=!0,setTimeout(function(){t.joining=!0},0)})}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=i(72),r=o(a),s=i(110),c=o(s),u=i(10),d=o(u),l=i(12),f=o(l),h=i(73),p=o(h),m=i(74),g=o(m),v=i(77),y=o(v),w=i(63),_=o(w),b=i(62),x=o(b),j=i(76),D=o(j),k=i(51),S=o(k),T=i(52),z=i(9),I=i(26),M=$(document.body);t.default={template:"#group-editor",components:{Uploader:p.default,Userguide:g.default,miniLogin:y.default,Musician:x.default,Foreground:_.default,Sharer:S.default},vuex:{getters:{user:function(e){return e.user}},actions:{showDialog:I.showDialog,showLoading:I.showLoading,hideLoading:I.hideLoading,pageIn:I.pageIn,toggleSharable:I.toggleSharable}},route:{data:function(e){function t(t){var o="全民拼团",n="制作";t&&(o=t.title,n="clone"==i.$route.query.action?"复制":"编辑"),i.pageIn({title:"【"+n+"】"+o}),i.$nextTick(function(){i.initPicker()}),e.next({activated:!0})}var i=this,o=i.$route,a=Number(o.params.id)||0;return i.is_clone="clone"==o.query.action,a?(i.showLoading(),void $.ajax(d.default.group+"/"+a,{data:{token:i.user.token},dataType:"text",success:function(a){if(a=$.parseJSON(a),a.code)return void i.fail(a);if(a.data){var r=a.data.activity;r.user_id!=i.user.id&&e.abort(),"clone"==o.query.action&&(r.id="");var s=r.host_img.split(","),c={};try{c=(0,z.priceFilter)(JSON.parse(r.prizes),{pattern:/price|prepaid/})}catch(e){console.log(e.message)}c.image&&i.prize.uploader.images.push({suffix:"image/resize,w_640/quality,q_40",url:c.image}),s.forEach(function(e){e&&i.intro.uploader.images.push({suffix:"image/resize,w_640/quality,q_40",url:e})});var u={};try{u=r.others&&JSON.parse(r.others),u="object"===("undefined"==typeof u?"undefined":n(u))?$.extend(i.activity.others,u):i.activity.others}catch(e){console.log("parse others error: "+e.message)}i.completed=r.end_time<=(new Date).getTime()/1e3,r.prizes=c,r.host_img=s,r.others=u,i.activity=r,i.statistics=a.data.statistics,t(r)}},error:function(){M.tooltip("活动加载失败","danger")},complete:function(){i.hideLoading()}})):void t()}},data:function(){var e=this,t=new Date,i=t.getFullYear(),o=t.getMonth(),n=t.getDate(),a=new Date(i,o,n),r=new Date(i,o,n+5);return{activated:!1,expired:!1,completed:!1,activity:{id:"",type:4,title:"珊瑚岛英语原价1000元狂拼100元，大家一起来拼吧！",start_time:a.valueOf()/1e3,end_time:r.valueOf()/1e3,rules:"",prizes:{groups:[{limit:3,price:300},{limit:5,price:200},{limit:8,price:100}],image:"",mobile:e.user.mobile,prepaid:5,price:1e3,text:"珊瑚岛英语一学期课程团购，人越多价格越低哦。"},receive_info:"领奖时间：\n领奖地址：\n领奖电话："+e.user.mobile,host_info:"",host_img:[],others:{musician:"",foreground:{type:"",direction:""}}},editable:!0,intro:{uploaded:!1,uploader:{error:function(){e.submitting=!1,M.tooltip("机构介绍图片上传失败","danger")},images:[],success:function(t){e.activity.host_img=t,e.intro.uploaded=!0,e.publish()}}},prize:{uploaded:!1,uploader:{error:function(){e.submitting=!1,M.tooltip("奖品图片上传失败","danger")},images:[],success:function(t){e.activity.prizes.image=t[0]||"",e.prize.uploaded=!0,e.publish()}}},others:{musician:{callback:function(t){e.activity.others.musician=t}},foreground:{callback:function(t){e.activity.others.foreground=t}}},statistics:null,submitting:!1,is_clone:!1,sharer:null}},computed:{locked:function(){var e=this,t=e.statistics;return e.activity.id>0&&t&&t.join_count>0}},ready:function(){var e=this;"clone"==e.$route.query.action?(0,z.showCloneTiper)(e.showDialog):e.showDialog({title:"重要提示",style:{"text-align":"left"},button:{confirm:"我知道了"},content:"拼团活动的预付款（定金）在转入钱包时将收取2.5%手续费，主要用于代支付微信手续费以及公司收入营业所得税与增值税。预付款金额设置建议不超过10元。",confirm:!0}),setTimeout(function(){(0,D.default)($("textarea",e.$el))},2e3)},beforeDestroy:function(){var e=this;e.startDatePicker&&e.startDatePicker.destroy(),e.endDatePicker&&e.endDatePicker.destroy()},methods:{initPicker:function(){var e=this,t=$(e.$el),i=t.find(".start-date"),o=t.find(".end-date"),n={format:"YYYY-MM-DD HH:mm",increment:{minute:10},text:{cancel:"取消",confirm:"确认"},translate:function(e,t){var i={year:"年",month:"月",day:"日",hour:"点",minute:"分"};return Number(t)+i[e]}},a=$.extend(!0,{},n,{text:{title:"请选择活动开始时间"}}),s=$.extend(!0,{},n,{text:{title:"请选择活动结束时间"}}),c=new r.default(i[0],a),u=new r.default(o[0],s);e.startDatePicker=c,e.endDatePicker=u,i.on("change",function(){var t=c.getDate();e.activity.start_time=Math.round(t.getTime()/1e3),e.activity.end_time<=e.activity.start_time&&(t.setDate(t.getDate()+1),e.activity.end_time=Math.round(t.getTime()/1e3),e.$nextTick(function(){return u.update()}))}),o.on("change",function(t){var i=Math.round(u.getDate().getTime()/1e3);return i<=e.activity.start_time?void t.preventDefault():void(e.activity.end_time=i)})},addGroup:function(){this.activity.prizes.groups.push({limit:"",prize:""})},removeGroup:function(e){this.activity.prizes.groups.splice(e,1)},toggle:function(){var e=this;e.editable=!e.editable,document.body.scrollTop=0},fail:function(e,t){var i=this,o=e.code;1100==o?(0,z.showKickedOffline)(e.data.time,e.data.ip,i.showDialog,function(){i.expired=!0}):1101==o?(0,z.showExpireTip)(i.showDialog):1102==o?i.expired=!0:i.$root.$emit("show.snackbar",{color:"accent",message:f.default[o]}),i.hideLoading(),t&&t()},submit:function(e){var t=this,i=t.activity,o=(0,T.match)(JSON.stringify(i));return e.preventDefault(),i.title?i.prizes.price?i.prizes.prepaid?i.prizes.groups[0].limit?i.prizes.groups[0].price?i.prizes.text?i.receive_info?i.prizes.mobile?o.length?void t.showDialog({title:"提示",content:"发现微信违规词："+o.join("、")+"，请修改后再发布！",confirm:!0}):void(t.submitting||(t.submitting=!0,t.showLoading("正在提交数据..."),$.ajax(d.default.uploadSignature,{method:"get",data:{token:t.user.token,type:2},dataType:"json",success:function(e){return e.code?(t.submitting=!1,t.hideLoading(),void t.fail(e)):(t.showLoading("正在上传图片，请勿离开或关闭页面"),void(e.data&&t.$root.$emit("upload.uploader",e.data)))},error:function(){t.submitting=!1,t.hideLoading(),t.$root.$emit("show.snackbar",{color:"accent",message:"保存失败，请检查网络是否正常连接！"})}}))):void t.showDialog({title:"提示",content:"请设置咨询电话",confirm:!0}):void t.showDialog({title:"提示",content:"请设置领取信息",confirm:!0}):void t.showDialog({title:"提示",content:"请输入奖品描述",confirm:!0}):void t.showDialog({title:"提示",content:"请设置拼团价格",confirm:!0}):void t.showDialog({title:"提示",content:"请设置拼团人数",confirm:!0}):void t.showDialog({title:"提示",content:"请设置预付金额",confirm:!0}):void t.showDialog({title:"提示",content:"请设置原价",confirm:!0}):void t.showDialog({title:"提示",content:"请设置活动标题",confirm:!0})},publish:function(){var e=this;if(e.prize.uploaded&&e.intro.uploaded&&!e.publishing){e.sharer=null,e.publishing=!0,e.showLoading("正在提交数据，请勿离开或关闭页面");var t=(0,z.expressionFilter)($.extend(!0,{},e.activity));$.ajax(d.default.group,{method:t.id?"put":"post",data:$.extend(t,{host_img:t.host_img.join(),prizes:JSON.stringify((0,z.priceFilter)(t.prizes,{pattern:/price|prepaid/,reversed:!0})),others:JSON.stringify(t.others),token:e.user.token}),success:function(i){return i.code?void e.fail(i):void M.one("hidden.tooltip",function(){e.sharer={autoShare:!1,autoShow:!0,data:$.extend(t,{category:c.default.category,id:t.id||i.data.id}),desc:t.share_content,imgUrl:t.share_img,title:t.share_title}}).tooltip("show",{content:"活动保存成功",style:"success",duration:1e3})},error:function(){M.tooltip("活动发布失败","danger")},complete:function(){e.submitting=!1,e.publishing=!1,e.hideLoading()}})}}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(10),a=o(n),r=i(45),s=o(r);t.default={template:"#group-joiners",components:{WaterfallFlowLoader:s.default},route:{data:function(e){var t=this;e.next({groups:[],loader:{url:a.default.groupAll,params:{id:t.$route.params.id}}})}},data:function(){return{groups:[],loader:null}},methods:{load:function(e){var t=this;Array.isArray(e)&&e.forEach(function(e){t.groups.push(e)})}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={template:"#group-guide"}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(10),a=o(n),r=i(12),s=o(r),c=i(45),u=o(c),d=i(26);t.default={template:"#group-groups",components:{WaterfallFlowLoader:u.default},vuex:{getters:{user:function(e){return e.user}},actions:{showDialog:d.showDialog,pageIn:d.pageIn,showLoading:d.showLoading,hideLoading:d.hideLoading}},route:{data:function(e){var t=this,i="exception"==t.$route.query.state?a.default.groupExceptionJoiners:a.default.groupJoiners,o={id:t.$route.params.id,state:t.$route.query.state,token:t.user.token};t.loader=null,$.get(i,o,function(t){return t.code?void $("body").tooltip(s.default[t.code],"danger"):void(t.data&&e.next({settleable:t.data.settleable,has_settled:t.data.has_settled,total_number:t.data.total_number||0,total_amount:t.data.total_amount||0,exception_number:t.data.exception_number||0,groups:[],loader:{url:i,params:o}}))})}},data:function(){return{settleable:!1,has_settled:!1,total_number:0,total_amount:0,exception_number:0,groups:[],loader:null}},ready:function(){this.pageIn({title:"报名表"})},methods:{load:function(e){var t=this;Array.isArray(e)&&e.forEach(function(e){t.groups.push(e)})},alert:function(){var e=this,t="";e.has_settled&&(t="已转入钱包，请在钱包中的收支明细查看。"),e.settleable||(t="活动结束方可转入钱包！"),e.settleable&&!e.total_amount&&(t="没有可转入金额"),t.length&&this.showDialog({title:"提示",content:t,confirm:!0})},refund:function(e){var t=this,i=Number(e.target.dataset.orderid);return i?void this.showDialog({title:"提示",content:"确定要退款吗？",cancel:!0,confirm:function(){return t.showLoading("正在处理退款中..."),$.post(a.default.groupExceptionOrderRefund,{id:t.$route.params.id,orderid:i,token:t.user.token}).then(function(i){return t.hideLoading(),i.code?void $("body").tooltip(s.default[i.code],"danger"):($(e.target).parent().parent().fadeOut(),void t.$root.$emit("show.snackbar",{message:"退款成功"}))}),!0}}):void $("body").tooltip("订单不存在","danger")},showNoticeTiper:function(){this.showDialog({title:"异常团说明",style:{"text-align":"left"},button:{confirm:"我知道了"},content:"<p>①什么是异常团？答：用户支付成功但未正常开团或加入团，无成团记录。</p><p>②该如何处理异常团？答：点击 “退款” 将预付款原路返回到用户账户，并让用户重新进行报名并付款即可。</p><p>③异常团里的预付款能提现吗？答：由于异常团的报名者未能正常开团或加入团，因此无法提现。</p>",confirm:!0})}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(10),a=o(n),r=i(12),s=o(r),c=i(26),u=$(document.body);t.default={template:"#group-members",vuex:{getters:{user:function(e){return e.user}},actions:{showDialog:c.showDialog,showLoading:c.showLoading,hideLoading:c.hideLoading}},route:{data:function(e){var t=this,i=Number(t.$route.query.groupId);$.get(a.default.groupOne,{group_id:i,token:t.user.token},function(t){if(t.code)return void $("body").tooltip(s.default[t.code],"danger");try{t.data.joiners=JSON.parse(t.data.joiners)}catch(e){t.data.joiners=[]}e.next({group:t.data})})}},data:function(){return{group:null}},methods:{remove:function(e){var t=this,i=Number(e.target.dataset.index),o=isNaN(i)?null:t.group.joiners[i],n=void 0;return t.group.removable?(n=o?"该操作不可恢复，客户已付定金，移除后定金将原路返回，确定要移除 "+o.name+" 吗？":"该操作不可恢复，移除团长后将由下一位团员升级为团长，客户已付定金，移除后定金将原路返回，确定要移除 【"+t.group.leader_name+"】 吗？",void t.showDialog({title:"提示",content:n,cancel:!0,confirm:function(){var e=["token="+t.user.token,"group_id="+t.group.id,"mobile="+(o?o.mobile:t.group.leader_mobile)];return t.showLoading("正在移除..."),$.ajax(a.default.groupRemove+"?"+e.join("&"),{method:"DELETE",success:function(e){return e.code?void u.tooltip(s.default[e.code],"danger"):(t.hideLoading(),u.tooltip("移除成功","success"),void(o?t.group.joiners.$remove(o):window.location.reload()))},error:function(){t.hideLoading(),u.tooltip("移除失败","danger")}}),!0}})):void t.showDialog({title:"提示",content:"无法移除，你已将钱转入钱包！",confirm:!0})}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(10),a=o(n),r=i(12),s=o(r),c=i(35),u=o(c),d=i(26),l=$(document.body);t.default={template:"#group-settle",vuex:{getters:{user:function(e){return e.user},visitor:function(e){return e.visitor}},actions:{showDialog:d.showDialog,showLoading:d.showLoading,hideLoading:d.hideLoading,pageIn:d.pageIn}},data:function(){return{code:"",settled:!1,submitting:!1}},ready:function(){var e=this;e.pageIn({title:"转入钱包"})},beforeDestroy:function(){var e=this;e.countdown&&e.countdown.destroy()},methods:{sendCaptcha:function(e){var t=this,i=e.target;i.disabled||t.requesting||(t.requesting=!0,$.ajax(a.default.groupSettle,{data:{id:t.$route.params.id,token:t.user.token},success:function(e){return e.code?void l.tooltip(s.default[e.code],"danger"):(l.tooltip("短信验证码发送成功","success"),void(t.countdown=new u.default(i,{template:"%d秒后重新获取",seconds:60})))},complete:function(){t.requesting=!1}}))},submit:function(e){var t=this;e.preventDefault(),t.submitting||t.settled||(t.submitting=!0,$.ajax(a.default.groupSettle,{method:"POST",data:{amount:t.$route.query.amount,code:t.code,id:t.$route.params.id,open_id:t.visitor?t.visitor.openId:"wx"+Date.now(),token:t.user.token},success:function(e){return e.code?void l.tooltip(s.default[e.code],"danger"):(t.settled=!0,t.$root.$emit("show.snackbar",{message:"转入成功，请至【个人中心】=>【钱包】查看"}),void setTimeout(function(){t.$router.go({name:"group-groups",params:{id:t.$route.params.id},query:{type:"4"}})},3e3))},complete:function(){t.submitting=!1}}))}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(60),a=o(n),r=i(67),s=o(r),c=i(119),u=o(c),d=i(9);t.default={mixins:[a.default,s.default,u.default],methods:{click:function(){var e=this,t=e.my.joinerId;t?e.$router.go({name:"moon-joiner",params:{id:e.activityId,joinerId:t}}):(0,d.showBeforeJoinTiper)(e.showDialog,function(){e.visible=!0,setTimeout(function(){e.joining=!0},0)})}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(120),a=o(n);t.default={template:"#moon",data:function(){return $.extend({active:!1,merged:!1,personal:!1,visible:!1,haloing:!1},a.default)}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={category:"moon",code:5,name:"全民唤满月"}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(61),a=o(n),r=i(12),s=o(r),c=i(60),u=o(c),d=i(67),l=o(d),f=i(119),h=o(f),p=i(9);t.default={mixins:[u.default,l.default,h.default],route:{data:function(){var e=this;e.my.self||e.$nextTick(function(){e.vote()})}},data:function(){return{personal:!0}},computed:{moon:function(){var e=this,t=e.activity,i=t?e.participant.vote_count/t.prizes.limit:1,o=Math.max(1,isNaN(i)?1:Math.floor(8*i));return"moon-"+o},required:function(){var e=this,t=e.activity;return t?Math.max(0,t.prizes.limit-e.participant.vote_count):0},completed:function(){return!this.required},ended:function(){var e=this,t=e.activity;return t.end_time<Math.round(Date.now()/1e3)}},methods:{alert:function(){var e=this;e.completed&&e.showDialog({title:"提示",content:e.my.self?"已完成，可以兑奖咯（商家联系方式可在活动页面上查找）":"TA已完成集月牙任务",confirm:!0})},click:function(){var e=this,t=e.my.joinerId;e.my.self?e.completed?e.alert():e.showSharer():t?e.$router.go({name:"moon-joiner",params:{id:e.activityId,joinerId:t}}):(0,
p.showBeforeJoinTiper)(e.showDialog,function(){e.visible=!0,setTimeout(function(){e.joining=!0},0)})},vote:function(){var e=this,t=e.joinerId,i=e.my.self?"":"帮TA",o=!1,n=0;return e.completed?void e.alert():e.voter&&(e.voter.joiners.forEach(function(i){i.id==t&&(o=!0,e.my.self&&i.next_vote_date&&(n=i.next_vote_date,n<=Date.now()/1e3&&(o=!1)))}),o)?(e.showDialog({title:"提示",content:e.my.self?"你今天已经集过了[自己每天可以集一次]"+e.getShortTip():"你已经帮TA集过了",confirm:!0}),void(e.my.self&&e.genShorturl())):(e.showLoading(),void $.post(a.default.activity.vote,{joiner_id:t,open_id:e.visitor?e.visitor.openId:"wx"+Date.now(),next_vote_date:n}).then(function(o){return e.hideLoading(),o.code?void $("body").tooltip(s.default[o.code],"danger"):(e.voteIn({joiner:{id:t,next_vote_date:o.data.next_vote_date,expires:1e3*e.activity.end_time}}),e.active=!0,e.my.self||setTimeout(function(){e.voting=!0},0),void setTimeout(function(){e.participant.vote_count++,e.active=!1,e.merged=!0,setTimeout(function(){e.merged=!1,e.my.self?(e.genShorturl(),e.showDialog({title:"恭喜您",content:'<p><i class="fa fa-smile-o" aria-hidden="true"></i> 你已成功增加一个月牙！</p><p style="font-weight: bold;">如何找人帮忙<i class="fa fa-hand-o-down" aria-hidden="true"></i></p>'+e.getShortTip(),confirm:function(){return!0},button:{confirm:"我知道了"}})):e.showDialog({title:"提示",content:"你已成功"+i+"增加一个月牙！",confirm:!0})},2e3)},1e3))}))}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(52),a=i(123),r=o(a),s=i(120),c=o(s);t.default={template:"#moon-editor",mixins:[r.default],data:function(){var e=this,t=new Date,i=t.getFullYear(),o=t.getMonth(),n=t.getDate(),a=new Date(i,o,n),r=new Date(i,o,n+5);return $.extend({activity:{id:0,type:c.default.code,title:"集齐30个月牙唤出满月，免费赢取珊瑚岛英语6节课程",start_time:a.valueOf()/1e3,end_time:r.valueOf()/1e3,rules:"1.点击上方按钮“我要参加”参加活动。\n\n2.报名者自己每天可以［自己集一下］增加一个月牙。\n\n3.别人可以帮忙增加月牙数。\n\n4.奖品份数有限，达标就会减少一份，份数领完则无法继续报名，亲速度哦！\n\n5.完成后，马上联系商家兑奖吧。",prizes:{count:100,image:"",limit:30,text:"免费获得珊瑚岛英语6节课程"},receive_info:"领奖时间：\n领奖地址：\n领奖电话："+e.user.mobile,host_info:"",host_img:[],others:{musician:"",foreground:{type:"",direction:""},section_text:{receive_info:"领奖信息",intro:"机构介绍"},join_customize:{customize_1:{name:"",required:0},customize_2:{name:"",required:0},customize_3:{name:"",required:0}}}}},c.default)},methods:{isValid:function(){var e=this,t=e.activity,i=(0,n.match)(JSON.stringify(t)),o="",a=!1;t.title?t.prizes.limit?t.prizes.text?t.receive_info?e.locked&&t.prizes.count<e.clone_activity.prizes.count?o="已有用户报名，因此奖品数量必须大于原值【"+e.clone_activity.prizes.count+"】":i.length?o="发现微信违规词："+i.join("、")+"，请修改后再发布！":a=!0:o="请设置领奖信息":o="请输入奖品描述":o="请输入月牙数量":o="请设置活动标题";var r=!1,s=2;return $.each(t.others.join_customize,function(e,t){if(s++,t.required&&""==$.trim(t.name))return o="【信息收集设置】第 "+s+" 个信息项由于设置为必填项，因此名称不能为空！",void(r=!0)}),r&&(a=!1),t.prizes.count>1e3&&!window.confirm("哇，土豪，您的奖品份数超过 1000 了，是否继续保存?")&&(a=!1),a||o&&e.showDialog({title:"提示",content:o,confirm:!0}),a}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=i(72),r=o(a),s=i(10),c=o(s),u=i(12),d=o(u),l=i(73),f=o(l),h=i(75),p=o(h),m=i(62),g=o(m),v=i(74),y=o(v),w=i(77),_=o(w),b=i(63),x=o(b),j=i(78),D=o(j),k=i(124),S=o(k),T=i(76),z=o(T),I=i(51),M=o(I),L=i(64),C=o(L),O=(i(52),i(9)),P=i(26);t.default={components:{Uploader:f.default,miniEditor:p.default,Musician:g.default,Userguide:y.default,miniLogin:_.default,Foreground:x.default,joinCustomize:D.default,bannerSkinner:S.default,Sharer:M.default,Imager:C.default},vuex:{getters:{user:function(e){return e.user}},actions:{showDialog:P.showDialog,showLoading:P.showLoading,hideLoading:P.hideLoading,pageIn:P.pageIn,toggleSharable:P.toggleSharable}},route:{data:function(e){function t(t){var o=i.name,n="制作";t&&(o=t.title,n="clone"==i.$route.query.action?"复制":"编辑"),i.pageIn({title:"【"+n+"】"+o}),i.$nextTick(function(){i.initPicker()}),e.next({activated:!0})}var i=this,o=i.$route,a=Number(o.params.id)||0;return i.is_clone="clone"==o.query.action,a?(i.showLoading(),void $.get(c.default.activity+"/"+a,{token:i.user.token},function(a){if(i.hideLoading(),a=$.parseJSON(a),a.code)return void i.fail(a);if(a.data){var r=a.data.activity;r.user_id!=i.user.id&&e.abort(),"clone"==o.query.action&&(r.id="");var s=r.host_img.split(","),c={};try{c=JSON.parse(r.prizes)}catch(e){console.log("parse prizes error: "+e.message)}c.image&&i.prize.uploader.images.push({suffix:"image/resize,w_640/quality,q_50",url:c.image}),s.forEach(function(e){e&&i.intro.uploader.images.push({suffix:"image/resize,w_640/quality,q_50",url:e})});var u=r.host_info;try{u=r.host_info&&JSON.parse((0,O.jsonFilter)(r.host_info))}catch(e){console.log("parse host_info error: "+e.message)}u.length&&"object"===("undefined"==typeof u?"undefined":n(u))&&(r.host_info=u);var d={};try{d=r.others&&JSON.parse((0,O.jsonFilter)(r.others)),d="object"===("undefined"==typeof d?"undefined":n(d))?$.extend(i.activity.others,d):i.activity.others}catch(e){console.log("parse others error: "+e.message)}r.prizes=c,r.host_img=s,r.others=d,i.activity=r,i.statistics=a.data.statistics,r.prizes.count&&(i.clone_activity.prizes.count=r.prizes.count),r.prizes.vote_hours&&(i.clone_activity.prizes.vote_hours=r.prizes.vote_hours),r.prizes.limit&&(i.clone_activity.prizes.limit=r.prizes.limit),t(r)}},"text")):void t()}},data:function(){var e=this;return{activated:!1,editable:!0,expired:!1,intro:{uploaded:!1,uploader:{error:function(){e.submitting=!1,$("body").tooltip("机构介绍图片上传失败","danger")},images:[],success:function(t){console.log(11),e.activity.host_img=t,e.intro.uploaded=!0,e.publish()}},minieditor:{uploader:{maxlength:10,placeholder:"（点击选择图片，不上传则不显示）",description:"添加图片（最多添加 10 张图片）",error:function(){e.submitting=!1,$("body").tooltip("机构介绍图片上传失败","danger")},success:function(t){e.activity.host_info=t,e.intro.uploaded=!0,e.publish()}},texter:{placeholder:"此处可修改字体样式：加粗、斜体、下划线、字体大小颜色...",description:"添加文本（最多添加 10 个文本内容）",maxlength:10},video:{placeholder:"请输入视频地址【支持优酷、腾讯视频】",description:"添加视频（最多添加 5 个视频）",maxlength:5}}},prize:{uploaded:!1,uploader:{error:function(){e.submitting=!1,$("body").tooltip("奖品图片上传失败","danger")},images:[],success:function(t){e.activity.prizes.image=t[0]||"",e.prize.uploaded=!0,e.publish()}}},others:{musician:{callback:function(t){e.activity.others.musician=t}},foreground:{callback:function(t){e.activity.others.foreground=t}},join_customize:{callback:function(t){e.activity.others.join_customize=t}},imager:{switcies:{font:!1},callback:function(t){e.activity.others.banner=t}}},clone_activity:{prizes:{count:0,vote_hours:0}},statistics:null,is_clone:!1,submitting:!1,sharer:null}},computed:{locked:function(){var e=this,t=e.statistics;return e.activity.id>0&&t&&t.join_count>0&&!e.is_clone},isNormalHostInfo:function(){var e=this,t=e.activity;return t.id>0&&(""!==t.host_info&&"object"!=n(t.host_info)||$.trim(t.host_img).length>0)}},ready:function(){var e=this;"clone"==e.$route.query.action&&(0,O.showCloneTiper)(e.showDialog),setTimeout(function(){(0,z.default)($("textarea",e.$el).not(".nosize"))},2e3)},beforeDestroy:function(){var e=this;e.startDatePicker&&e.startDatePicker.destroy(),e.endDatePicker&&e.endDatePicker.destroy()},methods:{initPicker:function(){var e=this,t=$(e.$el),i=t.find(".start-date"),o=t.find(".end-date"),n={format:"YYYY-MM-DD HH:mm",increment:{minute:10},text:{cancel:"取消",confirm:"确认"},translate:function(e,t){var i={year:"年",month:"月",day:"日",hour:"点",minute:"分"};return Number(t)+i[e]}},a=$.extend(!0,{},n,{text:{title:"请选择活动开始时间"}}),s=$.extend(!0,{},n,{text:{title:"请选择活动结束时间"}});console.log(i[0]);var c=new r.default(i[0],a),u=new r.default(o[0],s);e.startDatePicker=c,e.endDatePicker=u,i.on("change",function(){var t=c.getDate();e.activity.start_time=Math.round(t.getTime()/1e3),e.activity.end_time<=e.activity.start_time&&(t.setDate(t.getDate()+1),e.activity.end_time=Math.round(t.getTime()/1e3),e.$nextTick(function(){return u.update()}))}),o.on("change",function(t){var i=Math.round(u.getDate().getTime()/1e3);return i<=e.activity.start_time?void t.preventDefault():void(e.activity.end_time=i)})},toggle:function(){var e=this;e.editable=!e.editable,document.body.scrollTop=0,setTimeout(function(){(0,z.default)($("textarea",e.$el).not(".nosize"))},2e3)},fail:function(e,t){var i=this,o=e.code;1100==o?(0,O.showKickedOffline)(e.data.time,e.data.ip,i.showDialog,function(){i.expired=!0}):1101==o?(0,O.showExpireTip)(i.showDialog):1102==o?i.expired=!0:i.$root.$emit("show.snackbar",{color:"accent",message:d.default[o]}),i.hideLoading(),t&&t()},submit:function(e){var t=this;e.preventDefault(),t.isValid()&&!t.submitting&&(t.submitting=!0,t.showLoading("正在提交数据..."),$.ajax(c.default.uploadSignature,{method:"get",data:{token:t.user.token,type:2},dataType:"json",success:function(e){return e.code?(t.submitting=!1,t.hideLoading(),void t.fail(e)):(t.showLoading("正在上传图片，请勿离开或关闭页面"),void(e.data&&t.$root.$emit("upload.uploader",e.data)))},error:function(){t.submitting=!1,t.hideLoading(),t.$root.$emit("show.snackbar",{color:"accent",message:"保存失败，请检查网络是否正常连接！"})}}))},publish:function(){var e=this;if(e.prize.uploaded&&e.intro.uploaded&&!e.publishing){e.sharer=null,e.publishing=!0,e.showLoading("正在提交数据中，请勿离开或关闭页面");var t=(0,O.expressionFilter)($.extend(!0,{},e.activity));$.ajax(c.default.activity,{method:t.id?"put":"post",data:$.extend(t,{host_img:t.host_img.join(),prizes:JSON.stringify(t.prizes),others:JSON.stringify(t.others),token:e.user.token}),dataType:"text",success:function(i){return i=$.parseJSON(i),i.code?void e.fail(i):(console.log(1),e.$root.$emit("show.snackbar",{message:"活动保存成功"}),void(e.sharer={autoShare:!1,autoShow:!0,data:$.extend(t,{category:e.category,id:t.id||i.data.id}),desc:t.share_content,imgUrl:t.share_img,title:t.share_title}))},error:function(){e.$root.$emit("show.snackbar",{color:"accent",message:"活动发布失败"})},complete:function(){e.submitting=!1,e.publishing=!1,e.hideLoading()}})}}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(10),a=o(n),r=i(26);$(document.body);t.default={template:"#banner-skinner",vuex:{actions:{showLoading:r.showLoading,hideLoading:r.hideLoading,showDialog:r.showDialog}},props:{type:{type:String,default:""},code:{type:Number,default:1},editable:{type:Boolean,default:!0},callback:{type:Function,default:function(){return function(){}}}},data:function(){return{data:[],visible:!1,hiding:!1}},computed:{},ready:function(){},beforeDestroy:function(){},methods:{show:function(){var e=this;return e.data.length?void(e.visible=!0):(e.showLoading("正在加载..."),void $.getJSON(a.default.json.bannerSkins+"/"+e.type+".json?2"+(new Date).getHours(),function(t){e.data=t,e.visible=!0,e.hideLoading()}))},hide:function(){var e=this;e.hiding=!0,setTimeout(function(){e.visible=!1,e.hiding=!1},1800)},select:function(e){var t=this,i=t.data[e];t.callback&&t.callback({code:i.code,title:i.title}),t.hide()}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(60),a=o(n),r=i(67),s=o(r),c=i(126),u=o(c),d=i(9);t.default={mixins:[a.default,s.default,u.default],methods:{click:function(){var e=this,t=e.my.joinerId;t?e.$router.go({name:"nation-joiner",params:{id:e.activityId,joinerId:t}}):(0,d.showBeforeJoinTiper)(e.showDialog,function(){e.visible=!0,setTimeout(function(){e.joining=!0},0)})}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(127),a=o(n);t.default={template:"#nation",data:function(){return $.extend({personal:!1},a.default)},computed:{remainder:function(){var e=this;return Math.max(0,e.activity.prizes.count-e.completedJoiners.total)}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={category:"nation",code:6,name:"欢度国庆"}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(61),a=o(n),r=i(12),s=o(r),c=i(60),u=o(c),d=i(67),l=o(d),f=i(126),h=o(f),p=i(9);t.default={mixins:[u.default,l.default,h.default],route:{data:function(){var e=this;e.my.self||e.$nextTick(function(){e.vote()})}},data:function(){return{personal:!0}},computed:{word:function(){var e=this,t=e.activity,i=t?e.participant.vote_count/t.prizes.limit:1,o=Math.max(1,isNaN(i)?1:Math.floor(4*i));return"word-"+o},required:function(){var e=this,t=e.activity;return t?Math.max(0,t.prizes.limit-e.participant.vote_count):0},completed:function(){return!this.required},ended:function(){var e=this,t=e.activity;return t.end_time<Math.round(Date.now()/1e3)}},methods:{alert:function(){var e=this;e.completed&&e.showDialog({title:"提示",content:e.my.self?"完成任务了，赶紧联系商家吧！（商家联系方式详见活动页面）":"TA已集满欢乐值",confirm:!0})},click:function(){var e=this,t=e.my.joinerId;e.my.self?e.completed?e.alert():e.showSharer():t?e.$router.go({name:"nation-joiner",params:{id:e.activityId,joinerId:t}}):(0,p.showBeforeJoinTiper)(e.showDialog,function(){e.visible=!0,setTimeout(function(){e.joining=!0},0)})},vote:function(){var e=this,t=e.joinerId,i=e.my.self?"":"帮TA",o=!1,n=0;return e.completed?void e.alert():e.voter&&(e.voter.joiners.forEach(function(i){i.id==t&&(o=!0,e.my.self&&i.next_vote_date&&(n=i.next_vote_date,n<=Date.now()/1e3&&(o=!1)))}),o)?(e.showDialog({title:"提示",content:e.my.self?"你今天已经集过了[自己每天可以集一次]"+e.getShortTip():"你已经帮TA集过了",confirm:!0}),void(e.my.self&&e.genShorturl())):(e.showLoading(),void $.post(a.default.activity.vote,{joiner_id:t,open_id:e.visitor?e.visitor.openId:"wx"+Date.now(),next_vote_date:n}).then(function(o){return e.hideLoading(),o.code?void $("body").tooltip(s.default[o.code],"danger"):(e.voteIn({joiner:{id:t,next_vote_date:o.data.next_vote_date,expires:1e3*e.activity.end_time}}),e.participant.vote_count++,void(e.my.self?(e.genShorturl(),e.showDialog({title:"恭喜您",content:'<p><i class="fa fa-smile-o" aria-hidden="true"></i> 你已成功增加一个欢乐值！</p><p style="font-weight: bold;">如何找人帮忙<i class="fa fa-hand-o-down" aria-hidden="true"></i></p>'+e.getShortTip(),confirm:function(){return!0},button:{confirm:"我知道了"}})):e.showDialog({title:"提示",content:"你已成功"+i+"增加一个欢乐值！",confirm:!0})))}))}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(52),a=i(123),r=o(a),s=i(127),c=o(s),u=i(74),d=o(u);t.default={template:"#nation-editor",mixins:[r.default],components:{Userguide:d.default},data:function(){var e=this,t=new Date,i=t.getFullYear(),o=t.getMonth(),n=t.getDate(),a=new Date(i,o,n),r=new Date(i,o,n+5);return $.extend({activity:{id:0,type:c.default.code,title:"集满48个欢乐值点亮“欢度国庆”，免费赢取跆拳道课程一个月",start_time:a.valueOf()/1e3,end_time:r.valueOf()/1e3,rules:"1.点击上方按钮“我要参加”参加活动。\n\n2.自己每天可以点击【自己集一下】，增加一个欢乐值。\n\n3.别人可以帮忙增加欢乐值。\n\n4.集满欢乐值，马上联系商家兑奖吧。",prizes:{count:100,image:"",limit:48,text:"免费获得珊瑚岛英语一个月课程"},receive_info:"领奖时间：\n领奖地址：\n领奖电话："+e.user.mobile,host_info:"",host_img:[],others:{musician:"",foreground:{type:"",direction:""},section_text:{receive_info:"领奖信息",intro:"机构介绍"},join_customize:{customize_1:{name:"",required:0},customize_2:{name:"",required:0},customize_3:{name:"",required:0}}}}},c.default)},methods:{isValid:function(){var e=this,t=e.activity,i=(0,n.match)(JSON.stringify(t)),o="",a=!1;t.title?t.prizes.limit?t.prizes.text?t.receive_info?i.length?o="发现微信违规词："+i.join("、")+"，请修改后再发布！":a=!0:o="请设置领奖信息":o="请输入奖品描述":o="请输入月牙数量":o="请设置活动标题";var r=!1,s=2;return $.each(t.others.join_customize,function(e,t){if(s++,t.required&&""==$.trim(t.name))return o="【信息收集设置】第 "+s+" 个信息项由于设置为必填项，因此名称不能为空！",void(r=!0)}),r&&(a=!1),t.prizes.count>1e3&&!window.confirm("哇，土豪，您的奖品份数超过 1000 了，是否继续保存?")&&(a=!1),a||o&&e.showDialog({title:"提示",content:o,confirm:!0}),a}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(60),a=o(n),r=i(67),s=o(r),c=i(131),u=o(c),d=i(9);t.default={mixins:[a.default,s.default,u.default],methods:{click:function(){var e=this,t=e.my.joinerId;t?e.$router.go({name:"snowman-joiner",params:{id:e.activityId,joinerId:t}}):(0,d.showBeforeJoinTiper)(e.showDialog,function(){e.visible=!0,setTimeout(function(){e.joining=!0},0)})}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(132),a=o(n);t.default={template:"#snowman",data:function(){return $.extend({active:!1,personal:!1,visible:!1,haloing:!1},a.default)}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={category:"snowman",code:10,name:"堆雪人"}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(61),a=o(n),r=i(12),s=o(r),c=i(60),u=o(c),d=i(67),l=o(d),f=i(131),h=o(f),p=i(9);t.default={mixins:[u.default,l.default,h.default],route:{data:function(){var e=this;e.my.self||e.$nextTick(function(){e.vote()})}},data:function(){return{personal:!0}},computed:{required:function(){var e=this,t=e.activity;return t?Math.max(0,t.prizes.limit-e.participant.vote_count):0},completed:function(){return!this.required},ended:function(){var e=this,t=e.activity;return t.end_time<Math.round(Date.now()/1e3)}},methods:{alert:function(){var e=this;e.completed&&e.showDialog({title:"提示",content:e.my.self?"已完成，可以兑奖咯（商家联系方式可在活动页面上查找）":"TA已完成堆雪人任务",confirm:!0})},click:function(){var e=this,t=e.my.joinerId;e.my.self?e.completed?e.alert():e.showSharer():t?e.$router.go({name:"snowman-joiner",params:{id:e.activityId,joinerId:t}}):(0,p.showBeforeJoinTiper)(e.showDialog,function(){e.visible=!0,setTimeout(function(){e.joining=!0},0)})},vote:function(){var e=this,t=e.joinerId,i=(e.my.self?"":"帮TA",!1),o=0,n=0,r=[];if(e.completed)return void e.alert();if(e.voter&&(e.voter.joiners.forEach(function(a){a.id==t&&(i=!0,e.my.self&&a.next_vote_date&&(o=a.next_vote_date,o<=Date.now()/1e3?i=!1:n=o-Date.now()/1e3))}),i)){if(n){var c=Math.floor(n/3600),u=Math.floor((n-3600*c)/60);c&&r.push(c+" 小时 "),u&&r.push(u+" 分钟")}return r=r.join(""),e.showDialog({title:"提示",content:e.my.self?'<font color="red">'+r+"</font> 后再点哦，朋友也能帮你哦！"+e.getShortTip():"你已经帮TA堆过了",confirm:!0}),void(e.my.self&&e.genShorturl())}e.showLoading(),$.post(a.default.activity.vote,{joiner_id:t,open_id:e.visitor?e.visitor.openId:"wx"+Date.now(),next_vote_date:o}).then(function(i){return e.hideLoading(),i.code?void $("body").tooltip(s.default[i.code],"danger"):(e.voteIn({joiner:{id:t,next_vote_date:i.data.next_vote_date,expires:1e3*e.activity.end_time}}),e.active=!0,void setTimeout(function(){e.my.self?(e.genShorturl(),e.showDialog({title:"恭喜您",content:'<p><i class="fa fa-smile-o" aria-hidden="true"></i> 堆雪人 +1</p><p style="font-weight: bold;">如何找人帮忙<i class="fa fa-hand-o-down" aria-hidden="true"></i></p>'+e.getShortTip(),confirm:function(){return!0},button:{confirm:"我知道了"}})):e.showHalo(),e.participant.vote_count++},1e3))})},showHalo:function(){var e=this;e.visible=!0,setTimeout(function(){e.haloing=!0},0)},hideHalo:function(){var e=this;e.haloing=!1,setTimeout(function(){e.visible=!1},300)}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(52),a=i(123),r=o(a),s=i(132),c=o(s);t.default={template:"#snowman-editor",mixins:[r.default],data:function(){var e=this,t=new Date,i=t.getFullYear(),o=t.getMonth(),n=t.getDate(),a=new Date(i,o,n),r=new Date(i,o,n+5);return $.extend({activity:{id:0,type:c.default.code,title:"堆雪人送好礼，得力跆拳道寒假班免费送",start_time:a.valueOf()/1e3,end_time:r.valueOf()/1e3,rules:"1.点击上方按钮“我要参加”参加活动。\n\n2.报名者自己每2小时可以点击【我要堆雪人】增加1次。\n\n3.别人可以帮忙增加雪人数。\n\n4.奖品份数有限，达标就会减少一份，份数领完则无法继续报名，亲速度哦！\n\n5.完成后，马上联系商家兑奖吧。\n\n",prizes:{count:100,image:"",limit:30,desc:"跆拳道一个月课程，总计8次课\n每周2次课，每班人数不超过30人\n",vote_hours:2,text:"免费获得跆拳道寒假班",receive_prize_mobile:""+e.user.mobile},receive_info:"领奖时间：\n领奖地址：\n领奖电话："+e.user.mobile,host_info:"",host_img:[],others:{musician:"",foreground:{type:"",direction:""},section_text:{receive_info:"领奖信息",intro:"机构介绍"},join_customize:{customize_1:{name:"",required:0},customize_2:{name:"",required:0},customize_3:{name:"",required:0}}}}},c.default)},methods:{isValid:function(){var e=this,t=e.activity,i=(0,n.match)(JSON.stringify(t)),o="",a=!1;t.title?!t.prizes.vote_hours||t.prizes.vote_hours>24||t.prizes.vote_hours<1?o="每次投票时间间隔必须在1~24小时之间，请检查":e.clone_activity&&e.statistics&&e.statistics.join_count&&!e.is_clone&&t.prizes.vote_hours>e.clone_activity.prizes.vote_hours?o="【温馨提示】为了保证活动公平性，活动期间，报名者投票时间间隔只减不增":t.prizes.count?e.locked&&e.activity.prizes.count<e.clone_activity.prizes.count?o="已有用户报名，因此奖品数量必须大于原值【"+e.clone_activity.prizes.count+"】":t.prizes.limit?t.prizes.text?t.receive_info?t.prizes.desc?t.prizes.receive_prize_mobile?i.length?o="发现微信违规词："+i.join("、")+"，请修改后再发布！":a=!0:o="请设置咨询热线电话":o="请设置产品描述":o="请设置领奖信息":o="请输入奖品描述":o="请输入雪人数量":o="请输入奖品份数":o="请设置活动标题";var r=!1,s=2;return $.each(t.others.join_customize,function(e,t){if(s++,t.required&&""==$.trim(t.name))return o="【信息收集设置】第 "+s+" 个信息项由于设置为必填项，因此名称不能为空！",void(r=!0)}),r&&(a=!1),t.prizes.count>1e3&&!window.confirm("哇，土豪，您的奖品份数超过 1000 了，是否继续保存?")&&(a=!1),a||o&&e.showDialog({title:"提示",content:o,confirm:!0}),a}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(60),a=o(n),r=i(67),s=o(r),c=i(136),u=o(c),d=i(9);t.default={mixins:[a.default,s.default,u.default],methods:{click:function(){var e=this,t=e.my.joinerId;t?e.$router.go({name:"goldcoin-joiner",params:{id:e.activityId,joinerId:t}}):(0,d.showBeforeJoinTiper)(e.showDialog,function(){e.visible=!0,setTimeout(function(){e.joining=!0},0)})}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(137),a=o(n);t.default={template:"#goldcoin",data:function(){return $.extend({active:!1,personal:!1,visible:!1,votestat:"",pageSwitch:{countdown:!0}},a.default)}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={category:"goldcoin",code:12,name:"新年抢金币"}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(61),a=o(n),r=i(12),s=o(r),c=i(60),u=o(c),d=i(67),l=o(d),f=i(136),h=o(f),p=i(9);t.default={mixins:[u.default,l.default,h.default],route:{data:function(){var e=this;e.my.self||e.$nextTick(function(){e.vote()})}},data:function(){return{personal:!0}},computed:{goldcoin:function(){var e=this,t=e.activity,i=t?e.participant.vote_count/t.prizes.limit:1,o=Math.max(1,isNaN(i)?1:Math.floor(8*i));return"goldcoin-"+o},required:function(){var e=this,t=e.activity;return t?Math.max(0,t.prizes.limit-e.participant.vote_count):0},completed:function(){return!this.required},ended:function(){var e=this,t=e.activity;return t.end_time<Math.round(Date.now()/1e3)}},methods:{alert:function(){var e=this;e.completed&&e.showDialog({title:"提示",content:e.my.self?"已完成，可以兑奖咯（商家联系方式可在活动页面上查找）":"TA已完成集新年币任务",confirm:!0})},click:function(){var e=this,t=e.my.joinerId;e.my.self?e.completed?e.alert():e.showSharer():t?e.$router.go({name:"goldcoin-joiner",params:{id:e.activityId,joinerId:t}}):(0,p.showBeforeJoinTiper)(e.showDialog,function(){e.visible=!0,setTimeout(function(){e.joining=!0},0)})},vote:function(){var e=this,t=e.joinerId,i=(e.my.self?"":"帮TA",!1),o=0,n=0,r=[];if(e.completed)return void e.alert();if(e.voter&&(e.voter.joiners.forEach(function(a){a.id==t&&(i=!0,e.my.self&&a.next_vote_date&&(o=a.next_vote_date,o<=Date.now()/1e3?i=!1:n=o-Date.now()/1e3))}),i)){if(n){var c=Math.floor(n/3600),u=Math.floor((n-3600*c)/60);c&&r.push(c+" 小时 "),u&&r.push(u+" 分钟")}return r=r.join(""),e.showDialog({title:"提示",content:e.my.self?'<font color="red">'+r+"</font> 后再点哦，朋友也能帮你哦！"+e.getShortTip():"你已经帮TA集过了",confirm:!0}),void(e.my.self&&e.genShorturl())}e.showLoading(),$.post(a.default.activity.vote,{joiner_id:t,open_id:e.visitor?e.visitor.openId:"wx"+Date.now(),next_vote_date:o}).then(function(i){return e.hideLoading(),i.code?void $("body").tooltip(s.default[i.code],"danger"):(e.voteIn({joiner:{id:t,next_vote_date:i.data.next_vote_date,expires:1e3*e.activity.end_time}}),e.active=!0,void setTimeout(function(){e.my.self?(e.genShorturl(),e.showDialog({title:"恭喜您",content:'<p><i class="fa fa-smile-o" aria-hidden="true"></i> 恭喜集得一枚 “新年币”</p><p style="font-weight: bold;">如何找人帮忙<i class="fa fa-hand-o-down" aria-hidden="true"></i></p>'+e.getShortTip(),confirm:function(){return!0},button:{confirm:"我知道了"}})):e.showVoteModal(),e.participant.vote_count++},200))})},showVoteModal:function(){var e=this;e.votestat="in",setTimeout(function(){e.votestat="stand"},1550)},hideVoteModal:function(){var e=this;e.votestat="out",setTimeout(function(){e.votestat="hide"},900)}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(52),a=i(123),r=o(a),s=i(137),c=o(s);t.default={template:"#goldcoin-editor",mixins:[r.default],data:function(){var e=this,t=new Date,i=t.getFullYear(),o=t.getMonth(),n=t.getDate(),a=new Date(i,o,n),r=new Date(i,o,n+5);return $.extend({activity:{id:0,type:c.default.code,title:"胜利跆拳道迎新年，名额开抢，最低只需9.8元",start_time:a.valueOf()/1e3,end_time:r.valueOf()/1e3,rules:"1.点击上方按钮“我要参加”参加活动。\n\n2.报名者自己每2小时可以点击【我要新年币】增加1个。\n\n3.别人可以帮忙增加新年币。\n\n4.奖品份数有限，达标就会减少一份，份数领完则无法继续报名，亲速度哦！\n\n5.完成后，马上联系商家兑奖吧。\n\n",prizes:{count:100,image:"",limit:30,desc:"跆拳道一个月课程，总计8次课\n每周2次课，每班人数不超过30人\n",vote_hours:2,text:"免费获得跆拳道寒假班",receive_prize_mobile:""+e.user.mobile},receive_info:"领奖时间：\n领奖地址：\n领奖电话："+e.user.mobile,host_info:"",host_img:[],others:{musician:"",foreground:{type:"",direction:""},section_text:{receive_info:"领奖信息",intro:"机构介绍"},join_customize:{customize_1:{name:"",required:0},customize_2:{name:"",required:0},customize_3:{name:"",required:0}}}}},c.default)},methods:{isValid:function(){var e=this,t=e.activity,i=(0,n.match)(JSON.stringify(t)),o="",a=!1;t.title?!t.prizes.vote_hours||t.prizes.vote_hours>24||t.prizes.vote_hours<1?o="每次投票时间间隔必须在1~24小时之间，请检查":e.clone_activity&&e.statistics&&e.statistics.join_count&&!e.is_clone&&t.prizes.vote_hours>e.clone_activity.prizes.vote_hours?o="【温馨提示】为了保证活动公平性，活动期间，报名者投票时间间隔只减不增":t.prizes.count?e.locked&&e.activity.prizes.count<e.clone_activity.prizes.count?o="已有用户报名，因此奖品数量必须大于原值【"+e.clone_activity.prizes.count+"】":t.prizes.limit?t.prizes.text?t.receive_info?t.prizes.desc?t.prizes.receive_prize_mobile?i.length?o="发现微信违规词："+i.join("、")+"，请修改后再发布！":a=!0:o="请设置咨询热线电话":o="请设置产品描述":o="请设置领奖信息":o="请输入奖品描述":o="请输入新年币数量":o="请输入奖品份数":o="请设置活动标题";var r=!1,s=2;return $.each(t.others.join_customize,function(e,t){if(s++,t.required&&""==$.trim(t.name))return o="【信息收集设置】第 "+s+" 个信息项由于设置为必填项，因此名称不能为空！",void(r=!0)}),r&&(a=!1),t.prizes.count>1e3&&!window.confirm("哇，土豪，您的奖品份数超过 1000 了，是否继续保存?")&&(a=!1),a||o&&e.showDialog({title:"提示",content:o,confirm:!0}),a}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(60),a=o(n),r=i(67),s=o(r),c=i(141),u=o(c),d=i(9);t.default={mixins:[a.default,s.default,u.default],methods:{vote:function(){var e=this;if(!e.personal||e.my.self)return void e.showDialog({title:"提示",content:"需要打开别人报名的页面，才能帮TA集圣诞袜",confirm:!0})},click:function(){var e=this,t=e.my.joinerId,i=e.activity,o=Math.round(Date.now()/1e3);return i?void(i.start_time>o?e.showDialog({title:"提示",content:"活动还未开始",confirm:!0}):i.end_time<o?e.showDialog({title:"提示",content:"活动已结束",confirm:!0}):e.my.self?e.showSharer():e.my.joinerId?e.$router.go({name:"christmasgift-joiner",params:{id:e.activityId,joinerId:e.my.joinerId}}):(0,d.showBeforeJoinTiper)(e.showDialog,function(){setTimeout(function(){e.joining=!0},0)})):void(t?e.$router.go({name:"christmasgift-joiner",params:{id:e.activityId,joinerId:t}}):(0,d.showBeforeJoinTiper)(e.showDialog,function(){setTimeout(function(){e.joining=!0},0)}))}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(142),a=o(n),r=i(12),s=o(r),c=i(10),u=o(c),d=$(document.body);t.default={template:"#christmasgift",data:function(){return $.extend({votestat:"",pageSwitch:{countdown:!0}},a.default)},computed:{mainheaderstat:function(){var e=this,t=e.participant,i=e.completedJoiners,o="";return t&&(o=i.total?"complete":"joining"),o}},beforeDestroy:function(){this.stopCarousel(),this.stopCountdown()},methods:{getDoubleCoupon:function(e,t){var i=this,o=i.activity,n=Math.round(Date.now()/1e3),a=i.my.joinerId,r=i.activity.prizes.discount_level[t];if(o){if(o.start_time>n)return void this.showDialog({title:"提示",content:"活动未开始",confirm:!0});if(o.end_time<n)return void this.showDialog({title:"提示",content:"活动已结束",confirm:!0})}return i.my.self?r.percent<=0?void i.showDialog({title:"提示",content:"该礼物已被抢完，试试其他礼物吧 :)",confirm:!0}):void(e?i.showDialog({title:"提示",content:"每人仅可抢一个礼物名额，请确认抢此礼物？",cancel:!0,confirm:function(){return i.showLoading("正在火拼中..."),$.ajax(u.default.activityPrize,{method:"POST",data:{joiner_id:i.joinerId,level:t},success:function(e){return e.code?void d.tooltip(s.default[e.code],"danger"):void i.showDialog({title:"提示",content:"恭喜抢得【礼物"+["一","二","三"][t]+"】，赶快联系商家购买吧 :)",confirm:function(){return window.location.reload(),!0}})},error:function(){d.tooltip("报名失败","danger")},complete:function(){i.hideLoading()}}),!0}}):i.my.self?i.showDialog({title:"提示",content:"袜子数还不够，赶紧请朋友增加袜子数吧",confirm:!0}):a?i.showDialog({title:"提示",content:"请返回我的页面中抢礼物",confirm:!0}):i.showDialog({title:"提示",content:"参加后才能抢礼物",confirm:!0})):void(a?i.showDialog({title:"提示",content:"请返回我的页面中抢礼物",confirm:!0}):i.showDialog({title:"提示",content:"参加后才能抢礼物",confirm:!0}))}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={category:"christmasgift",code:11,name:"圣诞礼物大放送"}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(10),a=o(n),r=i(12),s=o(r),c=i(60),u=o(c),d=i(67),l=o(d),f=i(141),h=o(f),p=i(9),m=$(document.body);t.default={mixins:[u.default,l.default,h.default],route:{data:function(){var e=this;e.my.self||e.$nextTick(function(){e.vote()})}},data:function(){return{personal:!0}},computed:{completed:function(){},ended:function(){var e=this,t=e.activity;return t.end_time<Math.round(Date.now()/1e3)}},methods:{alert:function(){},click:function(){var e=this,t=e.my.joinerId,i=e.activity,o=Math.round(Date.now()/1e3);return i?void(i.start_time>o?e.showDialog({title:"提示",content:"活动还未开始",confirm:!0}):i.end_time<o?e.showDialog({title:"提示",content:"活动已结束",confirm:!0}):e.my.self?e.showSharer():e.my.joinerId?e.$router.go({name:"christmasgift-joiner",params:{id:e.activityId,joinerId:e.my.joinerId}}):(0,p.showBeforeJoinTiper)(e.showDialog,function(){setTimeout(function(){e.joining=!0},0)})):void(e.my.self?e.showSharer():t?e.$router.go({name:"christmasgift-joiner",params:{id:e.activityId,joinerId:t}}):(0,p.showBeforeJoinTiper)(e.showDialog,function(){setTimeout(function(){e.joining=!0},0)}))},vote:function(){var e=this,t=e.joinerId,i=!1,o=0,n=0,r=[];if(e.completed)return void e.alert();if(e.voter&&(e.voter.joiners.forEach(function(a){a.id==t&&(i=!0,e.my.self&&a.next_vote_date&&(o=a.next_vote_date,o<=Date.now()/1e3?i=!1:n=o-Date.now()/1e3))}),i)){if(n){var c=Math.floor(n/3600),u=Math.floor((n-3600*c)/60);c&&r.push(c+" 小时 "),u&&r.push(u+" 分钟")}return r=r.join(""),e.showDialog({title:"提示",content:e.my.self?'<font color="red">'+r+"</font> 后再点哦，朋友也能帮你哦！"+e.getShortTip():"你已经帮TA集过了",confirm:!0}),void(e.my.self&&e.genShorturl())}e.showLoading(),$.ajax(a.default.activityVote,{
method:"POST",data:{joiner_id:t,open_id:e.visitor?e.visitor.openId:"wx"+Date.now(),next_vote_date:o},success:function(i){if(i.code)return void m.tooltip(s.default[i.code],"danger");if(i.data){var o=i.data.cutted_price;e.cutted_price=o,e.participant.current_price-=o,e.activity.vote_count++,e.voteIn({joiner:{id:t,next_vote_date:i.data.next_vote_date,expires:1e3*e.activity.end_time}}),e.participant.vote_count++,e.my.self?(e.genShorturl(),e.showDialog({title:"恭喜您",content:'<p><i class="fa fa-smile-o" aria-hidden="true"></i> 恭喜成功集了一只袜子</p><p style="font-weight: bold;">如何找人帮忙<i class="fa fa-hand-o-down" aria-hidden="true"></i></p>'+e.getShortTip(),confirm:function(){return!0},button:{confirm:"我知道了"}})):e.showVoteModal()}},complete:function(){e.hideLoading()}})},showVoteModal:function(){var e=this;e.votestat="in",setTimeout(function(){e.votestat="stand"},900)},hideVoteModal:function(){var e=this;e.votestat="out",setTimeout(function(){e.votestat="hide"},1e3)}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=i(72),r=o(a),s=i(10),c=o(s),u=i(12),d=o(u),l=i(73),f=o(l),h=i(74),p=o(h),m=i(76),g=o(m),v=i(62),y=o(v),w=i(75),_=o(w),b=i(77),x=o(b),j=i(63),D=o(j),k=i(78),S=o(k),T=i(142),z=o(T),I=i(51),M=o(I),L=i(52),C=i(9),O=i(26),P=$(document.body);t.default={template:"#christmasgift-editor",components:{Uploader:f.default,Userguide:p.default,Musician:y.default,miniEditor:_.default,miniLogin:x.default,Foreground:D.default,joinCustomize:S.default,Sharer:M.default},vuex:{getters:{user:function(e){return e.user}},actions:{showDialog:O.showDialog,showLoading:O.showLoading,hideLoading:O.hideLoading,pageIn:O.pageIn,toggleSharable:O.toggleSharable}},route:{data:function(e){function t(t){var o=z.default.name,n="制作";t&&(o=t.title,n=i.is_clone?"复制":"编辑"),i.clearActivityAttrs(),i.pageIn({title:"【"+n+"】"+o}),i.$nextTick(function(){i.initPicker()}),e.next({activated:!0})}var i=this,o=i.$route,a=Number(o.params.id)||0;return i.is_clone="clone"==o.query.action,a?(i.showLoading(),void $.ajax(c.default.activity+"/"+a,{data:{token:i.user.token},dataType:"text",success:function(a){if(a=$.parseJSON(a),a.code)return void i.fail(a);if(a.data){var r=a.data.activity;r.user_id!=i.user.id&&e.abort(),"clone"==o.query.action&&(r.id="");var s={},c={};try{s=(0,C.priceFilter)(JSON.parse(r.prizes)),c=(0,C.priceFilter)(JSON.parse(r.prizes))}catch(e){console.log("parse prizes error: "+e.message)}s.images&&s.images.forEach(function(e){e&&i.prize_image.uploader.images.push({suffix:"image/resize,w_640/quality,q_40",url:e})});var u=r.host_info;try{u=r.host_info&&JSON.parse((0,C.jsonFilter)(r.host_info))}catch(e){console.log("parse host_info error: "+e.message)}u.length&&"object"===("undefined"==typeof u?"undefined":n(u))&&(r.host_info=u);var d={};try{d=r.others&&JSON.parse((0,C.jsonFilter)(r.others)),d="object"===("undefined"==typeof d?"undefined":n(d))?$.extend(i.activity.others,d):i.activity.others}catch(e){console.log("parse others error: "+e.message)}r.prizes=s,i.copy_prizes=c,r.others=d,i.activity=r,i.statistics=a.data.statistics,t(r)}},error:function(){P.tooltip("活动加载失败","danger")},complete:function(){i.hideLoading()}})):void t()}},data:function(){var e=this,t=new Date,i=t.getFullYear(),o=t.getMonth(),n=t.getDate(),a=new Date(i,o,n),r=new Date(i,o,n+5);return{activated:!1,expired:!1,activity:{id:"",type:z.default.code,title:"圣诞礼物开抢！！华力英语寒假班免费学",start_time:a.valueOf()/1e3,end_time:r.valueOf()/1e3,prizes:{discount_level:[{text:"跆拳道一个月",discount:0,original_price:100,market_price:9.9,help_value:5,left_stock:500}],info:"礼物一：跆拳道一个月\n总计4节课，每周一节课\n礼物二：圣诞帽子\n随时到店来拿哦··",images:[],receive_prize_mobile:""+e.user.mobile,vote_hours:2},rules:"1.点击上方按钮“我要参加”参加活动。\n2.报名者自己每2小时可以点击【我要收集袜子】增加1双圣诞袜。\n3.别人可以帮忙增加袜子数。\n4.每人仅可抢一个礼物哦。\n5.看中想要的礼物，圣诞袜数量够了就赶紧下手吧~\n6.完成后，马上联系商家兑奖吧。\n",receive_info:"兑奖时间：\n机构地址：\n联系电话："+e.user.mobile,host_info:"",others:{musician:"",foreground:{type:"",direction:""},section_text:{receive_info:"兑奖信息",intro:"机构介绍"},join_customize:{customize_1:{name:"",required:0},customize_2:{name:"",required:0},customize_3:{name:"",required:0}}}},intro:{uploaded:!1,minieditor:{uploader:{maxlength:10,placeholder:"（点击选择图片，不上传则不显示）",description:"添加图片（最多添加 10 张图片）",error:function(){e.submitting=!1,$("body").tooltip("机构介绍图片上传失败","danger")},success:function(t){e.activity.host_info=t,e.intro.uploaded=!0,e.publish()}},texter:{placeholder:"此处可修改字体样式：加粗、斜体、下划线、字体大小颜色...",description:"添加文本（最多添加 10 个文本内容）",maxlength:10},video:{placeholder:"请输入视频地址【支持优酷、腾讯视频】",description:"添加视频（最多添加 5 个视频）",maxlength:5}}},prize_image:{uploaded:!1,uploader:{error:function(){e.submitting=!1,P.tooltip("奖品图片上传失败","danger")},images:[],success:function(t){e.activity.prizes.images=t,e.prize_image.uploaded=!0,e.publish()}}},others:{musician:{callback:function(t){e.activity.others.musician=t}},foreground:{callback:function(t){e.activity.others.foreground=t}},join_customize:{callback:function(t){e.activity.others.join_customize=t}}},copy_prizes:null,editable:!0,statistics:null,is_clone:!1,submitting:!1,sharer:null}},computed:{locked:function(){var e=this,t=e.statistics;return e.activity.id>0&&t&&t.join_count>0&&!e.is_clone}},ready:function(){var e=this;e.is_clone&&(0,C.showCloneTiper)(e.showDialog),setTimeout(function(){(0,g.default)($("textarea",e.$el).not(".nosize"))},1e3)},beforeDestroy:function(){var e=this;e.startDatePicker&&e.startDatePicker.destroy(),e.endDatePicker&&e.endDatePicker.destroy()},methods:{clearActivityAttrs:function(){var e=this;e.is_clone&&e.activity.prizes.discount_level&&e.activity.prizes.discount_level.forEach(function(e){e.used_stock&&delete e.used_stock,e.winning_ids&&delete e.winning_ids,e.discount_price&&delete e.discount_price,e.true_left_stock&&delete e.true_left_stock,e.percent&&delete e.percent})},addCoupon:function(){this.activity.prizes.discount_level.push({text:"",discount:0,original_price:100,market_price:9.9,help_value:5,left_stock:500})},deleteCoupon:function(e){var t=this;t.activity.prizes.discount_level.splice(e,1)},initPicker:function(){var e=this,t=$(e.$el),i=t.find(".start-date"),o=t.find(".end-date"),n={format:"YYYY-MM-DD HH:mm",increment:{minute:10},text:{cancel:"取消",confirm:"确认"},translate:function(e,t){var i={year:"年",month:"月",day:"日",hour:"点",minute:"分"};return Number(t)+i[e]}},a=$.extend(!0,{},n,{text:{title:"请选择活动开始时间"}}),s=$.extend(!0,{},n,{text:{title:"请选择活动结束时间"}}),c=new r.default(i[0],a),u=new r.default(o[0],s);e.startDatePicker=c,e.endDatePicker=u,i.on("change",function(){var t=c.getDate();e.activity.start_time=Math.round(t.getTime()/1e3),e.activity.end_time<=e.activity.start_time&&(t.setDate(t.getDate()+1),e.activity.end_time=Math.round(t.getTime()/1e3),e.$nextTick(function(){return u.update()}))}),o.on("change",function(t){var i=Math.round(u.getDate().getTime()/1e3);return i<=e.activity.start_time?void t.preventDefault():void(e.activity.end_time=i)})},toggle:function(){var e=this;e.editable=!e.editable,document.body.scrollTop=0,setTimeout(function(){(0,g.default)($("textarea",e.$el).not(".nosize"))},1e3)},fail:function(e,t){var i=this,o=e.code;1100==o?(0,C.showKickedOffline)(e.data.time,e.data.ip,i.showDialog,function(){i.expired=!0}):1101==o?(0,C.showExpireTip)(i.showDialog):1102==o?i.expired=!0:i.$root.$emit("show.snackbar",{color:"accent",message:d.default[o]}),i.hideLoading(),t&&t()},submit:function(e){var t=this,i=t.activity,o=(0,L.match)(JSON.stringify(i));if(e.preventDefault(),!i.title)return void t.showDialog({title:"提示",content:"请设置活动标题",confirm:!0});if(i.title.length>20)return void t.showDialog({title:"提示",content:"活动标题最多20字",confirm:!0});if(!i.prizes.vote_hours||i.prizes.vote_hours>24||i.prizes.vote_hours<1)return void t.showDialog({title:"提示",content:"每次投票时间间隔必须在1~24小时之间，请检查",confirm:!0});if(t.copy_prizes&&t.statistics&&t.statistics.join_count&&!t.is_clone&&i.prizes.vote_hours>t.copy_prizes.vote_hours)return void t.showDialog({title:"提示",content:"【温馨提示】为了保证活动公平性，活动期间，报名者投票时间间隔只减不增",confirm:!0});var n=!1,a=!1,r=!1,s=!1,u=!1,d=!1,l=["一","二","三"];if($.each(i.prizes.discount_level,function(e,i){var o=$.trim(i.text),c=i.original_price,f=i.market_price,h=i.help_value,p=i.left_stock,m=l[e];if(!o)return t.showDialog({title:"提示",content:"[礼物"+m+"] 请设置礼物名称",confirm:!0}),void(n=!0);if(c<=0)return t.showDialog({title:"提示",content:"[礼物"+m+"] 原价必须大于0",confirm:!0}),void(a=!0);if(f<0)return t.showDialog({title:"提示",content:"[礼物"+m+"] 现价必须 >= 0",confirm:!0}),void(r=!0);if(f>=c)return t.showDialog({title:"提示",content:"[礼物"+m+"] 现价必须小于原价",confirm:!0}),void(r=!0);if(h>99999)return t.showDialog({title:"提示",content:"[礼物"+m+"]袜子数 不能大于99999",confirm:!0}),void(s=!0);if(h<1)return t.showDialog({title:"提示",content:"[礼物"+m+"]袜子数 不能小于1",confirm:!0}),void(s=!0);if(p>99999)return t.showDialog({title:"提示",content:"[礼物"+m+"]份数 不能大于9999",confirm:!0}),void(u=!0);if(p<1)return t.showDialog({title:"提示",content:"[礼物"+m+"]份数 不能小于1",confirm:!0}),void(u=!0);if(p>1e3&&(d=!0),t.copy_prizes&&t.statistics&&t.statistics.join_count&&!t.is_clone){var g=(t.copy_prizes.discount_level[e].original_price,t.copy_prizes.discount_level[e].market_price,t.copy_prizes.discount_level[e].help_value),v=t.copy_prizes.discount_level[e].left_stock;if(h>g)return t.$root.$emit("show.snackbar",{color:"active",message:"【温馨提示】为了保证活动公平性，活动期间，袜子数只减不增"}),t.showDialog({title:"提示",content:"[礼物"+m+"]袜子数不能大于"+g,confirm:!0}),void(u=!0);if(p<v)return t.$root.$emit("show.snackbar",{color:"active",message:"【温馨提示】为了保证活动公平性，活动期间，奖品余量只增不减"}),t.showDialog({title:"提示",content:"[礼物"+m+"]数量不能小于"+v,confirm:!0}),void(u=!0)}i.discount=c<=0?0:(f/c).toFixed(4)}),!(n||a||r||s||u)){if(!i.prizes.info)return void t.showDialog({title:"提示",content:"请输入礼物描述",confirm:!0});if(!i.receive_info)return void t.showDialog({title:"提示",content:"请设置兑奖信息",confirm:!0});if(!i.prizes.receive_prize_mobile)return void t.showDialog({title:"提示",content:"请设置咨询电话",confirm:!0});var f=!1,h=2;if($.each(i.others.join_customize,function(e,i){if(h++,i.required&&""==$.trim(i.name))return t.showDialog({title:"提示",content:"【信息收集设置】第 "+h+" 个信息项由于设置为必填项，因此名称不能为空！",confirm:!0}),void(f=!0)}),!f)return o.length?void t.showDialog({title:"提示",content:"发现微信违规词："+o.join("、")+"，请修改后再发布！",confirm:!0}):void(d&&!window.confirm("您的礼物中奖品份数有包含大于1000的数量，是否继续保存?")||t.submitting||(t.submitting=!0,t.showLoading("正在提交数据..."),$.ajax(c.default.uploadSignature,{method:"get",data:{token:t.user.token,type:2},dataType:"json",success:function(e){return e.code?(t.submitting=!1,t.hideLoading(),void t.fail(e)):(t.showLoading("正在上传图片，请勿离开或关闭页面"),void(e.data&&t.$root.$emit("upload.uploader",e.data)))},error:function(){t.submitting=!1,t.hideLoading(),t.$root.$emit("show.snackbar",{color:"accent",message:"保存失败，请检查网络是否正常连接！"})}})))}},publish:function(){var e=this;if(e.prize_image.uploaded&&e.intro.uploaded&&!e.publishing){e.sharer=null,e.publishing=!0,e.showLoading("正在提交数据，请勿离开或关闭页面");var t=(0,C.expressionFilter)($.extend(!0,{},e.activity));$.ajax(c.default.activity,{method:t.id?"put":"post",data:$.extend(t,{prizes:JSON.stringify((0,C.priceFilter)(t.prizes,{reversed:!0})),others:JSON.stringify(t.others),token:e.user.token}),success:function(i){return i.code?void e.fail(i):void P.one("hidden.tooltip",function(){e.sharer={autoShare:!1,autoShow:!0,data:$.extend(t,{category:z.default.category,id:t.id||i.data.id}),desc:t.share_content,imgUrl:t.share_img,title:t.share_title}}).tooltip("show",{content:"活动保存成功",style:"success",duration:1e3})},error:function(){P.tooltip("活动发布失败","danger")},complete:function(){e.submitting=!1,e.publishing=!1,e.hideLoading()}})}}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(60),a=o(n),r=i(67),s=o(r),c=i(146),u=o(c),d=i(9);t.default={mixins:[a.default,s.default,u.default],methods:{vote:function(){var e=this;if(!e.personal||e.my.self)return void e.showDialog({title:"提示",content:"需要打开别人报名的页面，才能帮TA抢元宝",confirm:!0})},click:function(){var e=this,t=e.my.joinerId,i=e.activity,o=Math.round(Date.now()/1e3);return i?void(i.start_time>o?e.showDialog({title:"提示",content:"活动还未开始",confirm:!0}):i.end_time<o?e.showDialog({title:"提示",content:"活动已结束",confirm:!0}):e.my.self?e.showSharer():e.my.joinerId?e.$router.go({name:"ingots-joiner",params:{id:e.activityId,joinerId:e.my.joinerId}}):(0,d.showBeforeJoinTiper)(e.showDialog,function(){setTimeout(function(){e.joining=!0},0)})):void(t?e.$router.go({name:"ingots-joiner",params:{id:e.activityId,joinerId:t}}):(0,d.showBeforeJoinTiper)(e.showDialog,function(){setTimeout(function(){e.joining=!0},0)}))}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(147),a=o(n),r=i(12),s=o(r),c=i(10),u=o(c),d=$(document.body);t.default={template:"#ingots",data:function(){return $.extend({votestat:"",pageSwitch:{countdown:!0}},a.default)},computed:{mainheaderstat:function(){var e=this,t=e.participant,i=e.completedJoiners,o="";return t&&(o=i.total?"complete":"joining"),o}},beforeDestroy:function(){this.stopCarousel(),this.stopCountdown()},methods:{getDoubleCoupon:function(e,t){var i=this,o=i.activity,n=Math.round(Date.now()/1e3),a=i.my.joinerId,r=i.activity.prizes.discount_level[t];if(o){if(o.start_time>n)return void this.showDialog({title:"提示",content:"活动未开始",confirm:!0});if(o.end_time<n)return void this.showDialog({title:"提示",content:"活动已结束",confirm:!0})}return i.my.self?r.percent<=0?void i.showDialog({title:"提示",content:"该礼物已被抢完，试试其他礼物吧 :)",confirm:!0}):void(e?i.showDialog({title:"提示",content:"每人仅可抢一个礼物名额，请确认抢此礼物？",cancel:!0,confirm:function(){return i.showLoading("正在火拼中..."),$.ajax(u.default.activityPrize,{method:"POST",data:{joiner_id:i.joinerId,level:t},success:function(e){return e.code?void d.tooltip(s.default[e.code],"danger"):void i.showDialog({title:"提示",content:"恭喜抢得【礼物"+["一","二","三","四","五"][t]+"】，赶快联系商家购买吧 :)",confirm:function(){return window.location.reload(),!0}})},error:function(){d.tooltip("报名失败","danger")},complete:function(){i.hideLoading()}}),!0}}):i.my.self?i.showDialog({title:"提示",content:"元宝数还不够，赶紧请朋友增加元宝数吧",confirm:!0}):a?i.showDialog({title:"提示",content:"请返回我的页面中抢礼物",confirm:!0}):i.showDialog({title:"提示",content:"参加后才能抢礼物",confirm:!0})):void(a?i.showDialog({title:"提示",content:"请返回我的页面中抢礼物",confirm:!0}):i.showDialog({title:"提示",content:"参加后才能抢礼物",confirm:!0}))}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={category:"ingots",code:14,name:"全民抢元宝"}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(10),a=o(n),r=i(12),s=o(r),c=i(60),u=o(c),d=i(67),l=o(d),f=i(146),h=o(f),p=i(9),m=$(document.body);t.default={mixins:[u.default,l.default,h.default],route:{data:function(){var e=this;e.my.self||e.$nextTick(function(){e.vote()})}},data:function(){return{personal:!0}},computed:{completed:function(){},ended:function(){var e=this,t=e.activity;return t.end_time<Math.round(Date.now()/1e3)}},methods:{alert:function(){},click:function(){var e=this,t=e.my.joinerId,i=e.activity,o=Math.round(Date.now()/1e3);return i?void(i.start_time>o?e.showDialog({title:"提示",content:"活动还未开始",confirm:!0}):i.end_time<o?e.showDialog({title:"提示",content:"活动已结束",confirm:!0}):e.my.self?e.showSharer():e.my.joinerId?e.$router.go({name:"ingots-joiner",params:{id:e.activityId,joinerId:e.my.joinerId}}):(0,p.showBeforeJoinTiper)(e.showDialog,function(){setTimeout(function(){e.joining=!0},0)})):void(e.my.self?e.showSharer():t?e.$router.go({name:"ingots-joiner",params:{id:e.activityId,joinerId:t}}):(0,p.showBeforeJoinTiper)(e.showDialog,function(){setTimeout(function(){e.joining=!0},0)}))},vote:function(){var e=this,t=e.joinerId,i=!1,o=0,n=0,r=[];if(e.completed)return void e.alert();if(e.voter&&(e.voter.joiners.forEach(function(a){a.id==t&&(i=!0,e.my.self&&a.next_vote_date&&(o=a.next_vote_date,o<=Date.now()/1e3?i=!1:n=o-Date.now()/1e3))}),i)){if(n){var c=Math.floor(n/3600),u=Math.floor((n-3600*c)/60);c&&r.push(c+" 小时 "),u&&r.push(u+" 分钟")}return r=r.join(""),e.showDialog({title:"提示",content:e.my.self?'<font color="red">'+r+"</font> 后再点哦，朋友也能帮你哦！"+e.getShortTip():"你已经帮TA抢过了",confirm:!0}),void(e.my.self&&e.genShorturl())}e.showLoading(),$.ajax(a.default.activityVote,{method:"POST",data:{joiner_id:t,open_id:e.visitor?e.visitor.openId:"wx"+Date.now(),next_vote_date:o},success:function(i){if(i.code)return void m.tooltip(s.default[i.code],"danger");if(i.data){var o=i.data.cutted_price;e.cutted_price=o,e.participant.current_price-=o,e.activity.vote_count++,e.voteIn({joiner:{id:t,next_vote_date:i.data.next_vote_date,expires:1e3*e.activity.end_time}}),e.participant.vote_count++,e.my.self?(e.genShorturl(),e.showDialog({title:"恭喜您",content:'<p><i class="fa fa-smile-o" aria-hidden="true"></i> 恭喜成功抢了 1 个元宝</p><p style="font-weight: bold;">如何找人帮忙<i class="fa fa-hand-o-down" aria-hidden="true"></i></p>'+e.getShortTip(),confirm:function(){return!0},button:{confirm:"我知道了"}})):e.showVoteModal()}},complete:function(){e.hideLoading()}})},showVoteModal:function(){var e=this;e.votestat="in",setTimeout(function(){e.votestat="stand"},900)},hideVoteModal:function(){var e=this;return"stand"==e.votestat?void(e.votestat="showing"):(e.votestat="out",void setTimeout(function(){e.votestat="hide"},1e3))}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=i(72),r=o(a),s=i(10),c=o(s),u=i(12),d=o(u),l=i(73),f=o(l),h=i(74),p=o(h),m=i(76),g=o(m),v=i(62),y=o(v),w=i(75),_=o(w),b=i(77),x=o(b),j=i(63),D=o(j),k=i(78),S=o(k),T=i(51),z=o(T),I=i(147),M=o(I),L=i(52),C=i(9),O=i(26),P=$(document.body);t.default={template:"#ingots-editor",components:{Uploader:f.default,Userguide:p.default,Musician:y.default,miniEditor:_.default,miniLogin:x.default,Foreground:D.default,joinCustomize:S.default,Sharer:z.default},vuex:{getters:{user:function(e){return e.user}},actions:{showDialog:O.showDialog,showLoading:O.showLoading,hideLoading:O.hideLoading,pageIn:O.pageIn,toggleSharable:O.toggleSharable}},route:{data:function(e){function t(t){var o=M.default.name,n="制作";t&&(o=t.title,n=i.is_clone?"复制":"编辑"),i.clearActivityAttrs(),i.pageIn({title:"【"+n+"】"+o}),i.$nextTick(function(){i.initPicker()}),e.next({activated:!0})}var i=this,o=i.$route,a=Number(o.params.id)||0;return i.is_clone="clone"==o.query.action,a?(i.showLoading(),void $.ajax(c.default.activity+"/"+a,{data:{token:i.user.token},dataType:"text",success:function(a){if(a=$.parseJSON(a),a.code)return void i.fail(a);if(a.data){var r=a.data.activity;r.user_id!=i.user.id&&e.abort(),"clone"==o.query.action&&(r.id="");var s={},c={};try{s=(0,C.priceFilter)(JSON.parse(r.prizes)),c=(0,C.priceFilter)(JSON.parse(r.prizes))}catch(e){console.log("parse prizes error: "+e.message)}s.images&&s.images.forEach(function(e){e&&i.prize_image.uploader.images.push({suffix:"image/resize,w_640/quality,q_40",url:e})});var u=r.host_info;try{u=r.host_info&&JSON.parse((0,C.jsonFilter)(r.host_info))}catch(e){console.log("parse host_info error: "+e.message)}u.length&&"object"===("undefined"==typeof u?"undefined":n(u))&&(r.host_info=u);var d={};try{d=r.others&&JSON.parse((0,C.jsonFilter)(r.others)),d="object"===("undefined"==typeof d?"undefined":n(d))?$.extend(i.activity.others,d):i.activity.others}catch(e){console.log("parse others error: "+e.message)}r.prizes=s,i.copy_prizes=c,r.others=d,i.activity=r,i.statistics=a.data.statistics,t(r)}},error:function(){P.tooltip("活动加载失败","danger")},complete:function(){i.hideLoading()}})):void t()}},data:function(){var e=this,t=new Date,i=t.getFullYear(),o=t.getMonth(),n=t.getDate(),a=new Date(i,o,n),r=new Date(i,o,n+5);return{activated:!1,expired:!1,activity:{id:"",type:M.default.code,title:"抢元宝换好礼，百万大礼等你抢",start_time:a.valueOf()/1e3,end_time:r.valueOf()/1e3,prizes:{discount_level:[{text:"跆拳道一个月",discount:0,original_price:100,market_price:9.9,help_value:5,left_stock:500}],info:"礼物一：跆拳道一个月\n总计4节课，每周一节课\n礼物二：圣诞帽子\n随时到店来拿哦··",images:[],receive_prize_mobile:""+e.user.mobile,vote_hours:2},rules:"1.点击上方按钮“我要参加”参加活动。\n2.报名者自己每 2 小时可以点击【我要抢元宝】增加 1 个元宝。\n3.别人可以帮忙增加元宝数。\n4.每人仅可抢一个礼物哦。\n5.看中想要的礼物，元宝数量够了就赶紧下手吧~\n6.完成后，马上联系商家兑奖吧。\n",receive_info:"兑奖时间：\n机构地址：\n联系电话："+e.user.mobile,host_info:"",others:{musician:"",foreground:{type:"",direction:""},section_text:{receive_info:"兑奖信息",intro:"机构介绍"},join_customize:{customize_1:{name:"",required:0},customize_2:{name:"",required:0},customize_3:{name:"",required:0}}}},intro:{uploaded:!1,minieditor:{uploader:{maxlength:10,placeholder:"（点击选择图片，不上传则不显示）",description:"添加图片（最多添加 10 张图片）",error:function(){e.submitting=!1,$("body").tooltip("机构介绍图片上传失败","danger")},success:function(t){e.activity.host_info=t,e.intro.uploaded=!0,e.publish()}},texter:{placeholder:"此处可修改字体样式：加粗、斜体、下划线、字体大小颜色...",description:"添加文本（最多添加 10 个文本内容）",maxlength:10},video:{placeholder:"请输入视频地址【支持优酷、腾讯视频】",description:"添加视频（最多添加 5 个视频）",maxlength:5}}},prize_image:{uploaded:!1,uploader:{error:function(){e.submitting=!1,P.tooltip("奖品图片上传失败","danger")},images:[],success:function(t){e.activity.prizes.images=t,e.prize_image.uploaded=!0,e.publish()}}},others:{musician:{callback:function(t){e.activity.others.musician=t}},foreground:{callback:function(t){e.activity.others.foreground=t}},join_customize:{callback:function(t){e.activity.others.join_customize=t}}},copy_prizes:null,editable:!0,statistics:null,is_clone:!1,sharer:null}},computed:{locked:function(){var e=this,t=e.statistics;return e.activity.id>0&&t&&t.join_count>0&&!e.is_clone}},ready:function(){var e=this;e.is_clone&&(0,C.showCloneTiper)(e.showDialog),setTimeout(function(){(0,g.default)($("textarea",e.$el).not(".nosize"))},1e3)},beforeDestroy:function(){var e=this;e.startDatePicker&&e.startDatePicker.destroy(),e.endDatePicker&&e.endDatePicker.destroy()},methods:{clearActivityAttrs:function(){var e=this;e.is_clone&&e.activity.prizes.discount_level&&e.activity.prizes.discount_level.forEach(function(e){e.used_stock&&delete e.used_stock,e.winning_ids&&delete e.winning_ids,e.discount_price&&delete e.discount_price,e.true_left_stock&&delete e.true_left_stock,e.percent&&delete e.percent})},addCoupon:function(){this.activity.prizes.discount_level.push({text:"",discount:0,original_price:100,market_price:9.9,help_value:5,left_stock:500})},deleteCoupon:function(e){var t=this;t.activity.prizes.discount_level.splice(e,1)},initPicker:function(){var e=this,t=$(e.$el),i=t.find(".start-date"),o=t.find(".end-date"),n={format:"YYYY-MM-DD HH:mm",increment:{minute:10},text:{cancel:"取消",confirm:"确认"},translate:function(e,t){var i={year:"年",month:"月",day:"日",hour:"点",minute:"分"};return Number(t)+i[e]}},a=$.extend(!0,{},n,{text:{title:"请选择活动开始时间"}}),s=$.extend(!0,{},n,{text:{title:"请选择活动结束时间"}}),c=new r.default(i[0],a),u=new r.default(o[0],s);e.startDatePicker=c,e.endDatePicker=u,i.on("change",function(){var t=c.getDate();e.activity.start_time=Math.round(t.getTime()/1e3),e.activity.end_time<=e.activity.start_time&&(t.setDate(t.getDate()+1),e.activity.end_time=Math.round(t.getTime()/1e3),e.$nextTick(function(){return u.update()}))}),o.on("change",function(t){var i=Math.round(u.getDate().getTime()/1e3);return i<=e.activity.start_time?void t.preventDefault():void(e.activity.end_time=i)})},toggle:function(){var e=this;e.editable=!e.editable,document.body.scrollTop=0,setTimeout(function(){(0,g.default)($("textarea",e.$el).not(".nosize"))},1e3)},fail:function(e,t){var i=this,o=e.code;1100==o?(0,C.showKickedOffline)(e.data.time,e.data.ip,i.showDialog,function(){i.expired=!0}):1101==o?(0,C.showExpireTip)(i.showDialog):1102==o?i.expired=!0:i.$root.$emit("show.snackbar",{color:"accent",message:d.default[o]}),i.hideLoading(),t&&t()},submit:function(e){var t=this,i=t.activity,o=(0,L.match)(JSON.stringify(i));if(e.preventDefault(),!i.title)return void t.showDialog({title:"提示",content:"请设置活动标题",confirm:!0});if(i.title.length>25)return void t.showDialog({title:"提示",content:"活动标题最多 25 字",confirm:!0});if(!i.prizes.vote_hours||i.prizes.vote_hours>24||i.prizes.vote_hours<1)return void t.showDialog({title:"提示",content:"每次投票时间间隔必须在1~24小时之间，请检查",confirm:!0});if(t.copy_prizes&&t.statistics&&t.statistics.join_count&&!t.is_clone&&i.prizes.vote_hours>t.copy_prizes.vote_hours)return void t.showDialog({title:"提示",content:"【温馨提示】为了保证活动公平性，活动期间，报名者投票时间间隔只减不增",confirm:!0});var n=!1,a=!1,r=!1,s=!1,u=!1,d=!1,l=["一","二","三","四","五"];if($.each(i.prizes.discount_level,function(e,i){var o=$.trim(i.text),c=i.original_price,f=i.market_price,h=i.help_value,p=i.left_stock,m=l[e];if(!o)return t.showDialog({title:"提示",content:"[礼物"+m+"] 请设置礼物名称",confirm:!0}),void(n=!0);if(c<=0)return t.showDialog({title:"提示",content:"[礼物"+m+"] 原价必须大于0",confirm:!0}),void(a=!0);if(f<0)return t.showDialog({title:"提示",content:"[礼物"+m+"] 现价必须 >= 0",confirm:!0}),void(r=!0);if(f>=c)return t.showDialog({title:"提示",content:"[礼物"+m+"] 现价必须小于原价",confirm:!0}),void(r=!0);if(h>99999)return t.showDialog({title:"提示",content:"[礼物"+m+"]元宝数 不能大于99999",confirm:!0}),void(s=!0);if(h<1)return t.showDialog({title:"提示",content:"[礼物"+m+"]元宝数 不能小于1",confirm:!0}),void(s=!0);if(p>99999)return t.showDialog({title:"提示",content:"[礼物"+m+"]份数 不能大于9999",confirm:!0}),void(u=!0);if(p<1)return t.showDialog({title:"提示",content:"[礼物"+m+"]份数 不能小于1",confirm:!0}),void(u=!0);if(p>1e3&&(d=!0),t.copy_prizes&&t.statistics&&t.statistics.join_count&&!t.is_clone){var g=(t.copy_prizes.discount_level[e].original_price,t.copy_prizes.discount_level[e].market_price,t.copy_prizes.discount_level[e].help_value),v=t.copy_prizes.discount_level[e].left_stock;if(h>g)return t.$root.$emit("show.snackbar",{color:"active",message:"【温馨提示】为了保证活动公平性，活动期间，元宝数只减不增"}),t.showDialog({title:"提示",content:"[礼物"+m+"]元宝数不能大于"+g,confirm:!0}),void(u=!0);if(p<v)return t.$root.$emit("show.snackbar",{color:"active",message:"【温馨提示】为了保证活动公平性，活动期间，奖品余量只增不减"}),t.showDialog({title:"提示",content:"[礼物"+m+"]数量不能小于"+v,confirm:!0}),void(u=!0)}i.discount=c<=0?0:(f/c).toFixed(4)}),!(n||a||r||s||u)){if(!i.prizes.info)return void t.showDialog({title:"提示",content:"请输入礼物描述",confirm:!0});if(!i.receive_info)return void t.showDialog({title:"提示",content:"请设置兑奖信息",confirm:!0});if(!i.prizes.receive_prize_mobile)return void t.showDialog({title:"提示",content:"请设置咨询电话",confirm:!0});var f=!1,h=2;if($.each(i.others.join_customize,function(e,i){if(h++,i.required&&""==$.trim(i.name))return t.showDialog({title:"提示",content:"【信息收集设置】第 "+h+" 个信息项由于设置为必填项，因此名称不能为空！",confirm:!0}),void(f=!0)}),!f)return o.length?void t.showDialog({title:"提示",content:"发现微信违规词："+o.join("、")+"，请修改后再发布！",confirm:!0}):void(d&&!window.confirm("您的礼物中奖品份数有包含大于1000的数量，是否继续保存?")||t.submitting||(t.submitting=!0,t.showLoading("正在提交数据..."),$.ajax(c.default.uploadSignature,{method:"get",data:{token:t.user.token,type:2},dataType:"json",success:function(e){return e.code?(t.submitting=!1,t.hideLoading(),void t.fail(e)):(t.showLoading("正在上传图片，请勿离开或关闭页面"),void(e.data&&t.$root.$emit("upload.uploader",e.data)))},error:function(){t.submitting=!1,t.hideLoading(),t.$root.$emit("show.snackbar",{color:"accent",message:"保存失败，请检查网络是否正常连接！"})}})))}},publish:function(){var e=this;if(e.prize_image.uploaded&&e.intro.uploaded&&!e.publishing){e.sharer=null,e.publishing=!0,e.showLoading("正在提交数据，请勿离开或关闭页面");var t=(0,C.expressionFilter)($.extend(!0,{},e.activity));$.ajax(c.default.activity,{method:t.id?"put":"post",data:$.extend(t,{prizes:JSON.stringify((0,C.priceFilter)(t.prizes,{reversed:!0})),others:JSON.stringify(t.others),token:e.user.token}),success:function(i){return i.code?void e.fail(i):void P.one("hidden.tooltip",function(){e.sharer={autoShare:!1,autoShow:!0,data:$.extend(t,{category:M.default.category,id:t.id||i.data.id}),desc:t.share_content,imgUrl:t.share_img,title:t.share_title}}).tooltip("show",{content:"活动保存成功",style:"success",duration:1e3})},error:function(){P.tooltip("活动发布失败","danger")},complete:function(){e.submitting=!1,e.publishing=!1,e.hideLoading()}})}}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(60),a=o(n),r=i(67),s=o(r),c=i(151),u=o(c),d=i(9);t.default={mixins:[a.default,s.default,u.default],methods:{vote:function(){var e=this;if(!e.personal||e.my.self)return void e.showDialog({title:"提示",content:"需要打开别人报名的页面，才能帮TA点鞭炮",confirm:!0})},click:function(){var e=this,t=e.my.joinerId,i=e.activity,o=Math.round(Date.now()/1e3);return i?void(i.start_time>o?e.showDialog({title:"提示",content:"活动还未开始",confirm:!0}):i.end_time<o?e.showDialog({title:"提示",content:"活动已结束",confirm:!0}):e.my.self?e.showSharer():e.my.joinerId?e.$router.go({name:"fire-joiner",params:{id:e.activityId,joinerId:e.my.joinerId}}):(0,d.showBeforeJoinTiper)(e.showDialog,function(){setTimeout(function(){e.joining=!0},0)})):void(t?e.$router.go({name:"fire-joiner",params:{id:e.activityId,joinerId:t}}):(0,d.showBeforeJoinTiper)(e.showDialog,function(){setTimeout(function(){e.joining=!0},0)}))}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=i(152),r=o(a),s=i(12),c=(o(s),i(10));o(c),$(document.body);t.default={template:"#fire",data:function(){return $.extend({votestat:"",pageSwitch:{countdown:!0}},r.default)},ready:function(){var e=this;setTimeout(function(){e.renderPrizeAnimate()},2e3)},computed:{mainheaderstat:function(){var e=this,t=e.participant,i=e.completedJoiners,o="";return t?o=i.total?"mycomplete":"joining":i.total&&(o="complete"),o},discount_level:function e(){var t=this,i=t.participant,o=t.activity.prizes,e=o.discount_level,n=i&&i.prize?i.prize.level.split(","):[],a=5,r=e.length,s=t.joinerPrize,c=(s.next_level,1==e.length?92:90),u=e.length==a?[10,8,6,3,1]:[0,0,0,0,0];return e.forEach(function(e,t){e.has_got=$.inArray(t.toString(),n)>=0,e.icon=t+1,e.icon_left=(t+1)/r*c-u[t]}),e},completedList:function(){var e=this,t=e.completedJoiners.list;return t.forEach(function(e){e.level_count=e.level.toString().split(",").length}),t},rankList:function(){var e=this,t=e.joiners;return t.forEach(function(e){e.level_count=e.level?e.level.toString().split(",").length:0}),t},joinerPrize:function(){var e=this,t=e.participant,i=e.activity.prizes,o=i.discount_level,a=t&&"object"==n(t.prize)&&"string"==typeof t.prize.level?t.prize.level.split(","):[],r=t&&t.vote_count?t.vote_count:0,s=0,c=0,u=-1;return o.forEach(function(e,i){t&&e.help_value>r&&0==s&&(s=e.help_value,c=e.help_value-r,u=i)}),{win_all:a.length==o.length,next_point_diff:c,next_point:s,next_level:u,win_levels:a.length}},joinerPrizeText:function(){var e=this,t=e.participant,i=e.joinerPrize,o=i.win_all,n=i.win_levels,a=i.next_point_diff,r="";return t?r=e.my.self?o?"恭喜你，已获得全部奖品！":a<=0?"因礼物数量有限，你只拿到 "+n+" 个礼物哦~":"你距离下一个礼物还差 <b>"+a+"</b> 个鞭炮，继续加油哟！":o?"厉害了，"+t.name+" 已获得全部奖品！":a<=0?"因礼物数量有限，"+t.name+" 只拿到 "+n+" 个礼物哦~":t.name+" 距离下一个礼物还差 <b>"+a+"</b> 个鞭炮，为他加油吧！":""}},beforeDestroy:function(){this.stopCarousel(),this.stopCountdown()},methods:{renderPrizeAnimate:function(){var e=this,t=$(".prize-box"),i=t.find(".level-percent"),o=t.find(".prize-line"),n=o.width(),a=800,r=n/i.length,s=0,c=1/i.length*100,u=0,d=e.joinerPrize,l=0,f=0,h=t.find(".touched"),p=h.length,m=0;return d.next_point>0&&(d.next_level>0&&(f=e.activity.prizes.discount_level[e.joinerPrize.next_level-1].help_value),l=r/(d.next_point-f)*(e.participant.vote_count-f)),h.length?void h.each(function(e){var t=$(this),o=t.offset().left-m;e+1==p&&l>0&&(o+=l);
var n=Math.floor(o/r),d=o-n*r;n=d>0?n+1:n,m+=o;for(var f=0;f<n;f++){var h=c;f==n-1&&d&&(h=d/r*c,t.hasClass("has_got")&&setTimeout(function(){u++,t.addClass("got")},.85*a)),i.eq(s).animate({width:h+"%"},a,function(){}),s++}}):void i.eq(s).animate({width:l/r*c+"%"},a,function(){})}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={category:"fire",code:13,name:"春节点鞭炮",level:["一","二","三","四","五"]}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(10),a=o(n),r=i(12),s=o(r),c=i(60),u=o(c),d=i(67),l=o(d),f=i(151),h=o(f),p=i(9),m=$(document.body);t.default={mixins:[u.default,l.default,h.default],route:{data:function(){var e=this;e.my.self||e.$nextTick(function(){e.vote()}),setTimeout(function(){e.renderPrizeAnimate()},2e3)}},data:function(){return{personal:!0}},computed:{completed:function(){},ended:function(){var e=this,t=e.activity;return t.end_time<Math.round(Date.now()/1e3)}},methods:{alert:function(){},click:function(){var e=this,t=e.my.joinerId,i=e.activity,o=Math.round(Date.now()/1e3);return i?void(i.start_time>o?e.showDialog({title:"提示",content:"活动还未开始",confirm:!0}):i.end_time<o?e.showDialog({title:"提示",content:"活动已结束",confirm:!0}):e.my.self?e.showSharer():e.my.joinerId?e.$router.go({name:"fire-joiner",params:{id:e.activityId,joinerId:e.my.joinerId}}):(0,p.showBeforeJoinTiper)(e.showDialog,function(){setTimeout(function(){e.joining=!0},0)})):void(e.my.self?e.showSharer():t?e.$router.go({name:"fire-joiner",params:{id:e.activityId,joinerId:t}}):(0,p.showBeforeJoinTiper)(e.showDialog,function(){setTimeout(function(){e.joining=!0},0)}))},vote:function(){var e=this,t=e.joinerId,i=!1,o=0,n=0,r=[];if(e.completed)return void e.alert();if(e.voter&&(e.voter.joiners.forEach(function(a){a.id==t&&(i=!0,e.my.self&&a.next_vote_date&&(o=a.next_vote_date,o<=Date.now()/1e3?i=!1:n=o-Date.now()/1e3))}),i)){if(n){var c=Math.floor(n/3600),u=Math.floor((n-3600*c)/60);c&&r.push(c+" 小时 "),u&&r.push(u+" 分钟")}return r=r.join(""),e.showDialog({title:"提示",content:e.my.self?'<font color="red">'+r+"</font> 后再点哦，朋友也能帮你哦！"+e.getShortTip():"你已经帮TA点过了",confirm:!0}),void(e.my.self&&e.genShorturl())}e.showLoading(),$.ajax(a.default.activityVote,{method:"POST",data:{joiner_id:t,open_id:e.visitor?e.visitor.openId:"wx"+Date.now(),next_vote_date:o},success:function(i){if(i.code)return void m.tooltip(s.default[i.code],"danger");if(i.data){var o=i.data.cutted_price;e.cutted_price=o,e.participant.current_price-=o,e.activity.vote_count++,e.voteIn({joiner:{id:t,next_vote_date:i.data.next_vote_date,expires:1e3*e.activity.end_time}}),e.participant.vote_count++,e.my.self?(e.genShorturl(),e.showDialog({title:"恭喜您",content:'<p><i class="fa fa-smile-o" aria-hidden="true"></i> 恭喜成功点燃 1 个鞭炮</p><p style="font-weight: bold;">如何找人帮忙<i class="fa fa-hand-o-down" aria-hidden="true"></i></p>'+e.getShortTip(),confirm:function(){return!0},button:{confirm:"我知道了"}})):e.showVoteModal()}},complete:function(){e.hideLoading()}})},showVoteModal:function(){var e=this;e.votestat="in",setTimeout(function(){e.votestat="stand"},900)},hideVoteModal:function(){var e=this;e.votestat="out",setTimeout(function(){e.votestat="hide"},1e3)}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=i(72),r=o(a),s=i(10),c=o(s),u=i(12),d=o(u),l=i(73),f=o(l),h=i(74),p=o(h),m=i(76),g=o(m),v=i(62),y=o(v),w=i(75),_=o(w),b=i(77),x=o(b),j=i(63),D=o(j),k=i(78),S=o(k),T=i(51),z=o(T),I=i(152),M=o(I),L=i(52),C=i(9),O=i(26),P=$(document.body);t.default={template:"#fire-editor",components:{Uploader:f.default,Userguide:p.default,Musician:y.default,miniEditor:_.default,miniLogin:x.default,Foreground:D.default,joinCustomize:S.default,Sharer:z.default},vuex:{getters:{user:function(e){return e.user}},actions:{showDialog:O.showDialog,showLoading:O.showLoading,hideLoading:O.hideLoading,pageIn:O.pageIn,toggleSharable:O.toggleSharable}},route:{data:function(e){function t(t){var o=M.default.name,n="制作";t&&(o=t.title,n=i.is_clone?"复制":"编辑"),i.clearActivityAttrs(),i.pageIn({title:"【"+n+"】"+o}),i.$nextTick(function(){i.initPicker()}),e.next({activated:!0})}var i=this,o=i.$route,a=Number(o.params.id)||0;return i.is_clone="clone"==o.query.action,a?(i.showLoading(),void $.ajax(c.default.activity+"/"+a,{data:{token:i.user.token},dataType:"text",success:function(a){if(a=$.parseJSON(a),a.code)return void i.fail(a);if(a.data){var r=a.data.activity;r.user_id!=i.user.id&&e.abort(),"clone"==o.query.action&&(r.id="");var s={},c={};try{s=(0,C.priceFilter)(JSON.parse(r.prizes)),c=(0,C.priceFilter)(JSON.parse(r.prizes))}catch(e){console.log("parse prizes error: "+e.message)}s.images&&s.images.forEach(function(e){e&&i.prize_image.uploader.images.push({suffix:"image/resize,w_640/quality,q_40",url:e})});var u=r.host_info;try{u=r.host_info&&JSON.parse((0,C.jsonFilter)(r.host_info))}catch(e){console.log("parse host_info error: "+e.message)}u.length&&"object"===("undefined"==typeof u?"undefined":n(u))&&(r.host_info=u);var d={};try{d=r.others&&JSON.parse((0,C.jsonFilter)(r.others)),d="object"===("undefined"==typeof d?"undefined":n(d))?$.extend(i.activity.others,d):i.activity.others}catch(e){console.log("parse others error: "+e.message)}r.prizes=s,i.copy_prizes=c,r.others=d,i.activity=r,i.statistics=a.data.statistics,t(r)}},error:function(){P.tooltip("活动加载失败","danger")},complete:function(){i.hideLoading()}})):void t()}},data:function(){var e=this,t=new Date,i=t.getFullYear(),o=t.getMonth(),n=t.getDate(),a=new Date(i,o,n),r=new Date(i,o,n+5);return{activated:!1,expired:!1,activity:{id:"",type:M.default.code,title:"春节送好礼，5档奖品任你选！",start_time:a.valueOf()/1e3,end_time:r.valueOf()/1e3,prizes:{discount_level:[{text:"跆拳道一个月",discount:0,original_price:100,market_price:9.9,help_value:5,left_stock:500}],info:"礼物一：玩偶公仔一个\n价值38元，免费送\n礼物二：无门槛学费券50元\n免费送\n礼物三：春季班一个月课程\n原价400元，只需88元\n\n每个礼物有限哦，大家赶快参与吧~",images:[],receive_prize_mobile:""+e.user.mobile,vote_hours:2},rules:"1.点击上方按钮“我要参加”参加活动。\n2.报名者自己每2小时可以点击【我要点鞭炮】增加一次鞭炮次数。\n3.别人可以帮忙增加鞭炮数。\n4.鞭炮数量达到相应值，自动获得礼品，先到先得哦~\n5.完成后，马上联系商家兑奖吧。~\n",receive_info:"兑奖时间：\n机构地址：\n联系电话："+e.user.mobile,host_info:"",others:{musician:"",foreground:{type:"",direction:""},section_text:{receive_info:"兑奖信息",intro:"机构介绍"},join_customize:{customize_1:{name:"",required:0},customize_2:{name:"",required:0},customize_3:{name:"",required:0}}}},intro:{uploaded:!1,minieditor:{uploader:{maxlength:10,placeholder:"（点击选择图片，不上传则不显示）",description:"添加图片（最多添加 10 张图片）",error:function(){e.submitting=!1,$("body").tooltip("机构介绍图片上传失败","danger")},success:function(t){e.activity.host_info=t,e.intro.uploaded=!0,e.publish()}},texter:{placeholder:"此处可修改字体样式：加粗、斜体、下划线、字体大小颜色...",description:"添加文本（最多添加 10 个文本内容）",maxlength:10},video:{placeholder:"请输入视频地址【支持优酷、腾讯视频】",description:"添加视频（最多添加 5 个视频）",maxlength:5}}},prize_image:{uploaded:!1,uploader:{error:function(){e.submitting=!1,P.tooltip("奖品图片上传失败","danger")},images:[],success:function(t){e.activity.prizes.images=t,e.prize_image.uploaded=!0,e.publish()}}},others:{musician:{callback:function(t){e.activity.others.musician=t}},foreground:{callback:function(t){e.activity.others.foreground=t}},join_customize:{callback:function(t){e.activity.others.join_customize=t}}},copy_prizes:null,editable:!0,statistics:null,is_clone:!1,sharer:null}},computed:{locked:function(){var e=this,t=e.statistics;return e.activity.id>0&&t&&t.join_count>0&&!e.is_clone}},ready:function(){var e=this;e.is_clone&&(0,C.showCloneTiper)(e.showDialog),setTimeout(function(){(0,g.default)($("textarea",e.$el).not(".nosize"))},1e3)},beforeDestroy:function(){var e=this;e.startDatePicker&&e.startDatePicker.destroy(),e.endDatePicker&&e.endDatePicker.destroy()},methods:{clearActivityAttrs:function(){var e=this;e.is_clone&&e.activity.prizes.discount_level&&e.activity.prizes.discount_level.forEach(function(e){e.used_stock&&delete e.used_stock,e.winning_ids&&delete e.winning_ids,e.discount_price&&delete e.discount_price,e.true_left_stock&&delete e.true_left_stock,e.percent&&delete e.percent})},addCoupon:function(){this.activity.prizes.discount_level.push({text:"",discount:0,original_price:100,market_price:9.9,help_value:5,left_stock:500})},deleteCoupon:function(e){var t=this;t.activity.prizes.discount_level.splice(e,1)},initPicker:function(){var e=this,t=$(e.$el),i=t.find(".start-date"),o=t.find(".end-date"),n={format:"YYYY-MM-DD HH:mm",increment:{minute:10},text:{cancel:"取消",confirm:"确认"},translate:function(e,t){var i={year:"年",month:"月",day:"日",hour:"点",minute:"分"};return Number(t)+i[e]}},a=$.extend(!0,{},n,{text:{title:"请选择活动开始时间"}}),s=$.extend(!0,{},n,{text:{title:"请选择活动结束时间"}}),c=new r.default(i[0],a),u=new r.default(o[0],s);e.startDatePicker=c,e.endDatePicker=u,i.on("change",function(){var t=c.getDate();e.activity.start_time=Math.round(t.getTime()/1e3),e.activity.end_time<=e.activity.start_time&&(t.setDate(t.getDate()+1),e.activity.end_time=Math.round(t.getTime()/1e3),e.$nextTick(function(){return u.update()}))}),o.on("change",function(t){var i=Math.round(u.getDate().getTime()/1e3);return i<=e.activity.start_time?void t.preventDefault():void(e.activity.end_time=i)})},toggle:function(){var e=this;e.editable=!e.editable,document.body.scrollTop=0,setTimeout(function(){(0,g.default)($("textarea",e.$el).not(".nosize"))},2e3)},fail:function(e,t){var i=this,o=e.code;1100==o?(0,C.showKickedOffline)(e.data.time,e.data.ip,i.showDialog,function(){i.expired=!0}):1101==o?(0,C.showExpireTip)(i.showDialog):1102==o?i.expired=!0:i.$root.$emit("show.snackbar",{color:"accent",message:d.default[o]}),i.hideLoading(),t&&t()},submit:function(e){var t=this,i=t.activity,o=(0,L.match)(JSON.stringify(i));if(e.preventDefault(),!i.title)return void t.showDialog({title:"提示",content:"请设置活动标题",confirm:!0});if(i.title.length>20)return void t.showDialog({title:"提示",content:"活动标题最多20字",confirm:!0});if(!i.prizes.vote_hours||i.prizes.vote_hours>24||i.prizes.vote_hours<1)return void t.showDialog({title:"提示",content:"每次投票时间间隔必须在1~24小时之间，请检查",confirm:!0});if(t.copy_prizes&&t.statistics&&t.statistics.join_count&&!t.is_clone&&i.prizes.vote_hours>t.copy_prizes.vote_hours)return void t.showDialog({title:"提示",content:"【温馨提示】为了保证活动公平性，活动期间，报名者投票时间间隔只减不增",confirm:!0});var n=!1,a=!1,r=!1,s=!1,u=!1,d=!1,l=M.default.level,f=i.prizes.discount_level;if($.each(f,function(e,i){var o=$.trim(i.text),c=i.original_price,h=i.market_price,p=i.help_value,m=i.left_stock,g=l[e];if(!o)return t.showDialog({title:"提示",content:"[礼物"+g+"] 请设置礼物名称",confirm:!0}),void(n=!0);if(c<=0)return t.showDialog({title:"提示",content:"[礼物"+g+"] 原价必须大于0",confirm:!0}),void(a=!0);if(h<0)return t.showDialog({title:"提示",content:"[礼物"+g+"] 现价必须 >= 0",confirm:!0}),void(r=!0);if(h>=c)return t.showDialog({title:"提示",content:"[礼物"+g+"] 现价必须小于原价",confirm:!0}),void(r=!0);if(p>99999)return t.showDialog({title:"提示",content:"[礼物"+g+"]鞭炮数 不能大于99999",confirm:!0}),void(s=!0);if(p<1)return t.showDialog({title:"提示",content:"[礼物"+g+"]鞭炮数 不能小于1",confirm:!0}),void(s=!0);if(e>0&&p<=f[e-1].help_value)return t.showDialog({title:"提示",content:"[礼物"+g+"]鞭炮数 必须大于 礼物"+l[e-1]+"的鞭炮数",confirm:!0}),void(s=!0);if(m>99999)return t.showDialog({title:"提示",content:"[礼物"+g+"]份数 不能大于9999",confirm:!0}),void(u=!0);if(m<1)return t.showDialog({title:"提示",content:"[礼物"+g+"]份数 不能小于1",confirm:!0}),void(u=!0);if(m>1e3&&(d=!0),t.copy_prizes&&t.statistics&&t.statistics.join_count&&!t.is_clone){var v=(t.copy_prizes.discount_level[e].original_price,t.copy_prizes.discount_level[e].market_price,t.copy_prizes.discount_level[e].help_value),y=t.copy_prizes.discount_level[e].left_stock;if(p>v)return t.$root.$emit("show.snackbar",{color:"active",message:"【温馨提示】为了保证活动公平性，活动期间，鞭炮数只减不增"}),t.showDialog({title:"提示",content:"[礼物"+g+"]鞭炮数不能大于"+v,confirm:!0}),void(u=!0);if(m<y)return t.$root.$emit("show.snackbar",{color:"active",message:"【温馨提示】为了保证活动公平性，活动期间，奖品余量只增不减"}),t.showDialog({title:"提示",content:"[礼物"+g+"]数量不能小于"+y,confirm:!0}),void(u=!0)}i.discount=c<=0?0:(h/c).toFixed(4)}),!(n||a||r||s||u)){if(!i.prizes.info)return void t.showDialog({title:"提示",content:"请输入礼物描述",confirm:!0});if(!i.receive_info)return void t.showDialog({title:"提示",content:"请设置兑奖信息",confirm:!0});if(!i.prizes.receive_prize_mobile)return void t.showDialog({title:"提示",content:"请设置咨询电话",confirm:!0});var h=!1,p=2;if($.each(i.others.join_customize,function(e,i){if(p++,i.required&&""==$.trim(i.name))return t.showDialog({title:"提示",content:"【信息收集设置】第 "+p+" 个信息项由于设置为必填项，因此名称不能为空！",confirm:!0}),void(h=!0)}),!h)return o.length?void t.showDialog({title:"提示",content:"发现微信违规词："+o.join("、")+"，请修改后再发布！",confirm:!0}):void(d&&!window.confirm("您的礼物中奖品份数有包含大于1000的数量，是否继续保存?")||t.submitting||(t.submitting=!0,t.showLoading("正在提交数据..."),$.ajax(c.default.uploadSignature,{method:"get",data:{token:t.user.token,type:2},dataType:"json",success:function(e){return e.code?(t.submitting=!1,t.hideLoading(),void t.fail(e)):(t.showLoading("正在上传图片，请勿离开或关闭页面"),void(e.data&&t.$root.$emit("upload.uploader",e.data)))},error:function(){t.submitting=!1,t.hideLoading(),t.$root.$emit("show.snackbar",{color:"accent",message:"保存失败，请检查网络是否正常连接！"})}})))}},publish:function(){var e=this;if(e.prize_image.uploaded&&e.intro.uploaded&&!e.publishing){e.sharer=null,e.publishing=!0,e.showLoading("正在提交数据，请勿离开或关闭页面");var t=(0,C.expressionFilter)($.extend(!0,{},e.activity));$.ajax(c.default.activity,{method:t.id?"put":"post",data:$.extend(t,{prizes:JSON.stringify((0,C.priceFilter)(t.prizes,{reversed:!0})),others:JSON.stringify(t.others),token:e.user.token}),success:function(i){return i.code?void e.fail(i):void P.one("hidden.tooltip",function(){e.sharer={autoShare:!1,autoShow:!0,data:$.extend(t,{category:M.default.category,id:t.id||i.data.id}),desc:t.share_content,imgUrl:t.share_img,title:t.share_title}}).tooltip("show",{content:"活动保存成功",style:"success",duration:1e3})},error:function(){P.tooltip("活动发布失败","danger")},complete:function(){e.submitting=!1,e.publishing=!1,e.hideLoading()}})}}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(60),a=o(n),r=i(67),s=o(r),c=i(156),u=o(c),d=i(9);t.default={mixins:[a.default,s.default,u.default],methods:{click:function(){var e=this,t=e.my.joinerId;t?e.$router.go({name:"lantern-joiner",params:{id:e.activityId,joinerId:t}}):(0,d.showBeforeJoinTiper)(e.showDialog,function(){e.visible=!0,setTimeout(function(){e.joining=!0},0)})}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(157),a=o(n);t.default={template:"#lantern",data:function(){return $.extend({active:!1,personal:!1,visible:!1,haloing:!1,pageSwitch:{countdown:!0}},a.default)},computed:{lanterns:function e(){var t=this,i=t.activity,o=i.others.lantern_str||"",n=i&&t.participant?t.participant.vote_count/i.prizes.limit*100:0,e=o.split(""),a=20,r=void 0,s=[],c="",u="",d=void 0;for(r=0;r<5;r++)c="",u="",d=(r+1)*a,e[r]&&(c=e[r]),n>=d&&(u="percent100"),s.push({text:c,style:u});return s}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={category:"lantern",code:15,name:"点灯笼"}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(61),a=o(n),r=i(12),s=o(r),c=i(60),u=o(c),d=i(67),l=o(d),f=i(156),h=o(f),p=i(9);t.default={mixins:[u.default,l.default,h.default],route:{data:function(){var e=this;e.my.self||e.$nextTick(function(){e.vote()})}},data:function(){return{personal:!0}},computed:{lantern:function(){var e=this,t=e.activity,i=t?e.participant.vote_count/t.prizes.limit:1,o=Math.max(1,isNaN(i)?1:Math.floor(8*i));return"lantern-"+o},required:function(){var e=this,t=e.activity;return t?Math.max(0,t.prizes.limit-e.participant.vote_count):0},completed:function(){return!this.required},ended:function(){var e=this,t=e.activity;return t.end_time<Math.round(Date.now()/1e3)}},methods:{alert:function(){var e=this;e.completed&&e.showDialog({title:"提示",content:e.my.self?"已完成，可以兑奖咯（商家联系方式可在活动页面上查找）":"TA已完成点灯笼任务",confirm:!0})},click:function(){var e=this,t=e.my.joinerId;e.my.self?e.completed?e.alert():e.showSharer():t?e.$router.go({name:"lantern-joiner",params:{id:e.activityId,joinerId:t}}):(0,p.showBeforeJoinTiper)(e.showDialog,function(){e.visible=!0,setTimeout(function(){e.joining=!0},0)})},vote:function(){var e=this,t=e.joinerId,i=(e.my.self?"":"帮TA",!1),o=0,n=0,r=[];if(e.completed)return void e.alert();if(e.voter&&(e.voter.joiners.forEach(function(a){a.id==t&&(i=!0,e.my.self&&a.next_vote_date&&(o=a.next_vote_date,o<=Date.now()/1e3?i=!1:n=o-Date.now()/1e3))}),i)){if(n){var c=Math.floor(n/3600),u=Math.floor((n-3600*c)/60);c&&r.push(c+" 小时 "),u&&r.push(u+" 分钟")}return r=r.join(""),e.showDialog({title:"提示",content:e.my.self?'<font color="red">'+r+"</font> 后再点哦，朋友也能帮你哦！"+e.getShortTip():"你已经帮TA点过了",confirm:!0}),void(e.my.self&&e.genShorturl())}e.showLoading(),$.post(a.default.activity.vote,{joiner_id:t,open_id:e.visitor?e.visitor.openId:"wx"+Date.now(),next_vote_date:o}).then(function(i){return e.hideLoading(),i.code?void $("body").tooltip(s.default[i.code],"danger"):(e.voteIn({joiner:{id:t,next_vote_date:i.data.next_vote_date,expires:1e3*e.activity.end_time}}),e.active=!0,void setTimeout(function(){e.my.self?(e.genShorturl(),e.showDialog({title:"恭喜您",content:'<p><i class="fa fa-smile-o" aria-hidden="true"></i> 人气 +1</p><p style="font-weight: bold;">如何找人帮忙<i class="fa fa-hand-o-down" aria-hidden="true"></i></p>'+e.getShortTip(),confirm:function(){return!0},button:{confirm:"我知道了"}})):e.showHalo(),e.participant.vote_count++},100))})},showHalo:function(){var e=this;e.visible=!0,setTimeout(function(){e.haloing=!0},0)},hideHalo:function(){var e=this;e.haloing=!1,setTimeout(function(){e.visible=!1},300)}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(52),a=i(123),r=o(a),s=i(157),c=o(s);t.default={template:"#lantern-editor",mixins:[r.default],data:function(){var e=this,t=new Date,i=t.getFullYear(),o=t.getMonth(),n=t.getDate(),a=new Date(i,o,n),r=new Date(i,o,n+5);return $.extend({activity:{id:0,type:c.default.code,title:"点灯笼赢好礼，胜利跆拳道春季班只要88元",start_time:a.valueOf()/1e3,end_time:r.valueOf()/1e3,rules:"1.点击上方按钮“我要参加”参加活动。\n\n2.报名者自己每2小时可以点击【我要点灯笼】增加1个人气值。\n\n3.别人可以帮忙增加人气值。\n\n4.奖品份数有限，达标就会减少一份，份数领完则无法继续报名，亲速度哦！\n\n5.完成后，马上联系商家兑奖吧。\n\n",prizes:{count:100,image:"",limit:30,desc:"跆拳道春季班，原价980元，点亮灯笼只需88元\n每周2次课，每班人数不超过30人\n",vote_hours:2,text:"88元学习春季班跆拳道课程",receive_prize_mobile:""+e.user.mobile},receive_info:"兑奖时间：\n机构地址：\n联系电话："+e.user.mobile,host_info:"",host_img:[],others:{musician:"",foreground:{type:"",direction:""},section_text:{receive_info:"领奖信息",intro:"机构介绍"},lantern_str:"元宵节快乐",join_customize:{customize_1:{name:"",required:0},customize_2:{name:"",required:0},customize_3:{name:"",required:0}}}}},c.default)},computed:{lanterns:function e(){var t=this,i=t.activity.others.lantern_str||"",e=i.split(""),o=void 0,n=[];for(o=0;o<5;o++)e[o]?n[o]=e[o]:n[o]="";return n}},methods:{isValid:function(){var e=this,t=e.activity,i=(0,n.match)(JSON.stringify(t)),o="",a=!1;t.title?!t.prizes.vote_hours||t.prizes.vote_hours>24||t.prizes.vote_hours<1?o="每次投票时间间隔必须在1~24小时之间，请检查":e.clone_activity&&e.statistics&&e.statistics.join_count&&!e.is_clone&&t.prizes.vote_hours>e.clone_activity.prizes.vote_hours?o="【温馨提示】为了保证活动公平性，活动期间，报名者投票时间间隔只减不增":t.prizes.count?e.locked&&e.activity.prizes.count<e.clone_activity.prizes.count?o="已有用户报名，因此奖品数量必须大于原值【"+e.clone_activity.prizes.count+"】":t.prizes.limit?t.prizes.text?t.receive_info?t.prizes.desc?t.prizes.receive_prize_mobile?i.length?o="发现微信违规词："+i.join("、")+"，请修改后再发布！":a=!0:o="请设置咨询热线电话":o="请设置产品描述":o="请设置领奖信息":o="请输入奖品描述":o="请输入灯笼数量":o="请输入奖品份数":o="请设置活动标题";var r=!1,s=2;return $.each(t.others.join_customize,function(e,t){if(s++,t.required&&""==$.trim(t.name))return o="【信息收集设置】第 "+s+" 个信息项由于设置为必填项，因此名称不能为空！",void(r=!0)}),r&&(a=!1),t.prizes.count>1e3&&!window.confirm("哇，土豪，您的奖品份数超过 1000 了，是否继续保存?")&&(a=!1),a||o&&e.showDialog({title:"提示",content:o,confirm:!0}),a}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(161),a=o(n),r=i(10),s=o(r),c=i(9),u=i(43);i(41),i(163),i(49);var d=$("body"),l=(window.URL||window.webkitURL,/^image\/\w+/);t.default={mixins:[a.default],data:function(){return{systemAvators:[],showAvators:!1,hidingAvators:!1,showPointer:!0,maxsize:"3072"}},ready:function(){this.textillateJoin()},computed:{currentLevel:function(){var e=this,t=e.activity,i=e.statistics.join_count,o=0,n=0,a=0,r=[],s=0;return t.prizes.groups.forEach(function(e){r.push(e.limit),e.limit<=i&&(o=e.price)}),a=Math.max.apply(Math,r),n=i>=a?100:i/a*100,n<=20?(s=20,n>0&&n<2&&(n=2)):s=n<=50?50:100,s="http://cdn.s.shangjiadao.cn/source/images/solitaire/prize_"+s+".png",e.showPercentAnimation(n),{price:o,percent:n,percentIcon:s}},joinerFields:function(){var e=this,t=e.joinFields,i=e.joinCustomize,o=void 0;if(!$.isEmptyObject(i))for(o in i)t.push(o);return t},joinerFieldNames:function(){var e=this,t=e.joinFieldNames,i=e.joinCustomize,o=void 0;if(!$.isEmptyObject(i))for(o in i)t.push(i[o].name);return t},prizeGroups:function(){var e=this,t=e.statistics,i=t.join_count||0,o=e.activity.prizes.groups,n=void 0,a=0,r=0;return o.forEach(function(e,t){e.limit>i&&!a&&(a=e.limit),e.limit<=i&&(r=e.limit)}),o.forEach(function(e,t){n=e.limit,i<n?e.stat="notget":!a&&t+1==o.length||n==r?e.stat="getting":e.stat="got"}),o}},methods:{textillateJoin:function(){setTimeout(function(){$("#solitaire-iwantjoin").textillate({loop:!0,in:{effect:"rotateIn",delay:500},out:{effect:"fadeOut",sequence:!0,delay:1}})},2500)},showPercentAnimation:function(e){var t=e>10?.88*e-2:.88*e;e>0&&setTimeout(function(){$("#solitaire-prize-percent").animate({width:e+"%",opacity:"1","margin-left":e<=5?"5px":"0"},800,function(){}),$("#solitaire-prize-runner").animate({left:t+"%",opacity:"1"},780,function(){})},200)},hidePaidDialog:function(){var e=this;e.paidVisible=!1},showJoin:function(){var e=this,t=e.countdown;if(!e.my){if(!t.started)return void d.tooltip("亲，活动未开始哦！","info");if(t.ended)return void d.tooltip("亲，活动已经结束了！","info")}e.my?(e.visible=!0,setTimeout(function(){e.joining=!0},0)):(0,c.showBeforeJoinTiper)(e.showDialog,function(){e.visible=!0,setTimeout(function(){e.joining=!0},0)})},goRanking:function(){document.body.scrollTop=d.height()},selectDefaultAvator:function(){var e=this;return e.systemAvators.length?void(e.showAvators=!0):(e.showLoading("正在拉取..."),void $.getJSON(s.default.json.avators+"?"+(new Date).getHours(),function(t){e.systemAvators=t,e.showAvators=!0,e.hideLoading()}))},selectedAvator:function(e){var t=this,i=Number(e.target.dataset.index);t.newJoiner.avator=t.systemAvators[i],t.closeAvator()},closeAvator:function(){var e=this;e.hidingAvators=!0,setTimeout(function(){e.showAvators=!1,e.hidingAvators=!1},900)},closePointer:function(){var e=this;e.showPointer=!1},uploadAvator:function(e){var t=this,i=e.target,o=i.files?i.files[0]:null;if(o&&(l.test(o.type)||""==o.type)){var n=o.size/1024;if(n>t.maxsize)return t.showDialog({title:"提示",content:"图片大小请控制在 "+Math.floor(t.maxsize)+" KB 以内",confirm:!0}),!1;t.showLoading("正在上传头像..."),$.get(s.default.uploadSignature,{type:5},function(e){return e.code?void d.tooltip(messages[e.code],"danger"):void(e.data&&!function(){var i=e.data,n=""+i.dir+(0,c.getRandomFilename)(o.name),a=$("#solitaire-joiner-avator");a.uploader({name:"file",url:i.host,data:{key:n,policy:i.policy,OSSAccessKeyId:i.accessid,signature:i.signature},done:function(){t.newJoiner.avator=(0,u.imagify)(n,"image/resize,w_100/quality,q_80"),t.hideLoading()},fail:function(){d.tooltip("头像上传失败，请检查网络连接并重试","danger"),t.hideLoading()},uploaded:function(){a.uploader("destroy")}}).uploader("upload")}())})}else d.tooltip("请选择正确的图片文件","notice")}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=i(21),r=o(a),s=i(10),c=o(s),u=i(162),d=o(u),l=i(11),f=o(l),h=i(12),p=o(h),m=i(40),g=o(m),v=i(51),y=o(v),w=i(45),_=o(w),b=i(62),x=o(b),j=i(63),D=o(j),k=i(64),S=o(k),T=i(65),z=i(9),I=i(26),M=i(52),L=$(document.body),C=window.location;t.default={template:"#solitaire",components:{Message:g.default,Sharer:y.default,WaterfallFlowLoader:_.default,Foreground:D.default,Musician:x.default,Imager:S.default},vuex:{getters:{user:function(e){return e.user},joiner:function(e){return e.joiner},reminded:function(e){return e.reminded},sharable:function(e){return e.sharable},voter:function(e){return e.voter},visitor:function(e){return e.visitor}},actions:{showDialog:I.showDialog,showLoading:I.showLoading,hideLoading:I.hideLoading,joinIn:I.joinIn,joinOut:I.joinOut,pageIn:I.pageIn,toggleReminder:I.toggleReminder,toggleSharable:I.toggleSharable,voteIn:I.voteIn}},route:{data:function e(t){var i=this,o=t.to,n=Number(o.params.id)||0,a=i.getJoiner(n),r=a?a.joinerId:0,s=c.default.solitaire+"/"+n,e={id:n,joiner_id:r};i.activity=null,i.loader=null,i.sharer=null,i.showLoading(),$.ajax({url:s,dataType:"text",data:e,success:function(e){if(e=$.parseJSON(e),e.data&&e.data.mobile&&(i.activityMobile=e.data.mobile),e.code)return"1005"==e.code?(C.href="/403.html",void t.abort()):"1217"==e.code?void(i.hasActivity=!1):void L.tooltip(p.default[e.code],"danger");if(e.data){var o=e.data.activity||e.data,a=e.data.statistics,s=e.data.joiners,u=i.sharable;if("16"!=o.type)return void(i.hasActivity=!1);!(0,T.matchCases)(o.user_id)&&o.completed_delay_days>=2&&(i.hasCompleted=!0),o.joiner&&o.joiner.removed&&(i.joinOut(r),i.showDialog({title:"重要提示",button:{confirm:"我知道了"},style:"text-align: left;",content:o.joiner.fail?"因接龙失败，诚意金已原路退回，7个工作日内到账。":"您已被活动主办方取消名额，如有疑问，请联系主办方！",confirm:function(){return window.location.reload(),!0}})),u&&i.toggleSharable(),i.pageIn({title:o.title,description:o.rules});var l={};try{l=JSON.parse(o.prizes)}catch(e){console.log(e.message)}var f={};try{f=o.others&&JSON.parse(o.others)}catch(e){console.log("parse others error: "+e.message)}i.$nextTick(function(){i.startCountdown()});var h={},m={};if(f.join_customize){var g=void 0,v=void 0;for(g in f.join_customize)v=f.join_customize[g],""!=v.name&&(v.placeholder="请输入"+v.name,m[g]="",h[g]=v)}t.next({activity:$.extend({},o,{host_img:String(o.host_img).split(","),prizes:l,others:f}),activityId:n,joinerId:r,joiners:[],miniJoiners:s,newJoiner:$.extend({},i.newJoiner,m),joinCustomize:$.extend({},i.joinCustomize,h),loader:{url:c.default.solitaireRanking+"?id="+n,params:{id:n}},sharer:{autoShare:!u,autoShow:u,data:$.extend({joinerId:r,category:d.default.category},o),desc:o.share_content,imgUrl:o.share_img,link:window.location.href,title:o.share_title||"我在参加接龙活动，就缺你啦！！"},statistics:a})}},error:function(){L.tooltip("活动加载失败","danger")},complete:function(){setTimeout(function(){$("div.about").find("img").scrollLoading()},100),i.bindQrcodeAnimate(),i.hideLoading()}})}},data:function(){return{activityMobile:null,activity:null,activityId:0,completedJoiners:{total:0,list:[]},hasActivity:!0,hasCompleted:!1,joinerId:0,joiners:[],miniJoiners:[],joining:!1,loader:null,newJoiner:{name:"",mobile:"",avator:"",rank:""},joinCustomize:{},joinFields:["name","mobile"],joinFieldNames:["姓名","手机号码"],reading:!1,readed:!1,reading_countdown:3,reading_countdown_timer:null,join_successed:!1,opening:!0,sharer:null,statistics:null,visible:!1,paidVisible:!1}},computed:{my:function(){var e=this;return e.getJoiner(e.activityId)},countdown:function(){var e=this,t=e.activity,i=Date.now(),o=1e3*t.start_time,n=1e3*t.end_time,a=o<=i;return{time:a?n:o,text:a?"结束":"开始",ended:n<=i,started:a}},tellink:function(){return"tel://"+this.activityMobile},hostinfo:function(){var e=this,t=e.activity.host_info,i=!1;try{t=JSON.parse((0,z.jsonFilter)(e.activity.host_info))}catch(e){console.log("parse host_info error: "+e.message)}return i=!(t.length&&"object"===("undefined"==typeof t?"undefined":n(t))),{content:i?e.activity.host_info:t,is_normal:i}}},ready:function(){this.checkOrder(!0)},beforeDestroy:function(){this.stopCountdown()},methods:{load:function(e){var t=this;Array.isArray(e)&&e.forEach(function(e){return t.joiners.push(e)})},getJoiner:function(e){var t=this,i={},o=!1;if(e=e||t.activityId,t.joiner){var n=t.joiner.activities;n.forEach(function(n){n.id==e&&(i=$.extend({},i,n),t.activity&&t.activity.joiner&&!t.activity.joiner.removed&&(i=$.extend({},i,t.activity.joiner)),o=!0)})}return o?i:null},join:function(e){var t=this,i=t.newJoiner.name,o=(0,M.matchJoin)(JSON.stringify({name:i})),n=t.joinCustomize,a=void 0,r=!0;if(e.preventDefault(),o.length)return void(0,z.showJoinNotice)(t.showDialog);for(a in t.newJoiner)if(n[a]&&n[a].required&&""==$.trim(t.newJoiner[a])){L.tooltip(n[a].name+"不能为空","danger"),r=!1;break}return!!r&&(t.readed?(t.showLoading(),void $.ajax(c.default.solitaireOrder,{method:"POST",data:$.extend({},t.newJoiner,{id:t.activityId,open_id:t.visitor?t.visitor.openId:"wx"+Date.now()}),success:function(e){var i=e.data?Number(e.data.joiner_id):0,o=e.data?Number(e.data.rank):0,n=e.data?Number(e.data.ctime):0;return e.code?(i&&t.joined({joinerId:i,rank:o,ctime:n}),void L.tooltip(p.default[e.code],"danger")):void(e.data&&t.pay(e.data))},error:function(){L.tooltip("报名失败","danger")},complete:function(){t.hideLoading()}})):(t.reading=!0,t.reading_countdown_timer=setInterval(function(){1==t.reading_countdown?(clearInterval(t.reading_countdown_timer),t.reading=!1,t.readed=!0):t.reading_countdown--},1e3),!1))},joined:function(e){var t=this,i=t.newJoiner.name,o=t.newJoiner.mobile,n=void 0;e.joinerId&&(n={id:t.activityId,joinerId:e.joinerId,expires:1e3*t.activity.end_time},e.rank&&(n.rank=e.rank),e.ctime&&(n.ctime=e.ctime),t.joining=!1,setTimeout(function(){t.visible=!1},500),t.joinIn({activity:$.extend(t.newJoiner,n),mobile:o,name:i}))},pay:function(e){var t=this,i=window.jWeixin;i&&!function(){var o=JSON.parse(e.api_parameters),n=t.newJoiner,a=n.name,r=n.mobile,s=n.avator,c={count:0,limit:1,duration:800,id:e.order_id,message:"",mobile:r,name:a,avator:s,status:0};i.chooseWXPay({timestamp:o.timeStamp,nonceStr:o.nonceStr,package:o.package,signType:o.signType,paySign:o.paySign,success:function(e){"chooseWXPay:ok"==e.errMsg&&(c.limit=15,c.status=1,t.showLoading("正在努力提交，请勿离开或关闭此页面，否则将无法报名成功")),c.message=e.errMsg,t.updateOrder(c)},cancel:function(e){c.message=e.errMsg,t.updateOrder(c)},fail:function(e){c.message="["+e.errMsg+"] ["+navigator.userAgent.toLowerCase()+"]",t.updateOrder(c),t.showDialog({title:"提示",content:t.user&&t.activity.user_id==t.user.id?"无法弹出微信支付界面，请将页面转发出去后再进入进行报名。":"网络通信出现问题，无法弹出微信支付界面，请换个网络或稍微再试。",confirm:!0})}})}()},updateOrder:function(e){var t=this;e&&(e.count++,z.LocalStorage.setItem("solitaire_order",e),$.post(c.default.solitairePay,{message:e.message,status:e.status,order_id:e.id,token:(0,r.default)(""+e.mobile+f.default.token)}).then(function(e){if(e.code)return void t.checkOrder();if(z.LocalStorage.removeItem("solitaire_order"),e.data){var i=Number(e.data.joiner_id),o=Number(e.data.rank),n=Number(e.data.ctime);i&&(t.joined({joinerId:i,rank:o,ctime:n}),t.hideLoading(),t.join_successed=!0,t.paidVisible=!0)}},function(){t.checkOrder()}))},checkOrder:function(e){var t=this,i=z.LocalStorage.getItem("solitaire_order");if($.isPlainObject(i))if(i.count<i.limit){if(e)return void t.updateOrder(i);setTimeout(function(){t.updateOrder(i)},i.count*i.duration)}else z.LocalStorage.removeItem("solitaire_order")},close:function(e){var t=this;t[e]=!1,setTimeout(function(){t.visible=!1},500)},startCountdown:function(){
var e=this;e.stopCountdown(),e.$countdown=$(e.$els.countdown).countdown()},stopCountdown:function(){var e=this;e.$countdown&&(e.$countdown.countdown("destroy"),e.$countdown=null)},showqrcode:function(){var e=this;(0,z.displayShareQrcode)({type:d.default.category,name:"",title:e.activity.title,activityId:e.activity.id,joinerId:e.joinerId||0},e.showDialog,e.showLoading,e.hideLoading)},bindQrcodeAnimate:function(){setTimeout(function(){var e=$("header").find("a.qrcode");e.length&&setInterval(function(){e.addClass("ani"),setTimeout(function(){e.removeClass("ani")},2e3)},6e3)},500)},showNotice:function(e,t){(0,z.showCreateNotice)(e,t,this.showDialog)},showTimelineWarning:function(e,t){(0,z.showCreateTimelineWarning)(e,t,this.showDialog)}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={category:"solitaire",code:16,name:"优惠接龙"}},function(e,t){!function(e){function t(t,i,o,n){var a=t.text(),r=a.split(i),s="";r.length&&(e(r).each(function(e,t){s+='<span class="'+o+(e+1)+'" aria-hidden="true">'+t+"</span>"+n}),t.attr("aria-label",a).empty().append(s))}var i={init:function(){return this.each(function(){t(e(this),"","char","")})},words:function(){return this.each(function(){t(e(this)," ","word"," ")})},lines:function(){return this.each(function(){var i="eefec303079ad17405c889e092e105b0";t(e(this).children("br").replaceWith(i).end(),i,"line","")})}};e.fn.lettering=function(t){return t&&i[t]?i[t].apply(this,[].slice.call(arguments,1)):"letters"!==t&&t?(e.error("Method "+t+" does not exist on jQuery.lettering"),this):i.init.apply(this,[].slice.call(arguments,0))}}(jQuery)},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=i(72),r=o(a),s=i(162),c=o(s),u=i(10),d=o(u),l=i(12),f=o(l),h=i(73),p=o(h),m=i(75),g=o(m),v=i(62),y=o(v),w=i(74),_=o(w),b=i(77),x=o(b),j=i(63),D=o(j),k=i(64),S=o(k),T=i(76),z=o(T),I=i(78),M=o(I),L=i(51),C=o(L),O=i(52),P=i(9),E=i(26),A=$(document.body);t.default={template:"#solitaire-editor",components:{Uploader:p.default,miniEditor:g.default,Musician:y.default,Userguide:_.default,miniLogin:x.default,Foreground:D.default,Imager:S.default,joinCustomize:M.default,Sharer:C.default},vuex:{getters:{user:function(e){return e.user},guider:function(e){return e.guider}},actions:{showDialog:E.showDialog,showLoading:E.showLoading,hideLoading:E.hideLoading,pageIn:E.pageIn,toggleSharable:E.toggleSharable,guideIn:E.guideIn}},route:{data:function(e){function t(t){var o="优惠接龙",n="制作";t&&(o=t.title,n="clone"==i.$route.query.action?"复制":"编辑"),i.pageIn({title:"【"+n+"】"+o}),i.$nextTick(function(){i.initPicker()}),e.next({activated:!0})}var i=this,o=i.$route,a=Number(o.params.id)||0;return i.is_clone="clone"==o.query.action,a?(i.showLoading(),void $.ajax(d.default.solitaire+"/"+a,{data:{token:i.user.token},dataType:"text",success:function(a){if(a=$.parseJSON(a),a.code)return void i.fail(a);if(a.data){var r=a.data.activity;r.user_id!=i.user.id&&e.abort(),"clone"==o.query.action&&(r.id="");var s=r.host_img.split(","),c={},u={};try{c=(0,P.priceFilter)(JSON.parse(r.prizes),{pattern:/price|prepaid/}),u=(0,P.priceFilter)(JSON.parse(r.prizes),{pattern:/price|prepaid/})}catch(e){console.log("parse prizes error: "+e.message)}c.image&&i.prize.uploader.images.push({suffix:"image/resize,w_640/quality,q_40",url:c.image}),s.forEach(function(e){e&&i.intro.uploader.images.push({suffix:"image/resize,w_640/quality,q_40",url:e})});var d=r.host_info;try{d=r.host_info&&JSON.parse((0,P.jsonFilter)(r.host_info))}catch(e){console.log("parse host_info error: "+e.message)}d.length&&"object"===("undefined"==typeof d?"undefined":n(d))&&(r.host_info=d);var l={};try{l=r.others&&JSON.parse((0,P.jsonFilter)(r.others)),l="object"===("undefined"==typeof l?"undefined":n(l))?$.extend(i.activity.others,l):i.activity.others}catch(e){console.log("parse others error: "+e.message)}r.prizes=c,i.copy_prizes=u,r.host_img=s,r.others=l,i.activity=r,i.statistics=a.data.statistics,t(r)}},error:function(){A.tooltip("活动加载失败","danger")},complete:function(){i.hideLoading()}})):void t()}},data:function(){var e=this,t=new Date,i=t.getFullYear(),o=t.getMonth(),n=t.getDate(),a=new Date(i,o,n),r=new Date(i,o,n+5);return{activated:!1,expired:!1,editable:!0,prizes_groups_limit:5,activity:{id:"",type:16,title:"清风教育春季班优惠接龙啦，全员冲刺最低价！！",start_time:a.valueOf()/1e3,end_time:r.valueOf()/1e3,prizes:{groups:[{limit:30,price:800,text:""},{limit:100,price:500,text:"全员多赠送一节课"},{limit:500,price:100,text:"全员多赠送二节课"}],image:"",mobile:e.user.mobile,prepaid:100,limit:999,text:"2017春季班大放“价”\n\n原价1200元春季班，总计12次课，接龙太划算啦，你们敢喊人一起接龙，我就陪你们疯狂到底~\n\n优惠不断：\n\n①前30名接龙用户，赠送清风教育定制书包一个。\n\n②诚意金100元，超过500人，不需再补费用，即可上课！！\n\n③鸡年大吉，遇“7”赠礼：凡是排名含7的用户赠送画笔套装一副。\n\n"},rules:"1.点击“我要报名”，参加活动。\n\n2.接龙总人数达标即可享受对应档优惠。\n\n3.接龙失败诚意金原路退回，成功则诚意金不退。\n\n4.加入接龙的人越多越优惠全员享受同一个优惠。\n\n",receive_info:"领奖时间：\n领奖地址：\n领奖电话："+e.user.mobile,host_info:"",host_img:[],others:{musician:"",foreground:{type:"",direction:""},section_text:{receive_info:"领奖信息",intro:"机构介绍"},banner:{src:"http://cdn.s.shangjiadao.cn/source/images/components/imager/group/01.jpg"},join_customize:{customize_1:{name:"",required:0},customize_2:{name:"",required:0},customize_3:{name:"",required:0}}}},intro:{uploaded:!1,minieditor:{uploader:{maxlength:10,placeholder:"（点击选择图片，不上传则不显示）",description:"添加图片（最多添加 10 张图片）",error:function(){e.submitting=!1,$("body").tooltip("机构介绍图片上传失败","danger")},success:function(t){e.activity.host_info=t,e.intro.uploaded=!0,e.publish()}},texter:{placeholder:"此处可修改字体样式：加粗、斜体、下划线、字体大小颜色...",description:"添加文本（最多添加 10 个文本内容）",maxlength:10},video:{placeholder:"请输入视频地址【支持优酷、腾讯视频】",description:"添加视频（最多添加 5 个视频）",maxlength:5}}},prize:{uploaded:!1,uploader:{error:function(){e.submitting=!1,A.tooltip("奖品图片上传失败","danger")},images:[],success:function(t){e.activity.prizes.image=t[0]||"",e.prize.uploaded=!0,e.publish()}}},others:{musician:{callback:function(t){e.activity.others.musician=t}},foreground:{callback:function(t){e.activity.others.foreground=t}},section_text:{receive_info:"兑奖信息",intro:"机构介绍"},imager:{switcies:{font:!1},callback:function(t){e.activity.others.banner=t}},join_customize:{callback:function(t){e.activity.others.join_customize=t}}},statistics:null,submitting:!1,is_clone:!1,copy_prizes:null,sharer:null}},computed:{locked:function(){var e=this,t=e.statistics;return e.activity.id>0&&t&&t.join_count>0&&!e.is_clone},completed:function(){var e=this,t=(new Date).getTime()/1e3;return e.activity.end_time<=t}},ready:function(){var e=this,t="solitaire-editor-notice",i=!1;"clone"==e.$route.query.action?(0,P.showCloneTiper)(e.showDialog):(e.guider&&e.guider.cases.forEach(function(e){e.id==t&&(i=!0)}),i||e.showDialog({title:"重要提示",style:{"text-align":"left"},button:{confirm:"我知道了"},content:'<p style="font-size: 0.8rem;">1.活动规则：全员参与，接龙人数越多则越优惠，全员享受同一个优惠。<p><p style="font-size: 0.8rem;">2.接龙活动的诚意金（定金）在转入钱包时将收取2.5%手续费，用于支付微信手续费、公司收入营业所得税。</p><p style="font-size: 0.8rem;">3.活动结束后，活动时间无法再进行调整。（接龙失败的活动，诚意金会原路退回用户账号）</p><p style="color: #999;font-size: 0.8rem;"><input type="checkbox" id="dialog-solitaire-editor-notice"/><label for="dialog-solitaire-editor-notice">下次不再出现此提示</label></p>',confirm:function(){return $("#dialog-solitaire-editor-notice").is(":checked")&&e.guideIn({case:{id:t,expires:Date.now()+63072e6}}),!0}})),setTimeout(function(){(0,z.default)($("textarea",e.$el).not(".nosize"))},2500)},beforeDestroy:function(){var e=this;e.startDatePicker&&e.startDatePicker.destroy(),e.endDatePicker&&e.endDatePicker.destroy()},methods:{initPicker:function(){var e=this,t=$(e.$el),i=t.find(".start-date"),o=t.find(".end-date"),n={format:"YYYY-MM-DD HH:mm",increment:{minute:10},text:{cancel:"取消",confirm:"确认"},translate:function(e,t){var i={year:"年",month:"月",day:"日",hour:"点",minute:"分"};return Number(t)+i[e]}},a=$.extend(!0,{},n,{text:{title:"请选择活动开始时间"}}),s=$.extend(!0,{},n,{text:{title:"请选择活动结束时间"}}),c=new r.default(i[0],a),u=new r.default(o[0],s);e.startDatePicker=c,e.endDatePicker=u,i.on("change",function(){var t=c.getDate();e.activity.start_time=Math.round(t.getTime()/1e3),e.activity.end_time<=e.activity.start_time&&(t.setDate(t.getDate()+1),e.activity.end_time=Math.round(t.getTime()/1e3),e.$nextTick(function(){return u.update()}))}),o.on("change",function(t){var i=Math.round(u.getDate().getTime()/1e3);return i<=e.activity.start_time?void t.preventDefault():void(e.activity.end_time=i)})},addGroup:function(){var e=this.activity;e.prizes.groups.length<this.prizes_groups_limit&&e.prizes.groups.push({limit:"",prize:""})},removeGroup:function(e){this.activity.prizes.groups.splice(e,1)},toggle:function(){var e=this;e.editable=!e.editable,document.body.scrollTop=0,setTimeout(function(){(0,z.default)($("textarea",e.$el))},2e3)},fail:function(e,t){var i=this,o=e.code;1100==o?(0,P.showKickedOffline)(e.data.time,e.data.ip,i.showDialog,function(){i.expired=!0}):1101==o?(0,P.showExpireTip)(i.showDialog):1102==o?i.expired=!0:i.$root.$emit("show.snackbar",{color:"accent",message:f.default[o]}),i.hideLoading(),t&&t()},submit:function(e){var t=this,i=t.activity,o=(0,O.match)(JSON.stringify(i));if(e.preventDefault(),!i.title)return void t.showDialog({title:"提示",content:"请设置 活动标题",confirm:!0});if(!i.others.banner.src)return void t.showDialog({title:"提示",content:"请设置 顶部海报",confirm:!0});if(!i.prizes.prepaid)return void t.showDialog({title:"提示",content:"请设置 接龙诚意金（定金）",confirm:!0});if(i.prizes.prepaid<=1)return void t.showDialog({title:"提示",content:"接龙诚意金（定金） 必须大于1",confirm:!0});if(""===i.prizes.limit)return void t.showDialog({title:"提示",content:"请设置 参与接龙人数上限",confirm:!0});var n=!1,a=!1,r=["一","二","三","四","五"],s=[];if($.each(i.prizes.groups,function(e,o){var c=o.price,u=o.limit,d="[阶梯"+r[e]+"]",l="",f=null;if(s.push(u),u<=1)return t.showDialog({title:"提示",content:d+" 接龙人数必须大于1",confirm:!0}),void(a=!0);if(c<=1)return t.showDialog({title:"提示",content:d+" 价格必须大于1",confirm:!0}),void(n=!0);if(e>0){if(f=i.prizes.groups[e-1],l="[阶梯"+r[e-1]+"]",u<=f.limit)return t.showDialog({title:"提示",content:d+" 接龙人数必须大于 "+l,confirm:!0}),void(a=!0);if(c>f.price)return t.showDialog({title:"提示",content:d+" 价格必须小于等于 "+l,confirm:!0}),void(n=!0)}if(t.copy_prizes&&t.statistics&&t.statistics.join_count&&!t.is_clone){var h=t.copy_prizes.groups[e].price,p=t.copy_prizes.groups[e].limit;if(u>p)return t.$root.$emit("show.snackbar",{color:"active",message:"【温馨提示】为了保证活动公平性，活动期间，阶梯优惠接龙人数只减不增"}),t.showDialog({title:"提示",content:d+" 接龙人数不能大于"+p,confirm:!0}),void(a=!0);if(c>h)return t.$root.$emit("show.snackbar",{color:"active",message:"【温馨提示】为了保证活动公平性，活动期间，阶梯优惠价格只减不增"}),t.showDialog({title:"提示",content:d+" 优惠价格不能大于"+h,confirm:!0}),void(n=!0)}}),!n&&!a){if("0"!=i.prizes.limit&&Math.max.apply(null,s)>i.prizes.limit)return void t.showDialog({title:"提示",content:"第"+s.length+"档优惠阶梯接龙人数不能大于接龙人数上限",confirm:!0});if(!i.prizes.text)return void t.showDialog({title:"提示",content:"请输入奖品描述",confirm:!0});if(!i.receive_info)return void t.showDialog({title:"提示",content:"请设置兑奖信息",confirm:!0});if(!i.prizes.mobile)return void t.showDialog({title:"提示",content:"请设置咨询电话",confirm:!0});var c=!1,u=2;if($.each(i.others.join_customize,function(e,i){if(u++,i.required&&""==$.trim(i.name))return t.showDialog({title:"提示",content:"【信息收集设置】第 "+u+" 个信息项由于设置为必填项，因此名称不能为空！",confirm:!0}),void(c=!0)}),!c)return o.length?void t.showDialog({title:"提示",content:"发现微信违规词："+o.join("、")+"，请修改后再发布！",confirm:!0}):void(t.submitting||(t.submitting=!0,t.showLoading("正在提交数据..."),$.ajax(d.default.uploadSignature,{method:"get",data:{token:t.user.token,type:2},dataType:"json",success:function(e){return e.code?(t.submitting=!1,t.hideLoading(),void t.fail(e)):(t.showLoading("正在上传图片，请勿离开或关闭页面"),void(e.data&&t.$root.$emit("upload.uploader",e.data)))},error:function(){t.submitting=!1,t.hideLoading(),t.$root.$emit("show.snackbar",{color:"accent",message:"保存失败，请检查网络是否正常连接！"})}})))}},publish:function(){var e=this;if(e.prize.uploaded&&e.intro.uploaded&&!e.publishing){e.sharer=null,e.publishing=!0,e.showLoading("正在提交数据，请勿离开或关闭页面");var t=(0,P.expressionFilter)($.extend(!0,{},e.activity));$.ajax(d.default.solitaire,{method:t.id?"put":"post",data:$.extend(t,{host_img:t.host_img.join(),prizes:JSON.stringify((0,P.priceFilter)(t.prizes,{pattern:/price|prepaid/,reversed:!0})),others:JSON.stringify(t.others),token:e.user.token}),success:function(i){return i.code?void e.fail(i):void A.one("hidden.tooltip",function(){e.sharer={autoShare:!1,autoShow:!0,data:$.extend(t,{category:c.default.category,id:t.id||i.data.id}),desc:t.share_content,imgUrl:t.share_img,title:t.share_title}}).tooltip("show",{content:"活动保存成功",style:"success",duration:1e3})},error:function(){A.tooltip("活动发布失败","danger")},complete:function(){e.submitting=!1,e.publishing=!1,e.hideLoading()}})}}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(10),a=o(n),r=i(12),s=o(r),c=i(35),u=o(c),d=i(26),l=$(document.body);t.default={template:"#solitaire-settle",vuex:{getters:{user:function(e){return e.user},visitor:function(e){return e.visitor}},actions:{showDialog:d.showDialog,showLoading:d.showLoading,hideLoading:d.hideLoading,pageIn:d.pageIn}},data:function(){return{code:"",submitting:!1,settled:!1}},ready:function(){var e=this;e.pageIn({title:"转入钱包"})},beforeDestroy:function(){var e=this;e.countdown&&e.countdown.destroy()},methods:{sendCaptcha:function(e){var t=this,i=e.target;i.disabled||t.requesting||(t.requesting=!0,$.ajax(a.default.solitaireSettle,{data:{id:t.$route.params.id,token:t.user.token},success:function(e){return e.code?void l.tooltip(s.default[e.code],"danger"):(l.tooltip("短信验证码发送成功","success"),void(t.countdown=new u.default(i,{template:"%d秒后重新获取",seconds:60})))},complete:function(){t.requesting=!1}}))},submit:function(e){var t=this;e.preventDefault(),t.submitting||t.settled||(t.submitting=!0,$.ajax(a.default.solitaireSettle,{method:"POST",data:{amount:t.$route.query.amount,code:t.code,id:t.$route.params.id,open_id:t.visitor?t.visitor.openId:"wx"+Date.now(),token:t.user.token},success:function(e){return e.code?void l.tooltip(s.default[e.code],"danger"):(t.settled=!0,t.$root.$emit("show.snackbar",{message:"转入成功，请至【个人中心】=>【钱包】查看"}),void setTimeout(function(){t.$router.go({name:"solitaire-joiners",params:{id:t.$route.params.id},query:{type:"16"}})},3e3))},complete:function(){t.submitting=!1}}))}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(10),a=o(n),r=i(12),s=o(r),c=i(167),u=o(c),d=i(45),l=o(d),f=i(9),h=i(26);$(document.body);t.default={template:"#solitaire-joiners",components:{Searchbar:u.default,WaterfallFlowLoader:l.default},vuex:{getters:{user:function(e){return e.user}},actions:{showDialog:h.showDialog,showLoading:h.showLoading,hideLoading:h.hideLoading,pageIn:h.pageIn}},route:{data:function(e){var t=this;t.$route;e.next({})}},data:function(){return{joiners:[],settleable:!1,grouped:!1,has_settled:!1,total_number:0,total_amount:0,exception_number:0,keyword:"",category:0,categories:["报名表单","异常订单","退款历史"],category_apis:[a.default.solitaireJoiners,a.default.solitaireExceptionJoiners,a.default.solitaireRefunds],loaders:{},activity:{}}},computed:{loader:function(){var e=this,t=e.$route,i={id:t.params.id,token:e.user.token},o=e.category_apis[e.category];return e.joiners=[],e.keyword&&(i.keyword=e.keyword),e.loaders=i,{params:i,url:o}}},ready:function(){var e=this;e.pageIn({title:"优惠接龙-"+e.categories[e.category]})},methods:{load:function(e,t){var i=this;Array.isArray(e)&&e.forEach(function(e){e.is_exchanged=Number(e.is_exchanged),i.joiners.push(e)}),t&&(t.activity&&(i.activity=t.activity),t.settleable&&(i.settleable=t.settleable),t.grouped&&(i.grouped=t.grouped),t.has_settled&&(i.has_settled=t.has_settled),t.total_number&&(i.total_number=t.total_number),t.total_amount&&(i.total_amount=t.total_amount),t.exception_number&&(i.exception_number=t.exception_number))},goCategory:function(e){this.category=e},fail_action:function(e,t){var i=this,o=e.code;if(1100==o)(0,f.showKickedOffline)(e.data.time,e.data.ip,i.showDialog);else if(1101==o)(0,f.showExpireTip)(i.showDialog);else{if(1102==o)return void i.$router.go({name:"signout"});i.$root.$emit("show.snackbar",{color:"accent",message:s.default[o]})}i.hideLoading(),t&&t()},search:function(e){this.keyword=e},alert:function(){var e=this,t="";e.has_settled&&(t="已转入钱包，请在钱包中的收支明细查看。"),e.settleable||(t="活动结束方可转入钱包！"),e.settleable&&!e.total_amount&&(t="没有可转入金额"),e.settleable&&!e.grouped&&(t="该活动接龙失败，诚意金将原路退回给用户，不可转入钱包。"),t.length&&this.showDialog({title:"提示",content:t,confirm:!0})},showActionsheet:function(e){var t=e.target.getAttribute("href")?$(e.target.getAttribute("href")):$($(e.target).parent().attr("href")),i=t.find(".weui_mask_transition");e.preventDefault(),i.show().addClass("weui_fade_toggle"),t.find(".weui_actionsheet").addClass("weui_actionsheet_toggle")},hideActionsheet:function(e,t){var i=$(e.target).closest(".weui_actionsheet_container"),o=i.find(".weui_mask_transition");i.find(".weui_actionsheet").removeClass("weui_actionsheet_toggle"),o.removeClass("weui_fade_toggle"),setTimeout(function(){o.hide(),t&&t()},300)},exchange:function(e){var t=this,i=$(e.target),o=t.joiners[Number("undefined"==typeof e.target.dataset.index?i.parent().data("index"):e.target.dataset.index)],n=o.is_exchanged;t.hideActionsheet(e),this.showDialog({title:n?"确认撤销标记？":"确认标记？",cancel:!0,confirm:function(){return t.showLoading(),$.ajax(a.default.activityExchange,{method:"POST",data:{joiner_id:o.id,token:t.user.token},success:function(e){return e.code?void t.fail_action(e):(t.$root.$emit("show.snackbar",{message:n?"撤销成功":"标记成功"}),void(o.is_exchanged=!n))},complete:function(){t.hideLoading()}}),!0}})},remove:function(e){var t=this,i=$(e.target),o=t.joiners[Number("undefined"==typeof e.target.dataset.index?i.parent().data("index"):e.target.dataset.index)],n=o.activity_id,r=o.mobile,s=t.activity;return t.hideActionsheet(e),s.ended?void this.showDialog({title:"亲，活动已经结束了，无法删除哟！",button:{confirm:"我知道了"},confirm:function(){return!0}}):void this.showDialog({title:"确认删除“"+o.name+"”吗？",content:"删除后，诚意金将原路返回给用户",cancel:!0,confirm:function(){return t.showLoading(),$.ajax(a.default.solitaireRemove+"?token="+t.user.token+"&id="+n+"&mobile="+r,{method:"DELETE",success:function(e){return e.code?void t.fail_action(e):(t.$root.$emit("show.snackbar",{message:"删除成功"}),void(o.status=0))},complete:function(){t.hideLoading()}}),!0}})},modify:function(e){var t=this,i=$(e.target),o=t.joiners[Number("undefined"==typeof e.target.dataset.index?i.parent().data("index"):e.target.dataset.index)],n=(o.id,o.name);t.hideActionsheet(e),this.showDialog({title:"修改报名信息",cancel:!0,button:{confirm:"保存"},content:'<p>姓名：<input type="text"  value="'+n+'" id="dialog_text_name" placeholder="请输入报名者姓名"/></p>',confirm:function(){var e=$("#dialog_text_name"),i=$.trim(e.val());return i.length?(t.showLoading(),$.ajax(""+a.default.activityJoiner,{method:"PUT",data:{joiner_id:o.id,token:t.user.token,name:i},success:function(e){return e.code?void t.fail_action(e):(t.$root.$emit("show.snackbar",{message:"保存成功"}),void(o.name=i))},complete:function(){t.hideLoading()}}),!0):(t.$root.$emit("show.snackbar",{message:"姓名不能为空哟"}),e.focus(),!1)}})},modifyCustomize:function(e){var t=this,i=$(e.target),o=t.joiners[Number("undefined"==typeof e.target.dataset.index?i.parent().data("index"):e.target.dataset.index)],n=(o.id,"undefined"==typeof e.target.dataset.field?i.parent().data("field"):e.target.dataset.field),r=t.activity.customize[n],s=o[n];t.hideActionsheet(e),this.showDialog({title:"修改报名信息",cancel:!0,button:{confirm:"保存"},content:"<p>"+r+'：<input type="text"  value="'+s+'" id="dialog_text_name" placeholder="请输入'+r+'"/></p>',confirm:function(){var e=$("#dialog_text_name"),i=$.trim(e.val());return i.length?(t.showLoading(),$.ajax(""+a.default.solitaireJoinerProfile,{method:"PUT",data:{joiner_id:o.id,token:t.user.token,value:i,field:n},success:function(e){return e.code?void t.fail_action(e):(t.$root.$emit("show.snackbar",{message:r+"修改成功"}),void(o[n]=i))},complete:function(){t.hideLoading()}}),!0):(t.$root.$emit("show.snackbar",{message:r+"不能为空哟"}),e.focus(),!1)}})},refund:function(e){var t=this,i=t.joiners[Number("undefined"==typeof e.target.dataset.index?$target.parent().data("index"):e.target.dataset.index)],o=i.activity_id,n=i.id;return n?void t.showDialog({title:"提示",content:"确定要退款吗？",cancel:!0,confirm:function(){return t.showLoading("正在处理退款中..."),$.post(a.default.solitaireExceptionOrderRefund,{id:o,orderid:n,token:t.user.token}).then(function(i){return t.hideLoading(),i.code?void $("body").tooltip(s.default[i.code],"danger"):($(e.target).parent().parent().fadeOut(),void t.$root.$emit("show.snackbar",{message:"退款成功"}))}),!0}}):void $("body").tooltip("订单不存在","danger")},showNoticeTiper:function(){this.showDialog({title:"异常订单说明",style:{"text-align":"left"},button:{confirm:"我知道了"},content:"<p>①什么是异常订单？答：用户支付成功但未正常加入，无报名记录。</p><p>②该如何处理异常订单？答：点击 “退款” 将诚意金原路退回到用户支付账户，并让用户重新进行报名并付款即可。</p><p>③异常订单里的预付款能提现吗？答：由于异常订单的报名者未能报名成功，因此无法提现。</p>",confirm:!0})}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});({results:Array});t.default={template:"#searchbar",props:{placeholder:{type:String,default:"请输入搜索关键字"},search:{type:Function,default:function(){}}},data:function(){return{focused:!1}},methods:{focus:function(e){this.input=e.target,this.focused=!0},blur:function(){this.input.value||(this.focused=!1)},clear:function(){var e=this;e.input.value="",e.input=null,e.focused=!1,e.search("")},submit:function(e){var t=this;e.preventDefault(),t.search(t.input.value)}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(60),a=o(n),r=i(67),s=o(r),c=i(169),u=o(c),d=i(9);t.default={mixins:[a.default,s.default,u.default],ready:function(){this.treeGrow()},methods:{vote:function(){var e=this;if(!e.personal||e.my.self)return void e.showDialog({title:"提示",content:"需要打开别人报名的页面，才能帮TA种树苗",confirm:!0})},click:function(){var e=this,t=e.my.joinerId,i=e.activity,o=Math.round(Date.now()/1e3);return i?void(i.start_time>o?e.showDialog({title:"提示",content:"活动还未开始",confirm:!0}):i.end_time<o?e.showDialog({title:"提示",content:"活动已结束",confirm:!0}):e.my.self?e.showSharer():e.my.joinerId?e.$router.go({name:"tree-joiner",params:{id:e.activityId,joinerId:e.my.joinerId}}):(0,d.showBeforeJoinTiper)(e.showDialog,function(){setTimeout(function(){e.joining=!0},0)})):void(t?e.$router.go({name:"tree-joiner",params:{id:e.activityId,joinerId:t}}):(0,d.showBeforeJoinTiper)(e.showDialog,function(){setTimeout(function(){e.joining=!0},0)}))}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(170),a=o(n),r=i(12),s=o(r),c=i(10),u=o(c);i(163);var d=$(document.body);t.default={template:"#tree",data:function(){return $.extend({votestat:"",haloing:!1,treeIndex:0,levelCN:["一","二","三","四","五"],pageSwitch:{countdown:!0}},a.default)},computed:{mainheaderstat:function(){var e=this,t=e.participant,i=e.completedJoiners,o="";return t&&(o=i.total?"complete":"joining"),o},discount_level:function e(){var t=this,i=t.participant,o=t.activity.prizes,e=o.discount_level,n=i&&i.prize?String(i.prize.level).split(","):[];return e.forEach(function(e,t){e.has_got=$.inArray(t.toString(),n)>=0}),e},participantPrizeLevel:function(){var e=this,t=e.participant,i=t&&t.prize?String(t.prize.level).split(","):[],o=[];return i.forEach(function(t){o.push(e.levelCN[Number(t)])}),o.join(", ")},winPrizeLevel:function(){var e=this,t=e.participant,i=t&&t.prize?String(t.prize.level).split(","):[],o=[];return i.forEach(function(e,t){o.push("gift"+(t+1))}),o},completedJoiners2CN:function(){var e=this,t=void 0;return e.completedJoiners.total&&e.completedJoiners.list.forEach(function(e){var i=[];t=String("undefined"==typeof e.level?"":e.level).split(","),t.length&&t.forEach(function(e){e.length&&i.push(Number(e)+1)}),e.level2cn=i.length}),e.completedJoiners},joiners2CN:function(){var e=this,t=void 0;return e.joiners.length&&e.joiners.forEach(function(e){var i=[];t=String("undefined"==typeof e.level?"":e.level).split(","),t.length&&t.forEach(function(e){e.length&&i.push(Number(e)+1)}),e.level2cn=i.join(", "),e.has_got=i.length>0}),e.joiners}},beforeDestroy:function(){this.stopCarousel(),this.stopCountdown()},methods:{textillateJoin:function(){setTimeout(function(){$("#tree-join-btn").textillate({loop:!0,in:{effect:"rotateIn",delay:100},out:{effect:"fadeOut",sequence:!0,delay:1}})},2500)},treeGrow:function(){var e=this;setTimeout(function(){var t=e.participant&&e.participant.prize?"24.7%":"9.65%",i=$("#tree-grow"),o=$("#tree-bird");i.css({height:0}).animate({height:t},1e3),o.animate({left:"-20%"},6e3)},1500)},getCoupon:function(e,t){var i=this,o=i.activity,n=Math.round(Date.now()/1e3),a=i.my.joinerId,r=i.activity.prizes.discount_level[t];if(o){if(o.start_time>n)return void this.showDialog({title:"提示",content:"活动未开始",confirm:!0});if(o.end_time<n)return void this.showDialog({title:"提示",content:"活动已结束",confirm:!0})}if(!i.my.self)return void(a?i.showDialog({title:"提示",content:"请返回我的页面中抢礼物",confirm:!0}):i.showDialog({title:"提示",content:"参加后才能抢礼物",confirm:!0}));if(r.percent<=0)return void i.showDialog({title:"提示",content:"该礼物已被抢完，试试其他礼物吧 :)",confirm:!0});if(e){if(i.winPrizeLevel.length>=Number(o.prizes.win_limit))return void i.showDialog({title:"提示",content:"亲，每人只能抢 "+o.prizes.win_limit+" 个礼物呢，你已经抢过了哟 :)",confirm:!0});i.showDialog({title:"提示",content:"每人可抢 "+o.prizes.win_limit+" 个礼物名额，请确认抢此礼物？",cancel:!0,confirm:function(){return i.showLoading("正在火拼中..."),$.ajax(u.default.tree+"/prize",{method:"POST",data:{joiner_id:i.joinerId,level:t},success:function(e){return e.code?void d.tooltip(s.default[e.code],"danger"):void i.showDialog({title:"提示",content:"恭喜抢得【礼物"+i.levelCN[t]+"】 :)",confirm:function(){return window.location.reload(),!0}})},error:function(){d.tooltip("报名失败","danger")},complete:function(){i.hideLoading()}}),!0}})}else i.my.self?i.showDialog({title:"提示",content:"树苗数还不够，赶紧请朋友增加树苗吧",confirm:!0}):a?i.showDialog({title:"提示",content:"请返回我的页面中抢礼物",confirm:!0}):i.showDialog({title:"提示",content:"参加后才能抢礼物",confirm:!0})}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={category:"tree",code:17,name:"种树"}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(10),a=o(n),r=i(12),s=o(r),c=i(60),u=o(c),d=i(67),l=o(d),f=i(169),h=o(f),p=i(9),m=$(document.body);t.default={mixins:[u.default,l.default,h.default],route:{data:function(){var e=this;e.my.self||e.$nextTick(function(){e.vote()}),e.treeGrow()}},data:function(){return{personal:!0}},computed:{completed:function(){},ended:function(){var e=this,t=e.activity;return t.end_time<Math.round(Date.now()/1e3)},haloImg:function(){return"http://cdn.s.shangjiadao.cn/source/images/tree/tree-0"+this.treeIndex+".png"}},methods:{alert:function(){},click:function(){var e=this,t=e.my.joinerId,i=e.activity,o=Math.round(Date.now()/1e3);return i?void(i.start_time>o?e.showDialog({title:"提示",content:"活动还未开始",confirm:!0}):i.end_time<o?e.showDialog({title:"提示",content:"活动已结束",confirm:!0}):e.my.self?e.showSharer():e.my.joinerId?e.$router.go({name:"tree-joiner",params:{id:e.activityId,joinerId:e.my.joinerId}}):(0,p.showBeforeJoinTiper)(e.showDialog,function(){setTimeout(function(){e.joining=!0},0)})):void(e.my.self?e.showSharer():t?e.$router.go({name:"tree-joiner",params:{id:e.activityId,joinerId:t}}):(0,p.showBeforeJoinTiper)(e.showDialog,function(){setTimeout(function(){e.joining=!0},0)}))},vote:function(){var e=this,t=e.joinerId,i=!1,o=0,n=0,r=[];if(e.completed)return void e.alert();if(e.voter&&(e.voter.joiners.forEach(function(a){a.id==t&&(i=!0,e.my.self&&a.next_vote_date&&(o=a.next_vote_date,o<=Date.now()/1e3?i=!1:n=o-Date.now()/1e3))}),i)){if(n){var c=Math.floor(n/3600),u=Math.floor((n-3600*c)/60);c&&r.push(c+" 小时 "),u&&r.push(u+" 分钟")}return r=r.join(""),e.showDialog({title:"提示",content:e.my.self?'<font color="red">'+r+"</font> 后再点哦，朋友也能帮你哦！"+e.getShortTip():"你已经帮TA种过了",confirm:!0}),void(e.my.self&&e.genShorturl())}e.showLoading(),$.ajax(a.default.activityVote,{method:"POST",data:{joiner_id:t,open_id:e.visitor?e.visitor.openId:"wx"+Date.now(),next_vote_date:o},success:function(i){if(i.code)return void m.tooltip(s.default[i.code],"danger");if(i.data){var o=i.data.cutted_price;e.cutted_price=o,e.participant.current_price-=o,e.activity.vote_count++,e.voteIn({joiner:{id:t,next_vote_date:i.data.next_vote_date,expires:1e3*e.activity.end_time}}),e.participant.vote_count++,e.my.self?(e.genShorturl(),e.showDialog({title:"恭喜你",content:'<p><i class="fa fa-smile-o" aria-hidden="true"></i> 成功收集 1 颗树苗</p><p style="font-weight: bold;">如何找人帮忙<i class="fa fa-hand-o-down" aria-hidden="true"></i></p>'+e.getShortTip(),confirm:function(){return!0},button:{confirm:"我知道了"}})):e.showVoteModal()}},complete:function(){e.hideLoading()}})},showVoteModal:function(){var e=this;e.votestat="in",setTimeout(function(){e.votestat="stand"},900)},hideVoteModal:function(){var e=this;setTimeout(function(){e.votestat="hide"},1e3)},showHalo:function(e){var t=this;console.log(e),t.votestat="hide",t.haloing=!0,t.treeIndex=e},hideHalo:function(){var e=this;e.haloing=!1}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=i(72),r=o(a),s=i(10),c=o(s),u=i(12),d=o(u),l=i(73),f=o(l),h=i(74),p=o(h),m=i(76),g=o(m),v=i(62),y=o(v),w=i(75),_=o(w),b=i(77),x=o(b),j=i(63),D=o(j),k=i(78),S=o(k),T=i(170),z=o(T),I=i(51),M=o(I),L=i(52),C=i(9),O=i(26),P=$(document.body);t.default={template:"#tree-editor",components:{Uploader:f.default,Userguide:p.default,Musician:y.default,miniEditor:_.default,miniLogin:x.default,Foreground:D.default,joinCustomize:S.default,Sharer:M.default},vuex:{getters:{user:function(e){return e.user}},actions:{showDialog:O.showDialog,showLoading:O.showLoading,hideLoading:O.hideLoading,pageIn:O.pageIn,toggleSharable:O.toggleSharable}},route:{data:function(e){function t(t){var o=z.default.name,n="制作";t&&(o=t.title,n=i.is_clone?"复制":"编辑"),i.clearActivityAttrs(),i.pageIn({title:"【"+n+"】"+o}),i.$nextTick(function(){i.initPicker()}),e.next({activated:!0})}var i=this,o=i.$route,a=Number(o.params.id)||0;return i.is_clone="clone"==o.query.action,a?(i.showLoading(),void $.ajax(c.default.activity+"/"+a,{data:{token:i.user.token},dataType:"text",success:function(a){if(a=$.parseJSON(a),a.code)return void i.fail(a);if(a.data){var r=a.data.activity;r.user_id!=i.user.id&&e.abort(),"clone"==o.query.action&&(r.id="");var s={},c={};try{s=(0,C.priceFilter)(JSON.parse(r.prizes)),c=(0,C.priceFilter)(JSON.parse(r.prizes))}catch(e){console.log("parse prizes error: "+e.message)}s.images&&s.images.forEach(function(e){e&&i.prize_image.uploader.images.push({suffix:"image/resize,w_640/quality,q_40",url:e})});var u=r.host_info;try{u=r.host_info&&JSON.parse((0,C.jsonFilter)(r.host_info))}catch(e){console.log("parse host_info error: "+e.message)}u.length&&"object"===("undefined"==typeof u?"undefined":n(u))&&(r.host_info=u);var d={};try{d=r.others&&JSON.parse((0,C.jsonFilter)(r.others)),d="object"===("undefined"==typeof d?"undefined":n(d))?$.extend(i.activity.others,d):i.activity.others}catch(e){console.log("parse others error: "+e.message)}r.prizes=s,i.copy_prizes=c,r.others=d,i.activity=r,i.statistics=a.data.statistics,t(r)}},error:function(){P.tooltip("活动加载失败","danger")},complete:function(){i.hideLoading();
}})):void t()}},data:function(){var e=this,t=new Date,i=t.getFullYear(),o=t.getMonth(),n=t.getDate(),a=new Date(i,o,n),r=new Date(i,o,n+5);return{activated:!1,expired:!1,activity:{id:"",type:z.default.code,title:"乐高邀你来种树，树苗换好礼咯",start_time:a.valueOf()/1e3,end_time:r.valueOf()/1e3,prizes:{discount_level:[{text:"",discount:0,original_price:100,market_price:9.9,help_value:5,left_stock:500}],info:"礼物一：乐高学费抵扣券\n原价100  现价9.9元\n礼物二：乐高免费课时2节\n大家快来种树抢礼物哦。",images:[],receive_prize_mobile:""+e.user.mobile,vote_hours:2,win_limit:1},rules:"1.点击上方按钮“我要种树”参加活动。\n2.报名者自己每 2 小时可以【我要种树】增加1棵树苗。\n3.别人可以帮忙增加树苗。\n4.每次抢礼物会消耗树苗数量，不要选错哦。\n5.每人仅可抢1个礼物哦（数量根据设置自己修改）。\n6.完成后，马上联系商家兑奖吧。\n",receive_info:"兑奖时间：\n机构地址：\n联系电话："+e.user.mobile,host_info:"",others:{musician:"",foreground:{type:"",direction:""},section_text:{receive_info:"兑奖信息",intro:"机构介绍"},join_customize:{customize_1:{name:"",required:0},customize_2:{name:"",required:0},customize_3:{name:"",required:0}}}},intro:{uploaded:!1,minieditor:{uploader:{maxlength:10,placeholder:"（点击选择图片，不上传则不显示）",description:"添加图片（最多添加 10 张图片）",error:function(){e.submitting=!1,$("body").tooltip("机构介绍图片上传失败","danger")},success:function(t){e.activity.host_info=t,e.intro.uploaded=!0,e.publish()}},texter:{placeholder:"此处可修改字体样式：加粗、斜体、下划线、字体大小颜色...",description:"添加文本（最多添加 10 个文本内容）",maxlength:10},video:{placeholder:"请输入视频地址【支持优酷、腾讯视频】",description:"添加视频（最多添加 5 个视频）",maxlength:5}}},prize_image:{uploaded:!1,uploader:{error:function(){e.submitting=!1,P.tooltip("奖品图片上传失败","danger")},images:[],success:function(t){e.activity.prizes.images=t,e.prize_image.uploaded=!0,e.publish()}}},others:{musician:{callback:function(t){e.activity.others.musician=t}},foreground:{callback:function(t){e.activity.others.foreground=t}},join_customize:{callback:function(t){e.activity.others.join_customize=t}}},copy_prizes:null,editable:!0,statistics:null,is_clone:!1,submitting:!1,sharer:null}},computed:{locked:function(){var e=this,t=e.statistics;return e.activity.id>0&&t&&t.join_count>0&&!e.is_clone}},ready:function(){var e=this;e.is_clone&&(0,C.showCloneTiper)(e.showDialog),setTimeout(function(){(0,g.default)($("textarea",e.$el).not(".nosize"))},1e3)},beforeDestroy:function(){var e=this;e.startDatePicker&&e.startDatePicker.destroy(),e.endDatePicker&&e.endDatePicker.destroy()},methods:{clearActivityAttrs:function(){var e=this;e.is_clone&&e.activity.prizes.discount_level&&e.activity.prizes.discount_level.forEach(function(e){e.used_stock&&delete e.used_stock,e.winning_ids&&delete e.winning_ids,e.discount_price&&delete e.discount_price,e.true_left_stock&&delete e.true_left_stock,e.percent&&delete e.percent})},addCoupon:function(){this.activity.prizes.discount_level.push({text:"",discount:0,original_price:100,market_price:9.9,help_value:5,left_stock:500})},deleteCoupon:function(e){var t=this;t.activity.prizes.discount_level.splice(e,1)},initPicker:function(){var e=this,t=$(e.$el),i=t.find(".start-date"),o=t.find(".end-date"),n={format:"YYYY-MM-DD HH:mm",increment:{minute:10},text:{cancel:"取消",confirm:"确认"},translate:function(e,t){var i={year:"年",month:"月",day:"日",hour:"点",minute:"分"};return Number(t)+i[e]}},a=$.extend(!0,{},n,{text:{title:"请选择活动开始时间"}}),s=$.extend(!0,{},n,{text:{title:"请选择活动结束时间"}}),c=new r.default(i[0],a),u=new r.default(o[0],s);e.startDatePicker=c,e.endDatePicker=u,i.on("change",function(){var t=c.getDate();e.activity.start_time=Math.round(t.getTime()/1e3),e.activity.end_time<=e.activity.start_time&&(t.setDate(t.getDate()+1),e.activity.end_time=Math.round(t.getTime()/1e3),e.$nextTick(function(){return u.update()}))}),o.on("change",function(t){var i=Math.round(u.getDate().getTime()/1e3);return i<=e.activity.start_time?void t.preventDefault():void(e.activity.end_time=i)})},toggle:function(){var e=this;e.editable=!e.editable,document.body.scrollTop=0,setTimeout(function(){(0,g.default)($("textarea",e.$el).not(".nosize"))},1e3)},fail:function(e,t){var i=this,o=e.code;1100==o?(0,C.showKickedOffline)(e.data.time,e.data.ip,i.showDialog,function(){i.expired=!0}):1101==o?(0,C.showExpireTip)(i.showDialog):1102==o?i.expired=!0:i.$root.$emit("show.snackbar",{color:"accent",message:d.default[o]}),i.hideLoading(),t&&t()},submit:function(e){var t=this,i=t.activity,o=(0,L.match)(JSON.stringify(i));if(e.preventDefault(),!i.title)return void t.showDialog({title:"提示",content:"请设置活动标题",confirm:!0});if(i.title.length>25)return void t.showDialog({title:"提示",content:"活动标题最多 25 字",confirm:!0});if(!i.prizes.vote_hours||i.prizes.vote_hours>24||i.prizes.vote_hours<1)return void t.showDialog({title:"提示",content:"每次投票时间间隔必须在1~24小时之间，请检查",confirm:!0});if(i.prizes.win_limit>i.prizes.discount_level.length)return void t.showDialog({title:"提示",content:"每个用户最多可抢礼物数不能超过礼物档数",confirm:!0});if(t.copy_prizes&&t.statistics&&t.statistics.join_count&&!t.is_clone&&i.prizes.vote_hours>t.copy_prizes.vote_hours)return void t.showDialog({title:"提示",content:"【温馨提示】为了保证活动公平性，活动期间，报名者投票时间间隔只减不增",confirm:!0});var n=!1,a=!1,r=!1,s=!1,u=!1,d=!1,l=["一","二","三","四","五"];if($.each(i.prizes.discount_level,function(e,i){var o=$.trim(i.text),c=i.original_price,f=i.market_price,h=i.help_value,p=i.left_stock,m=l[e];if(!o)return t.showDialog({title:"提示",content:"[礼物"+m+"] 请设置礼物名称",confirm:!0}),void(n=!0);if(c<=0)return t.showDialog({title:"提示",content:"[礼物"+m+"] 原价必须大于0",confirm:!0}),void(a=!0);if(f<0)return t.showDialog({title:"提示",content:"[礼物"+m+"] 现价必须 >= 0",confirm:!0}),void(r=!0);if(f>=c)return t.showDialog({title:"提示",content:"[礼物"+m+"] 现价必须小于原价",confirm:!0}),void(r=!0);if(h>99999)return t.showDialog({title:"提示",content:"[礼物"+m+"]树苗数 不能大于99999",confirm:!0}),void(s=!0);if(h<1)return t.showDialog({title:"提示",content:"[礼物"+m+"]树苗数 不能小于1",confirm:!0}),void(s=!0);if(p>99999)return t.showDialog({title:"提示",content:"[礼物"+m+"]份数 不能大于9999",confirm:!0}),void(u=!0);if(p<1)return t.showDialog({title:"提示",content:"[礼物"+m+"]份数 不能小于1",confirm:!0}),void(u=!0);if(p>1e3&&(d=!0),t.copy_prizes&&t.statistics&&t.statistics.join_count&&!t.is_clone){var g=(t.copy_prizes.discount_level[e].original_price,t.copy_prizes.discount_level[e].market_price,t.copy_prizes.discount_level[e].help_value),v=t.copy_prizes.discount_level[e].left_stock;if(h>g)return t.$root.$emit("show.snackbar",{color:"active",message:"【温馨提示】为了保证活动公平性，活动期间，树苗数只减不增"}),t.showDialog({title:"提示",content:"[礼物"+m+"]树苗数不能大于"+g,confirm:!0}),void(u=!0);if(p<v)return t.$root.$emit("show.snackbar",{color:"active",message:"【温馨提示】为了保证活动公平性，活动期间，奖品余量只增不减"}),t.showDialog({title:"提示",content:"[礼物"+m+"]数量不能小于"+v,confirm:!0}),void(u=!0)}i.discount=c<=0?0:(f/c).toFixed(4)}),!(n||a||r||s||u)){if(!i.prizes.info)return void t.showDialog({title:"提示",content:"请输入礼物描述",confirm:!0});if(!i.receive_info)return void t.showDialog({title:"提示",content:"请设置兑奖信息",confirm:!0});if(!i.prizes.receive_prize_mobile)return void t.showDialog({title:"提示",content:"请设置咨询电话",confirm:!0});var f=!1,h=2;if($.each(i.others.join_customize,function(e,i){if(h++,i.required&&""==$.trim(i.name))return t.showDialog({title:"提示",content:"【信息收集设置】第 "+h+" 个信息项由于设置为必填项，因此名称不能为空！",confirm:!0}),void(f=!0)}),!f)return o.length?void t.showDialog({title:"提示",content:"发现微信违规词："+o.join("、")+"，请修改后再发布！",confirm:!0}):void(d&&!window.confirm("您的礼物中奖品份数有包含大于1000的数量，是否继续保存?")||t.submitting||(t.submitting=!0,t.showLoading("正在提交数据..."),$.ajax(c.default.uploadSignature,{method:"get",data:{token:t.user.token,type:2},dataType:"json",success:function(e){return e.code?(t.submitting=!1,t.hideLoading(),void t.fail(e)):(t.showLoading("正在上传图片，请勿离开或关闭页面"),void(e.data&&t.$root.$emit("upload.uploader",e.data)))},error:function(){t.submitting=!1,t.hideLoading(),t.$root.$emit("show.snackbar",{color:"accent",message:"保存失败，请检查网络是否正常连接！"})}})))}},publish:function(){var e=this;if(e.prize_image.uploaded&&e.intro.uploaded&&!e.publishing){e.sharer=null,e.publishing=!0,e.showLoading("正在提交数据，请勿离开或关闭页面");var t=(0,C.expressionFilter)($.extend(!0,{},e.activity));$.ajax(c.default.activity,{method:t.id?"put":"post",data:$.extend(t,{prizes:JSON.stringify((0,C.priceFilter)(t.prizes,{reversed:!0})),others:JSON.stringify(t.others),token:e.user.token}),success:function(i){return i.code?void e.fail(i):void P.one("hidden.tooltip",function(){e.sharer={autoShare:!1,autoShow:!0,data:$.extend(t,{category:z.default.category,id:t.id||i.data.id}),desc:t.share_content,imgUrl:t.share_img,title:t.share_title}}).tooltip("show",{content:"活动保存成功",style:"success",duration:1e3})},error:function(){P.tooltip("活动发布失败","danger")},complete:function(){e.submitting=!1,e.publishing=!1,e.hideLoading()}})}}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(60),a=o(n),r=i(67),s=o(r),c=i(174),u=o(c),d=i(9);t.default={mixins:[a.default,s.default,u.default],ready:function(){this.smile()},methods:{click:function(){var e=this,t=e.my.joinerId;t?e.$router.go({name:"earth-joiner",params:{id:e.activityId,joinerId:t}}):(0,d.showBeforeJoinTiper)(e.showDialog,function(){e.visible=!0,setTimeout(function(){e.joining=!0},0)})}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(175),a=o(n);i(163),t.default={template:"#earth",data:function(){return $.extend({active:!1,personal:!1,visible:!1,votestat:"",haloing:!1,eIndex:0,pageSwitch:{countdown:!0}},a.default)},methods:{smile:function(){setTimeout(function(){var e=$("#earth-smile");setInterval(function(){return e.hasClass("smile2")?e.hasClass("smile3")?void e.removeClass("smile2 smile3"):void e.addClass("smile3"):void e.addClass("smile2")},800)},1500)},textillateJoin:function(){setTimeout(function(){$("#earth-join-btn").find("a").textillate({loop:!0,in:{effect:"rotateIn",delay:100},out:{effect:"fadeOut",sequence:!0,delay:1}})},2500)}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={category:"earth",code:18,name:"关爱地球"}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(61),a=o(n),r=i(12),s=o(r),c=i(60),u=o(c),d=i(67),l=o(d),f=i(174),h=o(f),p=i(9);t.default={mixins:[u.default,l.default,h.default],route:{data:function(){var e=this;e.my.self||e.$nextTick(function(){e.showVoteModal()}),this.smile()}},data:function(){return{personal:!0}},computed:{earth:function(){var e=this,t=e.activity,i=t?e.participant.vote_count/t.prizes.limit:1,o=Math.max(1,isNaN(i)?1:Math.floor(8*i));return"earth-"+o},required:function(){var e=this,t=e.activity;return t?Math.max(0,t.prizes.limit-e.participant.vote_count):0},completed:function(){return!this.required},ended:function(){var e=this,t=e.activity;return t.end_time<Math.round(Date.now()/1e3)},haloImg:function(){return"http://cdn.s.shangjiadao.cn/source/images/earth/e-"+this.eIndex+".png"},haloImgClass:function(){return"img"+(this.eIndex+1)},haloNote:function(){return["每种一棵树,一年可以吸收5到10公斤的碳排放量。","我国人均淡水资源只有世界水平的四分之一。","拔掉待机电器的插头，两天就能节约1度电。","每年死于被动吸烟的人数超过10万。","二氧化碳的排出，导致全球气温升高。","步行10公里比驾车减少0.8千克碳排放，绿色出行，环保健康。","噪声不但会对听力造成损伤，还能诱发多种致癌致命的疾病。","一节一号电池烂在地里，能使一平方米的土地失去利用价值。","垃圾是现在地球上唯一在增大的资源，也是放错了地方的资源。"][this.eIndex]},vTypes:function(){return["植树","节水","节电","禁烟","低碳","步行","轻声","回收","卫生"]}},methods:{alert:function(){var e=this;e.completed&&e.showDialog({title:"提示",content:e.my.self?"已完成，可以兑奖咯（商家联系方式可在活动页面上查找）":"TA已完成集关爱值任务",confirm:!0})},click:function(){var e=this,t=e.my.joinerId;e.my.self?e.completed?e.alert():e.showSharer():t?e.$router.go({name:"earth-joiner",params:{id:e.activityId,joinerId:t}}):(0,p.showBeforeJoinTiper)(e.showDialog,function(){e.visible=!0,setTimeout(function(){e.joining=!0},0)})},vote:function(e){var t=this,i=t.joinerId,o=(t.my.self?"":"帮TA",!1),n=0,r=0,c=[];if(t.completed)return t.alert(),!1;if(t.voter&&(t.voter.joiners.forEach(function(e){e.id==i&&(o=!0,t.my.self&&e.next_vote_date&&(n=e.next_vote_date,n<=Date.now()/1e3?o=!1:r=n-Date.now()/1e3))}),o)){if(r){var u=Math.floor(r/3600),d=Math.floor((r-3600*u)/60);u&&c.push(u+" 小时 "),d&&c.push(d+" 分钟")}return c=c.join(""),t.showDialog({title:"提示",content:t.my.self?'<font color="red">'+c+"</font> 后再点哦，朋友也能帮你哦！"+t.getShortTip():"你已经帮TA集过了",confirm:!0}),t.my.self&&t.genShorturl(),!1}return e===!0||(t.showLoading(),void $.post(a.default.activity.vote,{joiner_id:i,open_id:t.visitor?t.visitor.openId:"wx"+Date.now(),next_vote_date:n}).then(function(e){return t.hideLoading(),e.code?void $("body").tooltip(s.default[e.code],"danger"):(t.voteIn({joiner:{id:i,next_vote_date:e.data.next_vote_date,expires:1e3*t.activity.end_time}}),t.active=!0,void setTimeout(function(){t.participant.vote_count++,t.votestat="hide",t.my.self?(t.genShorturl(),t.showDialog({title:"恭喜你",content:'<p><i class="fa fa-smile-o" aria-hidden="true"></i> 成功增加了一点关爱值</p><p style="font-weight: bold;">如何找人帮忙<i class="fa fa-hand-o-down" aria-hidden="true"></i></p>'+t.getShortTip(),confirm:function(){return!0},button:{confirm:"我知道了"}})):t.haloing=!0},200))}))},showVoteModal:function(){var e=this;e.vote(!0)&&(e.votestat="in",setTimeout(function(){e.votestat="stand"},900))},showHalo:function(e){var t=this;t.eIndex=e,t.vote()},hideHalo:function(){var e=this;e.haloing=!1}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(52),a=i(123),r=o(a),s=i(175),c=o(s);t.default={template:"#earth-editor",mixins:[r.default],data:function(){var e=this,t=new Date,i=t.getFullYear(),o=t.getMonth(),n=t.getDate(),a=new Date(i,o,n),r=new Date(i,o,n+5);return $.extend({activity:{id:0,type:c.default.code,title:"关爱地球赢好礼，胜利跆拳道只要88元",start_time:a.valueOf()/1e3,end_time:r.valueOf()/1e3,rules:"1.点击上方按钮“我要参加”参加活动。\n\n2.报名者自己每2小时可以点击【我要关爱地球】增加1个关爱值。\n\n3.别人可以帮忙增加关爱值。\n\n4.奖品份数有限，达标就会减少一份，份数领完则无法继续报名，亲速度哦！\n\n5.完成后，马上联系商家兑奖吧。\n\n",prizes:{count:100,image:"",limit:30,desc:"跆拳道春季班，原价980元，达到68关爱值只需88元\n每周2次课，每班人数不超过30人\n",vote_hours:2,text:"88元学习入门班跆拳道课程",receive_prize_mobile:""+e.user.mobile},receive_info:"领奖时间：\n领奖地址：\n领奖电话："+e.user.mobile,host_info:"",host_img:[],others:{musician:"",foreground:{type:"",direction:""},section_text:{receive_info:"领奖信息",intro:"机构介绍"},join_customize:{customize_1:{name:"",required:0},customize_2:{name:"",required:0},customize_3:{name:"",required:0}}}}},c.default)},methods:{isValid:function(){var e=this,t=e.activity,i=(0,n.match)(JSON.stringify(t)),o="",a=!1;t.title?!t.prizes.vote_hours||t.prizes.vote_hours>24||t.prizes.vote_hours<1?o="每次投票时间间隔必须在1~24小时之间，请检查":e.clone_activity&&e.statistics&&e.statistics.join_count&&!e.is_clone&&t.prizes.vote_hours>e.clone_activity.prizes.vote_hours?o="【温馨提示】为了保证活动公平性，活动期间，报名者投票时间间隔只减不增":t.prizes.count?e.locked&&e.activity.prizes.count<e.clone_activity.prizes.count?o="已有用户报名，因此奖品数量必须大于原值【"+e.clone_activity.prizes.count+"】":t.prizes.limit?t.prizes.text?t.receive_info?t.prizes.desc?t.prizes.receive_prize_mobile?i.length?o="发现微信违规词："+i.join("、")+"，请修改后再发布！":a=!0:o="请设置咨询热线电话":o="请设置奖品描述":o="请设置领奖信息":o="请输入奖品描述":o="请输入关爱值数量":o="请输入奖品份数":o="请设置活动标题";var r=!1,s=2;return $.each(t.others.join_customize,function(e,t){if(s++,t.required&&""==$.trim(t.name))return o="【信息收集设置】第 "+s+" 个信息项由于设置为必填项，因此名称不能为空！",void(r=!0)}),r&&(a=!1),t.prizes.count>1e3&&!window.confirm("哇，土豪，您的奖品份数超过 1000 了，是否继续保存?")&&(a=!1),a||o&&e.showDialog({title:"提示",content:o,confirm:!0}),a}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(179),a=o(n),r=i(10),s=o(r),c=i(12),u=o(c),d=i(9),l=document;window.location;t.default={mixins:[a.default],computed:{newWinnings:function(){var e=this,t=e.lastestWinning,i=e.activity.prizes.levels,o=[];return t.forEach(function(e){var t=Number(e.prize_level);e.level_name=i[t].name,e.prize_img=i[t].img,o.push(e)}),o},myinfo:function(){var e=this,t=e.myLottery,i=e.activity.prizes,o=Number(i.per_max_winning_num)||0,n=Number(i.per_day_max_lottery_num)||0,a=o-t.lottery_record.winning_count,r=n-t.lottery_record.lottery_count;return{name:t.joiner.name,mobile:t.joiner.mobile,winning_count:t.lottery_record.winning_count,left_winning_count:o?(a<0?0:a)+" 个":"不限个数",left_lottery_count:n?(r<0?0:r)+" 次":"不限次数"}},wheelRunnerStyle:function(){var e=this,t=Number(e.lottery.winning_level),i=e.activity.prizes,o=7200;return"done"==e.lottery.stat&&t>0&&(console.log("got prize"),o+=360-360/i.levels.length*t,console.log("plus rotate="+o)),o="rotate("+o+"deg)",""!=e.lottery.stat&&(e.lottery.runnerBox||(e.lottery.runnerBox=l.getElementById("lottery-wheel-runner")),setTimeout(function(){var i=e.lottery.runnerBox;console.log(e.lottery.stat),console.log(t);var n="done"==e.lottery.stat&&t>0?8:e.lottery.duration,a="done"==e.lottery.stat&&t>0?"ease-out":"ease-in-out";i.style.MozTransition="all "+n+"s "+a,i.style.webkitTransition="all "+n+"s "+a,i.style.OTransition="all "+n+"s "+a,i.style.transition="all "+n+"s "+a,setTimeout(function(){""==e.lottery.wheelStat&&(e.lottery.wheelStat="doing"),i.style.MozTransform=""+o,i.style.webkitTransform=""+o,i.style.OTransform=""+o,i.style.transform=""+o},1e3)},10)),""}},ready:function(){var e=this;e.wheelLightChange()},methods:{click:function(){var e=this,t=(e.my.joinerId,e.activity),i=Math.round(Date.now()/1e3);if(t)return void(t.start_time>i?e.showDialog({title:"提示",content:"活动还未开始",confirm:!0}):t.end_time<i?e.showDialog({title:"提示",content:"活动已结束",confirm:!0}):e.my.self?e.showSharer():(0,d.showBeforeJoinTiper)(e.showDialog,function(){setTimeout(function(){e.joining=!0},0)}))},winningScroller:function(){var e=$("#winning-scroller"),t=e.width(),i=(e.height(),e.find("span")),o=i.length,n=8;if(i.length){var a=function(){var e=0,o=0;i.each(function(i,n){var a=$(this),r=224,s=t-r,c=i%2==0?0:i%3==0?36:20,u=i%2==0?6e3:8e3;i%2==0?(u+=2e3*e,e++):(u+=2500*o,o++),s=t+Math.ceil(50*Math.random())*i,a.css({left:s+"px",top:c+"px"}).stop().animate({left:"-"+r+"px"},u,function(){})})};setInterval(function(){a()},11e3-.85*(n-o)*1e3),a()}},wheelLightChange:function(){setTimeout(function(){var e=$("#lottery-banner-wheel");setInterval(function(){return e.hasClass("lighter")?void e.removeClass("lighter"):void e.addClass("lighter")},400)},1500)},toggleTabs:function(e){var t=this;t.rightTabSelected=e},showExchange:function(e){var t=this,i=t.exchange;t.exchange.visible=!0,t.exchange.curIndex=e,i.pwd="",$("#modal-exchange-password").focus()},hideExchange:function(){this.exchange.visible=!1},goExchange:function(){var e=this,t=e.exchange,i=e.myLottery.winning[t.curIndex],o=t.pwd;if(!t.submitting){if("1"==i.is_exchanged)return void e.showDialog({title:"温馨提示",content:"该中奖记录已兑奖",confirm:function(){return!0}});if(6!=o.length)return void e.$root.$emit("show.snackbar",{color:"accent",message:"请输入正确的密码"});e.exchange.submitting=!0,$.ajax(s.default.lottery+"/pwdexchange",{method:"put",data:{id:i.id,password:o},dataType:"text",success:function(i){i=$.parseJSON(i);var o=i.code;return o?void e.$root.$emit("show.snackbar",{color:"accent",message:u.default[o]}):(e.myLottery.winning[t.curIndex].is_exchanged=1,e.exchange.visible=!1,void e.$root.$emit("show.snackbar",{color:"active",message:"兑奖成功"}))},error:function(){e.$root.$emit("show.snackbar",{color:"accent",message:"兑奖失败"})},complete:function(){e.exchange.submitting=!1}})}},startLottery:function(){var e=this,t=e.activity,i=(e.joiner,e.my.self),o=e.myLottery,n=o?o.lottery_record||{}:{},a=e.activity.prizes,r=(Number(a.per_max_winning_num)||0,Number(a.per_day_max_lottery_num)||0),c=n.lottery_count||0,d=(n.winning_count||0,r-c),l=Math.round(Date.now()/1e3),f=n.next_lottery_time?Number(n.next_lottery_time):0,h=[],p=0,m=0;if(!i)return void e.click();if(t){if(t.start_time>l)return void e.showDialog({title:"提示",content:"活动还未开始",confirm:!0});if(t.end_time<l)return void e.showDialog({title:"提示",content:"活动已结束",confirm:!0})}if("doing"!=e.lottery.wheelStat){if(r>0&&d<=0)return void e.showDialog({title:"温馨提示",content:"今日抽奖次数已用完，明天再来哦。",confirm:function(){return!0}});if(p=f-Date.now()/1e3,f>0&&p>0){var g=Math.floor(p/3600),v=Math.floor((p-3600*g)/60);return g&&h.push(g+" 小时 "),v&&h.push(v+" 分钟"),h=h.join(""),void e.showDialog({title:"温馨提示",content:'还需<font color="red">'+h+"</font> 后才能抽奖哦，今日还能抽 "+d+" 次。",confirm:function(){return!0}})}$("#lottery-wheel-runner").attr("style","").get(0).addEventListener("transitionend",function(){console.log("transitionend"),console.log(e.lottery.stat),"done"==e.lottery.stat&&setTimeout(function(){e.lottery.wheelStat="finished"},(e.lottery.winning_level>0,0))},!1),e.lottery.duration=0,e.lottery.wheelStat="",e.lottery.hiddenWinningDialog=!1,e.lottery.durationTimer=setInterval(function(){return"done"==e.lottery.stat?void clearInterval(e.lottery.durationTimer):void e.lottery.duration++},1e3),m=Math.ceil(10*Math.random()),e.lottery.duration+=12,e.lottery.stat="doing",setTimeout(function(){$.ajax(""+s.default.lottery,{method:"post",data:{joiner_id:e.my.joinerId,open_id:e.visitor?e.visitor.openId:"wx"+Date.now()},dataType:"text",success:function(t){t=$.parseJSON(t);var i=t.code;return i?(lottery.stat="error",void e.$root.$emit("show.snackbar",{color:"accent",message:u.default[i]})):(console.log("callbacked"),e.lottery.winning_level=t.data.level,e.myLottery=t.data.joiner,void(e.lottery.stat="done"))},error:function(t,i,o){console.log("lottery error:"+t+i+o),e.lottery.stat="done"},complete:function(){}})},1e3*m)}},closeWinningDialog:function(){var e=this;e.lottery.hidingWinningDialog=!0,setTimeout(function(){e.lottery.hidingWinningDialog=!1,e.lottery.hiddenWinningDialog=!0},900)}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(180),a=o(n),r=i(10),s=o(r),c=i(12),u=o(c),d=i(40),l=o(d),f=i(51),h=o(f),p=i(45),m=o(p),g=i(62),v=o(g),y=i(63),w=o(y),_=i(64),b=o(_),x=i(65),j=i(9),D=i(26),k=i(52),S=$(document.body),T=window.location;t.default={template:"#lottery",components:{Message:l.default,Sharer:h.default,WaterfallFlowLoader:m.default,Musician:v.default,Foreground:w.default,Imager:b.default},vuex:{getters:{user:function(e){return e.user},joiner:function(e){return e.joiner},reminded:function(e){return e.reminded},sharable:function(e){return e.sharable},visitor:function(e){return e.visitor}},actions:{showDialog:D.showDialog,showLoading:D.showLoading,hideLoading:D.hideLoading,joinIn:D.joinIn,joinOut:D.joinOut,pageIn:D.pageIn,toggleReminder:D.toggleReminder,toggleSharable:D.toggleSharable}},data:function(){return $.extend({activityMobile:null,activity:null,activityId:0,hasDown:!1,hasActivity:!0,hasCompleted:!1,carousel:null,joinerId:0,joiners:[],joining:!1,loader:null,newJoiner:{name:"",mobile:""},joinCustomize:{},joinFields:["name","mobile"],joinFieldNames:["姓名","手机号码"],sharer:null,statistics:null,visible:!1,myLottery:{},lastestWinning:[],rightTabSelected:!1,lottery:{stat:"",wheelStat:"",duration:0,durationTimer:null,runnerBox:"",winning_level:0,hidingWinningDialog:!1,hiddenWinningDialog:!1},exchange:{visible:!1,curIndex:0,submitting:!1,pwd:""}},a.default)},route:{data:function e(t){var i=this,o=t.to,n=Number(o.params.id)||0,r=i.my.self,c=r?s.default.lottery+"/joiner/":s.default.lottery+"/"+n,e={};r&&(e={activity_id:n,joiner_id:i.my.joinerId}),i.activity=null,i.loader=null,i.sharer=null,i.showLoading(),$.ajax({url:c,dataType:"text",data:e,success:function(e){if(e=$.parseJSON(e),e.data&&e.data.mobile&&(i.activityMobile=e.data.mobile),e.code)return"1005"==e.code?(T.href="/403.html",void t.abort()):"1217"==e.code?void(i.hasActivity=!1):"1252"==e.code?(r&&(i.joinOut(i.my.joinerId),i.showDialog({title:"重要提示",button:{confirm:"我知道了"},style:"text-align: left;",content:"您已被活动主办方取消名额，如有疑问，请联系主办方！",confirm:function(){return indow.location.reload(),!0}})),void window.location.reload()):void S.tooltip(u.default[e.code],"danger");if(e.data){var o=e.data.activity||e.data,c=e.data.statistics,d=i.sharable;if(o.type!=a.default.code)return void(i.hasActivity=!1);!(0,x.matchCases)(o.user_id)&&o.completed_delay_days>=10&&(i.hasCompleted=!0),d&&i.toggleSharable(),i.pageIn({title:o.title,description:o.rules});var l={};try{l=JSON.parse(o.prizes)}catch(e){console.log(e.message)}var f={};try{f=o.others&&JSON.parse((0,j.jsonFilter)(o.others))}catch(e){console.log("parse others error: "+e.message)}var h={},p={};if(f.join_customize){var m=void 0,g=void 0;for(m in f.join_customize)g=f.join_customize[m],""!=g.name&&(g.placeholder="请输入"+g.name,p[m]="",h[m]=g)}i.$nextTick(function(){i.startCountdown(),i.winningScroller()}),t.next({activity:$.extend({},o,{prizes:l,others:f}),activityId:n,myLottery:e.data.joiner||null,lastestWinning:e.data.winning||null,joinerId:i.my.joinerId,joiners:[],newJoiner:$.extend({},i.newJoiner,p),joinCustomize:$.extend({},i.joinCustomize,h),loader:{url:s.default.lottery+"/winning",params:{activity_id:n}},sharer:{autoShare:!d,autoShow:d,data:$.extend({category:a.default.category},o),desc:o.share_content,imgUrl:o.share_img,link:window.location.href,title:o.share_title},statistics:c})}},error:function(){S.tooltip("活动加载失败","danger")},complete:function(){setTimeout(function(){$("div.about").find("img").scrollLoading()},100),i.bindQrcodeAnimate(),i.hideLoading()}})}},computed:{my:function(){var e=this,t=e.activityId||Number(e.$route.params.id)||0,i=0,o=!1;return e.joiner&&e.joiner.activities.forEach(function(e){e.id==t&&(o=!0,i=e.joinerId)}),{joinerId:i,self:o}},countdown:function(){var e=this,t=e.activity,i=Date.now(),o=1e3*t.start_time,n=1e3*t.end_time,a=o<=i;return{time:a?n:o,text:a?"结束":"开始"}},hostinfo:function(){var e=this,t=e.activity.host_info;try{t=JSON.parse(t)}catch(e){console.log("parse host_info error: "+e.message)}return t},tellink:function(){return"tel://"+this.activityMobile},parseLevels:function(){var e=this,t=e.activity.prizes.levels,i=["一","二","三","四","五","六"],o=[],n=t.length,a=1/n;return t.forEach(function(e,t){o.push({level_str:i[t],recover_img:"http://cdn.s.shangjiadao.cn/source/images/lottery/p"+(t+1)+".png",style:"-webkit-transform:rotate("+t*a+"turn);transform:rotate("+t*a+"turn);",wheelStyle:"-webkit-transform:rotate("+(t*a+a/2)+"turn);transform:rotate("+(t*a+a/2)+"turn);"})}),{levels:t,newLevels:o}},wheelBoxStyle:function(){var e=document.body.clientWidth;return e=e>640?640:e,{left:(e-300)/2+"px",top:320==e?"0":"5.5%"}}},beforeDestroy:function(){this.stopCountdown()},methods:{load:function(e){var t=this;Array.isArray(e)&&e.forEach(function(e){return t.joiners.push(e)})},join:function(e){var t=this,i=t.newJoiner,o=i.name,n=(i.mobile,(0,k.matchJoin)(JSON.stringify({name:o}))),a=t.joinCustomize,r=void 0,c=!0;if(e.preventDefault(),n.length)return void(0,j.showJoinNotice)(t.showDialog);for(r in t.newJoiner)if(a[r]&&a[r].required&&""==$.trim(t.newJoiner[r])){S.tooltip(a[r].name+"不能为空","danger"),c=!1;break}return!!c&&(t.showLoading(),void $.post(s.default.lottery+"/join/",$.extend({},t.newJoiner,{activity_id:t.activityId})).then(function(e){var i=e.data?e.data.joiner_id:"";if(t.hideLoading(),e.code){var o=e.data?e.data.joiner:null;return o&&o.joiner_id&&(t.joined(o.joiner_id),t.myLottery=o),void t.$root.$emit("show.snackbar",{color:"accent",message:u.default[e.code]})}i&&(t.joined(i),t.showDialog({title:"报名成功",content:"点击“确定”即可去抽奖",confirm:function(){return window.location.reload(),!0}}))}))},joined:function(e){var t=this,i=t.newJoiner,o=i.name,n=i.mobile;t.joining=!1,setTimeout(function(){t.visible=!1},500),t.joinIn({activity:{id:t.activityId,joinerId:e,expires:1e3*t.activity.end_time},mobile:n,name:o})},close:function(e){var t=this;t[e]=!1,setTimeout(function(){t.visible=!1},500)},showSharer:function(){this.$refs.sharer.show()},startCountdown:function(){var e=this;e.stopCountdown(),e.$countdown=$(e.$els.countdown).countdown()},stopCountdown:function(){var e=this;e.$countdown&&(e.$countdown.countdown("destroy"),e.$countdown=null)},showqrcode:function(){var e=this;(0,j.displayShareQrcode)({type:a.default.category,name:"",title:e.activity.title,activityId:e.activity.id,joinerId:e.joinerId||0},e.showDialog,e.showLoading,e.hideLoading)},bindQrcodeAnimate:function(){setTimeout(function(){var e=$("header").find("a.qrcode");e.length&&setInterval(function(){e.addClass("ani"),setTimeout(function(){e.removeClass("ani")},2e3)},6e3)},500)}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={category:"lottery",code:19,name:"幸运大转盘",music:{start:"",success:"",fail:""}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(10),a=o(n),r=i(12),s=o(r),c=i(167),u=o(c),d=i(45),l=o(d),f=i(9),h=i(26);$(document.body);t.default={template:"#lottery-joiners",components:{Searchbar:u.default,WaterfallFlowLoader:l.default},vuex:{getters:{user:function(e){return e.user}},actions:{showDialog:h.showDialog,showLoading:h.showLoading,hideLoading:h.hideLoading,pageIn:h.pageIn}},data:function(){return{joiners:[],joinerIds:[],keyword:"",loaders:{},activity:{},category:0,categories:["中奖信息","报名信息"],category_apis:[a.default.lottery+"/winners",a.default.lottery+"/joiners"]}},computed:{loader:function(){var e=this,t=e.$route,i={activity_id:t.params.id,token:e.user.token},o=e.category_apis[e.category];return e.joiners=[],e.joinerIds=[],e.keyword&&(i.keyword=e.keyword),e.loaders=i,{params:i,url:o}}},ready:function(){var e=this;e.pageIn({title:"幸运大转盘"})},methods:{load:function(e,t){var i=this;Array.isArray(e)&&e.forEach(function(e){e.is_exchanged=Number(e.is_exchanged),$.inArray(e.id,i.joinerIds)<0&&(i.joiners.push(e),i.joinerIds.push(e.id))}),t&&t.activity&&(i.activity=t.activity)},fail:function(e,t){var i=this;if(e==s.default[1100])(0,f.showKickedOffline)(t.time,t.ip,i.showDialog);else if(e==s.default[1101])(0,f.showExpireTip)(i.showDialog);else{if(e==s.default[1102])return void i.$router.go({name:"signout"});i.$root.$emit("show.snackbar",{color:"accent",message:e})}i.hideLoading(),callback&&callback()},fail_action:function(e,t){var i=this,o=e.code;if(1100==o)(0,f.showKickedOffline)(e.data.time,e.data.ip,i.showDialog);else if(1101==o)(0,f.showExpireTip)(i.showDialog);else{if(1102==o)return void i.$router.go({name:"signout"});i.$root.$emit("show.snackbar",{color:"accent",message:s.default[o]})}i.hideLoading(),t&&t()},goCategory:function(e){this.category=e},search:function(e){this.keyword=e},showActionsheet:function(e){var t=e.target.getAttribute("href")?$(e.target.getAttribute("href")):$($(e.target).parent().attr("href")),i=t.find(".weui_mask_transition");e.preventDefault(),i.show().addClass("weui_fade_toggle"),t.find(".weui_actionsheet").addClass("weui_actionsheet_toggle")},hideActionsheet:function(e,t){var i=$(e.target).closest(".weui_actionsheet_container"),o=i.find(".weui_mask_transition");i.find(".weui_actionsheet").removeClass("weui_actionsheet_toggle"),o.removeClass("weui_fade_toggle"),setTimeout(function(){o.hide(),t&&t()},300)},exchange:function(e){var t=this,i=$(e.target),o=t.joiners[Number("undefined"==typeof e.target.dataset.index?i.parent().data("index"):e.target.dataset.index)],n=o.is_exchanged,r=t.activity,s=o.name,c=r.levels[o.prize_level].name;t.hideActionsheet(e),this.showDialog({title:n?"确认撤销 【"+s+"】 的 【"+c+"】 吗？":"确认给 【"+s+"】 兑换 【"+c+"】 吗？",cancel:!0,confirm:function(){return t.showLoading(),$.ajax(a.default.lottery+"/exchange",{method:"PUT",data:{id:o.id,token:t.user.token},success:function(e){return e.code?void t.fail_action(e):(t.$root.$emit("show.snackbar",{message:n?"撤销成功":"兑奖成功"}),void(o.is_exchanged=!n))},complete:function(){t.hideLoading()}}),!0}})},modify:function(e){var t=this,i=$(e.target),o=t.joiners[Number("undefined"==typeof e.target.dataset.index?i.parent().data("index"):e.target.dataset.index)],n=(o.id,o.name);t.hideActionsheet(e),this.showDialog({title:"修改报名信息",cancel:!0,button:{confirm:"保存"},content:'<p>姓名：<input type="text"  value="'+n+'" id="dialog_text_name" placeholder="请输入报名者姓名"/></p>',confirm:function(){var e=$("#dialog_text_name"),i=$.trim(e.val());return i.length?(t.showLoading(),$.ajax(""+a.default.activityJoiner,{method:"PUT",data:{joiner_id:o.joiner_id,token:t.user.token,name:i},success:function(e){return e.code?void t.fail_action(e):(t.$root.$emit("show.snackbar",{
message:"保存成功"}),void(o.name=i))},complete:function(){t.hideLoading()}}),!0):(t.$root.$emit("show.snackbar",{message:"姓名不能为空哟"}),e.focus(),!1)}})},modifyCustomize:function(e){var t=this,i=$(e.target),o=t.joiners[Number("undefined"==typeof e.target.dataset.index?i.parent().data("index"):e.target.dataset.index)],n=(o.id,"undefined"==typeof e.target.dataset.field?i.parent().data("field"):e.target.dataset.field),r=t.activity.customize[n],s=o[n];t.hideActionsheet(e),this.showDialog({title:"修改报名信息",cancel:!0,button:{confirm:"保存"},content:"<p>"+r+'：<input type="text"  value="'+s+'" id="dialog_text_name" placeholder="请输入'+r+'"/></p>',confirm:function(){var e=$("#dialog_text_name"),i=$.trim(e.val());return i.length?(t.showLoading(),$.ajax(""+a.default.lotteryJoinerProfile,{method:"PUT",data:{joiner_id:o.id,token:t.user.token,value:i,field:n},success:function(e){return e.code?void t.fail_action(e):(t.$root.$emit("show.snackbar",{message:r+"修改成功"}),void(o[n]=i))},complete:function(){t.hideLoading()}}),!0):(t.$root.$emit("show.snackbar",{message:r+"不能为空哟"}),e.focus(),!1)}})}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=i(72),r=o(a),s=i(10),c=o(s),u=i(12),d=o(u),l=i(73),f=o(l),h=i(75),p=o(h),m=i(62),g=o(m),v=i(74),y=o(v),w=i(77),_=o(w),b=i(63),x=o(b),j=i(64),D=o(j),k=i(76),S=o(k),T=i(78),z=o(T),I=i(51),M=o(I),L=i(180),C=o(L);i(183);var O=i(52),P=i(9),E=i(43),A=i(26),N=$(window),B=$(document.body),F=(window.URL||window.webkitURL,/^image\/\w+/);t.default={template:"#lottery-editor",components:{Uploader:f.default,miniEditor:p.default,Musician:g.default,Userguide:y.default,miniLogin:_.default,Foreground:x.default,Imager:D.default,joinCustomize:z.default,Sharer:M.default},vuex:{getters:{user:function(e){return e.user},guider:function(e){return e.guider}},actions:{showDialog:A.showDialog,showLoading:A.showLoading,hideLoading:A.hideLoading,pageIn:A.pageIn,toggleSharable:A.toggleSharable,guideIn:A.guideIn}},route:{data:function(e){function t(t){var o="幸运大转盘",n="制作";t&&(o=t.title,n="clone"==i.$route.query.action?"复制":"编辑"),i.pageIn({title:"【"+n+"】"+o}),i.$nextTick(function(){i.initPicker()}),e.next({activated:!0})}var i=this,o=i.$route,a=Number(o.params.id)||0;return i.is_clone="clone"==o.query.action,a?(i.showLoading(),void $.ajax(c.default.lottery+"/"+a,{data:{token:i.user.token},dataType:"text",success:function(a){if(a=$.parseJSON(a),a.code)return void i.fail(a);if(a.data){var r=a.data.activity;r.user_id!=i.user.id&&e.abort(),"clone"==o.query.action&&(r.id="");var s={},c={};try{s=JSON.parse(r.prizes),c=JSON.parse(r.prizes)}catch(e){console.log("parse prizes error: "+e.message)}s.image&&i.prize.uploader.images.push({suffix:"image/resize,w_640/quality,q_40",url:s.image});var u=r.host_info;try{u=r.host_info&&JSON.parse((0,P.jsonFilter)(r.host_info))}catch(e){console.log("parse host_info error: "+e.message)}u.length&&"object"===("undefined"==typeof u?"undefined":n(u))&&(r.host_info=u);var d={};try{d=r.others&&JSON.parse((0,P.jsonFilter)(r.others)),d="object"===("undefined"==typeof d?"undefined":n(d))?$.extend(i.activity.others,d):i.activity.others}catch(e){console.log("parse others error: "+e.message)}r.prizes=s,i.copy_prizes=c,r.others=d,i.activity=r,i.statistics=a.data.statistics,t(r)}},error:function(){B.tooltip("活动加载失败","danger")},complete:function(){i.hideLoading()}})):void t()}},data:function(){var e=this,t=new Date,i=t.getFullYear(),o=t.getMonth(),n=t.getDate(),a=new Date(i,o,n),r=new Date(i,o,n+5);return{activated:!1,expired:!1,editable:!0,prizes_levels_limit:6,activity:{id:"",type:C.default.code,title:"3周年狂欢，得力健身回馈新老用户，抽奖停不下来！",start_time:a.valueOf()/1e3,end_time:r.valueOf()/1e3,prizes:{per_day_max_lottery_num:5,per_lottery_interval:0,per_max_winning_num:3,display_prizes:1,exchange_password:"",levels:[{name:"谢谢参与",probability:20,img:""},{name:"一等奖",amount:5,probability:1,img:"",text:"得力健身年卡一张"},{name:"二等奖",amount:1e3,probability:79,img:"",text:""}],mobile:e.user.mobile},rules:"请按实际情况修改以下信息（删除此句话）\n奖品说明：\n一等奖：价值2800元年卡一张\n可在本健身会所免费锻炼一年，不限次数\n二等奖：XXXXXXX\nXXXXXXXX\n1.每人每天可抽奖3次，最多可抽取10个奖品。\n2.中奖后可以联系商家，报手机号码进行兑奖。\n",receive_info:"兑奖时间：\n兑奖地址：\n兑奖电话："+e.user.mobile,host_info:"",others:{musician:"",foreground:{type:"",direction:""},section_text:{receive_info:"兑奖信息",intro:"机构介绍"},banner:{src:"http://cdn.s.shangjiadao.cn/source/images/components/imager/lottery/01.jpg"},join_customize:{customize_1:{name:"",required:0},customize_2:{name:"",required:0},customize_3:{name:"",required:0}}}},intro:{uploaded:!1,minieditor:{uploader:{maxlength:10,placeholder:"（点击选择图片，不上传则不显示）",description:"添加图片（最多添加 10 张图片）",error:function(){e.submitting=!1,B.tooltip("机构介绍图片上传失败","danger")},success:function(t){e.activity.host_info=t,e.intro.uploaded=!0,e.publish()}},texter:{placeholder:"此处可修改字体样式：加粗、斜体、下划线、字体大小颜色...",description:"添加文本（最多添加 10 个文本内容）",maxlength:10},video:{placeholder:"请输入视频地址【支持优酷、腾讯视频】",description:"添加视频（最多添加 5 个视频）",maxlength:5}}},prize:{uploader:{maxsize:3072,cropper:{croppered_params:[],config:{dragMode:"move",aspectRatio:1,autoCropArea:.8,guides:!1,center:!0,highlight:!1,dragCrop:!1,cropBoxMovable:!1,cropBoxResizable:!1,zoom:-.2,checkImageOrigin:!0,background:!1,rotatable:!0}}}},others:{musician:{callback:function(t){e.activity.others.musician=t}},foreground:{callback:function(t){e.activity.others.foreground=t}},section_text:{receive_info:"兑奖信息",intro:"机构介绍"},imager:{switcies:{font:!1},callback:function(t){e.activity.others.banner=t}},join_customize:{callback:function(t){e.activity.others.join_customize=t}}},statistics:null,submitting:!1,is_clone:!1,copy_prizes:null,sharer:null}},computed:{locked:function(){var e=this,t=e.statistics;return e.activity.id>0&&t&&t.join_count>0&&!e.is_clone},completed:function(){var e=this,t=(new Date).getTime()/1e3;return e.activity.end_time<=t},parseLevels:function(){var e=this,t=e.activity.prizes.levels,i=["一","二","三","四","五","六"],o=[],n=t.length,a=1/n;return t.forEach(function(e,t){o.push({level_str:i[t],recover_img:"http://cdn.s.shangjiadao.cn/source/images/lottery/p"+(t+1)+".png",style:"-webkit-transform:rotate("+t*a+"turn);transform:rotate("+t*a+"turn);",wheelStyle:"-webkit-transform:rotate("+(t*a+a/2)+"turn);transform:rotate("+(t*a+a/2)+"turn);"})}),{levels:t,newLevels:o}},wheelBoxStyle:function(){var e=window.screen.width;return e=e>640?640:e,{left:(e-300)/2+"px",top:320==e?"0":"5.5%"}}},ready:function(){var e=this;"clone"==e.$route.query.action&&(0,P.showCloneTiper)(e.showDialog),setTimeout(function(){(0,S.default)($("textarea",e.$el).not(".nosize"))},2500),e.wheelLightChange()},beforeDestroy:function(){var e=this;e.startDatePicker&&e.startDatePicker.destroy(),e.endDatePicker&&e.endDatePicker.destroy()},methods:{initPicker:function(){var e=this,t=$(e.$el),i=t.find(".start-date"),o=t.find(".end-date"),n={format:"YYYY-MM-DD HH:mm",increment:{minute:10},text:{cancel:"取消",confirm:"确认"},translate:function(e,t){var i={year:"年",month:"月",day:"日",hour:"点",minute:"分"};return Number(t)+i[e]}},a=$.extend(!0,{},n,{text:{title:"请选择活动开始时间"}}),s=$.extend(!0,{},n,{text:{title:"请选择活动结束时间"}}),c=new r.default(i[0],a),u=new r.default(o[0],s);e.startDatePicker=c,e.endDatePicker=u,i.on("change",function(){var t=c.getDate();e.activity.start_time=Math.round(t.getTime()/1e3),e.activity.end_time<=e.activity.start_time&&(t.setDate(t.getDate()+1),e.activity.end_time=Math.round(t.getTime()/1e3),e.$nextTick(function(){return u.update()}))}),o.on("change",function(t){var i=Math.round(u.getDate().getTime()/1e3);return i<=e.activity.start_time?void t.preventDefault():void(e.activity.end_time=i)})},addLevel:function(){var e=this.activity;e.prizes.levels.length<this.prizes_levels_limit&&e.prizes.levels.push({name:"",amount:"",probability:"",img:"",text:""})},removeLevel:function(e){this.activity.prizes.levels.splice(e,1)},toggle:function(){var e=this;e.editable=!e.editable,document.body.scrollTop=0,setTimeout(function(){(0,S.default)($("textarea",e.$el))},2e3)},fail:function(e,t){var i=this,o=e.code;1100==o?(0,P.showKickedOffline)(e.data.time,e.data.ip,i.showDialog,function(){i.expired=!0}):1101==o?(0,P.showExpireTip)(i.showDialog):1102==o?i.expired=!0:i.$root.$emit("show.snackbar",{color:"accent",message:d.default[o]}),i.hideLoading(),t&&t()},submit:function(e){var t=this,i=t.activity,o=(0,O.match)(JSON.stringify(i));if(e.preventDefault(),!i.others.banner.src)return void t.showDialog({title:"提示",content:"请设置 顶部海报",confirm:!0});if(!i.title)return void t.showDialog({title:"提示",content:"请设置 活动标题",confirm:!0});if(i.prizes.per_day_max_lottery_num<0)return void t.showDialog({title:"提示",content:"抽奖次数必须 >= 0",confirm:!0});if(i.prizes.per_lottery_interval<0)return void t.showDialog({title:"提示",content:"抽奖时间间隔必须 >= 0",confirm:!0});if(i.prizes.per_max_winning_num<0)return void t.showDialog({title:"提示",content:"每人最多中奖次数必须 >= 0",confirm:!0});if(!/^\d{6}/.test(i.prizes.exchange_password))return void t.showDialog({title:"提示",content:"兑奖密码必须为6位数字",confirm:!0});var n=!1,a=!1,r=!1,s=["一","二","三","四","五"],u=0;if($.each(i.prizes.levels,function(e,i){var o=i.name,c=i.amount,d=i.probability,l="[选项"+s[e]+"]";return o?e>0&&c<0?(t.showDialog({title:"提示",content:l+" 奖品数量必须 >= 0",confirm:!0}),void(a=!0)):d<0?(t.showDialog({title:"提示",content:l+" 中奖率必须 > 0",confirm:!0}),void(r=!0)):d>0&&d<.01?(t.showDialog({title:"提示",content:l+" 中奖率不能低于 0.01%",confirm:!0}),void(r=!0)):void(u+=d):(t.showDialog({title:"提示",content:l+" 奖品名称不能为空",confirm:!0}),void(n=!0))}),!(n||a||r)){if(100!=u)return void t.showDialog({title:"提示",content:"所有奖项的中奖率总和必须等于100",confirm:!0});if(!i.receive_info)return void t.showDialog({title:"提示",content:"请设置兑奖信息",confirm:!0});if(!i.prizes.mobile)return void t.showDialog({title:"提示",content:"请设置咨询电话",confirm:!0});var d=!1,l=2;if($.each(i.others.join_customize,function(e,i){if(l++,i.required&&""==$.trim(i.name))return t.showDialog({title:"提示",content:"【信息收集设置】第 "+l+" 个信息项由于设置为必填项，因此名称不能为空！",confirm:!0}),void(d=!0)}),!d)return o.length?void t.showDialog({title:"提示",content:"发现微信违规词："+o.join("、")+"，请修改后再发布！",confirm:!0}):void(t.submitting||(t.submitting=!0,t.showLoading("正在提交数据..."),$.ajax(c.default.uploadSignature,{method:"get",data:{token:t.user.token,type:2},dataType:"json",success:function(e){return console.log(e.code),e.code?(t.submitting=!1,t.hideLoading(),void t.fail(e)):(t.showLoading("正在上传图片，请勿离开或关闭页面"),void(e.data&&t.$root.$emit("upload.uploader",e.data)))},error:function(){t.submitting=!1,t.hideLoading(),t.$root.$emit("show.snackbar",{color:"accent",message:"保存失败，请检查网络是否正常连接！"})}})))}},publish:function(){var e=this;if(e.intro.uploaded&&!e.publishing){e.sharer=null,e.publishing=!0,e.showLoading("正在提交数据，请勿离开或关闭页面");var t=(0,P.expressionFilter)($.extend(!0,{},e.activity));$.ajax(c.default.activity,{method:t.id?"put":"post",data:$.extend(t,{prizes:JSON.stringify(t.prizes),others:JSON.stringify(t.others),token:e.user.token}),success:function(i){return i.code?void e.fail(i):void B.one("hidden.tooltip",function(){e.sharer={autoShare:!1,autoShow:!0,data:$.extend(t,{category:C.default.category,id:t.id||i.data.id}),desc:t.share_content,imgUrl:t.share_img,title:t.share_title}}).tooltip("show",{content:"活动保存成功",style:"success",duration:1e3})},error:function(){B.tooltip("活动发布失败","danger")},complete:function(){e.submitting=!1,e.publishing=!1,e.hideLoading()}})}},uploadPrizeImg:function(e){var t=this,i=e.target,o=$(i),n=i.files?i.files[0]:null,a=t.prize.uploader.maxsize,r=Number(i.dataset.index),s=void 0;if(n&&(F.test(n.type)||""==n.type)){var u=n.size/1024;if(u>a)return t.showDialog({title:"提示",content:"图片大小请控制在 "+Math.floor(a)+" KB 以内",confirm:!0}),!1;t.showLoading("正在上传..."),$.get(c.default.uploadSignature,{type:2},function(e){return e.code?void t.fail(e):void(e.data&&!function(){var i=e.data,a=""+i.dir+(0,P.getRandomFilename)(n.name);o.uploader({name:"file",url:i.host,data:{key:a,policy:i.policy,OSSAccessKeyId:i.accessid,signature:i.signature},done:function(){s=(0,E.imagify)(a,"image/resize,w_640"),t.initCropper(s,{aspectRatio:1},function(){t.prize.uploader.cropper.croppered_params.length&&(t.activity.prizes.levels[r].img=(0,E.imagify)(a,t.prize.uploader.cropper.croppered_params),t.prize.uploader.cropper.croppered_params=[])}),t.hideLoading()},fail:function(){t.$root.$emit("show.snackbar",{color:"accent",message:"上传失败，请检查网络连接并重试"}),t.hideLoading()},uploaded:function(){o.uploader("destroy")}}).uploader("upload")}())})}else t.$root.$emit("show.snackbar",{color:"accent",message:"请选择正确的图片文件"})},clearLevelImg:function(e){var t=this,i=e.target,o=Number(i.dataset.index);o=isNaN(o)?$(i).parent().data("index"):o,t.activity.prizes.levels[o].img=""},initCropper:function(e,t,i){var o=this,n=(N.width(),N.height(),"dialog-lottery-cropper-container");o.showDialog({title:"图片裁剪",fullscreen:!0,noeffect:!0,content:'<div id="'+n+'">'+('   <img src="'+e+'"/>')+'   <p style="color:#545454;font-size: 1.5rem;">     <i class="fa fa-rotate-left" id="dialog-lottery-cropper-rotate-left"></i>     <i class="fa fa-rotate-right" id="dialog-lottery-cropper-rotate-right" style="margin-left:0.5rem;"></i>   </p></div>',cancel:function(){return $("#"+n).find("img").cropper("destroy"),!0},confirm:function(){return!!o.prize.uploader.cropper.croppered_params.length&&($("#"+n).find("img").cropper("destroy"),i(),!0)}}),setTimeout(function(){var i=$("#"+n).css({height:"90%"}).find("img"),a=o.prize.uploader.cropper.config;$("#dialog-lottery-cropper-rotate-left").click(function(){i.cropper("rotate",-45)}),$("#dialog-lottery-cropper-rotate-right").click(function(){i.cropper("rotate",45)}),i.attr("src",e).cropper($.extend(!0,{},a,{aspectRatio:t.aspectRatio,crop:function(e){var t=parseInt(e.x,10),i=parseInt(e.y,10),n=parseInt(e.width,10),a=parseInt(e.height,10),r=parseInt(e.rotate,10);o.prize.uploader.cropper.croppered_params="image/resize,w_640/"+["rotate",r].join(",")+"/"+["crop","x_"+t,"y_"+i,"w_"+n,"h_"+a].join(",")}}))},50)},wheelLightChange:function(){setTimeout(function(){var e=$("#lottery-banner-wheel");setInterval(function(){return e.hasClass("lighter")?void e.removeClass("lighter"):void e.addClass("lighter")},400)},1500)}}}},function(e,t,i){var o,n,a;!function(r){n=[i(6)],o=r,a="function"==typeof o?o.apply(t,n):o,!(void 0!==a&&(e.exports=a))}(function(e){"use strict";function t(e){return"number"==typeof e&&!isNaN(e)}function i(e){return"undefined"==typeof e}function o(e,i){var o=[];return t(i)&&o.push(i),o.slice.apply(e,o)}function n(e,t){var i=o(arguments,2);return function(){return e.apply(t,i.concat(o(arguments)))}}function a(e){var t=e.match(/^(https?:)\/\/([^\:\/\?#]+):?(\d*)/i);return t&&(t[1]!==_.protocol||t[2]!==_.hostname||t[3]!==_.port)}function r(e){var t="timestamp="+(new Date).getTime();return e+(e.indexOf("?")===-1?"?":"&")+t}function s(e){return e?' crossOrigin="'+e+'"':""}function c(e,t){var i;return e.naturalWidth&&!ge?t(e.naturalWidth,e.naturalHeight):(i=document.createElement("img"),i.onload=function(){t(this.width,this.height)},void(i.src=e.src))}function u(e){var i=[],o=e.rotate,n=e.scaleX,a=e.scaleY;return t(o)&&0!==o&&i.push("rotate("+o+"deg)"),t(n)&&1!==n&&i.push("scaleX("+n+")"),t(a)&&1!==a&&i.push("scaleY("+a+")"),i.length?i.join(" "):"none"}function d(e,t){var i,o,n=_e(e.degree)%180,a=(n>90?180-n:n)*Math.PI/180,r=be(a),s=xe(a),c=e.width,u=e.height,d=e.aspectRatio;return t?(i=c/(s+r/d),o=i/d):(i=c*s+u*r,o=c*r+u*s),{width:i,height:o}}function l(i,o){var n,a,r,s=e("<canvas>")[0],c=s.getContext("2d"),u=0,l=0,f=o.naturalWidth,h=o.naturalHeight,p=o.rotate,m=o.scaleX,g=o.scaleY,v=t(m)&&t(g)&&(1!==m||1!==g),y=t(p)&&0!==p,w=y||v,_=f*_e(m||1),b=h*_e(g||1);return v&&(n=_/2,a=b/2),y&&(r=d({width:_,height:b,degree:p}),_=r.width,b=r.height,n=_/2,a=b/2),s.width=_,s.height=b,w&&(u=-f/2,l=-h/2,c.save(),c.translate(n,a)),y&&c.rotate(p*Math.PI/180),v&&c.scale(m,g),c.drawImage(i,De(u),De(l),De(f),De(h)),w&&c.restore(),s}function f(t){var i=t.length,o=0,n=0;return i&&(e.each(t,function(e,t){o+=t.pageX,n+=t.pageY}),o/=i,n/=i),{pageX:o,pageY:n}}function h(e,t,i){var o,n="";for(o=t,i+=t;o<i;o++)n+=ke(e.getUint8(o));return n}function p(e){var t,i,o,n,a,r,s,c,u,d,l=new $(e),f=l.byteLength;if(255===l.getUint8(0)&&216===l.getUint8(1))for(u=2;u<f;){if(255===l.getUint8(u)&&225===l.getUint8(u+1)){s=u;break}u++}if(s&&(i=s+4,o=s+10,"Exif"===h(l,i,4)&&(r=l.getUint16(o),a=18761===r,(a||19789===r)&&42===l.getUint16(o+2,a)&&(n=l.getUint32(o+4,a),n>=8&&(c=o+n)))),c)for(f=l.getUint16(c,a),d=0;d<f;d++)if(u=c+12*d+2,274===l.getUint16(u,a)){u+=8,t=l.getUint16(u,a),ge&&l.setUint16(u,1,a);break}return t}function m(e){var t,i=e.replace(Q,""),o=atob(i),n=o.length,a=new x(n),r=new j(a);for(t=0;t<n;t++)r[t]=o.charCodeAt(t);return a}function g(e){var t,i=new j(e),o=i.length,n="";for(t=0;t<o;t++)n+=ke(i[t]);return"data:image/jpeg;base64,"+D(n)}function v(t,i){this.$element=e(t),this.options=e.extend({},v.DEFAULTS,e.isPlainObject(i)&&i),this.isLoaded=!1,this.isBuilt=!1,this.isCompleted=!1,this.isRotated=!1,this.isCropped=!1,this.isDisabled=!1,this.isReplaced=!1,this.isLimited=!1,this.wheeling=!1,this.isImg=!1,this.originalUrl="",this.canvas=null,this.cropBox=null,this.init()}var y=e(window),w=e(document),_=window.location,b=window.navigator,x=window.ArrayBuffer,j=window.Uint8Array,$=window.DataView,D=window.btoa,k="cropper",S="cropper-modal",T="cropper-hide",z="cropper-hidden",I="cropper-invisible",M="cropper-move",L="cropper-crop",C="cropper-disabled",O="cropper-bg",P="mousedown touchstart pointerdown MSPointerDown",E="mousemove touchmove pointermove MSPointerMove",A="mouseup touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel",N="wheel mousewheel DOMMouseScroll",B="dblclick",F="load."+k,q="error."+k,R="resize."+k,J="build."+k,Y="built."+k,U="cropstart."+k,H="cropmove."+k,X="cropend."+k,W="crop."+k,V="zoom."+k,G=/^(e|w|s|n|se|sw|ne|nw|all|crop|move|zoom)$/,K=/^data:/,Q=/^data:([^;]+);base64,/,Z=/^data:image\/jpeg.*;base64,/,ee="preview",te="action",ie="e",oe="w",ne="s",ae="n",re="se",se="sw",ce="ne",ue="nw",de="all",le="crop",fe="move",he="zoom",pe="none",me=e.isFunction(e("<canvas>")[0].getContext),ge=b&&/(Macintosh|iPhone|iPod|iPad).*AppleWebKit/i.test(b.userAgent),ve=Number,ye=Math.min,we=Math.max,_e=Math.abs,be=Math.sin,xe=Math.cos,je=Math.sqrt,$e=Math.round,De=Math.floor,ke=String.fromCharCode;v.prototype={constructor:v,init:function(){var e,t=this.$element;if(t.is("img")){if(this.isImg=!0,this.originalUrl=e=t.attr("src"),!e)return;e=t.prop("src")}else t.is("canvas")&&me&&(e=t[0].toDataURL());this.load(e)},trigger:function(t,i){var o=e.Event(t,i);return this.$element.trigger(o),o},load:function(t){var i,o,n=this.options,s=this.$element;if(t&&(s.one(J,n.build),!this.trigger(J).isDefaultPrevented())){if(this.url=t,this.image={},!n.checkOrientation||!x)return this.clone();if(i=e.proxy(this.read,this),K.test(t))return Z.test(t)?i(m(t)):this.clone();o=new XMLHttpRequest,o.onerror=o.onabort=e.proxy(function(){this.clone()},this),o.onload=function(){i(this.response)},n.checkCrossOrigin&&a(t)&&s.prop("crossOrigin")&&(t=r(t)),o.open("get",t),o.responseType="arraybuffer",o.send()}},read:function(e){var t=this.options,i=p(e),o=this.image,n=0,a=1,r=1;if(i>1)switch(this.url=g(e),i){case 2:a=-1;break;case 3:n=-180;break;case 4:r=-1;break;case 5:n=90,r=-1;break;case 6:n=90;break;case 7:n=90,a=-1;break;case 8:n=-90}t.rotatable&&(o.rotate=n),t.scalable&&(o.scaleX=a,o.scaleY=r),this.clone()},clone:function(){var t,i,o=this.options,n=this.$element,c=this.url,u="";o.checkCrossOrigin&&a(c)&&(u=n.prop("crossOrigin"),u?t=c:(u="anonymous",t=r(c))),this.crossOrigin=u,this.crossOriginUrl=t,this.$clone=i=e("<img"+s(u)+' src="'+(t||c)+'">'),this.isImg?n[0].complete?this.start():n.one(F,e.proxy(this.start,this)):i.one(F,e.proxy(this.start,this)).one(q,e.proxy(this.stop,this)).addClass(T).insertAfter(n)},start:function(){var t=this.$element,i=this.$clone;this.isImg||(i.off(q,this.stop),t=i),c(t[0],e.proxy(function(t,i){e.extend(this.image,{naturalWidth:t,naturalHeight:i,aspectRatio:t/i}),this.isLoaded=!0,this.build()},this))},stop:function(){this.$clone.remove(),this.$clone=null},build:function(){var t,i,o,n=this.options,a=this.$element,r=this.$clone;this.isLoaded&&(this.isBuilt&&this.unbuild(),this.$container=a.parent(),this.$cropper=t=e(v.TEMPLATE),this.$canvas=t.find(".cropper-canvas").append(r),this.$dragBox=t.find(".cropper-drag-box"),this.$cropBox=i=t.find(".cropper-crop-box"),this.$viewBox=t.find(".cropper-view-box"),this.$face=o=i.find(".cropper-face"),a.addClass(z).after(t),this.isImg||r.removeClass(T),this.initPreview(),this.bind(),n.aspectRatio=we(0,n.aspectRatio)||NaN,n.viewMode=we(0,ye(3,$e(n.viewMode)))||0,n.autoCrop?(this.isCropped=!0,n.modal&&this.$dragBox.addClass(S)):i.addClass(z),n.guides||i.find(".cropper-dashed").addClass(z),n.center||i.find(".cropper-center").addClass(z),n.cropBoxMovable&&o.addClass(M).data(te,de),n.highlight||o.addClass(I),n.background&&t.addClass(O),n.cropBoxResizable||i.find(".cropper-line, .cropper-point").addClass(z),this.setDragMode(n.dragMode),this.render(),this.isBuilt=!0,this.setData(n.data),a.one(Y,n.built),this.completing=setTimeout(e.proxy(function(){this.trigger(Y),this.trigger(W,this.getData()),this.isCompleted=!0},this),0))},unbuild:function(){this.isBuilt&&(this.isCompleted||clearTimeout(this.completing),this.isBuilt=!1,this.isCompleted=!1,this.initialImage=null,this.initialCanvas=null,this.initialCropBox=null,this.container=null,this.canvas=null,this.cropBox=null,this.unbind(),this.resetPreview(),this.$preview=null,this.$viewBox=null,this.$cropBox=null,this.$dragBox=null,this.$canvas=null,this.$container=null,this.$cropper.remove(),this.$cropper=null)},render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.isCropped&&this.renderCropBox()},initContainer:function(){var e=this.options,t=this.$element,i=this.$container,o=this.$cropper;o.addClass(z),t.removeClass(z),o.css(this.container={width:we(i.width(),ve(e.minContainerWidth)||200),height:we(i.height(),ve(e.minContainerHeight)||100)}),t.addClass(z),o.removeClass(z)},initCanvas:function(){var t,i=this.options.viewMode,o=this.container,n=o.width,a=o.height,r=this.image,s=r.naturalWidth,c=r.naturalHeight,u=90===_e(r.rotate),d=u?c:s,l=u?s:c,f=d/l,h=n,p=a;a*f>n?3===i?h=a*f:p=n/f:3===i?p=n/f:h=a*f,t={naturalWidth:d,naturalHeight:l,aspectRatio:f,width:h,height:p},t.oldLeft=t.left=(n-h)/2,t.oldTop=t.top=(a-p)/2,this.canvas=t,this.isLimited=1===i||2===i,this.limitCanvas(!0,!0),this.initialImage=e.extend({},r),this.initialCanvas=e.extend({},t)},limitCanvas:function(e,t){var i,o,n,a,r=this.options,s=r.viewMode,c=this.container,u=c.width,d=c.height,l=this.canvas,f=l.aspectRatio,h=this.cropBox,p=this.isCropped&&h;e&&(i=ve(r.minCanvasWidth)||0,o=ve(r.minCanvasHeight)||0,s&&(s>1?(i=we(i,u),o=we(o,d),3===s&&(o*f>i?i=o*f:o=i/f)):i?i=we(i,p?h.width:0):o?o=we(o,p?h.height:0):p&&(i=h.width,o=h.height,o*f>i?i=o*f:o=i/f)),i&&o?o*f>i?o=i/f:i=o*f:i?o=i/f:o&&(i=o*f),l.minWidth=i,l.minHeight=o,l.maxWidth=1/0,l.maxHeight=1/0),t&&(s?(n=u-l.width,a=d-l.height,l.minLeft=ye(0,n),l.minTop=ye(0,a),l.maxLeft=we(0,n),l.maxTop=we(0,a),p&&this.isLimited&&(l.minLeft=ye(h.left,h.left+h.width-l.width),l.minTop=ye(h.top,h.top+h.height-l.height),l.maxLeft=h.left,l.maxTop=h.top,2===s&&(l.width>=u&&(l.minLeft=ye(0,n),l.maxLeft=we(0,n)),l.height>=d&&(l.minTop=ye(0,a),l.maxTop=we(0,a))))):(l.minLeft=-l.width,l.minTop=-l.height,l.maxLeft=u,l.maxTop=d))},renderCanvas:function(e){var t,i,o=this.canvas,n=this.image,a=n.rotate,r=n.naturalWidth,s=n.naturalHeight;this.isRotated&&(this.isRotated=!1,i=d({width:n.width,height:n.height,degree:a}),t=i.width/i.height,t!==o.aspectRatio&&(o.left-=(i.width-o.width)/2,o.top-=(i.height-o.height)/2,o.width=i.width,o.height=i.height,o.aspectRatio=t,o.naturalWidth=r,o.naturalHeight=s,a%180&&(i=d({width:r,height:s,degree:a}),o.naturalWidth=i.width,o.naturalHeight=i.height),this.limitCanvas(!0,!1))),(o.width>o.maxWidth||o.width<o.minWidth)&&(o.left=o.oldLeft),(o.height>o.maxHeight||o.height<o.minHeight)&&(o.top=o.oldTop),o.width=ye(we(o.width,o.minWidth),o.maxWidth),o.height=ye(we(o.height,o.minHeight),o.maxHeight),this.limitCanvas(!1,!0),o.oldLeft=o.left=ye(we(o.left,o.minLeft),o.maxLeft),o.oldTop=o.top=ye(we(o.top,o.minTop),o.maxTop),this.$canvas.css({width:o.width,height:o.height,left:o.left,top:o.top}),this.renderImage(),this.isCropped&&this.isLimited&&this.limitCropBox(!0,!0),e&&this.output()},renderImage:function(t){var i,o=this.canvas,n=this.image;n.rotate&&(i=d({width:o.width,height:o.height,degree:n.rotate,aspectRatio:n.aspectRatio},!0)),e.extend(n,i?{width:i.width,height:i.height,left:(o.width-i.width)/2,top:(o.height-i.height)/2}:{width:o.width,height:o.height,left:0,top:0}),this.$clone.css({width:n.width,height:n.height,marginLeft:n.left,marginTop:n.top,transform:u(n)}),t&&this.output()},initCropBox:function(){var t=this.options,i=this.canvas,o=t.aspectRatio,n=ve(t.autoCropArea)||.8,a={width:i.width,height:i.height};o&&(i.height*o>i.width?a.height=a.width/o:a.width=a.height*o),this.cropBox=a,this.limitCropBox(!0,!0),a.width=ye(we(a.width,a.minWidth),a.maxWidth),a.height=ye(we(a.height,a.minHeight),a.maxHeight),a.width=we(a.minWidth,a.width*n),a.height=we(a.minHeight,a.height*n),a.oldLeft=a.left=i.left+(i.width-a.width)/2,a.oldTop=a.top=i.top+(i.height-a.height)/2,this.initialCropBox=e.extend({},a)},limitCropBox:function(e,t){var i,o,n,a,r=this.options,s=r.aspectRatio,c=this.container,u=c.width,d=c.height,l=this.canvas,f=this.cropBox,h=this.isLimited;e&&(i=ve(r.minCropBoxWidth)||0,o=ve(r.minCropBoxHeight)||0,i=ye(i,u),o=ye(o,d),n=ye(u,h?l.width:u),a=ye(d,h?l.height:d),s&&(i&&o?o*s>i?o=i/s:i=o*s:i?o=i/s:o&&(i=o*s),a*s>n?a=n/s:n=a*s),f.minWidth=ye(i,n),f.minHeight=ye(o,a),f.maxWidth=n,f.maxHeight=a),t&&(h?(f.minLeft=we(0,l.left),f.minTop=we(0,l.top),f.maxLeft=ye(u,l.left+l.width)-f.width,f.maxTop=ye(d,l.top+l.height)-f.height):(f.minLeft=0,f.minTop=0,f.maxLeft=u-f.width,f.maxTop=d-f.height))},renderCropBox:function(){var e=this.options,t=this.container,i=t.width,o=t.height,n=this.cropBox;(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=ye(we(n.width,n.minWidth),n.maxWidth),n.height=ye(we(n.height,n.minHeight),n.maxHeight),this.limitCropBox(!1,!0),n.oldLeft=n.left=ye(we(n.left,n.minLeft),n.maxLeft),n.oldTop=n.top=ye(we(n.top,n.minTop),n.maxTop),e.movable&&e.cropBoxMovable&&this.$face.data(te,n.width===i&&n.height===o?fe:de),this.$cropBox.css({width:n.width,height:n.height,left:n.left,top:n.top}),this.isCropped&&this.isLimited&&this.limitCanvas(!0,!0),this.isDisabled||this.output()},output:function(){this.preview(),this.isCompleted&&this.trigger(W,this.getData())},initPreview:function(){var t,i=s(this.crossOrigin),o=i?this.crossOriginUrl:this.url;this.$preview=e(this.options.preview),this.$clone2=t=e("<img"+i+' src="'+o+'">'),this.$viewBox.html(t),this.$preview.each(function(){var t=e(this);t.data(ee,{width:t.width(),height:t.height(),html:t.html()}),t.html("<img"+i+' src="'+o+'" style="display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;">')})},resetPreview:function(){this.$preview.each(function(){var t=e(this),i=t.data(ee);t.css({width:i.width,height:i.height}).html(i.html).removeData(ee)})},preview:function(){var t=this.image,i=this.canvas,o=this.cropBox,n=o.width,a=o.height,r=t.width,s=t.height,c=o.left-i.left-t.left,d=o.top-i.top-t.top;this.isCropped&&!this.isDisabled&&(this.$clone2.css({width:r,height:s,marginLeft:-c,marginTop:-d,transform:u(t)}),this.$preview.each(function(){var i=e(this),o=i.data(ee),l=o.width,f=o.height,h=l,p=f,m=1;n&&(m=l/n,p=a*m),a&&p>f&&(m=f/a,h=n*m,p=f),i.css({width:h,height:p}).find("img").css({width:r*m,height:s*m,marginLeft:-c*m,marginTop:-d*m,transform:u(t)})}))},bind:function(){var t=this.options,i=this.$element,o=this.$cropper;e.isFunction(t.cropstart)&&i.on(U,t.cropstart),e.isFunction(t.cropmove)&&i.on(H,t.cropmove),e.isFunction(t.cropend)&&i.on(X,t.cropend),e.isFunction(t.crop)&&i.on(W,t.crop),e.isFunction(t.zoom)&&i.on(V,t.zoom),o.on(P,e.proxy(this.cropStart,this)),t.zoomable&&t.zoomOnWheel&&o.on(N,e.proxy(this.wheel,this)),t.toggleDragModeOnDblclick&&o.on(B,e.proxy(this.dblclick,this)),w.on(E,this._cropMove=n(this.cropMove,this)).on(A,this._cropEnd=n(this.cropEnd,this)),t.responsive&&y.on(R,this._resize=n(this.resize,this))},unbind:function(){var t=this.options,i=this.$element,o=this.$cropper;e.isFunction(t.cropstart)&&i.off(U,t.cropstart),e.isFunction(t.cropmove)&&i.off(H,t.cropmove),e.isFunction(t.cropend)&&i.off(X,t.cropend),e.isFunction(t.crop)&&i.off(W,t.crop),e.isFunction(t.zoom)&&i.off(V,t.zoom),o.off(P,this.cropStart),t.zoomable&&t.zoomOnWheel&&o.off(N,this.wheel),t.toggleDragModeOnDblclick&&o.off(B,this.dblclick),w.off(E,this._cropMove).off(A,this._cropEnd),t.responsive&&y.off(R,this._resize)},resize:function(){var t,i,o,n=this.options.restore,a=this.$container,r=this.container;!this.isDisabled&&r&&(o=a.width()/r.width,1===o&&a.height()===r.height||(n&&(t=this.getCanvasData(),i=this.getCropBoxData()),this.render(),n&&(this.setCanvasData(e.each(t,function(e,i){t[e]=i*o})),this.setCropBoxData(e.each(i,function(e,t){i[e]=t*o})))))},dblclick:function(){this.isDisabled||(this.$dragBox.hasClass(L)?this.setDragMode(fe):this.setDragMode(le))},wheel:function(t){var i=t.originalEvent||t,o=ve(this.options.wheelZoomRatio)||.1,n=1;this.isDisabled||(t.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout(e.proxy(function(){this.wheeling=!1},this),50),i.deltaY?n=i.deltaY>0?1:-1:i.wheelDelta?n=-i.wheelDelta/120:i.detail&&(n=i.detail>0?1:-1),this.zoom(-n*o,t)))},cropStart:function(t){var i,o,n=this.options,a=t.originalEvent,r=a&&a.touches,s=t;if(!this.isDisabled){if(r){if(i=r.length,i>1){if(!n.zoomable||!n.zoomOnTouch||2!==i)return;s=r[1],this.startX2=s.pageX,this.startY2=s.pageY,o=he}s=r[0]}if(o=o||e(s.target).data(te),G.test(o)){if(this.trigger(U,{originalEvent:a,action:o}).isDefaultPrevented())return;t.preventDefault(),this.action=o,this.cropping=!1,this.startX=s.pageX||a&&a.pageX,this.startY=s.pageY||a&&a.pageY,o===le&&(this.cropping=!0,this.$dragBox.addClass(S))}}},cropMove:function(e){var t,i=this.options,o=e.originalEvent,n=o&&o.touches,a=e,r=this.action;if(!this.isDisabled){if(n){if(t=n.length,t>1){if(!i.zoomable||!i.zoomOnTouch||2!==t)return;a=n[1],this.endX2=a.pageX,this.endY2=a.pageY}a=n[0]}if(r){if(this.trigger(H,{originalEvent:o,action:r}).isDefaultPrevented())return;e.preventDefault(),this.endX=a.pageX||o&&o.pageX,this.endY=a.pageY||o&&o.pageY,this.change(a.shiftKey,r===he?e:null)}}},cropEnd:function(e){var t=e.originalEvent,i=this.action;this.isDisabled||i&&(e.preventDefault(),this.cropping&&(this.cropping=!1,this.$dragBox.toggleClass(S,this.isCropped&&this.options.modal)),this.action="",this.trigger(X,{originalEvent:t,action:i}))},change:function(e,t){var i,o,n=this.options,a=n.aspectRatio,r=this.action,s=this.container,c=this.canvas,u=this.cropBox,d=u.width,l=u.height,f=u.left,h=u.top,p=f+d,m=h+l,g=0,v=0,y=s.width,w=s.height,_=!0;switch(!a&&e&&(a=d&&l?d/l:1),this.isLimited&&(g=u.minLeft,v=u.minTop,y=g+ye(s.width,c.width,c.left+c.width),w=v+ye(s.height,c.height,c.top+c.height)),o={x:this.endX-this.startX,y:this.endY-this.startY},a&&(o.X=o.y*a,o.Y=o.x/a),r){case de:f+=o.x,h+=o.y;break;case ie:if(o.x>=0&&(p>=y||a&&(h<=v||m>=w))){_=!1;break}d+=o.x,a&&(l=d/a,h-=o.Y/2),d<0&&(r=oe,d=0);break;case ae:if(o.y<=0&&(h<=v||a&&(f<=g||p>=y))){_=!1;break}l-=o.y,h+=o.y,a&&(d=l*a,f+=o.X/2),l<0&&(r=ne,l=0);break;case oe:if(o.x<=0&&(f<=g||a&&(h<=v||m>=w))){_=!1;break}d-=o.x,f+=o.x,a&&(l=d/a,h+=o.Y/2),d<0&&(r=ie,d=0);break;case ne:if(o.y>=0&&(m>=w||a&&(f<=g||p>=y))){_=!1;break}l+=o.y,a&&(d=l*a,f-=o.X/2),l<0&&(r=ae,l=0);break;case ce:
if(a){if(o.y<=0&&(h<=v||p>=y)){_=!1;break}l-=o.y,h+=o.y,d=l*a}else o.x>=0?p<y?d+=o.x:o.y<=0&&h<=v&&(_=!1):d+=o.x,o.y<=0?h>v&&(l-=o.y,h+=o.y):(l-=o.y,h+=o.y);d<0&&l<0?(r=se,l=0,d=0):d<0?(r=ue,d=0):l<0&&(r=re,l=0);break;case ue:if(a){if(o.y<=0&&(h<=v||f<=g)){_=!1;break}l-=o.y,h+=o.y,d=l*a,f+=o.X}else o.x<=0?f>g?(d-=o.x,f+=o.x):o.y<=0&&h<=v&&(_=!1):(d-=o.x,f+=o.x),o.y<=0?h>v&&(l-=o.y,h+=o.y):(l-=o.y,h+=o.y);d<0&&l<0?(r=re,l=0,d=0):d<0?(r=ce,d=0):l<0&&(r=se,l=0);break;case se:if(a){if(o.x<=0&&(f<=g||m>=w)){_=!1;break}d-=o.x,f+=o.x,l=d/a}else o.x<=0?f>g?(d-=o.x,f+=o.x):o.y>=0&&m>=w&&(_=!1):(d-=o.x,f+=o.x),o.y>=0?m<w&&(l+=o.y):l+=o.y;d<0&&l<0?(r=ce,l=0,d=0):d<0?(r=re,d=0):l<0&&(r=ue,l=0);break;case re:if(a){if(o.x>=0&&(p>=y||m>=w)){_=!1;break}d+=o.x,l=d/a}else o.x>=0?p<y?d+=o.x:o.y>=0&&m>=w&&(_=!1):d+=o.x,o.y>=0?m<w&&(l+=o.y):l+=o.y;d<0&&l<0?(r=ue,l=0,d=0):d<0?(r=se,d=0):l<0&&(r=ce,l=0);break;case fe:this.move(o.x,o.y),_=!1;break;case he:this.zoom(function(e,t,i,o){var n=je(e*e+t*t),a=je(i*i+o*o);return(a-n)/n}(_e(this.startX-this.startX2),_e(this.startY-this.startY2),_e(this.endX-this.endX2),_e(this.endY-this.endY2)),t),this.startX2=this.endX2,this.startY2=this.endY2,_=!1;break;case le:if(!o.x||!o.y){_=!1;break}i=this.$cropper.offset(),f=this.startX-i.left,h=this.startY-i.top,d=u.minWidth,l=u.minHeight,o.x>0?r=o.y>0?re:ce:o.x<0&&(f-=d,r=o.y>0?se:ue),o.y<0&&(h-=l),this.isCropped||(this.$cropBox.removeClass(z),this.isCropped=!0,this.isLimited&&this.limitCropBox(!0,!0))}_&&(u.width=d,u.height=l,u.left=f,u.top=h,this.action=r,this.renderCropBox()),this.startX=this.endX,this.startY=this.endY},crop:function(){this.isBuilt&&!this.isDisabled&&(this.isCropped||(this.isCropped=!0,this.limitCropBox(!0,!0),this.options.modal&&this.$dragBox.addClass(S),this.$cropBox.removeClass(z)),this.setCropBoxData(this.initialCropBox))},reset:function(){this.isBuilt&&!this.isDisabled&&(this.image=e.extend({},this.initialImage),this.canvas=e.extend({},this.initialCanvas),this.cropBox=e.extend({},this.initialCropBox),this.renderCanvas(),this.isCropped&&this.renderCropBox())},clear:function(){this.isCropped&&!this.isDisabled&&(e.extend(this.cropBox,{left:0,top:0,width:0,height:0}),this.isCropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),this.$dragBox.removeClass(S),this.$cropBox.addClass(z))},replace:function(e,t){!this.isDisabled&&e&&(this.isImg&&this.$element.attr("src",e),t?(this.url=e,this.$clone.attr("src",e),this.isBuilt&&this.$preview.find("img").add(this.$clone2).attr("src",e)):(this.isImg&&(this.isReplaced=!0),this.options.data=null,this.load(e)))},enable:function(){this.isBuilt&&(this.isDisabled=!1,this.$cropper.removeClass(C))},disable:function(){this.isBuilt&&(this.isDisabled=!0,this.$cropper.addClass(C))},destroy:function(){var e=this.$element;this.isLoaded?(this.isImg&&this.isReplaced&&e.attr("src",this.originalUrl),this.unbuild(),e.removeClass(z)):this.isImg?e.off(F,this.start):this.$clone&&this.$clone.remove(),e.removeData(k)},move:function(e,t){var o=this.canvas;this.moveTo(i(e)?e:o.left+ve(e),i(t)?t:o.top+ve(t))},moveTo:function(e,o){var n=this.canvas,a=!1;i(o)&&(o=e),e=ve(e),o=ve(o),this.isBuilt&&!this.isDisabled&&this.options.movable&&(t(e)&&(n.left=e,a=!0),t(o)&&(n.top=o,a=!0),a&&this.renderCanvas(!0))},zoom:function(e,t){var i=this.canvas;e=ve(e),e=e<0?1/(1-e):1+e,this.zoomTo(i.width*e/i.naturalWidth,t)},zoomTo:function(e,t){var i,o,n,a,r,s=this.options,c=this.canvas,u=c.width,d=c.height,l=c.naturalWidth,h=c.naturalHeight;if(e=ve(e),e>=0&&this.isBuilt&&!this.isDisabled&&s.zoomable){if(o=l*e,n=h*e,t&&(i=t.originalEvent),this.trigger(V,{originalEvent:i,oldRatio:u/l,ratio:o/l}).isDefaultPrevented())return;i?(a=this.$cropper.offset(),r=i.touches?f(i.touches):{pageX:t.pageX||i.pageX||0,pageY:t.pageY||i.pageY||0},c.left-=(o-u)*((r.pageX-a.left-c.left)/u),c.top-=(n-d)*((r.pageY-a.top-c.top)/d)):(c.left-=(o-u)/2,c.top-=(n-d)/2),c.width=o,c.height=n,this.renderCanvas(!0)}},rotate:function(e){this.rotateTo((this.image.rotate||0)+ve(e))},rotateTo:function(e){e=ve(e),t(e)&&this.isBuilt&&!this.isDisabled&&this.options.rotatable&&(this.image.rotate=e%360,this.isRotated=!0,this.renderCanvas(!0))},scale:function(e,o){var n=this.image,a=!1;i(o)&&(o=e),e=ve(e),o=ve(o),this.isBuilt&&!this.isDisabled&&this.options.scalable&&(t(e)&&(n.scaleX=e,a=!0),t(o)&&(n.scaleY=o,a=!0),a&&this.renderImage(!0))},scaleX:function(e){var i=this.image.scaleY;this.scale(e,t(i)?i:1)},scaleY:function(e){var i=this.image.scaleX;this.scale(t(i)?i:1,e)},getData:function(t){var i,o,n=this.options,a=this.image,r=this.canvas,s=this.cropBox;return this.isBuilt&&this.isCropped?(o={x:s.left-r.left,y:s.top-r.top,width:s.width,height:s.height},i=a.width/a.naturalWidth,e.each(o,function(e,n){n/=i,o[e]=t?$e(n):n})):o={x:0,y:0,width:0,height:0},n.rotatable&&(o.rotate=a.rotate||0),n.scalable&&(o.scaleX=a.scaleX||1,o.scaleY=a.scaleY||1),o},setData:function(i){var o,n,a,r=this.options,s=this.image,c=this.canvas,u={};e.isFunction(i)&&(i=i.call(this.element)),this.isBuilt&&!this.isDisabled&&e.isPlainObject(i)&&(r.rotatable&&t(i.rotate)&&i.rotate!==s.rotate&&(s.rotate=i.rotate,this.isRotated=o=!0),r.scalable&&(t(i.scaleX)&&i.scaleX!==s.scaleX&&(s.scaleX=i.scaleX,n=!0),t(i.scaleY)&&i.scaleY!==s.scaleY&&(s.scaleY=i.scaleY,n=!0)),o?this.renderCanvas():n&&this.renderImage(),a=s.width/s.naturalWidth,t(i.x)&&(u.left=i.x*a+c.left),t(i.y)&&(u.top=i.y*a+c.top),t(i.width)&&(u.width=i.width*a),t(i.height)&&(u.height=i.height*a),this.setCropBoxData(u))},getContainerData:function(){return this.isBuilt?this.container:{}},getImageData:function(){return this.isLoaded?this.image:{}},getCanvasData:function(){var t=this.canvas,i={};return this.isBuilt&&e.each(["left","top","width","height","naturalWidth","naturalHeight"],function(e,o){i[o]=t[o]}),i},setCanvasData:function(i){var o=this.canvas,n=o.aspectRatio;e.isFunction(i)&&(i=i.call(this.$element)),this.isBuilt&&!this.isDisabled&&e.isPlainObject(i)&&(t(i.left)&&(o.left=i.left),t(i.top)&&(o.top=i.top),t(i.width)?(o.width=i.width,o.height=i.width/n):t(i.height)&&(o.height=i.height,o.width=i.height*n),this.renderCanvas(!0))},getCropBoxData:function(){var e,t=this.cropBox;return this.isBuilt&&this.isCropped&&(e={left:t.left,top:t.top,width:t.width,height:t.height}),e||{}},setCropBoxData:function(i){var o,n,a=this.cropBox,r=this.options.aspectRatio;e.isFunction(i)&&(i=i.call(this.$element)),this.isBuilt&&this.isCropped&&!this.isDisabled&&e.isPlainObject(i)&&(t(i.left)&&(a.left=i.left),t(i.top)&&(a.top=i.top),t(i.width)&&(o=!0,a.width=i.width),t(i.height)&&(n=!0,a.height=i.height),r&&(o?a.height=a.width/r:n&&(a.width=a.height*r)),this.renderCropBox())},getCroppedCanvas:function(t){var i,o,n,a,r,s,c,u,d,f,h;if(this.isBuilt&&me)return this.isCropped?(e.isPlainObject(t)||(t={}),h=this.getData(),i=h.width,o=h.height,u=i/o,e.isPlainObject(t)&&(r=t.width,s=t.height,r?(s=r/u,c=r/i):s&&(r=s*u,c=s/o)),n=De(r||i),a=De(s||o),d=e("<canvas>")[0],d.width=n,d.height=a,f=d.getContext("2d"),t.fillColor&&(f.fillStyle=t.fillColor,f.fillRect(0,0,n,a)),f.drawImage.apply(f,function(){var e,t,n,a,r,s,u=l(this.$clone[0],this.image),d=u.width,f=u.height,p=this.canvas,m=[u],g=h.x+p.naturalWidth*(_e(h.scaleX||1)-1)/2,v=h.y+p.naturalHeight*(_e(h.scaleY||1)-1)/2;return g<=-i||g>d?g=e=n=r=0:g<=0?(n=-g,g=0,e=r=ye(d,i+g)):g<=d&&(n=0,e=r=ye(i,d-g)),e<=0||v<=-o||v>f?v=t=a=s=0:v<=0?(a=-v,v=0,t=s=ye(f,o+v)):v<=f&&(a=0,t=s=ye(o,f-v)),m.push(De(g),De(v),De(e),De(t)),c&&(n*=c,a*=c,r*=c,s*=c),r>0&&s>0&&m.push(De(n),De(a),De(r),De(s)),m}.call(this)),d):l(this.$clone[0],this.image)},setAspectRatio:function(e){var t=this.options;this.isDisabled||i(e)||(t.aspectRatio=we(0,e)||NaN,this.isBuilt&&(this.initCropBox(),this.isCropped&&this.renderCropBox()))},setDragMode:function(e){var t,i,o=this.options;this.isLoaded&&!this.isDisabled&&(t=e===le,i=o.movable&&e===fe,e=t||i?e:pe,this.$dragBox.data(te,e).toggleClass(L,t).toggleClass(M,i),o.cropBoxMovable||this.$face.data(te,e).toggleClass(L,t).toggleClass(M,i))}},v.DEFAULTS={viewMode:0,dragMode:"crop",aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,build:null,built:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},v.setDefaults=function(t){e.extend(v.DEFAULTS,t)},v.TEMPLATE='<div class="cropper-container"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-action="e"></span><span class="cropper-line line-n" data-action="n"></span><span class="cropper-line line-w" data-action="w"></span><span class="cropper-line line-s" data-action="s"></span><span class="cropper-point point-e" data-action="e"></span><span class="cropper-point point-n" data-action="n"></span><span class="cropper-point point-w" data-action="w"></span><span class="cropper-point point-s" data-action="s"></span><span class="cropper-point point-ne" data-action="ne"></span><span class="cropper-point point-nw" data-action="nw"></span><span class="cropper-point point-sw" data-action="sw"></span><span class="cropper-point point-se" data-action="se"></span></div></div>',v.other=e.fn.cropper,e.fn.cropper=function(t){var n,a=o(arguments,1);return this.each(function(){var i,o,r=e(this),s=r.data(k);if(!s){if(/destroy/.test(t))return;i=e.extend({},r.data(),e.isPlainObject(t)&&t),r.data(k,s=new v(this,i))}"string"==typeof t&&e.isFunction(o=s[t])&&(n=o.apply(s,a))}),i(n)?this:n},e.fn.cropper.Constructor=v,e.fn.cropper.setDefaults=v.setDefaults,e.fn.cropper.noConflict=function(){return e.fn.cropper=v.other,this}})},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(60),a=o(n),r=i(67),s=o(r),c=i(185),u=o(c),d=i(9);t.default={mixins:[a.default,s.default,u.default],ready:function(){},methods:{click:function(){var e=this,t=e.my.joinerId;t?e.$router.go({name:"labourday-joiner",params:{id:e.activityId,joinerId:t}}):(0,d.showBeforeJoinTiper)(e.showDialog,function(){e.visible=!0,setTimeout(function(){e.joining=!0},0)})}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(186),a=o(n);i(163),t.default={template:"#labourday",data:function(){return $.extend({active:!1,personal:!1,visible:!1,haloing:!1,eIndex:0,pageSwitch:{countdown:!0}},a.default)},computed:{labourday:function(){var e=this,t=e.activity,i=e.participant&&t?e.participant.vote_count/t.prizes.limit:1,o=Math.max(1,isNaN(i)?1:Math.floor(5*i));return o=e.participant&&e.participant.vote_count?o:"","http://cdn.s.shangjiadao.cn/source/images/labourday/skin"+t.others.skinner.code+"/step"+o+".jpg"}},methods:{textillateJoin:function(){setTimeout(function(){$("#labourday-join-btn").find("a").textillate({loop:!0,in:{effect:"rotateIn",delay:100},out:{effect:"fadeOut",sequence:!0,delay:1}})},2500)}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={category:"labourday",code:20,name:"欢度五一"}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(61),a=o(n),r=i(12),s=o(r),c=i(60),u=o(c),d=i(67),l=o(d),f=i(185),h=o(f),p=i(9);t.default={mixins:[u.default,l.default,h.default],route:{data:function(){var e=this;e.my.self||e.$nextTick(function(){e.vote()})}},data:function(){return{personal:!0}},computed:{required:function(){var e=this,t=e.activity;return t?Math.max(0,t.prizes.limit-e.participant.vote_count):0},completed:function(){return!this.required},ended:function(){var e=this,t=e.activity;return t.end_time<Math.round(Date.now()/1e3)}},methods:{alert:function(){var e=this;e.completed&&e.showDialog({title:"提示",content:e.my.self?"已完成，可以兑奖咯（商家联系方式可在活动页面上查找）":"TA已完成集欢乐值任务",confirm:!0})},click:function(){var e=this,t=e.my.joinerId;e.my.self?e.completed?e.alert():e.showSharer():t?e.$router.go({name:"labourday-joiner",params:{id:e.activityId,joinerId:t}}):(0,p.showBeforeJoinTiper)(e.showDialog,function(){e.visible=!0,setTimeout(function(){e.joining=!0},0)})},vote:function(e){var t=this,i=t.joinerId,o=(t.my.self?"":"帮TA",!1),n=0,r=0,c=[];if(t.completed)return t.alert(),!1;if(t.voter&&(t.voter.joiners.forEach(function(e){e.id==i&&(o=!0,t.my.self&&e.next_vote_date&&(n=e.next_vote_date,n<=Date.now()/1e3?o=!1:r=n-Date.now()/1e3))}),o)){if(r){var u=Math.floor(r/3600),d=Math.floor((r-3600*u)/60);u&&c.push(u+" 小时 "),d&&c.push(d+" 分钟")}return c=c.join(""),t.showDialog({title:"提示",content:t.my.self?'<font color="red">'+c+"</font> 后再点哦，朋友也能帮你哦！"+t.getShortTip():"你已帮TA增加过欢乐值",confirm:!0}),t.my.self&&t.genShorturl(),!1}return e===!0||(t.showLoading(),void $.post(a.default.activity.vote,{joiner_id:i,open_id:t.visitor?t.visitor.openId:"wx"+Date.now(),next_vote_date:n}).then(function(e){return t.hideLoading(),e.code?void $("body").tooltip(s.default[e.code],"danger"):(t.voteIn({joiner:{id:i,next_vote_date:e.data.next_vote_date,expires:1e3*t.activity.end_time}}),t.active=!0,void setTimeout(function(){t.participant.vote_count++,t.my.self?(t.genShorturl(),t.showDialog({title:"恭喜您",content:'<p><i class="fa fa-smile-o" aria-hidden="true"></i> 成功增加了一点欢乐值</p><p style="font-weight: bold;">如何找人帮忙<i class="fa fa-hand-o-down" aria-hidden="true"></i></p>'+t.getShortTip(),confirm:function(){return!0},button:{confirm:"我知道了"}})):t.haloing=!0},200))}))},hideHalo:function(){var e=this;e.haloing=!1}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(52),a=i(123),r=o(a),s=i(186),c=o(s);t.default={template:"#labourday-editor",mixins:[r.default],data:function(){var e=this,t=new Date,i=t.getFullYear(),o=t.getMonth(),n=t.getDate(),a=new Date(i,o,n),r=new Date(i,o,n+5);return $.extend({activity:{id:0,type:c.default.code,title:"迎五一赢好礼，爱卡洗车300元大礼包免费送",start_time:a.valueOf()/1e3,end_time:r.valueOf()/1e3,rules:"1.点击上方按钮“我要参加”参加活动。\n2.报名者自己每2小时可以点击【我要欢乐值】增加1个欢乐值。\n3.别人可以帮忙增加欢乐值。\n4.奖品份数有限，达标就会减少一份，份数领完则无法继续报名，亲速度哦！\n5.完成后，马上联系商家兑奖吧。\n",prizes:{count:100,image:"",limit:30,desc:"爱卡汽车大礼包包含：\n1.洗车券2张，价值50元\n2.汽车补漆100元抵用券2张，价值200元\n3.轮胎修补25元抵用券2张，价值50元\n到店出示手机号码，工作人员查询后直接兑奖。\n本店承诺无任何隐形消费，可直接抵扣相关费用。",vote_hours:2,text:"0元获得爱卡汽车300元大礼包",receive_prize_mobile:""+e.user.mobile},receive_info:"兑奖时间：\n机构地址：\n领奖电话："+e.user.mobile+"\n到店出示手机号码，工作人员查询核对后，兑奖。",host_info:"",host_img:[],others:{musician:"",foreground:{type:"",direction:""},skinner:{code:1,title:"劳动节快乐"},section_text:{receive_info:"兑奖信息",intro:"机构介绍"},join_customize:{customize_1:{name:"",required:0},customize_2:{name:"",required:0},customize_3:{name:"",required:0}}}},others:{skinner:{callback:function(t){e.activity.others.skinner=t}}}},c.default)},methods:{isValid:function(){var e=this,t=e.activity,i=(0,n.match)(JSON.stringify(t)),o="",a=!1;t.title?!t.prizes.vote_hours||t.prizes.vote_hours>24||t.prizes.vote_hours<1?o="每次投票时间间隔必须在1~24小时之间，请检查":e.clone_activity&&e.statistics&&e.statistics.join_count&&!e.is_clone&&t.prizes.vote_hours>e.clone_activity.prizes.vote_hours?o="【温馨提示】为了保证活动公平性，活动期间，报名者投票时间间隔只减不增":t.prizes.count?e.locked&&e.activity.prizes.count<e.clone_activity.prizes.count?o="已有用户报名，因此奖品数量必须大于原值【"+e.clone_activity.prizes.count+"】":t.prizes.limit?t.prizes.text?t.receive_info?t.prizes.desc?t.prizes.receive_prize_mobile?i.length?o="发现微信违规词："+i.join("、")+"，请修改后再发布！":a=!0:o="请设置咨询热线电话":o="请设置奖品描述":o="请设置领奖信息":o="请输入奖品描述":o="请输入欢乐值数量":o="请输入奖品份数":o="请设置活动标题";var r=!1,s=2;return $.each(t.others.join_customize,function(e,t){if(s++,t.required&&""==$.trim(t.name))return o="【信息收集设置】第 "+s+" 个信息项由于设置为必填项，因此名称不能为空！",void(r=!0)}),r&&(a=!1),t.prizes.count>1e3&&!window.confirm("哇，土豪，您的奖品份数超过 1000 了，是否继续保存?")&&(a=!1),a||o&&e.showDialog({title:"提示",content:o,confirm:!0}),a}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(190),a=o(n),r=i(10),s=(o(r),i(9)),c=i(43);i(163),i(49);var u=$("body");t.default={mixins:[a.default],data:function(){return{}},ready:function(){},computed:{joinerFields:function(){var e=this,t=e.joinFields,i=e.joinCustomize,o=void 0;if(!$.isEmptyObject(i))for(o in i)t.push(o);return t},joinerFieldNames:function(){var e=this,t=e.joinFieldNames,i=e.joinCustomize,o=void 0;if(!$.isEmptyObject(i))for(o in i)t.push(i[o].name);return t},joinBg:function(){var e=this;return(0,c.imagify)(e.activity.others.banner.src,"image/resize,w_640/quality,q_50")}},methods:{textillateJoin:function(){setTimeout(function(){$("#form-iwantjoin").textillate({loop:!0,in:{effect:"rotateIn",delay:500},out:{effect:"fadeOut",sequence:!0,delay:1}})},2500)},showJoin:function(){var e=this,t=e.countdown;if(!e.my){if(!t.started)return void u.tooltip("亲，活动未开始哦！","info");if(t.ended)return void u.tooltip("亲，活动已经结束了！","info")}e.my?(e.visible=!0,setTimeout(function(){e.joining=!0},0)):(0,s.showBeforeJoinTiper)(e.showDialog,function(){e.visible=!0,setTimeout(function(){e.joining=!0},0)})}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=i(21),r=o(a),s=i(10),c=o(s),u=i(191),d=o(u),l=i(11),f=o(l),h=i(12),p=o(h),m=i(40),g=o(m),v=i(51),y=o(v),w=i(45),_=o(w),b=i(62),x=o(b),j=i(63),D=o(j),k=i(64),S=o(k),T=i(65),z=i(9),I=i(26),M=i(52),L=$(document.body),C=window.location;t.default={template:"#form",components:{Message:g.default,Sharer:y.default,WaterfallFlowLoader:_.default,Foreground:D.default,Musician:x.default,Imager:S.default},vuex:{getters:{user:function(e){return e.user},joiner:function(e){return e.joiner},reminded:function(e){return e.reminded},sharable:function(e){return e.sharable},voter:function(e){return e.voter},visitor:function(e){return e.visitor}},actions:{showDialog:I.showDialog,showLoading:I.showLoading,hideLoading:I.hideLoading,joinIn:I.joinIn,joinOut:I.joinOut,pageIn:I.pageIn,toggleReminder:I.toggleReminder,toggleSharable:I.toggleSharable,voteIn:I.voteIn}},route:{data:function e(t){var i=this,o=t.to,n=Number(o.params.id)||0,a=i.getJoiner(n),r=a?a.joinerId:0,s=c.default.form+"/"+n,e={id:n,joiner_id:r};i.activity=null,i.loader=null,i.sharer=null,i.showLoading(),$.ajax({url:s,dataType:"text",data:e,success:function(e){if(e=$.parseJSON(e),e.data&&e.data.mobile&&(i.activityMobile=e.data.mobile),e.code)return"1005"==e.code?(C.href="/403.html",void t.abort()):"1217"==e.code?void(i.hasActivity=!1):void L.tooltip(p.default[e.code],"danger");if(e.data){var o=e.data.activity||e.data,a=e.data.statistics,s=e.data.joiners,u=i.sharable;if(!d.default.categories["c_"+o.type])return void(i.hasActivity=!1);!(0,T.matchCases)(o.user_id)&&o.completed_delay_days>=2&&(i.hasCompleted=!0),o.joiner&&o.joiner.removed&&(i.joinOut(r),i.showDialog({title:"重要提示",button:{confirm:"我知道了"},style:"text-align: left;",content:"您已被活动主办方取消名额，如有疑问，请联系主办方！【活动费用已原路退回，7个工作日内到账。】",confirm:function(){return window.location.reload(),!0}})),u&&i.toggleSharable(),i.pageIn({title:o.title,description:o.rules});var l={};try{l=JSON.parse(o.prizes)}catch(e){console.log(e.message)}var f={};try{f=JSON.parse(o.rules)}catch(e){console.log(e.message)}var h={};try{h=JSON.parse(o.content)}catch(e){console.log(e.message)}var m={};try{m=o.others&&JSON.parse(o.others)}catch(e){console.log("parse others error: "+e.message)}i.$nextTick(function(){i.startCountdown()});var g={},v={};if(m.join_customize){var y=void 0,w=void 0;for(y in m.join_customize)w=m.join_customize[y],""!=w.name&&(w.placeholder="请输入"+w.name,v[y]="",g[y]=w)}var _=d.default.categories["c_"+o.type];t.next({activity:$.extend({},o,{host_img:String(o.host_img).split(","),prizes:l,rules:f,content:h,others:m}),activityId:n,category:_,joinerId:r,joiners:[],miniJoiners:s,newJoiner:$.extend({},i.newJoiner,v),joinCustomize:$.extend({},i.joinCustomize,g),loader:{url:c.default.formRanking+"?id="+n,params:{id:n}},sharer:{autoShare:!u,autoShow:u,data:$.extend({joinerId:r,category:_},o),desc:o.share_content,imgUrl:o.share_img,link:window.location.href,title:o.share_title},statistics:a})}},error:function(){L.tooltip("活动加载失败","danger")},complete:function(){setTimeout(function(){$("div.about").find("img").scrollLoading()},100),i.bindQrcodeAnimate(),i.hideLoading()}})}},data:function(){return{activityMobile:null,activity:null,activityId:0,category:"",completedJoiners:{total:0,list:[]},hasActivity:!0,hasCompleted:!1,joinerId:0,joiners:[],miniJoiners:[],joining:!1,loader:null,newJoiner:{name:"",mobile:"",rank:""},joinCustomize:{},joinFields:["name","mobile"],joinFieldNames:["姓名","手机号码"],reading:!1,readed:!1,reading_countdown:3,reading_countdown_timer:null,opening:!0,sharer:null,statistics:null,visible:!1}},computed:{my:function(){var e=this;return e.getJoiner(e.activityId)},countdown:function(){var e=this,t=e.activity,i=Date.now(),o=1e3*t.end_time;return{time:o,text:"结束",ended:o<=i,started:!0}},tellink:function(){return"tel://"+this.activityMobile},hostinfo:function(){var e=this,t=e.activity.host_info,i=!1;try{t=JSON.parse((0,z.jsonFilter)(e.activity.host_info))}catch(e){console.log("parse host_info error: "+e.message)}return i=!(t.length&&"object"===("undefined"==typeof t?"undefined":n(t))),{content:i?e.activity.host_info:t,is_normal:i}}},ready:function(){this.checkOrder(!0)},beforeDestroy:function(){this.stopCountdown()},methods:{load:function(e){var t=this;Array.isArray(e)&&e.forEach(function(e){return t.joiners.push(e)})},getJoiner:function(e){var t=this,i={},o=!1;if(e=e||t.activityId,t.joiner){var n=t.joiner.activities;n.forEach(function(n){n.id==e&&(i=$.extend({},i,n),t.activity&&t.activity.joiner&&!t.activity.joiner.removed&&(i=$.extend({},i,t.activity.joiner)),o=!0)})}return o?i:null},join:function(e){var t=this,i=t.newJoiner.name,o=(0,M.matchJoin)(JSON.stringify({name:i})),n=t.joinCustomize,a=void 0,r=!0,s=t.activity.prizes,u="1"==s.need_payment&&"online"==s.payment_type;if(e.preventDefault(),o.length)return void(0,z.showJoinNotice)(t.showDialog);for(a in t.newJoiner)if(n[a]&&n[a].required&&""==$.trim(t.newJoiner[a])){L.tooltip(n[a].name+"不能为空","danger"),r=!1;break}return!!r&&(!t.readed&&u?(t.reading=!0,t.reading_countdown_timer=setInterval(function(){1==t.reading_countdown?(clearInterval(t.reading_countdown_timer),t.reading=!1,t.readed=!0):t.reading_countdown--},1e3),!1):(t.showLoading(),void $.ajax(u?c.default.formOrder:c.default.formJoin,{method:"POST",data:$.extend({},t.newJoiner,{id:t.activityId,open_id:t.visitor?t.visitor.openId:"wx"+Date.now()}),success:function(e){var i=e.data?e.data.joiner_id:"",o=e.data?Number(e.data.ctime):0,n=e.data?Number(e.data.rank):0;return e.code?(i&&t.joined({joinerId:i,rank:n,ctime:o}),void L.tooltip(p.default[e.code],"danger")):void(e.data&&(u?t.pay(e.data):i&&(t.joined({joinerId:i,rank:n,ctime:o}),t.showJoinSuccess(),t.hideLoading())))},error:function(){L.tooltip("报名失败","danger")},complete:function(){t.hideLoading()}})))},joined:function(e){var t=this,i=t.newJoiner.name,o=t.newJoiner.mobile,n=void 0;e.joinerId&&(n={id:t.activityId,joinerId:e.joinerId,expires:1e3*t.activity.end_time},e.rank&&(n.rank=e.rank),e.ctime&&(n.ctime=e.ctime),t.joining=!1,setTimeout(function(){t.visible=!1},500),t.joinIn({activity:$.extend(t.newJoiner,n),mobile:o,name:i}))},pay:function(e){var t=this,i=window.jWeixin;i&&!function(){var o=JSON.parse(e.api_parameters),n=t.newJoiner,a=n.name,r=n.mobile,s={count:0,limit:1,duration:800,id:e.order_id,message:"",mobile:r,name:a,status:0};i.chooseWXPay({timestamp:o.timeStamp,nonceStr:o.nonceStr,package:o.package,signType:o.signType,paySign:o.paySign,success:function(e){"chooseWXPay:ok"==e.errMsg&&(s.limit=15,s.status=1,t.showLoading("正在努力提交，请勿离开或关闭此页面，否则将无法报名成功")),s.message=e.errMsg,t.updateOrder(s)},cancel:function(e){s.message=e.errMsg,t.updateOrder(s)},fail:function(e){s.message="["+e.errMsg+"] ["+navigator.userAgent.toLowerCase()+"]",t.updateOrder(s),t.showDialog({title:"提示",content:t.user&&t.activity.user_id==t.user.id?"无法弹出微信支付界面，请将页面转发出去后再进入进行报名。":"网络通信出现问题，无法弹出微信支付界面，请换个网络或稍微再试。",confirm:!0})}})}()},updateOrder:function(e){var t=this;e&&(e.count++,z.LocalStorage.setItem("form_order",e),$.post(c.default.formPay,{message:e.message,status:e.status,order_id:e.id,token:(0,r.default)(""+e.mobile+f.default.token)}).then(function(e){if(e.code)return void t.checkOrder();if(z.LocalStorage.removeItem("form_order"),e.data){var i=e.data.joiner_id,o=Number(e.data.ctime),n=Number(e.data.rank);i&&(t.joined({joinerId:i,ctime:o,rank:n}),t.hideLoading(),t.showJoinSuccess())}},function(){t.checkOrder()}))},checkOrder:function(e){var t=this,i=z.LocalStorage.getItem("form_order");if($.isPlainObject(i))if(i.count<i.limit){if(e)return void t.updateOrder(i);setTimeout(function(){t.updateOrder(i)},i.count*i.duration)}else z.LocalStorage.removeItem("form_order")},showJoinSuccess:function(){var e=this;e.showDialog({title:"提示",content:"恭喜您，报名成功！",confirm:!0})},close:function(e){var t=this;t[e]=!1,setTimeout(function(){t.visible=!1},500)},startCountdown:function(){var e=this;e.stopCountdown(),e.$countdown=$(e.$els.countdown).countdown()},stopCountdown:function(){var e=this;e.$countdown&&(e.$countdown.countdown("destroy"),e.$countdown=null)},showqrcode:function(){var e=this;(0,z.displayShareQrcode)({type:d.default.categories["c_"+e.activity.type],name:"",title:e.activity.title,activityId:e.activity.id,joinerId:e.joinerId||0},e.showDialog,e.showLoading,e.hideLoading)},bindQrcodeAnimate:function(){setTimeout(function(){var e=$("header").find("a.qrcode");e.length&&setInterval(function(){e.addClass("ani"),setTimeout(function(){e.removeClass("ani")},2e3)},6e3)},500)}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={codes:{form:21,form2:22},names:{form:"微报名（线上支付版）",form2:"微报名"},categories:{c_21:"form",c_22:"form2"}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=i(72),r=o(a),s=i(191),c=o(s),u=i(10),d=o(u),l=i(12),f=o(l),h=i(73),p=o(h),m=i(75),g=o(m),v=i(62),y=o(v),w=i(74),_=o(w),b=i(77),x=o(b),j=i(63),D=o(j),k=i(64),S=o(k),T=i(76),z=o(T),I=i(78),M=o(I),L=i(51),C=o(L),O=i(52),P=i(9),E=i(26),A=$(document.body);t.default={template:"#form-editor",components:{Uploader:p.default,miniEditor:g.default,Musician:y.default,Userguide:_.default,miniLogin:x.default,Foreground:D.default,Imager:S.default,joinCustomize:M.default,Sharer:C.default},vuex:{getters:{user:function(e){return e.user}},actions:{showDialog:E.showDialog,showLoading:E.showLoading,hideLoading:E.hideLoading,pageIn:E.pageIn,toggleSharable:E.toggleSharable}},route:{data:function(e){function t(t){var o=i.name,n="制作";if(t){var a=c.default.categories["c_"+t.type];i.category=a,i.name=c.default.names[a],o=t.title,n="clone"==i.$route.query.action?"复制":"编辑"}i.pageIn({title:"【"+n+"】"+o}),i.$nextTick(function(){i.initPicker()}),e.next({activated:!0})}var i=this,o=i.$route,a=Number(o.params.id)||0,r=$.trim(o.params.category)||"form";return a||(i.activity.type=c.default.codes[r],i.name=c.default.names[r],i.category=r),i.is_clone="clone"==o.query.action,a?(i.showLoading(),void $.ajax(d.default.form+"/"+a,{data:{token:i.user.token},dataType:"text",success:function(a){if(a=$.parseJSON(a),a.code)return void i.fail(a);if(a.data){var r=a.data.activity;r.user_id!=i.user.id&&e.abort(),"clone"==o.query.action&&(r.id="");var s={},c={};try{s=(0,P.priceFilter)(JSON.parse(r.prizes),{pattern:/price|amount/}),c=(0,P.priceFilter)(JSON.parse(r.prizes),{pattern:/price|amount/})}catch(e){console.log("parse prizes error: "+e.message)}var u=r.host_info;try{u=r.host_info&&JSON.parse((0,P.jsonFilter)(r.host_info))}catch(e){console.log("parse host_info error: "+e.message)}u.length&&"object"===("undefined"==typeof u?"undefined":n(u))&&(r.host_info=u);var d=r.rules;try{d=r.rules&&JSON.parse((0,P.jsonFilter)(r.rules))}catch(e){console.log("parse rules error: "+e.message)}d.length&&"object"===("undefined"==typeof d?"undefined":n(d))&&(r.rules=d);var l=r.content;try{l=r.content&&JSON.parse((0,P.jsonFilter)(r.content))}catch(e){console.log("parse content error: "+e.message)}l.length&&"object"===("undefined"==typeof l?"undefined":n(l))&&(r.content=l);var f={};try{f=r.others&&JSON.parse((0,P.jsonFilter)(r.others)),f="object"===("undefined"==typeof f?"undefined":n(f))?$.extend(i.activity.others,f):i.activity.others}catch(e){console.log("parse others error: "+e.message)}r.prizes=s,i.copy_prizes=c,r.others=f,i.activity=r,i.statistics=a.data.statistics,t(r)}},error:function(){A.tooltip("活动加载失败","danger")},complete:function(){i.hideLoading()}})):void t()}},data:function(){var e=this,t=new Date,i=t.getFullYear(),o=t.getMonth(),n=t.getDate(),a=new Date(i,o,n+5);return{activated:!1,expired:!1,editable:!0,category:"",name:"",activity:{id:"",type:"",title:"小星星英语周末英语沙龙开始报名啦",end_time:a.valueOf()/1e3,prizes:{mobile:e.user.mobile,limit_opened:"0",limit:"",need_payment:"0",amount:"",payment_type:"offline"},rules:[{type:"text",v:"活动主办：万达小星星英语\n活动时间：5月20日9：00\n活动地点：龙湾区龙江路万达豪园酒店3楼A厅\n报名后请等待主办方进行电话联系；\n前30个报名者赠送儿童水杯一个。\n",style:"",style_config:{}}],content:[{type:"text",v:"小星星英语周末英语沙龙开始报名啦。\n本次诚邀国际著名儿童口语专家Jim为各位宝妈宝爸进行儿童口语教育的知识讲解，机会不容错过哦。\n本次仅限3岁-10岁的宝宝以及父母参加哦，一个报名最多可包含2大1小进场票。\n报名人多费用减免哦（详见报名须知）\n",style:"",style_config:{}}],host_info:"",others:{musician:"",foreground:{type:"",direction:""},section_text:{rules:"报名须知",content:"活动内容",intro:"关于我们"},banner:{src:"http://cdn.s.shangjiadao.cn/source/images/components/imager/form/05.jpg?2"},join_customize:{customize_1:{name:"",required:0},customize_2:{name:"",required:0},customize_3:{name:"",required:0}}}},rules:{uploaded:!1,minieditor:{uploader:{maxlength:10,placeholder:"（点击选择图片，不上传则不显示）",description:"添加图片（最多添加 10 张图片）",error:function(){e.submitting=!1,$("body").tooltip("报名须知图片上传失败","danger")},success:function(t){e.activity.rules=t,e.rules.uploaded=!0,e.publish()}},texter:{placeholder:"此处可修改字体样式：加粗、斜体、下划线、字体大小颜色...",description:"添加文本（最多添加 10 个文本内容）",maxlength:10},video:{placeholder:"请输入视频地址【支持优酷、腾讯视频】",description:"添加视频（最多添加 5 个视频）",maxlength:5}}},content:{uploaded:!1,minieditor:{uploader:{maxlength:10,placeholder:"（点击选择图片，不上传则不显示）",description:"添加图片（最多添加 10 张图片）",error:function(){e.submitting=!1,$("body").tooltip("活动内容图片上传失败","danger")},success:function(t){console.log("callback:"),console.log(t),e.activity.content=t,e.content.uploaded=!0,e.publish()}},texter:{placeholder:"此处可修改字体样式：加粗、斜体、下划线、字体大小颜色...",description:"添加文本（最多添加 10 个文本内容）",maxlength:10},video:{placeholder:"请输入视频地址【支持优酷、腾讯视频】",description:"添加视频（最多添加 5 个视频）",maxlength:5}}},intro:{uploaded:!1,minieditor:{uploader:{maxlength:10,placeholder:"（点击选择图片，不上传则不显示）",description:"添加图片（最多添加 10 张图片）",error:function(){e.submitting=!1,$("body").tooltip("关于我们图片上传失败","danger")},success:function(t){e.activity.host_info=t,e.intro.uploaded=!0,e.publish()}},texter:{placeholder:"此处可修改字体样式：加粗、斜体、下划线、字体大小颜色...",description:"添加文本（最多添加 10 个文本内容）",maxlength:10},video:{placeholder:"请输入视频地址【支持优酷、腾讯视频】",description:"添加视频（最多添加 5 个视频）",maxlength:5}}},others:{musician:{callback:function(t){e.activity.others.musician=t}},foreground:{callback:function(t){
e.activity.others.foreground=t}},section_text:{rules:"报名须知",content:"活动内容",intro:"关于我们"},imager:{switcies:{font:!1},callback:function(t){e.activity.others.banner=t}},join_customize:{callback:function(t){e.activity.others.join_customize=t}}},statistics:null,submitting:!1,is_clone:!1,copy_prizes:null,sharer:null}},computed:{locked:function(){var e=this,t=e.statistics;return e.activity.id>0&&t&&t.join_count>0&&!e.is_clone},completed:function(){var e=this,t=(new Date).getTime()/1e3;return e.activity.end_time<=t}},ready:function(){var e=this;"clone"==e.$route.query.action&&(0,P.showCloneTiper)(e.showDialog),setTimeout(function(){(0,z.default)($("textarea",e.$el).not(".nosize"))},2500)},beforeDestroy:function(){var e=this;e.endDatePicker&&e.endDatePicker.destroy()},methods:{initPicker:function(){var e=this,t=$(e.$el),i=t.find(".end-date"),o={format:"YYYY-MM-DD HH:mm",increment:{minute:10},text:{cancel:"取消",confirm:"确认"},translate:function(e,t){var i={year:"年",month:"月",day:"日",hour:"点",minute:"分"};return Number(t)+i[e]}},n=$.extend(!0,{},o,{text:{title:"请选择活动结束时间"}}),a=new r.default(i[0],n);e.endDatePicker=a,i.on("change",function(t){var i=Math.round(a.getDate().getTime()/1e3);e.activity.end_time=i})},toggle:function(){var e=this;e.editable=!e.editable,document.body.scrollTop=0,setTimeout(function(){(0,z.default)($("textarea",e.$el))},2e3)},fail:function(e,t){var i=this,o=e.code;1100==o?(0,P.showKickedOffline)(e.data.time,e.data.ip,i.showDialog,function(){i.expired=!0}):1101==o?(0,P.showExpireTip)(i.showDialog):1102==o?i.expired=!0:i.$root.$emit("show.snackbar",{color:"accent",message:f.default[o]}),i.hideLoading(),t&&t()},submit:function(e){var t=this,i=t.activity,o=i.prizes,n=(0,O.match)(JSON.stringify(i));if(e.preventDefault(),!i.title)return void t.showDialog({title:"提示",content:"请设置 活动标题",confirm:!0});if(!i.others.banner.src)return void t.showDialog({title:"提示",content:"请设置 顶部海报",confirm:!0});if("1"==o.limit_opened&&o.limit<1)return void t.showDialog({title:"提示",content:"限制报名人数必须 >= 1",confirm:!0});if("1"==o.need_payment&&o.amount<=0)return void t.showDialog({title:"提示",content:"报名费用必须 > 0 元",confirm:!0});if(t.copy_prizes&&t.statistics&&t.statistics.join_count&&!t.is_clone){var a=t.copy_prizes;if("1"==a.need_payment&&("0"==o.need_payment||a.amount!=o.amount||a.payment_type!=o.payment_type))return void t.showDialog({title:"提示",content:"已有用户报名，无法修改付费方式和费用",confirm:!0})}if(!i.prizes.mobile)return void t.showDialog({title:"提示",content:"请设置咨询电话",confirm:!0});var r=!1,s=2;return $.each(i.others.join_customize,function(e,i){if(s++,i.required&&""==$.trim(i.name))return t.showDialog({title:"提示",content:"【信息收集设置】第 "+s+" 个信息项由于设置为必填项，因此名称不能为空！",confirm:!0}),void(r=!0)}),r?void 0:n.length?void t.showDialog({title:"提示",content:"发现微信违规词："+n.join("、")+"，请修改后再发布！",confirm:!0}):void(t.submitting||(t.submitting=!0,t.showLoading("正在提交数据..."),$.ajax(d.default.uploadSignature,{method:"get",data:{token:t.user.token,type:2},dataType:"json",success:function(e){return e.code?(t.submitting=!1,t.hideLoading(),void t.fail(e)):(t.showLoading("正在上传图片，请勿离开或关闭页面"),void(e.data&&t.$root.$emit("upload.uploader",e.data)))},error:function(){t.submitting=!1,t.hideLoading(),t.$root.$emit("show.snackbar",{color:"accent",message:"保存失败，请检查网络是否正常连接！"})}})))},publish:function(){var e=this;if(e.rules.uploaded&&e.content.uploaded&&e.intro.uploaded&&!e.publishing){e.sharer=null,e.sharer=null,e.publishing=!0,e.showLoading("正在提交数据，请勿离开或关闭页面");var t=(0,P.expressionFilter)($.extend(!0,{},e.activity));$.ajax(d.default.form,{method:t.id?"put":"post",data:$.extend(t,{prizes:JSON.stringify((0,P.priceFilter)(t.prizes,{pattern:/price|amount/,reversed:!0})),others:JSON.stringify(t.others),token:e.user.token}),success:function(i){return i.code?void e.fail(i):void A.one("hidden.tooltip",function(){e.sharer={autoShare:!1,autoShow:!0,data:$.extend(t,{category:e.category,id:t.id||i.data.id}),desc:t.share_content,imgUrl:t.share_img,title:t.share_title}}).tooltip("show",{content:"活动保存成功",style:"success",duration:1e3})},error:function(){A.tooltip("活动发布失败","danger")},complete:function(){e.submitting=!1,e.publishing=!1,e.hideLoading()}})}}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(10),a=o(n),r=i(12),s=o(r),c=i(35),u=o(c),d=i(26),l=$(document.body);t.default={template:"#form-settle",vuex:{getters:{user:function(e){return e.user},visitor:function(e){return e.visitor}},actions:{showDialog:d.showDialog,showLoading:d.showLoading,hideLoading:d.hideLoading,pageIn:d.pageIn}},data:function(){return{code:"",submitting:!1,settled:!1}},ready:function(){var e=this;e.pageIn({title:"转入钱包"})},beforeDestroy:function(){var e=this;e.countdown&&e.countdown.destroy()},methods:{sendCaptcha:function(e){var t=this,i=e.target;i.disabled||t.requesting||(t.requesting=!0,$.ajax(a.default.formSettle,{data:{id:t.$route.params.id,token:t.user.token},success:function(e){return e.code?void l.tooltip(s.default[e.code],"danger"):(l.tooltip("短信验证码发送成功","success"),void(t.countdown=new u.default(i,{template:"%d秒后重新获取",seconds:60})))},complete:function(){t.requesting=!1}}))},submit:function(e){var t=this;e.preventDefault(),t.submitting||t.settled||(t.submitting=!0,$.ajax(a.default.formSettle,{method:"POST",data:{amount:t.$route.query.amount,code:t.code,id:t.$route.params.id,open_id:t.visitor?t.visitor.openId:"wx"+Date.now(),token:t.user.token},success:function(e){return e.code?void l.tooltip(s.default[e.code],"danger"):(t.settled=!0,t.$root.$emit("show.snackbar",{message:"转入成功，请至【个人中心】=>【钱包】查看"}),void setTimeout(function(){t.$router.go({name:"form-joiners",params:{id:t.$route.params.id},query:{type:"16"}})},3e3))},complete:function(){t.submitting=!1}}))}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(10),a=o(n),r=i(12),s=o(r),c=i(167),u=o(c),d=i(45),l=o(d),f=i(9),h=i(26);$(document.body);t.default={template:"#form-joiners",components:{Searchbar:u.default,WaterfallFlowLoader:l.default},vuex:{getters:{user:function(e){return e.user}},actions:{showDialog:h.showDialog,showLoading:h.showLoading,hideLoading:h.hideLoading,pageIn:h.pageIn}},route:{data:function(e){var t=this;t.$route;e.next({})}},data:function(){return{joiners:[],joinerIds:[],settleable:!1,has_settled:!1,total_number:0,total_amount:0,exception_number:0,keyword:"",category:0,categories:["报名表单","异常订单","退款历史"],category_apis:[a.default.formJoiners,a.default.formExceptionJoiners,a.default.formRefunds],loaders:{},activity:{}}},computed:{loader:function(){var e=this,t=e.$route,i={id:t.params.id,token:e.user.token},o=e.category_apis[e.category];return e.joiners=[],e.joinerIds=[],e.keyword&&(i.keyword=e.keyword),e.loaders=i,{params:i,url:o}}},ready:function(){var e=this;e.pageIn({title:"微报名-"+e.categories[e.category]})},methods:{load:function(e,t){var i=this;Array.isArray(e)&&e.forEach(function(e){e.is_exchanged=Number(e.is_exchanged),$.inArray(e.id,i.joinerIds)<0&&i.joiners.push(e)}),t&&(t.activity&&(i.activity=t.activity),t.settleable&&(i.settleable=t.settleable),t.has_settled&&(i.has_settled=t.has_settled),t.total_number&&(i.total_number=t.total_number),t.total_amount&&(i.total_amount=t.total_amount),t.exception_number&&(i.exception_number=t.exception_number))},goCategory:function(e){this.category=e},fail_action:function(e,t){var i=this,o=e.code;if(1100==o)(0,f.showKickedOffline)(e.data.time,e.data.ip,i.showDialog);else if(1101==o)(0,f.showExpireTip)(i.showDialog);else{if(1102==o)return void i.$router.go({name:"signout"});i.$root.$emit("show.snackbar",{color:"accent",message:s.default[o]})}i.hideLoading(),t&&t()},search:function(e){this.keyword=e},alert:function(){var e=this,t="";e.has_settled&&(t="已转入钱包，请在钱包中的收支明细查看。"),e.settleable||(t="活动结束方可转入钱包！"),e.settleable&&!e.total_amount&&(t="没有可转入金额"),t.length&&this.showDialog({title:"提示",content:t,confirm:!0})},showActionsheet:function(e){var t=e.target.getAttribute("href")?$(e.target.getAttribute("href")):$($(e.target).parent().attr("href")),i=t.find(".weui_mask_transition");e.preventDefault(),i.show().addClass("weui_fade_toggle"),t.find(".weui_actionsheet").addClass("weui_actionsheet_toggle")},hideActionsheet:function(e,t){var i=$(e.target).closest(".weui_actionsheet_container"),o=i.find(".weui_mask_transition");i.find(".weui_actionsheet").removeClass("weui_actionsheet_toggle"),o.removeClass("weui_fade_toggle"),setTimeout(function(){o.hide(),t&&t()},300)},exchange:function(e){var t=this,i=$(e.target),o=t.joiners[Number("undefined"==typeof e.target.dataset.index?i.parent().data("index"):e.target.dataset.index)],n=o.is_exchanged;t.hideActionsheet(e),this.showDialog({title:n?"确认撤销标记？":"确认标记？",cancel:!0,confirm:function(){return t.showLoading(),$.ajax(a.default.activityExchange,{method:"POST",data:{joiner_id:o.id,token:t.user.token},success:function(e){return e.code?void t.fail_action(e):(t.$root.$emit("show.snackbar",{message:n?"撤销成功":"标记成功"}),void(o.is_exchanged=!n))},complete:function(){t.hideLoading()}}),!0}})},remove:function(e){var t=this,i=$(e.target),o=t.joiners[Number("undefined"==typeof e.target.dataset.index?i.parent().data("index"):e.target.dataset.index)],n=o.activity_id,r=o.id,s=o.mobile,c=t.activity,u=c.online_payment?a.default.formRemove+"?token="+t.user.token+"&id="+n+"&mobile="+s:a.default.activityJoiner+"?token="+t.user.token+"&joiner_id="+r;return t.hideActionsheet(e),c.online_payment&&t.has_settled?void this.showDialog({title:"亲，活动费用已经结算了，无法删除报名者哟！",button:{confirm:"我知道了"},confirm:function(){return!0}}):void this.showDialog({title:"确认删除“"+o.name+"”吗？",content:c.online_payment?"删除后，活动费用将原路返回给用户":"确认删除吗？删除后无法恢复",cancel:!0,confirm:function(){return t.showLoading(),$.ajax(u,{method:"DELETE",success:function(e){return e.code?void t.fail_action(e):(t.$root.$emit("show.snackbar",{message:"删除成功"}),void(o.status=0))},complete:function(){t.hideLoading()}}),!0}})},modify:function(e){var t=this,i=$(e.target),o=t.joiners[Number("undefined"==typeof e.target.dataset.index?i.parent().data("index"):e.target.dataset.index)],n=(o.id,o.name);t.hideActionsheet(e),this.showDialog({title:"修改报名信息",cancel:!0,button:{confirm:"保存"},content:'<p>姓名：<input type="text"  value="'+n+'" id="dialog_text_name" placeholder="请输入报名者姓名"/></p>',confirm:function(){var e=$("#dialog_text_name"),i=$.trim(e.val());return i.length?(t.showLoading(),$.ajax(""+a.default.activityJoiner,{method:"PUT",data:{joiner_id:o.id,token:t.user.token,name:i},success:function(e){return e.code?void t.fail_action(e):(t.$root.$emit("show.snackbar",{message:"保存成功"}),void(o.name=i))},complete:function(){t.hideLoading()}}),!0):(t.$root.$emit("show.snackbar",{message:"姓名不能为空哟"}),e.focus(),!1)}})},modifyCustomize:function(e){var t=this,i=$(e.target),o=t.joiners[Number("undefined"==typeof e.target.dataset.index?i.parent().data("index"):e.target.dataset.index)],n=(o.id,"undefined"==typeof e.target.dataset.field?i.parent().data("field"):e.target.dataset.field),r=t.activity.customize[n],s=o[n];t.hideActionsheet(e),this.showDialog({title:"修改报名信息",cancel:!0,button:{confirm:"保存"},content:"<p>"+r+'：<input type="text"  value="'+s+'" id="dialog_text_name" placeholder="请输入'+r+'"/></p>',confirm:function(){var e=$("#dialog_text_name"),i=$.trim(e.val());return i.length?(t.showLoading(),$.ajax(""+a.default.formJoinerProfile,{method:"PUT",data:{joiner_id:o.id,token:t.user.token,value:i,field:n},success:function(e){return e.code?void t.fail_action(e):(t.$root.$emit("show.snackbar",{message:r+"修改成功"}),void(o[n]=i))},complete:function(){t.hideLoading()}}),!0):(t.$root.$emit("show.snackbar",{message:r+"不能为空哟"}),e.focus(),!1)}})},refund:function(e){var t=this,i=t.joiners[Number("undefined"==typeof e.target.dataset.index?$target.parent().data("index"):e.target.dataset.index)],o=i.activity_id,n=i.id;return n?void t.showDialog({title:"提示",content:"确定要退款吗？",cancel:!0,confirm:function(){return t.showLoading("正在处理退款中..."),$.post(a.default.formExceptionOrderRefund,{id:o,orderid:n,token:t.user.token}).then(function(i){return t.hideLoading(),i.code?void $("body").tooltip(s.default[i.code],"danger"):($(e.target).parent().parent().fadeOut(),void t.$root.$emit("show.snackbar",{message:"退款成功"}))}),!0}}):void $("body").tooltip("订单不存在","danger")},showNoticeTiper:function(){this.showDialog({title:"异常订单说明",style:{"text-align":"left"},button:{confirm:"我知道了"},content:"<p>①什么是异常订单？答：用户支付成功但未正常加入，无报名记录。</p><p>②该如何处理异常订单？答：点击 “退款” 将活动费用原路退回到用户支付账户，并让用户重新进行报名并付款即可。</p><p>③异常订单里的预付款能提现吗？答：由于异常订单的报名者未能报名成功，因此无法提现。</p>",confirm:!0})}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(60),a=o(n),r=i(67),s=o(r),c=i(196),u=o(c),d=i(9);t.default={mixins:[a.default,s.default,u.default],ready:function(){},methods:{click:function(){var e=this,t=e.my.joinerId;t?e.$router.go({name:"zongzi-joiner",params:{id:e.activityId,joinerId:t}}):(0,d.showBeforeJoinTiper)(e.showDialog,function(){e.visible=!0,setTimeout(function(){e.joining=!0},0)})}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(197),a=o(n),r=i(10),s=o(r);i(163),t.default={template:"#zongzi",data:function(){return $.extend({active:!1,personal:!1,visible:!1,votestat:"",api:{joiner:s.default.zongzi+"/joiner"},pageSwitch:{countdown:!0}},a.default)},methods:{textillateJoin:function(){setTimeout(function(){$("#zongzi-join-btn").find("a").textillate({loop:!0,in:{effect:"rotateIn",delay:100},out:{effect:"fadeOut",sequence:!0,delay:1}})},2500)}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={category:"zongzi",code:23,name:"吃粽子"}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(10),a=o(n),r=i(12),s=o(r),c=i(60),u=o(c),d=i(67),l=o(d),f=i(196),h=o(f),p=i(9);t.default={mixins:[u.default,l.default,h.default],route:{data:function(e){var t=this;t.my.self||t.$nextTick(function(){t.showVoteModal()}),t.helpers=[],t.helper_total=0,t.helper_page=1,t.helper_nomore=!1,t.helper_loading=!1,t.helper_loaded=!1,t.resetVoteStat(),t.joinerId&&setTimeout(function(){t.vote(!0,!0)&&!t.my.self||t.loadHelpers()},1e3)}},data:function(){return{personal:!0,helpers:[],helper_total:0,helper_page:1,helper_listrows:5,helper_nomore:!1,helper_loading:!1,helper_loaded:!1,vote_count:0,vote_helper:"",vote_timers:10,vote_interval:null,vote_clicker:0,voteAniStat:{stat:"ready",mouse:"ready",hand:""}}},computed:{required:function(){var e=this,t=e.activity;return t?Math.max(0,t.prizes.limit-e.participant.vote_count):0},completed:function(){return!this.required},ended:function(){var e=this,t=e.activity;return t.end_time<Math.round(Date.now()/1e3)}},methods:{alert:function(){var e=this;e.completed&&e.showDialog({title:"提示",content:e.my.self?"已完成，可以兑奖咯（商家联系方式可在活动页面上查找）":"TA已完成吃粽子任务",confirm:!0})},click:function(){var e=this,t=e.my.joinerId;e.my.self?e.completed?e.alert():e.showSharer():t?e.$router.go({name:"zongzi-joiner",params:{id:e.activityId,joinerId:t}}):(0,p.showBeforeJoinTiper)(e.showDialog,function(){e.visible=!0,setTimeout(function(){e.joining=!0},0)})},vote:function(e,t){var i=this,o=i.joinerId,n=(i.my.self?"":"帮TA",!1),r=0,c=0,u=[],d=i.participant;if(i.completed)return i.alert(),!1;if(i.voter&&(i.voter.joiners.forEach(function(e){e.id==o&&(n=!0,i.my.self&&e.next_vote_date&&(r=e.next_vote_date,r<=Date.now()/1e3?n=!1:c=r-Date.now()/1e3))}),n)){if(c){var l=Math.floor(c/3600),f=Math.floor((c-3600*l)/60);l&&u.push(l+" 小时 "),f&&u.push(f+" 分钟")}return u=u.join(""),!t&&i.showDialog({title:"提示",content:i.my.self?'<font color="red">'+u+"</font> 后再点哦，朋友也能帮你哦！"+i.getShortTip():"你已经帮TA吃过粽子了",confirm:!0}),i.my.self&&i.genShorturl(),!1}return e===!0||(i.showLoading(),void $.post(a.default.zongzi+"/vote",{joiner_id:o,open_id:i.visitor?i.visitor.openId:"wx"+Date.now(),next_vote_date:r,name:i.my.self?""+i.participant.name:i.vote_helper,vote_code:d.vote_codes?d.vote_codes[i.vote_count-1]:""}).then(function(e){return i.hideLoading(),e.code?void $("body").tooltip(s.default[e.code],"danger"):(i.voteIn({joiner:{id:o,next_vote_date:e.data.next_vote_date,expires:1e3*i.activity.end_time}}),void setTimeout(function(){var e=Number(i.participant.vote_count)||0;i.participant.vote_count=e+i.vote_count,i.loadHelpers(),i.my.self&&(i.genShorturl(),i.showDialog({title:"恭喜您",content:'<p><i class="fa fa-smile-o" aria-hidden="true"></i> 为自己吃了 '+i.vote_count+' 个粽子</p><p style="font-weight: bold;">如何找人帮忙<i class="fa fa-hand-o-down" aria-hidden="true"></i></p>'+i.getShortTip(),confirm:function(){return!0},button:{confirm:"我知道了"}}))},200))}))},showVoteModal:function(){var e=this;e.vote(!0)&&(e.resetVoteStat(),e.votestat="in")},start:function(){var e=this;e.vote_interval||(e.voteAniStat.stat="doing",e.vote_interval=setInterval(function(){if(e.vote_timers--,e.vote_timers<=0)return clearInterval(e.vote_interval),e.voteAniStat.stat="done",void e.showVoteTip()},1e3))},aniGo:function(e){var t=this;if(t.vote_count>=3)t.voteAniStat.mouse="full",t.voteAniStat.hand="";else{t.vote_clicker++;var i=t.vote_clicker%10;t.voteAniStat.mouse=t.vote_clicker%2==0?"eating":"open",t.voteAniStat.hand=0==i?"step10":"step"+i,0==i&&t.vote_count++}},showVoteTip:function(){var e=this;e.my.self?e.showDialog({content:e.vote_count>0?"恭喜你，成功吃了"+e.vote_count+"个粽子，再接再励，歇会再吃吧。":"好遗憾，吃了 0 个粽子，再接再励。",confirm:function(){return e.vote_count>0&&(e.vote(),e.votestat="hide"),e.votestat="hide",!0},button:{confirm:"确认"}}):e.vote_count>0?e.showDialog({content:'<p style="text-align: left;margin-bottom: 1rem;">恭喜你，成功帮'+e.participant.name+"吃了 "+e.vote_count+' 个粽子，赶快留下大名告诉他。</p><p style="text-align: left;">大侠姓名 <input style="background: none;" type="text" value="" id="dialog-zongzi-helper-name" maxlength="15"></p>',button:{confirm:"确认",cancel:"不想留名"},confirm:function(){return e.vote_helper=$.trim($("#dialog-zongzi-helper-name").val()),e.vote(),e.votestat="hide",!0},cancel:function(){return e.vote_helper="",e.vote(),e.votestat="hide",!0}}):e.showDialog({content:"好遗憾，帮 "+e.participant.name+" 吃了 0 个粽子。",button:{confirm:"确认"},confirm:function(){return e.loadHelpers(),e.votestat="hide",!0}})},loadHelpers:function(e){var t=this,i=e&&e.target;t.helper_loading||(i&&t.helper_page++,t.helper_loading=!0,$.ajax({type:"get",url:a.default.zongzi+"/helpers",dataType:"text",data:{listrows:t.helper_listrows,page:t.helper_page,joiner_id:t.joinerId},success:function(e){if(t.hideLoading(),t.helper_loaded=!0,e=$.parseJSON(e),e.data){var i=e.data;i.list.length?(i.list.forEach(function(e){t.helpers.push(e)}),1==t.helper_page&&(t.helper_total=i.total)):t.helper_nomore=!0}t.helper_loading=!1},error:function(e,i,o){t.helper_loading=!1,t.helper_loaded=!0,console.log("load helpers error:"+e+i+o)}}))},resetVoteStat:function(){var e=this;e.vote_count=0,e.vote_helper="",e.vote_timers=10,e.vote_interval=null,e.vote_clicker=0,e.voteAniStat={stat:"ready",mouse:"ready",hand:""}}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(52),a=i(123),r=o(a),s=i(197),c=o(s);t.default={template:"#zongzi-editor",mixins:[r.default],data:function(){var e=this,t=new Date,i=t.getFullYear(),o=t.getMonth(),n=t.getDate(),a=new Date(i,o,n),r=new Date(i,o,n+5);return $.extend({activity:{id:0,type:c.default.code,title:"端午节好礼享不停，吃粽子换礼品咯~",start_time:a.valueOf()/1e3,end_time:r.valueOf()/1e3,rules:"1.点击页面按钮“我要参加”参加活动。\n2.报名者自己每2小时可以点击【我要吃粽子】增加粽子数量，每次可以吃1至3个粽子。\n3.别人可以帮忙增加粽子数。\n4.奖品份数有限，达标就会减少一份，份数领完则无法继续报名，亲速度哦！\n5.完成后，马上联系商家兑奖吧。\n",prizes:{count:100,image:"",limit:30,desc:"小星星英语价值500元端午节学习大礼包内含：\n①儿童英语免费学1个月，价值300元；\n②小星星定制书包，价值100元；\n③学费抵扣券一张，价值100元\n到店提供参与活动的手机号码，工作人员查询后直接兑奖。\n本店承诺无任何隐形消费，欢迎大家监督。",vote_hours:2,text:"68元获得小星星英语价值500元的端午大礼包",receive_prize_mobile:""+e.user.mobile},receive_info:"兑奖时间：\n机构地址：\n领奖电话："+e.user.mobile+"\n到店出示手机号码，工作人员查询核对后，兑奖。",host_info:"",host_img:[],others:{musician:"",foreground:{type:"",direction:""},section_text:{receive_info:"兑奖信息",intro:"机构介绍"},join_customize:{customize_1:{name:"",required:0},customize_2:{name:"",required:0},customize_3:{name:"",required:0}},banner:{src:"http://cdn.s.shangjiadao.cn/source/images/components/imager/zongzi/01.jpg"}}}},c.default)},methods:{isValid:function(){var e=this,t=e.activity,i=(0,n.match)(JSON.stringify(t)),o="",a=!1;t.title?!t.prizes.vote_hours||t.prizes.vote_hours>24||t.prizes.vote_hours<1?o="每次投票时间间隔必须在1~24小时之间，请检查":e.clone_activity&&e.statistics&&e.statistics.join_count&&!e.is_clone&&t.prizes.vote_hours>e.clone_activity.prizes.vote_hours?o="【温馨提示】为了保证活动公平性，活动期间，报名者投票时间间隔只减不增":t.prizes.count?e.locked&&e.activity.prizes.count<e.clone_activity.prizes.count?o="已有用户报名，因此奖品数量必须大于原值【"+e.clone_activity.prizes.count+"】":t.prizes.limit?t.prizes.text?t.receive_info?t.prizes.desc?t.prizes.receive_prize_mobile?i.length?o="发现微信违规词："+i.join("、")+"，请修改后再发布！":a=!0:o="请设置咨询热线电话":o="请设置奖品描述":o="请设置领奖信息":o="请输入奖品描述":o="请输入粽子数量":o="请输入奖品份数":o="请设置活动标题";var r=!1,s=2;return $.each(t.others.join_customize,function(e,t){if(s++,t.required&&""==$.trim(t.name))return o="【信息收集设置】第 "+s+" 个信息项由于设置为必填项，因此名称不能为空！",void(r=!0)}),r&&(a=!1),t.prizes.count>1e3&&!window.confirm("哇，土豪，您的奖品份数超过 1000 了，是否继续保存?")&&(a=!1),a||o&&e.showDialog({title:"提示",content:o,confirm:!0}),a}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(60),a=o(n),r=i(67),s=o(r),c=i(201),u=o(c),d=i(9);t.default={mixins:[a.default,s.default,u.default],ready:function(){},methods:{click:function(){var e=this,t=e.my.joinerId;t?e.$router.go({name:"child-joiner",params:{id:e.activityId,joinerId:t}}):(0,d.showBeforeJoinTiper)(e.showDialog,function(){e.visible=!0,setTimeout(function(){e.joining=!0},0)})}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(202),a=o(n),r=i(10);o(r);i(163),t.default={template:"#child",data:function(){return $.extend({active:!1,personal:!1,visible:!1,haloing:!1,pageSwitch:{countdown:!0}},a.default)},methods:{textillateJoin:function(){setTimeout(function(){$("#child-join-btn").find("a").textillate({loop:!0,in:{effect:"rotateIn",delay:100},out:{effect:"fadeOut",sequence:!0,delay:1}})},2500)}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={category:"child",code:25,name:"抢糖果"}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(10),a=o(n),r=i(12),s=o(r),c=i(60),u=o(c),d=i(67),l=o(d),f=i(201),h=o(f),p=i(9);t.default={mixins:[u.default,l.default,h.default],route:{data:function(e){var t=this;t.my.self||t.$nextTick(function(){t.vote()})}},data:function(){return{personal:!0}},computed:{required:function(){var e=this,t=e.activity;return t?Math.max(0,t.prizes.limit-e.participant.vote_count):0},completed:function(){return!this.required},ended:function(){var e=this,t=e.activity;return t.end_time<Math.round(Date.now()/1e3)}},methods:{alert:function(){var e=this;e.completed&&e.showDialog({title:"提示",content:e.my.self?"已完成，可以兑奖咯（商家联系方式可在活动页面上查找）":"TA已完成抢糖果任务",confirm:!0})},click:function(){var e=this,t=e.my.joinerId;e.my.self?e.completed?e.alert():e.showSharer():t?e.$router.go({name:"child-joiner",params:{id:e.activityId,joinerId:t}}):(0,p.showBeforeJoinTiper)(e.showDialog,function(){e.visible=!0,setTimeout(function(){e.joining=!0},0)})},vote:function(){var e=this,t=e.joinerId,i=(e.my.self?"":"帮TA",!1),o=0,n=0,r=[];if(e.completed)return void e.alert();if(e.voter&&(e.voter.joiners.forEach(function(a){a.id==t&&(i=!0,e.my.self&&a.next_vote_date&&(o=a.next_vote_date,o<=Date.now()/1e3?i=!1:n=o-Date.now()/1e3))}),i)){if(n){var c=Math.floor(n/3600),u=Math.floor((n-3600*c)/60);c&&r.push(c+" 小时 "),u&&r.push(u+" 分钟")}return r=r.join(""),e.showDialog({title:"提示",content:e.my.self?'<font color="red">'+r+"</font> 后再抢哦，朋友也能帮你哦！"+e.getShortTip():"你已经帮TA抢过了",confirm:!0}),void(e.my.self&&e.genShorturl())}e.showLoading(),$.ajax(a.default.activityVote,{method:"POST",data:{joiner_id:t,open_id:e.visitor?e.visitor.openId:"wx"+Date.now(),next_vote_date:o},success:function(i){return i.code?void $body.tooltip(s.default[i.code],"danger"):(e.voteIn({joiner:{id:t,next_vote_date:i.data.next_vote_date,expires:1e3*e.activity.end_time}}),void setTimeout(function(){e.participant.vote_count++,e.my.self?(e.genShorturl(),e.showDialog({title:"恭喜您",content:'<p><i class="fa fa-smile-o" aria-hidden="true"></i> 您成功增加一颗糖果</p><p style="font-weight: bold;">如何找人帮忙<i class="fa fa-hand-o-down" aria-hidden="true"></i></p>'+e.getShortTip(),confirm:function(){return!0},button:{confirm:"我知道了"}})):e.showVoteModal()},100))},complete:function(){e.hideLoading()}})},showVoteModal:function(){var e=this;e.haloing=!0},hideVoteModal:function(){var e=this;e.haloing=!1,setTimeout(function(){e.visible=!1},300)}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(52),a=i(123),r=o(a),s=i(202),c=o(s);t.default={template:"#child-editor",mixins:[r.default],data:function(){var e=this,t=new Date,i=t.getFullYear(),o=t.getMonth(),n=t.getDate(),a=new Date(i,o,n),r=new Date(i,o,n+5);return $.extend({activity:{id:0,type:c.default.code,title:"六一好礼享不停，抢糖果换礼品咯~",start_time:a.valueOf()/1e3,end_time:r.valueOf()/1e3,rules:"1.点击页面按钮“我要参加”参加活动。\n2.报名者自己每1小时可以点击【我要抢糖果】增加糖果数量。\n3.别人可以帮忙增加糖果数量。\n4.奖品份数有限，达标就会减少一份，份数领完则无法继续报名，亲速度哦！\n5.完成后，马上联系商家兑奖吧。\n",prizes:{count:100,image:"",limit:30,desc:"小星星英语价值500元学习大礼包内含：\n①儿童英语免费学1颗月，价值300元；\n②小星星定制书包，价值100元；\n③学费抵扣券一张，价值100元\n到店提供参与活动的手机号码，工作人员查询后直接兑奖。\n本店承诺无任何隐形消费，欢迎大家监督。",vote_hours:1,text:"68元获得小星星英语价值500元的大礼包",receive_prize_mobile:""+e.user.mobile},receive_info:"兑奖时间：\n机构地址：\n领奖电话："+e.user.mobile+"\n到店出示手机号码，工作人员查询核对后，兑奖。",host_info:"",host_img:[],others:{musician:"",foreground:{type:"",direction:""},section_text:{receive_info:"兑奖信息",intro:"机构介绍"},join_customize:{customize_1:{name:"",required:0},customize_2:{name:"",required:0},customize_3:{name:"",required:0}},banner:{src:"http://cdn.s.shangjiadao.cn/source/images/components/imager/child/01.jpg"}}}},c.default)},methods:{isValid:function(){var e=this,t=e.activity,i=(0,n.match)(JSON.stringify(t)),o="",a=!1;t.title?!t.prizes.vote_hours||t.prizes.vote_hours>24||t.prizes.vote_hours<1?o="每次投票时间间隔必须在1~24小时之间，请检查":e.clone_activity&&e.statistics&&e.statistics.join_count&&!e.is_clone&&t.prizes.vote_hours>e.clone_activity.prizes.vote_hours?o="【温馨提示】为了保证活动公平性，活动期间，报名者投票时间间隔只减不增":t.prizes.count?e.locked&&e.activity.prizes.count<e.clone_activity.prizes.count?o="已有用户报名，因此奖品数量必须大于原值【"+e.clone_activity.prizes.count+"】":t.prizes.limit?t.prizes.text?t.receive_info?t.prizes.desc?t.prizes.receive_prize_mobile?i.length?o="发现微信违规词："+i.join("、")+"，请修改后再发布！":a=!0:o="请设置咨询热线电话":o="请设置奖品描述":o="请设置领奖信息":o="请输入奖品描述":o="请输入糖果数量":o="请输入奖品份数":o="请设置活动标题";var r=!1,s=2;return $.each(t.others.join_customize,function(e,t){if(s++,t.required&&""==$.trim(t.name))return o="【信息收集设置】第 "+s+" 个信息项由于设置为必填项，因此名称不能为空！",void(r=!0)}),r&&(a=!1),t.prizes.count>1e3&&!window.confirm("哇，土豪，您的奖品份数超过 1000 了，是否继续保存?")&&(a=!1),a||o&&e.showDialog({title:"提示",content:o,confirm:!0}),a}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(10),a=(o(n),i(60)),r=o(a),s=i(67),c=o(s),u=i(206),d=o(u),l=i(9);i(43);t.default={mixins:[r.default,c.default,d.default],template:"#photovote",data:function(){return{search_keyword:"",menu_status:"latest",sort_type:"image",show_detail:!1,joinerIds:[],joiner_total:0,joiner_page:1,joiner_listrows:10,joiner_nomore:!1,joiner_loading:!1,joiner_loaded:!1}},methods:{load:function(e){var t=this;Array.isArray(e)&&(e.forEach(function(e){(!t.joiners.length||$.inArray(e.id,t.joinerIds)<0)&&(t.joiners.push(e),t.joinerIds.push(e.id))}),console.log(t.joiners),t.bindImgLazyScroll())},toggleDetail:function(){var e=this;e.show_detail=!0,e.menu_status="detail",e.bindImgLazyScroll()},bindImgLazyScroll:function(){setTimeout(function(){$(".about").find("img").scrollLoading()},100)},click:function(){var e=this,t=e.my.joinerId,i=e.countdown;if(!e.my){if(!i.started)return void $body.tooltip("亲，活动未开始哦！","info");if(i.ended)return void $body.tooltip("亲，活动已经结束了！","info")}t?e.goJoinerHome(t):(0,l.showBeforeJoinTiper)(e.showDialog,function(){e.visible=!0,setTimeout(function(){e.joining=!0},0)})},goSearch:function(){var e=this;e.joiners=[],e.joinerIds=[],e.loadJoiners()},goMenu:function(e){var t=this;t.menu_status!=e&&(t.joiners=[],t.joinerIds=[],t.menu_status=e,t.show_detail=!1,t.joiner_page=1,t.loadJoiners())},goSortType:function(e){var t=this;t.sort_type=e,t.show_detail=!1,t.bindImgLazyScroll()},loadJoiners:function(e){var t=this,i=e&&e.target,o=$.trim(t.search_keyword),n="",a=void 0;t.joiner_loading||(i&&t.joiner_page++,a={activity_id:t.activityId,listrows:t.joiner_listrows,page:t.joiner_page},o.length?(a.keyword=o,n=t.api.search):n=t.api[t.menu_status],t.joiner_loading=!0,$.ajax({type:"get",url:n,dataType:"text",data:a,success:function(e){if(t.hideLoading(),t.joiner_loaded=!0,e=$.parseJSON(e),e.data){var i=e.data;i.length?t.load(i):i.list&&i.list.length?t.load(i.list):t.joiner_nomore=!0}else e.code||(t.joiner_nomore=!0);t.joiner_loading=!1},error:function(e,i,o){t.joiner_loading=!1,t.joiner_loaded=!0,$body.tooltip("活动选手数据加载失败","danger")}}))}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(207),a=o(n),r=i(10),s=o(r),c=i(12),u=o(c);i(183);var d=i(51),l=o(d),f=i(65),h=i(9),p=i(52),m=i(43);i(41);var g=$(window),v=$(document.body),y=(window.URL||window.webkitURL,/^image\/\w+/),w=window.location;t.default={template:"#photovote",components:{Sharer:l.default},data:function(){return $.extend({active:!1,personal:!1,visible:!1,currentJoiner:!1,pageSwitch:{countdown:!0},api:{activity:""+s.default.photovote,joiner:s.default.photovote+"/joiner",latest:s.default.photovote+"/latest",search:s.default.photovote+"/search",ranking:s.default.photovote+"/ranking",join:s.default.photovote+"/join",vote:s.default.photovote+"/vote"},newJoiner:{name:"",mobile:"",avator:"",remark:""},avatorUploader:{maxsize:3072,cropper:{croppered_params:[],config:{dragMode:"move",aspectRatio:1,autoCropArea:.8,guides:!1,center:!0,highlight:!1,dragCrop:!1,cropBoxMovable:!1,cropBoxResizable:!1,zoom:-.2,checkImageOrigin:!0,background:!1,rotatable:!0}}},votingStatus:[]},a.default)},route:{data:function(e){var t=this,i=e.to,o=Number(i.params.id)||0,n=Number(i.params.joinerId)||0,a=n?t.api&&t.api.joiner?t.api.joiner:apis.activity.joiner:t.api&&t.api.activity?t.api.activity+"/"+o:apis.activity.root+"/"+o;t.activity=null,t.carousel=null,t.sharer=null,t.showLoading(),$.ajax({type:"get",url:a,dataType:"text",data:{activity_id:o,joiner_id:n},success:function(i){if(t.hideLoading(),i=$.parseJSON(i),i.data&&i.data.mobile&&(t.activityMobile=i.data.mobile),i.code){if("1005"==i.code)return w.hash="#!403",void e.abort();if("1217"==i.code)return void(t.hasActivity=!1);if("1252"==i.code){var a=!1;return t.joiner&&t.joiner.activities&&t.joiner.activities.forEach(function(e){e.joinerId==n&&(a=!0,t.joinOut(n),t.voteOut(n))}),void(a?t.showDialog({title:"重要提示",button:{confirm:"我知道了"},style:"text-align: left;",content:"您已被活动主办方取消名额，如有疑问，请联系主办方！",confirm:function(){return(0,h.redirectToActivityIndex)(),!0}}):(0,h.redirectToActivityIndex)())}return void t.$root.$emit("show.snackbar",{color:"accent",message:u.default[i.code]})}if(i.data){var r=i.data.activity,s=i.data.joiner,c=i.data.statistics,d=t.sharable;if(r.type!=t.code)return void(t.hasActivity=!1);!(0,f.matchCases)(r.user_id)&&r.completed_delay_days>=2&&(t.hasCompleted=!0),d&&t.toggleSharable(),t.pageIn({title:r.title,description:r.rules});var l={};try{l=JSON.parse(r.prizes)}catch(e){console.log("parse prizes error: "+e.message)}var p={};
try{p=r.others&&JSON.parse((0,h.jsonFilter)(r.others))}catch(e){console.log("parse others error: "+e.message)}t.pageSwitch.countdown&&t.$nextTick(function(){t.startCountdown()});var m={},g={};if(p.join_customize){var v=void 0,y=void 0;for(v in p.join_customize)y=p.join_customize[v],""!=y.name&&(y.placeholder="请输入"+y.name,g[v]="",m[v]=y)}i.data.joiner||t.loadJoiners();var _=i.data.joiner?i.data.joiner:{};e.next({activity:$.extend({},r,{prizes:l,others:p,category:t.category||(0,h.translateType)(r.type)}),activityId:o,joinerId:n,joiners:[],newJoiner:$.extend({},t.newJoiner,g),currentJoiner:_,joinCustomize:$.extend({},t.joinCustomize,m),participant:s,sharer:{autoShare:!d,autoShow:d,data:$.extend({joinerId:n,category:t.category||""},r),desc:r.share_content,imgUrl:_&&_.avator?_.avator:r.share_img,link:window.location.href,title:_&&_.name?"“"+_.name+"”正在参加 "+r.title+" 火热进行中！请投TA一票":r.share_title},statistics:c}),setTimeout(function(){$("div.about").find("img").scrollLoading()},100),t.bindQrcodeAnimate()}},error:function(){v.tooltip("活动加载失败","danger")}})}},methods:{showNotice:function(){alert("严禁植入二维码，一经发现直接删除活动")},uploadAvator:function(e){var t=this,i=e.target,o=i.files?i.files[0]:null,n=void 0;if(o&&(y.test(o.type)||""==o.type)){var a=o.size/1024;if(a>t.avatorUploader.maxsize)return t.showDialog({title:"提示",content:"图片大小请控制在 "+Math.floor(t.avatorUploader.maxsize)+" KB 以内",confirm:!0}),!1;t.showLoading("正在上传头像..."),$.get(s.default.uploadSignature,{type:5},function(e){return e.code?void t.$root.$emit("show.snackbar",{color:"accent",message:u.default[e.code]}):void(e.data&&!function(){var i=e.data,a=""+i.dir+(0,h.getRandomFilename)(o.name),r=$("#photovote-joiner-avator");r.uploader({name:"file",url:i.host,data:{key:a,policy:i.policy,OSSAccessKeyId:i.accessid,signature:i.signature},done:function(){n=(0,m.imagify)(a,"image/resize,w_640"),t.initCropper(n,{aspectRatio:1},function(){t.avatorUploader.cropper.croppered_params.length&&(t.newJoiner.avator=(0,m.imagify)(a,t.avatorUploader.cropper.croppered_params),t.avatorUploader.cropper.croppered_params=[])}),t.hideLoading()},fail:function(){v.tooltip("头像上传失败，请检查网络连接并重试","danger"),t.hideLoading()},uploaded:function(){r.uploader("destroy")}}).uploader("upload")}())})}else v.tooltip("请选择正确的图片文件","notice")},join:function(e){var t=this,i=t.newJoiner,o=i.name,n=(i.mobile,i.avator,(0,p.matchJoin)(JSON.stringify({name:o}))),a=t.joinCustomize,r=void 0,s=!0;if(e.preventDefault(),n.length)return void(0,h.showJoinNotice)(t.showDialog);if(!t.newJoiner.avator)return void v.tooltip("头像不能为空哟！","danger");for(r in t.newJoiner)if(a[r]&&a[r].required&&""==$.trim(t.newJoiner[r])){v.tooltip(a[r].name+"不能为空","danger"),s=!1;break}return!!s&&(t.showLoading(),void $.post(t.api.join,$.extend({},t.newJoiner,{activity_id:t.activityId})).then(function(e){var i=e.data?Number(e.data.joiner_id):0;return t.hideLoading(),e.code?i?(t.joined(i),void t.goJoinerHome(i)):void t.$root.$emit("show.snackbar",{color:"accent",message:u.default[e.code]}):void(i&&(t.joined(i),t.showDialog({title:"报名成功",content:"点击“确定”进入你自己的活动页面",confirm:function(){return t.goJoinerHome(i),!0}})))}))},goJoinerHome:function(e){var t=this;setTimeout(function(){var i=(0,h.pathify)(w.pathname).replace(/(\/*$)/g,"");window.location.href="/api/go.php?from="+encodeURIComponent(w.protocol+"//"+w.hostname+i+"/#!/activity/photovote/"+t.activityId+"/joiner/"+e)},10)},initCropper:function(e,t,i){var o=this,n=(g.width(),g.height(),"dialog-photovote-cropper-container");o.showDialog({title:"图片裁剪",fullscreen:!0,noeffect:!0,content:'<div id="'+n+'">'+('   <img src="'+e+'"/>')+'   <p style="color:#545454;font-size: 1.5rem;">     <i class="fa fa-rotate-left" id="dialog-photovote-cropper-rotate-left"></i>     <i class="fa fa-rotate-right" id="dialog-photovote-cropper-rotate-right" style="margin-left:0.5rem;"></i>   </p></div>',cancel:function(){return $("#"+n).find("img").cropper("destroy"),!0},confirm:function(){return!!o.avatorUploader.cropper.croppered_params.length&&($("#"+n).find("img").cropper("destroy"),i(),!0)}}),setTimeout(function(){var i=$("#"+n).css({height:"90%"}).find("img"),a=o.avatorUploader.cropper.config;$("#dialog-photovote-cropper-rotate-left").click(function(){i.cropper("rotate",-45)}),$("#dialog-photovote-cropper-rotate-right").click(function(){i.cropper("rotate",45)}),i.attr("src",e).cropper($.extend(!0,{},a,{aspectRatio:t.aspectRatio,crop:function(e){var t=parseInt(e.x,10),i=parseInt(e.y,10),n=parseInt(e.width,10),a=parseInt(e.height,10),r=parseInt(e.rotate,10);o.avatorUploader.cropper.croppered_params="image/resize,w_640/"+["rotate",r].join(",")+"/"+["crop","x_"+t,"y_"+i,"w_"+n,"h_"+a].join(",")}}))},50)},vote:function(e,t){var i=this,o=$("#photovote-vote-"+e);o.html("投票中..."),$.inArray(e,i.votingStatus)>=0||(i.votingStatus.push(e),$.ajax(i.api.vote,{method:"POST",dataType:"text",data:{joiner_id:e,open_id:i.visitor?i.visitor.openId:"wx"+Date.now()},success:function(n){if(n=$.parseJSON(n),i.removeVotingStatus(e),o.html("投票"),n.code)return void i.showDialog({title:"温馨提示",button:{confirm:"我知道了"},content:u.default[n.code],confirm:!0});var a=n.data;a.left_vote&&i.$root.$emit("show.snackbar",{color:"default",message:"投票成功，您还剩 "+a.left_vote+" 次机会"}),i.personal?i.currentJoiner.vote_count++:i.joiners[t].vote_count++},complete:function(){i.hideLoading()}}))},removeVotingStatus:function(e){for(var t=this.votingStatus,i=0;i<t.length;i++)if(t[i]==e){t.splice(i,1);break}},bindQrcodeAnimate:function(){setTimeout(function(){var e=$("header").find("a.qrcode");e.length&&setInterval(function(){e.addClass("ani"),setTimeout(function(){e.removeClass("ani")},2e3)},6e3)},500)},footerGo:function(e){console.log(e),window.location.href=e}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={category:"photovote",code:26,name:"照片投票"}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(61),a=(o(n),i(12)),r=(o(a),i(60)),s=o(r),c=i(67),u=o(c),d=i(206),l=o(d),f=i(9),h=window.location;t.default={mixins:[s.default,u.default,l.default],template:"#photovote-joiner",route:{data:function(){}},data:function(){return{personal:!0}},computed:{ended:function(){var e=this,t=e.activity;return t.end_time<Math.round(Date.now()/1e3)}},methods:{click:function(){var e=this,t=e.my.joinerId;if(e.my.self);else if(t){setTimeout(function(){var e=pathify(h.pathname).replace(/(\/*$)/g,"");window.location.href="/api/go.php?from="+encodeURIComponent(h.protocol+"//"+h.hostname+e+"/#!/activity/photovote/"+activityId+"/joiner/"+t)},100)}else(0,f.showBeforeJoinTiper)(e.showDialog,function(){e.visible=!0,setTimeout(function(){e.joining=!0},0)})}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(10),a=o(n),r=i(12),s=o(r),c=i(167),u=o(c),d=i(45),l=o(d),f=i(9),h=(i(43),i(26));$(document.body);t.default={template:"#photovote-joiners",components:{Searchbar:u.default,WaterfallFlowLoader:l.default},vuex:{getters:{user:function(e){return e.user}},actions:{showDialog:h.showDialog,showLoading:h.showLoading,hideLoading:h.hideLoading,pageIn:h.pageIn}},route:{data:function(e){var t=this,i=t.$route;e.next({category:(0,f.translateType)(Number(i.query.type)||0)})}},data:function(){return{joiners:[],joinerIds:[],keyword:"",category:"",loaders:{},activity:{customize_length:0}}},computed:{loader:function(){var e=this,t=e.$route,i={activity_id:t.params.id,token:e.user.token},o=a.default.photovote+"/joiners";return e.joiners=[],e.joinerIds=[],e.keyword&&(i.keyword=e.keyword),e.loaders=i,{params:i,url:o}},joiners2CN:function(){var e=this,t=e.$route,i=t.params.id,o=e.activity.share_host,n=t.query.type,a=e.category;return e.joiners.length&&e.joiners.forEach(function(e){e.link=(0,f.generalShareurlV2)(o,i,n,a,e.id)}),e.joiners}},ready:function(){this.pageIn({title:"照片投票-报名表"})},methods:{load:function(e,t){var i=this;Array.isArray(e)&&e.forEach(function(e){e.is_exchanged=Number(e.is_exchanged),$.inArray(e.id,i.joinerIds)<0&&(i.joiners.push(e),i.joinerIds.push(e.id))}),t&&t.activity&&(i.activity=t.activity)},fail:function(e,t){var i=this;if(e==s.default[1100])(0,f.showKickedOffline)(t.time,t.ip,i.showDialog);else if(e==s.default[1101])(0,f.showExpireTip)(i.showDialog);else{if(e==s.default[1102])return void i.$router.go({name:"signout"});i.$root.$emit("show.snackbar",{color:"accent",message:e})}i.hideLoading(),callback&&callback()},fail_action:function(e,t){var i=this,o=e.code;if(1100==o)(0,f.showKickedOffline)(e.data.time,e.data.ip,i.showDialog);else if(1101==o)(0,f.showExpireTip)(i.showDialog);else{if(1102==o)return void i.$router.go({name:"signout"});i.$root.$emit("show.snackbar",{color:"accent",message:s.default[o]})}i.hideLoading(),t&&t()},search:function(e){this.keyword=e},showActionsheet:function(e){var t=e.target.getAttribute("href")?$(e.target.getAttribute("href")):$($(e.target).parent().attr("href")),i=t.find(".weui_mask_transition");e.preventDefault(),i.show().addClass("weui_fade_toggle"),t.find(".weui_actionsheet").addClass("weui_actionsheet_toggle")},hideActionsheet:function(e,t){var i=$(e.target).closest(".weui_actionsheet_container"),o=i.find(".weui_mask_transition");i.find(".weui_actionsheet").removeClass("weui_actionsheet_toggle"),o.removeClass("weui_fade_toggle"),setTimeout(function(){o.hide(),t&&t()},300)},modifyCustomize:function(e){var t=this,i=$(e.target),o=t.joiners[Number("undefined"==typeof e.target.dataset.index?i.parent().data("index"):e.target.dataset.index)],n=(o.id,"undefined"==typeof e.target.dataset.field?i.parent().data("field"):e.target.dataset.field),r=t.activity.customize[n],s=o[n];t.hideActionsheet(e),this.showDialog({title:"修改报名信息",cancel:!0,button:{confirm:"保存"},content:"<p>"+r+'：<input type="text"  value="'+s+'" id="dialog_text_name" placeholder="请输入'+r+'"/></p>',confirm:function(){var e=$("#dialog_text_name"),i=$.trim(e.val());return i.length?(t.showLoading(),$.ajax(""+a.default.solitaireJoinerProfile,{method:"PUT",data:{joiner_id:o.id,token:t.user.token,value:i,field:n},success:function(e){return e.code?void t.fail_action(e):(t.$root.$emit("show.snackbar",{message:r+"修改成功"}),void(o[n]=i))},complete:function(){t.hideLoading()}}),!0):(t.$root.$emit("show.snackbar",{message:r+"不能为空哟"}),e.focus(),!1)}})},exchange:function(e){var t=this,i=$(e.target),o=t.joiners[Number("undefined"==typeof e.target.dataset.index?i.parent().data("index"):e.target.dataset.index)],n=o.is_exchanged;t.hideActionsheet(e),this.showDialog({title:n?"确认撤销标记？":"确认标记？",cancel:!0,confirm:function(){return t.showLoading(),$.ajax(a.default.activityExchange,{method:"POST",data:{joiner_id:o.id,token:t.user.token},success:function(e){return e.code?void t.fail_action(e):(t.$root.$emit("show.snackbar",{message:n?"撤销成功":"标记成功"}),void(o.is_exchanged=!n))},complete:function(){t.hideLoading()}}),!0}})},remove:function(e){var t=this,i=$(e.target),o=t.joiners[Number("undefined"==typeof e.target.dataset.index?i.parent().data("index"):e.target.dataset.index)],n=o.id,r=t.activity;return t.hideActionsheet(e),r.ended?void this.showDialog({title:"亲，活动已经结束了，无法删除哟！",button:{confirm:"我知道了"},confirm:function(){return!0}}):void this.showDialog({title:"确认删除“"+o.name+"”吗？删除后无法恢复",cancel:!0,confirm:function(){return t.showLoading(),$.ajax(a.default.photovote+"/joiner?token="+t.user.token+"&joiner_id="+n,{method:"DELETE",success:function(e){return e.code?void t.fail_action(e):(t.$root.$emit("show.snackbar",{message:"删除成功"}),void(o.status=0))},complete:function(){t.hideLoading()}}),!0}})},modify:function(e){var t=this,i=$(e.target),o=t.joiners[Number("undefined"==typeof e.target.dataset.index?i.parent().data("index"):e.target.dataset.index)],n=(o.id,o.name);t.hideActionsheet(e),this.showDialog({title:"修改报名信息",cancel:!0,button:{confirm:"保存"},content:'<p>姓名：<input type="text" class="dialog_" value="'+n+'" id="dialog_text_name" placeholder="请输入报名者姓名"/></p>',confirm:function(){var e=$("#dialog_text_name"),i=$.trim(e.val());return i.length?(t.showLoading(),$.ajax(a.default.photovote+"/joiner",{method:"PUT",data:{joiner_id:o.id,token:t.user.token,name:i},success:function(e){return e.code?void t.fail_action(e):(t.$root.$emit("show.snackbar",{message:"保存成功"}),void(o.name=i))},complete:function(){t.hideLoading()}}),!0):(t.$root.$emit("show.snackbar",{message:"姓名不能为空哟"}),e.focus(),!1)}})},goJoinerHome:function(e){var t=this,i=t.$route.params.id;setTimeout(function(){var t=(0,f.pathify)(location.pathname).replace(/(\/*$)/g,"");window.location.href="/api/go.php?from="+encodeURIComponent(location.protocol+"//"+location.hostname+t+"/#!/activity/photovote/"+i+"/joiner/"+e)},10)}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(52),a=i(123),r=o(a),s=i(207),c=o(s);t.default={template:"#photovote-editor",mixins:[r.default],data:function(){var e=this,t=new Date,i=t.getFullYear(),o=t.getMonth(),n=t.getDate(),a=new Date(i,o,n),r=new Date(i,o,n+5);return $.extend({activity:{id:0,type:c.default.code,title:"临安市男神女神自拍评选火热进行中",start_time:a.valueOf()/1e3,end_time:r.valueOf()/1e3,prizes:{count:3,mobile:e.user.mobile},host_img:[],rules:"投票",host_info:[{type:"text",v:"上海市萌宝评选大赛\n主办方：XXX幼儿园\n协办方：XXX儿童写真\nXXX英语培训\n\n活动规则：\n1.如何报名活动？点击底部【报名】按钮2.活动期间，每人每天可以投一票",style:"",style_config:{}},{type:"text",v:"奖品设置\n一等奖（1名）\nXXX幼儿园一学期免费学\nXXX儿童写真价值588元儿童写真一套\nXXX英语机构儿童启蒙英语课1个月\n\n二等奖（2-5名）\n\n三等奖（6-30名）\n\n鼓励奖（31-100名）\n\n关于我们：\nXXX幼儿园成立于...\nXXX儿童写真是一家专门为....\nXXX英语培训机构坐落在....\n\n",style:"",style_config:{}}],others:{musician:"",foreground:{type:"",direction:""},banner:{src:"http://cdn.s.shangjiadao.cn/source/images/components/imager/photovote/01.jpg"},join_customize:{customize_1:{name:"",required:0},customize_2:{name:"",required:0},customize_3:{name:"",required:0}}}},prize:{uploaded:!0},intro:{uploaded:!1,minieditor:{uploader:{showNotice:!0,maxlength:10,placeholder:"（点击选择图片，不上传则不显示）",description:"添加图片（最多添加 10 张图片）",error:function(){e.submitting=!1,$("body").tooltip("活动详情图片上传失败","danger")},success:function(t){e.activity.host_info=t,e.intro.uploaded=!0,e.publish()}},texter:{placeholder:"此处可修改字体样式：加粗、斜体、下划线、字体大小颜色...",description:"添加文本（最多添加 10 个文本内容）",maxlength:10},video:{placeholder:"请输入视频地址【支持优酷、腾讯视频】",description:"添加视频（最多添加 5 个视频）",maxlength:5}}}},c.default)},methods:{isValid:function(){var e=this,t=e.activity,i=(0,n.match)(JSON.stringify(t)),o="",a=!1;console.log(t.prizes.count),console.log(e.clone_activity.prizes.count),t.title?!t.prizes.count||t.prizes.count>10?o="请输入正确的每人每天投票票数（票数须 大于0，小于等于10）":e.locked&&t.prizes.count!=e.clone_activity.prizes.count?o="已有用户报名，不能修改投票数":i.length?o="发现微信违规词："+i.join("、")+"，请修改后再发布！":a=!0:o="请设置活动标题";var r=!1,s=2;return $.each(t.others.join_customize,function(e,t){if(s++,t.required&&""==$.trim(t.name))return o="【信息收集设置】第 "+s+" 个信息项由于设置为必填项，因此名称不能为空！",void(r=!0)}),r&&(a=!1),t.prizes.count>1e3&&!window.confirm("哇，土豪，您的奖品份数超过 1000 了，是否继续保存?")&&(a=!1),a||o&&e.showDialog({title:"提示",content:o,confirm:!0}),a}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(10),a=(o(n),i(60)),r=o(a),s=i(67),c=o(s),u=i(212),d=o(u),l=i(12),f=(o(l),i(213)),h=o(f),p=i(9),m=(i(43),$("body"));t.default={mixins:[r.default,c.default,h.default],template:"#fullphotovote",components:{Pagination:d.default},data:function(){var e=this.$route.query;return console.log(e.stype),{search_keyword:"",show_detail:!1,joinerIds:[],sort_type:"image",joiner_total:0,joiner_page:1,joiner_listrows:6,joiner_loading:!1,joiner_loaded:!1,searched:!1,searchVisible:!1,joiner_params:{stype:e.stype||"1"}}},computed:{cpage:function(){var e=this,t=this.$route.query;return Number(t.page)||e.joiner_page}},methods:{load:function(e){var t=this;t.joiners=[],Array.isArray(e)&&(e.forEach(function(e){try{var i=$.parseJSON(e.avator);e.avator=i.length?i[0]:""}catch(t){e.avator=""}t.joiners.push(e),t.joinerIds.push(e.id)}),t.bindImgLazyScroll())},toggleDetail:function(){var e=this;e.show_detail=!0,e.goAnchor("fullphotovote-detail")},click:function(){var e=this,t=e.my.joinerId,i=e.countdown;if(!e.my){if(!i.started)return void m.tooltip("亲，活动未开始哦！","info");if(i.ended)return void m.tooltip("亲，活动已经结束了！","info")}t?e.goJoinerHome(t):(0,p.showBeforeJoinTiper)(e.showDialog,function(){e.visible=!0,setTimeout(function(){e.joining=!0},0)})},goSearch:function(){var e=this;e.joiners=[],e.joinerIds=[],e.searched||(e.searched=!0),e.searchVisible=!1,e.loadJoiners()},showSearch:function(){var e=this;e.search_keyword="",e.searchVisible=!0},hideSearch:function(){var e=this;e.searchVisible=!1},goSortType:function(e){var t=this;t.sort_type=e,t.show_detail=!1,t.bindImgLazyScroll()},loadJoiners:function(){var e=this,t=$.trim(e.search_keyword),i=this.$route.query,o=Number(i.page),n=Number(i.stype),a="",r={};r={activity_id:e.activityId},t.length?(r.keyword=t,a=e.api.search):(r.listrows=Number(i.listrows)||e.joiner_listrows,r.page=o||e.joiner_page,a="2"==n?e.api.ranking:e.api.latest),e.joiner_loading=!0,e.showLoading(),$.ajax({type:"get",url:a,dataType:"text",data:r,success:function(i){if(e.hideLoading(),e.joiner_loaded=!0,i=$.parseJSON(i),i.data){var n=i.data;n.others?e.joiner_total=n.others.total:e.joiner_total=n.length,e.load(n.list||n)}e.joiner_loading=!1,o>0&&setTimeout(function(){e.goAnchor("fullphotovote-joiner",100)},1500),t.length&&e.locSearch()},error:function(t,i,o){e.joiner_loading=!1,e.joiner_loaded=!0,m.tooltip("活动选手数据加载失败","danger")}})}}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(9);t.default={template:"#pagination",props:{listrows:{type:Number,default:5},page:{type:Number,default:1},maxpage:{type:Number,default:1},gotopage:{type:Number,default:1},total:{type:Number,default:0},params:{type:Object,default:{}}},data:function(){return{pagesizes:[10,20,50,100]}},computed:{links:function e(){var t=this,i=t.page,o=1,n=Math.max(Math.ceil(t.total/t.listrows),o),a=Math.max(Math.min(i+2,n),Math.min(o+4,n)),r=Math.min(Math.max(i-2,o),Math.max(n-4,1)),e=[],s=void 0,c=void 0;if(t.maxpage=n,e.push({disabled:i===o,icon:!0,link:i===o?null:{query:$.extend({},t.params,{listrows:t.listrows,page:i-1})},text:'<i class="fa fa-angle-double-left" aria-hidden="true"></i>'}),r>=o+1){for(s=o,c=Math.min(r-1,r===o+4?4:3);s<=c;s++)e.push({link:{query:$.extend({},t.params,{listrows:t.listrows,page:s})},text:s});r>o+4&&e.push({disabled:!0,text:"..."})}for(s=r;s<=a;s++)e.push({active:s===i,link:{query:$.extend({},t.params,{listrows:t.listrows,page:s})},text:s});if(a<=n-1)for(a<n-4&&e.push({disabled:!0,text:"..."}),s=Math.max(a+1,n-(a===n-4?3:2)),c=n;s<=c;s++)e.push({link:{query:$.extend({},t.params,{listrows:t.listrows,page:s})},text:s});return e.push({disabled:i===n,icon:!0,link:i===n?null:{query:$.extend({},t.params,{listrows:t.listrows,page:i+1})},text:'<i class="fa fa-angle-double-right" aria-hidden="true"></i>'}),e}},ready:function(){},methods:{goto:function(){var e=this,t=void 0;if(e.gotopage>e.maxpage)return void e.$root.$emit("show.snackbar",{message:"最多只有"+e.maxpage+"页哟，亲!"});var i=location.href;if(i.indexOf("listrows")>=0)i=i.replace("page="+e.page,"page="+e.gotopage),t=o.Location.query().listrows,i=i.replace("listrows="+t,"listrows="+e.listrows);else if(i.indexOf("?")>=0){var n=i.split("");n=n[n.length-1],i="&"==n?i+"listrows="+e.listrows+"&page="+e.gotopage:i+"&listrows="+e.listrows+"&page="+e.gotopage}else i=i+"?listrows="+e.listrows+"&page="+e.gotopage;location.replace(i)}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(214),a=o(n),r=i(10),s=o(r),c=i(12),u=o(c),d=i(51),l=o(d),f=i(212),h=o(f),p=i(65),m=i(9),g=(i(52),$(window),$(document.body)),v=window.location;t.default={template:"#fullphotovote",components:{Sharer:l.default,Pagination:h.default},data:function(){return $.extend({active:!1,personal:!1,visible:!1,currentJoiner:!1,pageSwitch:{countdown:!0},api:{activity:""+s.default.photovote,joiner:s.default.photovote+"/joiner",latest:s.default.photovote+"/rankuuid",search:s.default.photovote+"/search",ranking:s.default.photovote+"/ranking",join:s.default.photovote+"/join",vote:s.default.photovote+"/vote"},newJoiner:{name:"",mobile:"",avator:"",remark:""},votingStatus:[]},a.default)},route:{data:function(e){var t=this,i=e.to,o=Number(i.params.id)||0,n=Number(i.params.joinerId)||0,a=n?t.api&&t.api.joiner?t.api.joiner:apis.activity.joiner:t.api&&t.api.activity?t.api.activity+"/"+o:apis.activity.root+"/"+o;t.activity=null,t.carousel=null,t.sharer=null,t.showLoading(),$.ajax({type:"get",url:a,dataType:"text",data:{activity_id:o,joiner_id:n},success:function(i){if(t.hideLoading(),i=$.parseJSON(i),i.data&&i.data.mobile&&(t.activityMobile=i.data.mobile),i.code){if("1005"==i.code)return v.hash="#!403",void e.abort();if("1217"==i.code)return void(t.hasActivity=!1);if("1252"==i.code){var a=!1;return t.joiner&&t.joiner.activities&&t.joiner.activities.forEach(function(e){e.joinerId==n&&(a=!0,t.joinOut(n),t.voteOut(n))}),void(a?t.showDialog({title:"重要提示",button:{confirm:"我知道了"},style:"text-align: left;",content:"您已被活动主办方取消名额，如有疑问，请联系主办方！",confirm:function(){return(0,m.redirectToActivityIndex)(),!0}}):(0,m.redirectToActivityIndex)())}return void t.$root.$emit("show.snackbar",{color:"accent",message:u.default[i.code]})}if(i.data){var r=i.data.activity,s=i.data.joiner,c=i.data.statistics,d=t.sharable;if(r.type!=t.code)return void(t.hasActivity=!1);!(0,p.matchCases)(r.user_id)&&r.completed_delay_days>=2&&(t.hasCompleted=!0),d&&t.toggleSharable(),t.pageIn({title:r.title,description:r.rules});var l={};try{l=JSON.parse(r.prizes)}catch(e){console.log("parse prizes error: "+e.message)}var f={};try{f=r.others&&JSON.parse((0,m.jsonFilter)(r.others))}catch(e){console.log("parse others error: "+e.message)}t.pageSwitch.countdown&&t.$nextTick(function(){t.startCountdown()});var h={},g={};if(f.join_customize){var y=void 0,w=void 0;for(y in f.join_customize)w=f.join_customize[y],""!=w.name&&(w.placeholder="请输入"+w.name,g[y]="",h[y]=w)}i.data.joiner||t.loadJoiners();var _=i.data.joiner?i.data.joiner:{};e.next({activity:$.extend({},r,{prizes:l,others:f,category:t.category||(0,m.translateType)(r.type)}),activityId:o,joinerId:n,joiners:[],newJoiner:$.extend({},t.newJoiner,g),currentJoiner:_,joinCustomize:$.extend({},t.joinCustomize,h),participant:s,sharer:{autoShare:!d,autoShow:d,data:$.extend({joinerId:n,category:t.category||""},r),desc:r.share_content,imgUrl:_&&_.avator?_.avator:r.share_img,link:window.location.href,title:_&&_.name?"“"+_.name+"”正在参加 "+r.title+" 火热进行中！请投TA一票":r.share_title},statistics:c}),setTimeout(function(){$("div.about").find("img").scrollLoading()},100),t.bindQrcodeAnimate()}},error:function(){g.tooltip("活动加载失败","danger")}})}},computed:{photosize:function(){var e=this,t=e.activity.prizes;return"size"+t.photosize}},methods:{bindImgLazyScroll:function(){setTimeout(function(){$(".about").find("img").scrollLoading()},100)},goJoinerHome:function(e){var t=this;setTimeout(function(){var i=(0,m.pathify)(v.pathname).replace(/(\/*$)/g,"");window.location.href="/api/go.php?from="+encodeURIComponent(v.protocol+"//"+v.hostname+i+"/#!/activity/fullphotovote/"+t.activityId+"/joiner/"+e)},10)},vote:function(e,t){var i=this,o=$("#fullphotovote-vote-"+e);o.html("投票中..."),$.inArray(e,i.votingStatus)>=0||(i.votingStatus.push(e),$.ajax(i.api.vote,{method:"POST",dataType:"text",data:{joiner_id:e,open_id:i.visitor?i.visitor.openId:"wx"+Date.now()},success:function(n){if(n=$.parseJSON(n),i.removeVotingStatus(e),o.html("投票"),n.code)return void i.showDialog({title:"温馨提示",button:{confirm:"我知道了"},content:u.default[n.code],confirm:!0});var a=n.data;a.left_vote&&i.$root.$emit("show.snackbar",{color:"default",message:"投票成功，您还剩 "+a.left_vote+" 次机会"}),i.personal?i.currentJoiner.vote_count++:i.joiners[t].vote_count++},complete:function(){i.hideLoading()}}))},removeVotingStatus:function(e){for(var t=this.votingStatus,i=0;i<t.length;i++)if(t[i]==e){t.splice(i,1);break}},bindQrcodeAnimate:function(){setTimeout(function(){var e=$("header").find("a.qrcode");e.length&&setInterval(function(){e.addClass("ani"),setTimeout(function(){e.removeClass("ani")},2e3)},6e3)},500)},footerGo:function(e){console.log(e),window.location.href=e},goAnchor:function(e,t){var i=$("#"+e).get(0);document.body.scrollTop=i.offsetTop-(t||0)},locSearch:function(){var e=this;e.goAnchor("fullphotovote-search")}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={category:"fullphotovote",code:27,name:"全民票选"}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(61),a=(o(n),i(12)),r=(o(a),i(60)),s=o(r),c=i(67),u=o(c),d=i(213),l=o(d);i(216);var f=i(9),h=window.location;t.default={mixins:[s.default,u.default,l.default],template:"#fullphotovote-joiner",route:{data:function(){var e=this;setTimeout(function(){var t={pagination:".swiper-pagination",paginationClickable:!0,cssWidthAndHeight:!0,autoplay:3e3};e.avators.length>1&&(t=$.extend(t,{loop:!0,touchMoveStopPropagation:!1,autoplayDisableOnInteraction:!1})),e.bindImgLazyScroll();new Swiper(".swiper-container",t)},1e3)}},data:function(){return{personal:!0,resizedImg:!1}},computed:{ended:function(){var e=this,t=e.activity;return t.end_time<Math.round(Date.now()/1e3)},avators:function(){var e=this,t=[];try{t=$.parseJSON(e.currentJoiner.avator)}catch(e){t=[]}return t}},methods:{click:function(){var e=this,t=e.my.joinerId;if(e.my.self);else if(t){setTimeout(function(){var e=pathify(h.pathname).replace(/(\/*$)/g,"");window.location.href="/api/go.php?from="+encodeURIComponent(h.protocol+"//"+h.hostname+e+"/#!/activity/fullphotovote/"+activityId+"/joiner/"+t)},100)}else(0,f.showBeforeJoinTiper)(e.showDialog,function(){e.visible=!0,setTimeout(function(){e.joining=!0},0)})}}}},function(e,t,i){!function(){"use strict";function e(e){e.fn.swiper=function(t){var o;return e(this).each(function(){var e=new i(this,t);o||(o=e)}),o}}var t,i=function(e,n){function a(e){return Math.floor(e)}function r(){var e=x.params.autoplay,t=x.slides.eq(x.activeIndex);t.attr("data-swiper-autoplay")&&(e=t.attr("data-swiper-autoplay")||x.params.autoplay),x.autoplayTimeoutId=setTimeout(function(){x.params.loop?(x.fixLoop(),x._slideNext(),x.emit("onAutoplay",x)):x.isEnd?n.autoplayStopOnLast?x.stopAutoplay():(x._slideTo(0),x.emit("onAutoplay",x)):(x._slideNext(),x.emit("onAutoplay",x))},e)}function s(e,i){var o=t(e.target);if(!o.is(i))if("string"==typeof i)o=o.parents(i);else if(i.nodeType){var n;return o.parents().each(function(e,t){t===i&&(n=i)}),n?i:void 0}if(0!==o.length)return o[0]}function c(e,t){t=t||{};var i=window.MutationObserver||window.WebkitMutationObserver,o=new i(function(e){e.forEach(function(e){x.onResize(!0),x.emit("onObserverUpdate",x,e)})});o.observe(e,{attributes:"undefined"==typeof t.attributes||t.attributes,childList:"undefined"==typeof t.childList||t.childList,characterData:"undefined"==typeof t.characterData||t.characterData}),x.observers.push(o)}function u(e){e.originalEvent&&(e=e.originalEvent);var t=e.keyCode||e.charCode;if(!x.params.allowSwipeToNext&&(x.isHorizontal()&&39===t||!x.isHorizontal()&&40===t))return!1;if(!x.params.allowSwipeToPrev&&(x.isHorizontal()&&37===t||!x.isHorizontal()&&38===t))return!1;if(!(e.shiftKey||e.altKey||e.ctrlKey||e.metaKey||document.activeElement&&document.activeElement.nodeName&&("input"===document.activeElement.nodeName.toLowerCase()||"textarea"===document.activeElement.nodeName.toLowerCase()))){if(37===t||39===t||38===t||40===t){var i=!1;if(x.container.parents("."+x.params.slideClass).length>0&&0===x.container.parents("."+x.params.slideActiveClass).length)return;var o={left:window.pageXOffset,top:window.pageYOffset},n=window.innerWidth,a=window.innerHeight,r=x.container.offset();x.rtl&&(r.left=r.left-x.container[0].scrollLeft);for(var s=[[r.left,r.top],[r.left+x.width,r.top],[r.left,r.top+x.height],[r.left+x.width,r.top+x.height]],c=0;c<s.length;c++){var u=s[c];u[0]>=o.left&&u[0]<=o.left+n&&u[1]>=o.top&&u[1]<=o.top+a&&(i=!0)}if(!i)return}x.isHorizontal()?(37!==t&&39!==t||(e.preventDefault?e.preventDefault():e.returnValue=!1),(39===t&&!x.rtl||37===t&&x.rtl)&&x.slideNext(),(37===t&&!x.rtl||39===t&&x.rtl)&&x.slidePrev()):(38!==t&&40!==t||(e.preventDefault?e.preventDefault():e.returnValue=!1),40===t&&x.slideNext(),38===t&&x.slidePrev()),x.emit("onKeyPress",x,t)}}function d(){var e="onwheel",t=e in document;if(!t){var i=document.createElement("div");i.setAttribute(e,"return;"),t="function"==typeof i[e]}return!t&&document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0&&(t=document.implementation.hasFeature("Events.wheel","3.0")),t}function l(e){var t=10,i=40,o=800,n=0,a=0,r=0,s=0;return"detail"in e&&(a=e.detail),"wheelDelta"in e&&(a=-e.wheelDelta/120),"wheelDeltaY"in e&&(a=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(n=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(n=a,a=0),r=n*t,s=a*t,"deltaY"in e&&(s=e.deltaY),"deltaX"in e&&(r=e.deltaX),(r||s)&&e.deltaMode&&(1===e.deltaMode?(r*=i,s*=i):(r*=o,s*=o)),r&&!n&&(n=r<1?-1:1),s&&!a&&(a=s<1?-1:1),{spinX:n,spinY:a,pixelX:r,pixelY:s}}function f(e){e.originalEvent&&(e=e.originalEvent);var t=0,i=x.rtl?-1:1,o=l(e);if(x.params.mousewheelForceToAxis)if(x.isHorizontal()){if(!(Math.abs(o.pixelX)>Math.abs(o.pixelY)))return;t=o.pixelX*i}else{if(!(Math.abs(o.pixelY)>Math.abs(o.pixelX)))return;t=o.pixelY}else t=Math.abs(o.pixelX)>Math.abs(o.pixelY)?-o.pixelX*i:-o.pixelY;if(0!==t){if(x.params.mousewheelInvert&&(t=-t),x.params.freeMode){var n=x.getWrapperTranslate()+t*x.params.mousewheelSensitivity,a=x.isBeginning,r=x.isEnd;if(n>=x.minTranslate()&&(n=x.minTranslate()),n<=x.maxTranslate()&&(n=x.maxTranslate()),x.setWrapperTransition(0),x.setWrapperTranslate(n),x.updateProgress(),x.updateActiveIndex(),(!a&&x.isBeginning||!r&&x.isEnd)&&x.updateClasses(),x.params.freeModeSticky?(clearTimeout(x.mousewheel.timeout),x.mousewheel.timeout=setTimeout(function(){x.slideReset()},300)):x.params.lazyLoading&&x.lazy&&x.lazy.load(),x.emit("onScroll",x,e),x.params.autoplay&&x.params.autoplayDisableOnInteraction&&x.stopAutoplay(),0===n||n===x.maxTranslate())return}else{if((new window.Date).getTime()-x.mousewheel.lastScrollTime>60)if(t<0)if(x.isEnd&&!x.params.loop||x.animating){if(x.params.mousewheelReleaseOnEdges)return!0}else x.slideNext(),x.emit("onScroll",x,e);else if(x.isBeginning&&!x.params.loop||x.animating){if(x.params.mousewheelReleaseOnEdges)return!0}else x.slidePrev(),x.emit("onScroll",x,e);x.mousewheel.lastScrollTime=(new window.Date).getTime()}return e.preventDefault?e.preventDefault():e.returnValue=!1,!1}}function h(e,i){e=t(e);var o,n,a,r=x.rtl?-1:1;o=e.attr("data-swiper-parallax")||"0",n=e.attr("data-swiper-parallax-x"),a=e.attr("data-swiper-parallax-y"),n||a?(n=n||"0",a=a||"0"):x.isHorizontal()?(n=o,a="0"):(a=o,n="0"),n=n.indexOf("%")>=0?parseInt(n,10)*i*r+"%":n*i*r+"px",a=a.indexOf("%")>=0?parseInt(a,10)*i+"%":a*i+"px",e.transform("translate3d("+n+", "+a+",0px)")}function p(e){return 0!==e.indexOf("on")&&(e=e[0]!==e[0].toUpperCase()?"on"+e[0].toUpperCase()+e.substring(1):"on"+e),e}if(!(this instanceof i))return new i(e,n);var m={direction:"horizontal",touchEventsTarget:"container",initialSlide:0,speed:300,autoplay:!1,autoplayDisableOnInteraction:!0,autoplayStopOnLast:!1,iOSEdgeSwipeDetection:!1,iOSEdgeSwipeThreshold:20,freeMode:!1,freeModeMomentum:!0,freeModeMomentumRatio:1,freeModeMomentumBounce:!0,freeModeMomentumBounceRatio:1,freeModeMomentumVelocityRatio:1,freeModeSticky:!1,freeModeMinimumVelocity:.02,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",coverflow:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:!0},flip:{slideShadows:!0,limitRotation:!0},cube:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94},fade:{crossFade:!1},parallax:!1,zoom:!1,zoomMax:3,zoomMin:1,zoomToggle:!0,scrollbar:null,
scrollbarHide:!0,scrollbarDraggable:!1,scrollbarSnapOnRelease:!1,keyboardControl:!1,mousewheelControl:!1,mousewheelReleaseOnEdges:!1,mousewheelInvert:!1,mousewheelForceToAxis:!1,mousewheelSensitivity:1,mousewheelEventsTarged:"container",hashnav:!1,hashnavWatchState:!1,history:!1,replaceState:!1,breakpoints:void 0,spaceBetween:0,slidesPerView:1,slidesPerColumn:1,slidesPerColumnFill:"column",slidesPerGroup:1,centeredSlides:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,onlyExternal:!1,threshold:0,touchMoveStopPropagation:!0,touchReleaseOnEdges:!1,uniqueNavElements:!0,pagination:null,paginationElement:"span",paginationClickable:!1,paginationHide:!1,paginationBulletRender:null,paginationProgressRender:null,paginationFractionRender:null,paginationCustomRender:null,paginationType:"bullets",resistance:!0,resistanceRatio:.85,nextButton:null,prevButton:null,watchSlidesProgress:!1,watchSlidesVisibility:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,lazyLoading:!1,lazyLoadingInPrevNext:!1,lazyLoadingInPrevNextAmount:1,lazyLoadingOnTransitionStart:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,control:void 0,controlInverse:!1,controlBy:"slide",normalizeSlideIndex:!0,allowSwipeToPrev:!0,allowSwipeToNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",passiveListeners:!0,containerModifierClass:"swiper-container-",slideClass:"swiper-slide",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",bulletClass:"swiper-pagination-bullet",bulletActiveClass:"swiper-pagination-bullet-active",buttonDisabledClass:"swiper-button-disabled",paginationCurrentClass:"swiper-pagination-current",paginationTotalClass:"swiper-pagination-total",paginationHiddenClass:"swiper-pagination-hidden",paginationProgressbarClass:"swiper-pagination-progressbar",paginationClickableClass:"swiper-pagination-clickable",paginationModifierClass:"swiper-pagination-",lazyLoadingClass:"swiper-lazy",lazyStatusLoadingClass:"swiper-lazy-loading",lazyStatusLoadedClass:"swiper-lazy-loaded",lazyPreloaderClass:"swiper-lazy-preloader",notificationClass:"swiper-notification",preloaderClass:"preloader",zoomContainerClass:"swiper-zoom-container",observer:!1,observeParents:!1,a11y:!1,prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}",runCallbacksOnInit:!0},g=n&&n.virtualTranslate;n=n||{};var v={};for(var y in n)if("object"!=typeof n[y]||null===n[y]||(n[y].nodeType||n[y]===window||n[y]===document||"undefined"!=typeof o&&n[y]instanceof o||"undefined"!=typeof jQuery&&n[y]instanceof jQuery))v[y]=n[y];else{v[y]={};for(var w in n[y])v[y][w]=n[y][w]}for(var _ in m)if("undefined"==typeof n[_])n[_]=m[_];else if("object"==typeof n[_])for(var b in m[_])"undefined"==typeof n[_][b]&&(n[_][b]=m[_][b]);var x=this;if(x.params=n,x.originalParams=v,x.classNames=[],"undefined"!=typeof t&&"undefined"!=typeof o&&(t=o),("undefined"!=typeof t||(t="undefined"==typeof o?window.Dom7||window.Zepto||window.jQuery:o))&&(x.$=t,x.currentBreakpoint=void 0,x.getActiveBreakpoint=function(){if(!x.params.breakpoints)return!1;var e,t=!1,i=[];for(e in x.params.breakpoints)x.params.breakpoints.hasOwnProperty(e)&&i.push(e);i.sort(function(e,t){return parseInt(e,10)>parseInt(t,10)});for(var o=0;o<i.length;o++)e=i[o],e>=window.innerWidth&&!t&&(t=e);return t||"max"},x.setBreakpoint=function(){var e=x.getActiveBreakpoint();if(e&&x.currentBreakpoint!==e){var t=e in x.params.breakpoints?x.params.breakpoints[e]:x.originalParams,i=x.params.loop&&t.slidesPerView!==x.params.slidesPerView;for(var o in t)x.params[o]=t[o];x.currentBreakpoint=e,i&&x.destroyLoop&&x.reLoop(!0)}},x.params.breakpoints&&x.setBreakpoint(),x.container=t(e),0!==x.container.length)){if(x.container.length>1){var j=[];return x.container.each(function(){j.push(new i(this,n))}),j}x.container[0].swiper=x,x.container.data("swiper",x),x.classNames.push(x.params.containerModifierClass+x.params.direction),x.params.freeMode&&x.classNames.push(x.params.containerModifierClass+"free-mode"),x.support.flexbox||(x.classNames.push(x.params.containerModifierClass+"no-flexbox"),x.params.slidesPerColumn=1),x.params.autoHeight&&x.classNames.push(x.params.containerModifierClass+"autoheight"),(x.params.parallax||x.params.watchSlidesVisibility)&&(x.params.watchSlidesProgress=!0),x.params.touchReleaseOnEdges&&(x.params.resistanceRatio=0),["cube","coverflow","flip"].indexOf(x.params.effect)>=0&&(x.support.transforms3d?(x.params.watchSlidesProgress=!0,x.classNames.push(x.params.containerModifierClass+"3d")):x.params.effect="slide"),"slide"!==x.params.effect&&x.classNames.push(x.params.containerModifierClass+x.params.effect),"cube"===x.params.effect&&(x.params.resistanceRatio=0,x.params.slidesPerView=1,x.params.slidesPerColumn=1,x.params.slidesPerGroup=1,x.params.centeredSlides=!1,x.params.spaceBetween=0,x.params.virtualTranslate=!0),"fade"!==x.params.effect&&"flip"!==x.params.effect||(x.params.slidesPerView=1,x.params.slidesPerColumn=1,x.params.slidesPerGroup=1,x.params.watchSlidesProgress=!0,x.params.spaceBetween=0,"undefined"==typeof g&&(x.params.virtualTranslate=!0)),x.params.grabCursor&&x.support.touch&&(x.params.grabCursor=!1),x.wrapper=x.container.children("."+x.params.wrapperClass),x.params.pagination&&(x.paginationContainer=t(x.params.pagination),x.params.uniqueNavElements&&"string"==typeof x.params.pagination&&x.paginationContainer.length>1&&1===x.container.find(x.params.pagination).length&&(x.paginationContainer=x.container.find(x.params.pagination)),"bullets"===x.params.paginationType&&x.params.paginationClickable?x.paginationContainer.addClass(x.params.paginationModifierClass+"clickable"):x.params.paginationClickable=!1,x.paginationContainer.addClass(x.params.paginationModifierClass+x.params.paginationType)),(x.params.nextButton||x.params.prevButton)&&(x.params.nextButton&&(x.nextButton=t(x.params.nextButton),x.params.uniqueNavElements&&"string"==typeof x.params.nextButton&&x.nextButton.length>1&&1===x.container.find(x.params.nextButton).length&&(x.nextButton=x.container.find(x.params.nextButton))),x.params.prevButton&&(x.prevButton=t(x.params.prevButton),x.params.uniqueNavElements&&"string"==typeof x.params.prevButton&&x.prevButton.length>1&&1===x.container.find(x.params.prevButton).length&&(x.prevButton=x.container.find(x.params.prevButton)))),x.isHorizontal=function(){return"horizontal"===x.params.direction},x.rtl=x.isHorizontal()&&("rtl"===x.container[0].dir.toLowerCase()||"rtl"===x.container.css("direction")),x.rtl&&x.classNames.push(x.params.containerModifierClass+"rtl"),x.rtl&&(x.wrongRTL="-webkit-box"===x.wrapper.css("display")),x.params.slidesPerColumn>1&&x.classNames.push(x.params.containerModifierClass+"multirow"),x.device.android&&x.classNames.push(x.params.containerModifierClass+"android"),x.container.addClass(x.classNames.join(" ")),x.translate=0,x.progress=0,x.velocity=0,x.lockSwipeToNext=function(){x.params.allowSwipeToNext=!1,x.params.allowSwipeToPrev===!1&&x.params.grabCursor&&x.unsetGrabCursor()},x.lockSwipeToPrev=function(){x.params.allowSwipeToPrev=!1,x.params.allowSwipeToNext===!1&&x.params.grabCursor&&x.unsetGrabCursor()},x.lockSwipes=function(){x.params.allowSwipeToNext=x.params.allowSwipeToPrev=!1,x.params.grabCursor&&x.unsetGrabCursor()},x.unlockSwipeToNext=function(){x.params.allowSwipeToNext=!0,x.params.allowSwipeToPrev===!0&&x.params.grabCursor&&x.setGrabCursor()},x.unlockSwipeToPrev=function(){x.params.allowSwipeToPrev=!0,x.params.allowSwipeToNext===!0&&x.params.grabCursor&&x.setGrabCursor()},x.unlockSwipes=function(){x.params.allowSwipeToNext=x.params.allowSwipeToPrev=!0,x.params.grabCursor&&x.setGrabCursor()},x.setGrabCursor=function(e){x.container[0].style.cursor="move",x.container[0].style.cursor=e?"-webkit-grabbing":"-webkit-grab",x.container[0].style.cursor=e?"-moz-grabbin":"-moz-grab",x.container[0].style.cursor=e?"grabbing":"grab"},x.unsetGrabCursor=function(){x.container[0].style.cursor=""},x.params.grabCursor&&x.setGrabCursor(),x.imagesToLoad=[],x.imagesLoaded=0,x.loadImage=function(e,t,i,o,n,a){function r(){a&&a()}var s;e.complete&&n?r():t?(s=new window.Image,s.onload=r,s.onerror=r,o&&(s.sizes=o),i&&(s.srcset=i),t&&(s.src=t)):r()},x.preloadImages=function(){function e(){"undefined"!=typeof x&&null!==x&&x&&(void 0!==x.imagesLoaded&&x.imagesLoaded++,x.imagesLoaded===x.imagesToLoad.length&&(x.params.updateOnImagesReady&&x.update(),x.emit("onImagesReady",x)))}x.imagesToLoad=x.container.find("img");for(var t=0;t<x.imagesToLoad.length;t++)x.loadImage(x.imagesToLoad[t],x.imagesToLoad[t].currentSrc||x.imagesToLoad[t].getAttribute("src"),x.imagesToLoad[t].srcset||x.imagesToLoad[t].getAttribute("srcset"),x.imagesToLoad[t].sizes||x.imagesToLoad[t].getAttribute("sizes"),!0,e)},x.autoplayTimeoutId=void 0,x.autoplaying=!1,x.autoplayPaused=!1,x.startAutoplay=function(){return"undefined"==typeof x.autoplayTimeoutId&&(!!x.params.autoplay&&(!x.autoplaying&&(x.autoplaying=!0,x.emit("onAutoplayStart",x),void r())))},x.stopAutoplay=function(e){x.autoplayTimeoutId&&(x.autoplayTimeoutId&&clearTimeout(x.autoplayTimeoutId),x.autoplaying=!1,x.autoplayTimeoutId=void 0,x.emit("onAutoplayStop",x))},x.pauseAutoplay=function(e){x.autoplayPaused||(x.autoplayTimeoutId&&clearTimeout(x.autoplayTimeoutId),x.autoplayPaused=!0,0===e?(x.autoplayPaused=!1,r()):x.wrapper.transitionEnd(function(){x&&(x.autoplayPaused=!1,x.autoplaying?r():x.stopAutoplay())}))},x.minTranslate=function(){return-x.snapGrid[0]},x.maxTranslate=function(){return-x.snapGrid[x.snapGrid.length-1]},x.updateAutoHeight=function(){var e,t=[],i=0;if("auto"!==x.params.slidesPerView&&x.params.slidesPerView>1)for(e=0;e<Math.ceil(x.params.slidesPerView);e++){var o=x.activeIndex+e;if(o>x.slides.length)break;t.push(x.slides.eq(o)[0])}else t.push(x.slides.eq(x.activeIndex)[0]);for(e=0;e<t.length;e++)if("undefined"!=typeof t[e]){var n=t[e].offsetHeight;i=n>i?n:i}i&&x.wrapper.css("height",i+"px")},x.updateContainerSize=function(){var e,t;e="undefined"!=typeof x.params.width?x.params.width:x.container[0].clientWidth,t="undefined"!=typeof x.params.height?x.params.height:x.container[0].clientHeight,0===e&&x.isHorizontal()||0===t&&!x.isHorizontal()||(e=e-parseInt(x.container.css("padding-left"),10)-parseInt(x.container.css("padding-right"),10),t=t-parseInt(x.container.css("padding-top"),10)-parseInt(x.container.css("padding-bottom"),10),x.width=e,x.height=t,x.size=x.isHorizontal()?x.width:x.height)},x.updateSlidesSize=function(){x.slides=x.wrapper.children("."+x.params.slideClass),x.snapGrid=[],x.slidesGrid=[],x.slidesSizesGrid=[];var e,t=x.params.spaceBetween,i=-x.params.slidesOffsetBefore,o=0,n=0;if("undefined"!=typeof x.size){"string"==typeof t&&t.indexOf("%")>=0&&(t=parseFloat(t.replace("%",""))/100*x.size),x.virtualSize=-t,x.rtl?x.slides.css({marginLeft:"",marginTop:""}):x.slides.css({marginRight:"",marginBottom:""});var r;x.params.slidesPerColumn>1&&(r=Math.floor(x.slides.length/x.params.slidesPerColumn)===x.slides.length/x.params.slidesPerColumn?x.slides.length:Math.ceil(x.slides.length/x.params.slidesPerColumn)*x.params.slidesPerColumn,"auto"!==x.params.slidesPerView&&"row"===x.params.slidesPerColumnFill&&(r=Math.max(r,x.params.slidesPerView*x.params.slidesPerColumn)));var s,c=x.params.slidesPerColumn,u=r/c,d=u-(x.params.slidesPerColumn*u-x.slides.length);for(e=0;e<x.slides.length;e++){s=0;var l=x.slides.eq(e);if(x.params.slidesPerColumn>1){var f,h,p;"column"===x.params.slidesPerColumnFill?(h=Math.floor(e/c),p=e-h*c,(h>d||h===d&&p===c-1)&&++p>=c&&(p=0,h++),f=h+p*r/c,l.css({"-webkit-box-ordinal-group":f,"-moz-box-ordinal-group":f,"-ms-flex-order":f,"-webkit-order":f,order:f})):(p=Math.floor(e/u),h=e-p*u),l.css("margin-"+(x.isHorizontal()?"top":"left"),0!==p&&x.params.spaceBetween&&x.params.spaceBetween+"px").attr("data-swiper-column",h).attr("data-swiper-row",p)}"none"!==l.css("display")&&("auto"===x.params.slidesPerView?(s=x.isHorizontal()?l.outerWidth(!0):l.outerHeight(!0),x.params.roundLengths&&(s=a(s))):(s=(x.size-(x.params.slidesPerView-1)*t)/x.params.slidesPerView,x.params.roundLengths&&(s=a(s)),x.isHorizontal()?x.slides[e].style.width=s+"px":x.slides[e].style.height=s+"px"),x.slides[e].swiperSlideSize=s,x.slidesSizesGrid.push(s),x.params.centeredSlides?(i=i+s/2+o/2+t,0===o&&0!==e&&(i=i-x.size/2-t),0===e&&(i=i-x.size/2-t),Math.abs(i)<.001&&(i=0),n%x.params.slidesPerGroup===0&&x.snapGrid.push(i),x.slidesGrid.push(i)):(n%x.params.slidesPerGroup===0&&x.snapGrid.push(i),x.slidesGrid.push(i),i=i+s+t),x.virtualSize+=s+t,o=s,n++)}x.virtualSize=Math.max(x.virtualSize,x.size)+x.params.slidesOffsetAfter;var m;if(x.rtl&&x.wrongRTL&&("slide"===x.params.effect||"coverflow"===x.params.effect)&&x.wrapper.css({width:x.virtualSize+x.params.spaceBetween+"px"}),x.support.flexbox&&!x.params.setWrapperSize||(x.isHorizontal()?x.wrapper.css({width:x.virtualSize+x.params.spaceBetween+"px"}):x.wrapper.css({height:x.virtualSize+x.params.spaceBetween+"px"})),x.params.slidesPerColumn>1&&(x.virtualSize=(s+x.params.spaceBetween)*r,x.virtualSize=Math.ceil(x.virtualSize/x.params.slidesPerColumn)-x.params.spaceBetween,x.isHorizontal()?x.wrapper.css({width:x.virtualSize+x.params.spaceBetween+"px"}):x.wrapper.css({height:x.virtualSize+x.params.spaceBetween+"px"}),x.params.centeredSlides)){for(m=[],e=0;e<x.snapGrid.length;e++)x.snapGrid[e]<x.virtualSize+x.snapGrid[0]&&m.push(x.snapGrid[e]);x.snapGrid=m}if(!x.params.centeredSlides){for(m=[],e=0;e<x.snapGrid.length;e++)x.snapGrid[e]<=x.virtualSize-x.size&&m.push(x.snapGrid[e]);x.snapGrid=m,Math.floor(x.virtualSize-x.size)-Math.floor(x.snapGrid[x.snapGrid.length-1])>1&&x.snapGrid.push(x.virtualSize-x.size)}0===x.snapGrid.length&&(x.snapGrid=[0]),0!==x.params.spaceBetween&&(x.isHorizontal()?x.rtl?x.slides.css({marginLeft:t+"px"}):x.slides.css({marginRight:t+"px"}):x.slides.css({marginBottom:t+"px"})),x.params.watchSlidesProgress&&x.updateSlidesOffset()}},x.updateSlidesOffset=function(){for(var e=0;e<x.slides.length;e++)x.slides[e].swiperSlideOffset=x.isHorizontal()?x.slides[e].offsetLeft:x.slides[e].offsetTop},x.currentSlidesPerView=function(){var e,t,i=1;if(x.params.centeredSlides){var o,n=x.slides[x.activeIndex].swiperSlideSize;for(e=x.activeIndex+1;e<x.slides.length;e++)x.slides[e]&&!o&&(n+=x.slides[e].swiperSlideSize,i++,n>x.size&&(o=!0));for(t=x.activeIndex-1;t>=0;t--)x.slides[t]&&!o&&(n+=x.slides[t].swiperSlideSize,i++,n>x.size&&(o=!0))}else for(e=x.activeIndex+1;e<x.slides.length;e++)x.slidesGrid[e]-x.slidesGrid[x.activeIndex]<x.size&&i++;return i},x.updateSlidesProgress=function(e){if("undefined"==typeof e&&(e=x.translate||0),0!==x.slides.length){"undefined"==typeof x.slides[0].swiperSlideOffset&&x.updateSlidesOffset();var t=-e;x.rtl&&(t=e),x.slides.removeClass(x.params.slideVisibleClass);for(var i=0;i<x.slides.length;i++){var o=x.slides[i],n=(t+(x.params.centeredSlides?x.minTranslate():0)-o.swiperSlideOffset)/(o.swiperSlideSize+x.params.spaceBetween);if(x.params.watchSlidesVisibility){var a=-(t-o.swiperSlideOffset),r=a+x.slidesSizesGrid[i],s=a>=0&&a<x.size||r>0&&r<=x.size||a<=0&&r>=x.size;s&&x.slides.eq(i).addClass(x.params.slideVisibleClass)}o.progress=x.rtl?-n:n}}},x.updateProgress=function(e){"undefined"==typeof e&&(e=x.translate||0);var t=x.maxTranslate()-x.minTranslate(),i=x.isBeginning,o=x.isEnd;0===t?(x.progress=0,x.isBeginning=x.isEnd=!0):(x.progress=(e-x.minTranslate())/t,x.isBeginning=x.progress<=0,x.isEnd=x.progress>=1),x.isBeginning&&!i&&x.emit("onReachBeginning",x),x.isEnd&&!o&&x.emit("onReachEnd",x),x.params.watchSlidesProgress&&x.updateSlidesProgress(e),x.emit("onProgress",x,x.progress)},x.updateActiveIndex=function(){var e,t,i,o=x.rtl?x.translate:-x.translate;for(t=0;t<x.slidesGrid.length;t++)"undefined"!=typeof x.slidesGrid[t+1]?o>=x.slidesGrid[t]&&o<x.slidesGrid[t+1]-(x.slidesGrid[t+1]-x.slidesGrid[t])/2?e=t:o>=x.slidesGrid[t]&&o<x.slidesGrid[t+1]&&(e=t+1):o>=x.slidesGrid[t]&&(e=t);x.params.normalizeSlideIndex&&(e<0||"undefined"==typeof e)&&(e=0),i=Math.floor(e/x.params.slidesPerGroup),i>=x.snapGrid.length&&(i=x.snapGrid.length-1),e!==x.activeIndex&&(x.snapIndex=i,x.previousIndex=x.activeIndex,x.activeIndex=e,x.updateClasses(),x.updateRealIndex())},x.updateRealIndex=function(){x.realIndex=parseInt(x.slides.eq(x.activeIndex).attr("data-swiper-slide-index")||x.activeIndex,10)},x.updateClasses=function(){x.slides.removeClass(x.params.slideActiveClass+" "+x.params.slideNextClass+" "+x.params.slidePrevClass+" "+x.params.slideDuplicateActiveClass+" "+x.params.slideDuplicateNextClass+" "+x.params.slideDuplicatePrevClass);var e=x.slides.eq(x.activeIndex);e.addClass(x.params.slideActiveClass),n.loop&&(e.hasClass(x.params.slideDuplicateClass)?x.wrapper.children("."+x.params.slideClass+":not(."+x.params.slideDuplicateClass+')[data-swiper-slide-index="'+x.realIndex+'"]').addClass(x.params.slideDuplicateActiveClass):x.wrapper.children("."+x.params.slideClass+"."+x.params.slideDuplicateClass+'[data-swiper-slide-index="'+x.realIndex+'"]').addClass(x.params.slideDuplicateActiveClass));var i=e.next("."+x.params.slideClass).addClass(x.params.slideNextClass);x.params.loop&&0===i.length&&(i=x.slides.eq(0),i.addClass(x.params.slideNextClass));var o=e.prev("."+x.params.slideClass).addClass(x.params.slidePrevClass);if(x.params.loop&&0===o.length&&(o=x.slides.eq(-1),o.addClass(x.params.slidePrevClass)),n.loop&&(i.hasClass(x.params.slideDuplicateClass)?x.wrapper.children("."+x.params.slideClass+":not(."+x.params.slideDuplicateClass+')[data-swiper-slide-index="'+i.attr("data-swiper-slide-index")+'"]').addClass(x.params.slideDuplicateNextClass):x.wrapper.children("."+x.params.slideClass+"."+x.params.slideDuplicateClass+'[data-swiper-slide-index="'+i.attr("data-swiper-slide-index")+'"]').addClass(x.params.slideDuplicateNextClass),o.hasClass(x.params.slideDuplicateClass)?x.wrapper.children("."+x.params.slideClass+":not(."+x.params.slideDuplicateClass+')[data-swiper-slide-index="'+o.attr("data-swiper-slide-index")+'"]').addClass(x.params.slideDuplicatePrevClass):x.wrapper.children("."+x.params.slideClass+"."+x.params.slideDuplicateClass+'[data-swiper-slide-index="'+o.attr("data-swiper-slide-index")+'"]').addClass(x.params.slideDuplicatePrevClass)),x.paginationContainer&&x.paginationContainer.length>0){var a,r=x.params.loop?Math.ceil((x.slides.length-2*x.loopedSlides)/x.params.slidesPerGroup):x.snapGrid.length;if(x.params.loop?(a=Math.ceil((x.activeIndex-x.loopedSlides)/x.params.slidesPerGroup),a>x.slides.length-1-2*x.loopedSlides&&(a-=x.slides.length-2*x.loopedSlides),a>r-1&&(a-=r),a<0&&"bullets"!==x.params.paginationType&&(a=r+a)):a="undefined"!=typeof x.snapIndex?x.snapIndex:x.activeIndex||0,"bullets"===x.params.paginationType&&x.bullets&&x.bullets.length>0&&(x.bullets.removeClass(x.params.bulletActiveClass),x.paginationContainer.length>1?x.bullets.each(function(){t(this).index()===a&&t(this).addClass(x.params.bulletActiveClass)}):x.bullets.eq(a).addClass(x.params.bulletActiveClass)),"fraction"===x.params.paginationType&&(x.paginationContainer.find("."+x.params.paginationCurrentClass).text(a+1),x.paginationContainer.find("."+x.params.paginationTotalClass).text(r)),"progress"===x.params.paginationType){var s=(a+1)/r,c=s,u=1;x.isHorizontal()||(u=s,c=1),x.paginationContainer.find("."+x.params.paginationProgressbarClass).transform("translate3d(0,0,0) scaleX("+c+") scaleY("+u+")").transition(x.params.speed)}"custom"===x.params.paginationType&&x.params.paginationCustomRender&&(x.paginationContainer.html(x.params.paginationCustomRender(x,a+1,r)),x.emit("onPaginationRendered",x,x.paginationContainer[0]))}x.params.loop||(x.params.prevButton&&x.prevButton&&x.prevButton.length>0&&(x.isBeginning?(x.prevButton.addClass(x.params.buttonDisabledClass),x.params.a11y&&x.a11y&&x.a11y.disable(x.prevButton)):(x.prevButton.removeClass(x.params.buttonDisabledClass),x.params.a11y&&x.a11y&&x.a11y.enable(x.prevButton))),x.params.nextButton&&x.nextButton&&x.nextButton.length>0&&(x.isEnd?(x.nextButton.addClass(x.params.buttonDisabledClass),x.params.a11y&&x.a11y&&x.a11y.disable(x.nextButton)):(x.nextButton.removeClass(x.params.buttonDisabledClass),x.params.a11y&&x.a11y&&x.a11y.enable(x.nextButton))))},x.updatePagination=function(){if(x.params.pagination&&x.paginationContainer&&x.paginationContainer.length>0){var e="";if("bullets"===x.params.paginationType){for(var t=x.params.loop?Math.ceil((x.slides.length-2*x.loopedSlides)/x.params.slidesPerGroup):x.snapGrid.length,i=0;i<t;i++)e+=x.params.paginationBulletRender?x.params.paginationBulletRender(x,i,x.params.bulletClass):"<"+x.params.paginationElement+' class="'+x.params.bulletClass+'"></'+x.params.paginationElement+">";x.paginationContainer.html(e),x.bullets=x.paginationContainer.find("."+x.params.bulletClass),x.params.paginationClickable&&x.params.a11y&&x.a11y&&x.a11y.initPagination()}"fraction"===x.params.paginationType&&(e=x.params.paginationFractionRender?x.params.paginationFractionRender(x,x.params.paginationCurrentClass,x.params.paginationTotalClass):'<span class="'+x.params.paginationCurrentClass+'"></span> / <span class="'+x.params.paginationTotalClass+'"></span>',x.paginationContainer.html(e)),"progress"===x.params.paginationType&&(e=x.params.paginationProgressRender?x.params.paginationProgressRender(x,x.params.paginationProgressbarClass):'<span class="'+x.params.paginationProgressbarClass+'"></span>',x.paginationContainer.html(e)),"custom"!==x.params.paginationType&&x.emit("onPaginationRendered",x,x.paginationContainer[0])}},x.update=function(e){function t(){x.rtl?-x.translate:x.translate;i=Math.min(Math.max(x.translate,x.maxTranslate()),x.minTranslate()),x.setWrapperTranslate(i),x.updateActiveIndex(),x.updateClasses()}if(x){x.updateContainerSize(),x.updateSlidesSize(),x.updateProgress(),x.updatePagination(),x.updateClasses(),x.params.scrollbar&&x.scrollbar&&x.scrollbar.set();var i;if(e){var o;x.controller&&x.controller.spline&&(x.controller.spline=void 0),x.params.freeMode?(t(),x.params.autoHeight&&x.updateAutoHeight()):(o=("auto"===x.params.slidesPerView||x.params.slidesPerView>1)&&x.isEnd&&!x.params.centeredSlides?x.slideTo(x.slides.length-1,0,!1,!0):x.slideTo(x.activeIndex,0,!1,!0),o||t())}else x.params.autoHeight&&x.updateAutoHeight()}},x.onResize=function(e){x.params.onBeforeResize&&x.params.onBeforeResize(x),x.params.breakpoints&&x.setBreakpoint();var t=x.params.allowSwipeToPrev,i=x.params.allowSwipeToNext;x.params.allowSwipeToPrev=x.params.allowSwipeToNext=!0,x.updateContainerSize(),x.updateSlidesSize(),("auto"===x.params.slidesPerView||x.params.freeMode||e)&&x.updatePagination(),x.params.scrollbar&&x.scrollbar&&x.scrollbar.set(),x.controller&&x.controller.spline&&(x.controller.spline=void 0);var o=!1;if(x.params.freeMode){var n=Math.min(Math.max(x.translate,x.maxTranslate()),x.minTranslate());x.setWrapperTranslate(n),x.updateActiveIndex(),x.updateClasses(),x.params.autoHeight&&x.updateAutoHeight()}else x.updateClasses(),o=("auto"===x.params.slidesPerView||x.params.slidesPerView>1)&&x.isEnd&&!x.params.centeredSlides?x.slideTo(x.slides.length-1,0,!1,!0):x.slideTo(x.activeIndex,0,!1,!0);x.params.lazyLoading&&!o&&x.lazy&&x.lazy.load(),x.params.allowSwipeToPrev=t,x.params.allowSwipeToNext=i,x.params.onAfterResize&&x.params.onAfterResize(x)},x.touchEventsDesktop={start:"mousedown",move:"mousemove",end:"mouseup"},window.navigator.pointerEnabled?x.touchEventsDesktop={start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled&&(x.touchEventsDesktop={start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}),x.touchEvents={start:x.support.touch||!x.params.simulateTouch?"touchstart":x.touchEventsDesktop.start,move:x.support.touch||!x.params.simulateTouch?"touchmove":x.touchEventsDesktop.move,end:x.support.touch||!x.params.simulateTouch?"touchend":x.touchEventsDesktop.end},(window.navigator.pointerEnabled||window.navigator.msPointerEnabled)&&("container"===x.params.touchEventsTarget?x.container:x.wrapper).addClass("swiper-wp8-"+x.params.direction),x.initEvents=function(e){var t=e?"off":"on",i=e?"removeEventListener":"addEventListener",o="container"===x.params.touchEventsTarget?x.container[0]:x.wrapper[0],a=x.support.touch?o:document,r=!!x.params.nested;if(x.browser.ie)o[i](x.touchEvents.start,x.onTouchStart,!1),a[i](x.touchEvents.move,x.onTouchMove,r),a[i](x.touchEvents.end,x.onTouchEnd,!1);else{if(x.support.touch){var s=!("touchstart"!==x.touchEvents.start||!x.support.passiveListener||!x.params.passiveListeners)&&{passive:!0,capture:!1};o[i](x.touchEvents.start,x.onTouchStart,s),o[i](x.touchEvents.move,x.onTouchMove,r),o[i](x.touchEvents.end,x.onTouchEnd,s)}(n.simulateTouch&&!x.device.ios&&!x.device.android||n.simulateTouch&&!x.support.touch&&x.device.ios)&&(o[i]("mousedown",x.onTouchStart,!1),document[i]("mousemove",x.onTouchMove,r),document[i]("mouseup",x.onTouchEnd,!1))}window[i]("resize",x.onResize),x.params.nextButton&&x.nextButton&&x.nextButton.length>0&&(x.nextButton[t]("click",x.onClickNext),x.params.a11y&&x.a11y&&x.nextButton[t]("keydown",x.a11y.onEnterKey)),x.params.prevButton&&x.prevButton&&x.prevButton.length>0&&(x.prevButton[t]("click",x.onClickPrev),x.params.a11y&&x.a11y&&x.prevButton[t]("keydown",x.a11y.onEnterKey)),x.params.pagination&&x.params.paginationClickable&&(x.paginationContainer[t]("click","."+x.params.bulletClass,x.onClickIndex),x.params.a11y&&x.a11y&&x.paginationContainer[t]("keydown","."+x.params.bulletClass,x.a11y.onEnterKey)),(x.params.preventClicks||x.params.preventClicksPropagation)&&o[i]("click",x.preventClicks,!0)},x.attachEvents=function(){x.initEvents()},x.detachEvents=function(){x.initEvents(!0)},x.allowClick=!0,x.preventClicks=function(e){x.allowClick||(x.params.preventClicks&&e.preventDefault(),x.params.preventClicksPropagation&&x.animating&&(e.stopPropagation(),e.stopImmediatePropagation()))},x.onClickNext=function(e){e.preventDefault(),x.isEnd&&!x.params.loop||x.slideNext()},x.onClickPrev=function(e){e.preventDefault(),x.isBeginning&&!x.params.loop||x.slidePrev()},x.onClickIndex=function(e){e.preventDefault();var i=t(this).index()*x.params.slidesPerGroup;x.params.loop&&(i+=x.loopedSlides),x.slideTo(i)},x.updateClickedSlide=function(e){var i=s(e,"."+x.params.slideClass),o=!1;if(i)for(var n=0;n<x.slides.length;n++)x.slides[n]===i&&(o=!0);if(!i||!o)return x.clickedSlide=void 0,void(x.clickedIndex=void 0);if(x.clickedSlide=i,x.clickedIndex=t(i).index(),x.params.slideToClickedSlide&&void 0!==x.clickedIndex&&x.clickedIndex!==x.activeIndex){var a,r=x.clickedIndex,c="auto"===x.params.slidesPerView?x.currentSlidesPerView():x.params.slidesPerView;if(x.params.loop){if(x.animating)return;a=parseInt(t(x.clickedSlide).attr("data-swiper-slide-index"),10),x.params.centeredSlides?r<x.loopedSlides-c/2||r>x.slides.length-x.loopedSlides+c/2?(x.fixLoop(),r=x.wrapper.children("."+x.params.slideClass+'[data-swiper-slide-index="'+a+'"]:not(.'+x.params.slideDuplicateClass+")").eq(0).index(),setTimeout(function(){x.slideTo(r)},0)):x.slideTo(r):r>x.slides.length-c?(x.fixLoop(),r=x.wrapper.children("."+x.params.slideClass+'[data-swiper-slide-index="'+a+'"]:not(.'+x.params.slideDuplicateClass+")").eq(0).index(),setTimeout(function(){x.slideTo(r)},0)):x.slideTo(r)}else x.slideTo(r)}};var $,D,k,S,T,z,I,M,L,C,O="input, select, textarea, button, video",P=Date.now(),E=[];x.animating=!1,x.touches={startX:0,startY:0,currentX:0,currentY:0,diff:0};var A,N;x.onTouchStart=function(e){if(e.originalEvent&&(e=e.originalEvent),A="touchstart"===e.type,A||!("which"in e)||3!==e.which){if(x.params.noSwiping&&s(e,"."+x.params.noSwipingClass))return void(x.allowClick=!0);if(!x.params.swipeHandler||s(e,x.params.swipeHandler)){var i=x.touches.currentX="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,o=x.touches.currentY="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY;if(!(x.device.ios&&x.params.iOSEdgeSwipeDetection&&i<=x.params.iOSEdgeSwipeThreshold)){if($=!0,D=!1,k=!0,T=void 0,N=void 0,x.touches.startX=i,x.touches.startY=o,S=Date.now(),x.allowClick=!0,x.updateContainerSize(),x.swipeDirection=void 0,x.params.threshold>0&&(M=!1),"touchstart"!==e.type){var n=!0;t(e.target).is(O)&&(n=!1),document.activeElement&&t(document.activeElement).is(O)&&document.activeElement.blur(),n&&e.preventDefault()}x.emit("onTouchStart",x,e)}}}},x.onTouchMove=function(e){if(e.originalEvent&&(e=e.originalEvent),!A||"mousemove"!==e.type){if(e.preventedByNestedSwiper)return x.touches.startX="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,void(x.touches.startY="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY);if(x.params.onlyExternal)return x.allowClick=!1,void($&&(x.touches.startX=x.touches.currentX="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,x.touches.startY=x.touches.currentY="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,S=Date.now()));if(A&&x.params.touchReleaseOnEdges&&!x.params.loop)if(x.isHorizontal()){if(x.touches.currentX<x.touches.startX&&x.translate<=x.maxTranslate()||x.touches.currentX>x.touches.startX&&x.translate>=x.minTranslate())return}else if(x.touches.currentY<x.touches.startY&&x.translate<=x.maxTranslate()||x.touches.currentY>x.touches.startY&&x.translate>=x.minTranslate())return;if(A&&document.activeElement&&e.target===document.activeElement&&t(e.target).is(O))return D=!0,void(x.allowClick=!1);if(k&&x.emit("onTouchMove",x,e),!(e.targetTouches&&e.targetTouches.length>1)){if(x.touches.currentX="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,x.touches.currentY="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,"undefined"==typeof T){var i;x.isHorizontal()&&x.touches.currentY===x.touches.startY||!x.isHorizontal()&&x.touches.currentX===x.touches.startX?T=!1:(i=180*Math.atan2(Math.abs(x.touches.currentY-x.touches.startY),Math.abs(x.touches.currentX-x.touches.startX))/Math.PI,T=x.isHorizontal()?i>x.params.touchAngle:90-i>x.params.touchAngle)}if(T&&x.emit("onTouchMoveOpposite",x,e),"undefined"==typeof N&&(x.touches.currentX===x.touches.startX&&x.touches.currentY===x.touches.startY||(N=!0)),$){if(T)return void($=!1);if(N){x.allowClick=!1,x.emit("onSliderMove",x,e),e.preventDefault(),x.params.touchMoveStopPropagation&&!x.params.nested&&e.stopPropagation(),D||(n.loop&&x.fixLoop(),I=x.getWrapperTranslate(),x.setWrapperTransition(0),x.animating&&x.wrapper.trigger("webkitTransitionEnd transitionend oTransitionEnd MSTransitionEnd msTransitionEnd"),x.params.autoplay&&x.autoplaying&&(x.params.autoplayDisableOnInteraction?x.stopAutoplay():x.pauseAutoplay()),C=!1,!x.params.grabCursor||x.params.allowSwipeToNext!==!0&&x.params.allowSwipeToPrev!==!0||x.setGrabCursor(!0)),D=!0;var o=x.touches.diff=x.isHorizontal()?x.touches.currentX-x.touches.startX:x.touches.currentY-x.touches.startY;o*=x.params.touchRatio,x.rtl&&(o=-o),x.swipeDirection=o>0?"prev":"next",z=o+I;var a=!0;if(o>0&&z>x.minTranslate()?(a=!1,x.params.resistance&&(z=x.minTranslate()-1+Math.pow(-x.minTranslate()+I+o,x.params.resistanceRatio))):o<0&&z<x.maxTranslate()&&(a=!1,x.params.resistance&&(z=x.maxTranslate()+1-Math.pow(x.maxTranslate()-I-o,x.params.resistanceRatio))),a&&(e.preventedByNestedSwiper=!0),!x.params.allowSwipeToNext&&"next"===x.swipeDirection&&z<I&&(z=I),!x.params.allowSwipeToPrev&&"prev"===x.swipeDirection&&z>I&&(z=I),x.params.threshold>0){if(!(Math.abs(o)>x.params.threshold||M))return void(z=I);if(!M)return M=!0,x.touches.startX=x.touches.currentX,x.touches.startY=x.touches.currentY,z=I,void(x.touches.diff=x.isHorizontal()?x.touches.currentX-x.touches.startX:x.touches.currentY-x.touches.startY)}x.params.followFinger&&((x.params.freeMode||x.params.watchSlidesProgress)&&x.updateActiveIndex(),
x.params.freeMode&&(0===E.length&&E.push({position:x.touches[x.isHorizontal()?"startX":"startY"],time:S}),E.push({position:x.touches[x.isHorizontal()?"currentX":"currentY"],time:(new window.Date).getTime()})),x.updateProgress(z),x.setWrapperTranslate(z))}}}}},x.onTouchEnd=function(e){if(e.originalEvent&&(e=e.originalEvent),k&&x.emit("onTouchEnd",x,e),k=!1,$){x.params.grabCursor&&D&&$&&(x.params.allowSwipeToNext===!0||x.params.allowSwipeToPrev===!0)&&x.setGrabCursor(!1);var i=Date.now(),o=i-S;if(x.allowClick&&(x.updateClickedSlide(e),x.emit("onTap",x,e),o<300&&i-P>300&&(L&&clearTimeout(L),L=setTimeout(function(){x&&(x.params.paginationHide&&x.paginationContainer.length>0&&!t(e.target).hasClass(x.params.bulletClass)&&x.paginationContainer.toggleClass(x.params.paginationHiddenClass),x.emit("onClick",x,e))},300)),o<300&&i-P<300&&(L&&clearTimeout(L),x.emit("onDoubleTap",x,e))),P=Date.now(),setTimeout(function(){x&&(x.allowClick=!0)},0),!$||!D||!x.swipeDirection||0===x.touches.diff||z===I)return void($=D=!1);$=D=!1;var n;if(n=x.params.followFinger?x.rtl?x.translate:-x.translate:-z,x.params.freeMode){if(n<-x.minTranslate())return void x.slideTo(x.activeIndex);if(n>-x.maxTranslate())return void(x.slides.length<x.snapGrid.length?x.slideTo(x.snapGrid.length-1):x.slideTo(x.slides.length-1));if(x.params.freeModeMomentum){if(E.length>1){var a=E.pop(),r=E.pop(),s=a.position-r.position,c=a.time-r.time;x.velocity=s/c,x.velocity=x.velocity/2,Math.abs(x.velocity)<x.params.freeModeMinimumVelocity&&(x.velocity=0),(c>150||(new window.Date).getTime()-a.time>300)&&(x.velocity=0)}else x.velocity=0;x.velocity=x.velocity*x.params.freeModeMomentumVelocityRatio,E.length=0;var u=1e3*x.params.freeModeMomentumRatio,d=x.velocity*u,l=x.translate+d;x.rtl&&(l=-l);var f,h=!1,p=20*Math.abs(x.velocity)*x.params.freeModeMomentumBounceRatio;if(l<x.maxTranslate())x.params.freeModeMomentumBounce?(l+x.maxTranslate()<-p&&(l=x.maxTranslate()-p),f=x.maxTranslate(),h=!0,C=!0):l=x.maxTranslate();else if(l>x.minTranslate())x.params.freeModeMomentumBounce?(l-x.minTranslate()>p&&(l=x.minTranslate()+p),f=x.minTranslate(),h=!0,C=!0):l=x.minTranslate();else if(x.params.freeModeSticky){var m,g=0;for(g=0;g<x.snapGrid.length;g+=1)if(x.snapGrid[g]>-l){m=g;break}l=Math.abs(x.snapGrid[m]-l)<Math.abs(x.snapGrid[m-1]-l)||"next"===x.swipeDirection?x.snapGrid[m]:x.snapGrid[m-1],x.rtl||(l=-l)}if(0!==x.velocity)u=x.rtl?Math.abs((-l-x.translate)/x.velocity):Math.abs((l-x.translate)/x.velocity);else if(x.params.freeModeSticky)return void x.slideReset();x.params.freeModeMomentumBounce&&h?(x.updateProgress(f),x.setWrapperTransition(u),x.setWrapperTranslate(l),x.onTransitionStart(),x.animating=!0,x.wrapper.transitionEnd(function(){x&&C&&(x.emit("onMomentumBounce",x),x.setWrapperTransition(x.params.speed),x.setWrapperTranslate(f),x.wrapper.transitionEnd(function(){x&&x.onTransitionEnd()}))})):x.velocity?(x.updateProgress(l),x.setWrapperTransition(u),x.setWrapperTranslate(l),x.onTransitionStart(),x.animating||(x.animating=!0,x.wrapper.transitionEnd(function(){x&&x.onTransitionEnd()}))):x.updateProgress(l),x.updateActiveIndex()}return void((!x.params.freeModeMomentum||o>=x.params.longSwipesMs)&&(x.updateProgress(),x.updateActiveIndex()))}var v,y=0,w=x.slidesSizesGrid[0];for(v=0;v<x.slidesGrid.length;v+=x.params.slidesPerGroup)"undefined"!=typeof x.slidesGrid[v+x.params.slidesPerGroup]?n>=x.slidesGrid[v]&&n<x.slidesGrid[v+x.params.slidesPerGroup]&&(y=v,w=x.slidesGrid[v+x.params.slidesPerGroup]-x.slidesGrid[v]):n>=x.slidesGrid[v]&&(y=v,w=x.slidesGrid[x.slidesGrid.length-1]-x.slidesGrid[x.slidesGrid.length-2]);var _=(n-x.slidesGrid[y])/w;if(o>x.params.longSwipesMs){if(!x.params.longSwipes)return void x.slideTo(x.activeIndex);"next"===x.swipeDirection&&(_>=x.params.longSwipesRatio?x.slideTo(y+x.params.slidesPerGroup):x.slideTo(y)),"prev"===x.swipeDirection&&(_>1-x.params.longSwipesRatio?x.slideTo(y+x.params.slidesPerGroup):x.slideTo(y))}else{if(!x.params.shortSwipes)return void x.slideTo(x.activeIndex);"next"===x.swipeDirection&&x.slideTo(y+x.params.slidesPerGroup),"prev"===x.swipeDirection&&x.slideTo(y)}}},x._slideTo=function(e,t){return x.slideTo(e,t,!0,!0)},x.slideTo=function(e,t,i,o){"undefined"==typeof i&&(i=!0),"undefined"==typeof e&&(e=0),e<0&&(e=0),x.snapIndex=Math.floor(e/x.params.slidesPerGroup),x.snapIndex>=x.snapGrid.length&&(x.snapIndex=x.snapGrid.length-1);var n=-x.snapGrid[x.snapIndex];if(x.params.autoplay&&x.autoplaying&&(o||!x.params.autoplayDisableOnInteraction?x.pauseAutoplay(t):x.stopAutoplay()),x.updateProgress(n),x.params.normalizeSlideIndex)for(var a=0;a<x.slidesGrid.length;a++)-Math.floor(100*n)>=Math.floor(100*x.slidesGrid[a])&&(e=a);return!(!x.params.allowSwipeToNext&&n<x.translate&&n<x.minTranslate())&&(!(!x.params.allowSwipeToPrev&&n>x.translate&&n>x.maxTranslate()&&(x.activeIndex||0)!==e)&&("undefined"==typeof t&&(t=x.params.speed),x.previousIndex=x.activeIndex||0,x.activeIndex=e,x.updateRealIndex(),x.rtl&&-n===x.translate||!x.rtl&&n===x.translate?(x.params.autoHeight&&x.updateAutoHeight(),x.updateClasses(),"slide"!==x.params.effect&&x.setWrapperTranslate(n),!1):(x.updateClasses(),x.onTransitionStart(i),0===t||x.browser.lteIE9?(x.setWrapperTranslate(n),x.setWrapperTransition(0),x.onTransitionEnd(i)):(x.setWrapperTranslate(n),x.setWrapperTransition(t),x.animating||(x.animating=!0,x.wrapper.transitionEnd(function(){x&&x.onTransitionEnd(i)}))),!0)))},x.onTransitionStart=function(e){"undefined"==typeof e&&(e=!0),x.params.autoHeight&&x.updateAutoHeight(),x.lazy&&x.lazy.onTransitionStart(),e&&(x.emit("onTransitionStart",x),x.activeIndex!==x.previousIndex&&(x.emit("onSlideChangeStart",x),x.activeIndex>x.previousIndex?x.emit("onSlideNextStart",x):x.emit("onSlidePrevStart",x)))},x.onTransitionEnd=function(e){x.animating=!1,x.setWrapperTransition(0),"undefined"==typeof e&&(e=!0),x.lazy&&x.lazy.onTransitionEnd(),e&&(x.emit("onTransitionEnd",x),x.activeIndex!==x.previousIndex&&(x.emit("onSlideChangeEnd",x),x.activeIndex>x.previousIndex?x.emit("onSlideNextEnd",x):x.emit("onSlidePrevEnd",x))),x.params.history&&x.history&&x.history.setHistory(x.params.history,x.activeIndex),x.params.hashnav&&x.hashnav&&x.hashnav.setHash()},x.slideNext=function(e,t,i){if(x.params.loop){if(x.animating)return!1;x.fixLoop();x.container[0].clientLeft;return x.slideTo(x.activeIndex+x.params.slidesPerGroup,t,e,i)}return x.slideTo(x.activeIndex+x.params.slidesPerGroup,t,e,i)},x._slideNext=function(e){return x.slideNext(!0,e,!0)},x.slidePrev=function(e,t,i){if(x.params.loop){if(x.animating)return!1;x.fixLoop();x.container[0].clientLeft;return x.slideTo(x.activeIndex-1,t,e,i)}return x.slideTo(x.activeIndex-1,t,e,i)},x._slidePrev=function(e){return x.slidePrev(!0,e,!0)},x.slideReset=function(e,t,i){return x.slideTo(x.activeIndex,t,e)},x.disableTouchControl=function(){return x.params.onlyExternal=!0,!0},x.enableTouchControl=function(){return x.params.onlyExternal=!1,!0},x.setWrapperTransition=function(e,t){x.wrapper.transition(e),"slide"!==x.params.effect&&x.effects[x.params.effect]&&x.effects[x.params.effect].setTransition(e),x.params.parallax&&x.parallax&&x.parallax.setTransition(e),x.params.scrollbar&&x.scrollbar&&x.scrollbar.setTransition(e),x.params.control&&x.controller&&x.controller.setTransition(e,t),x.emit("onSetTransition",x,e)},x.setWrapperTranslate=function(e,t,i){var o=0,n=0,r=0;x.isHorizontal()?o=x.rtl?-e:e:n=e,x.params.roundLengths&&(o=a(o),n=a(n)),x.params.virtualTranslate||(x.support.transforms3d?x.wrapper.transform("translate3d("+o+"px, "+n+"px, "+r+"px)"):x.wrapper.transform("translate("+o+"px, "+n+"px)")),x.translate=x.isHorizontal()?o:n;var s,c=x.maxTranslate()-x.minTranslate();s=0===c?0:(e-x.minTranslate())/c,s!==x.progress&&x.updateProgress(e),t&&x.updateActiveIndex(),"slide"!==x.params.effect&&x.effects[x.params.effect]&&x.effects[x.params.effect].setTranslate(x.translate),x.params.parallax&&x.parallax&&x.parallax.setTranslate(x.translate),x.params.scrollbar&&x.scrollbar&&x.scrollbar.setTranslate(x.translate),x.params.control&&x.controller&&x.controller.setTranslate(x.translate,i),x.emit("onSetTranslate",x,x.translate)},x.getTranslate=function(e,t){var i,o,n,a;return"undefined"==typeof t&&(t="x"),x.params.virtualTranslate?x.rtl?-x.translate:x.translate:(n=window.getComputedStyle(e,null),window.WebKitCSSMatrix?(o=n.transform||n.webkitTransform,o.split(",").length>6&&(o=o.split(", ").map(function(e){return e.replace(",",".")}).join(", ")),a=new window.WebKitCSSMatrix("none"===o?"":o)):(a=n.MozTransform||n.OTransform||n.MsTransform||n.msTransform||n.transform||n.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),i=a.toString().split(",")),"x"===t&&(o=window.WebKitCSSMatrix?a.m41:16===i.length?parseFloat(i[12]):parseFloat(i[4])),"y"===t&&(o=window.WebKitCSSMatrix?a.m42:16===i.length?parseFloat(i[13]):parseFloat(i[5])),x.rtl&&o&&(o=-o),o||0)},x.getWrapperTranslate=function(e){return"undefined"==typeof e&&(e=x.isHorizontal()?"x":"y"),x.getTranslate(x.wrapper[0],e)},x.observers=[],x.initObservers=function(){if(x.params.observeParents)for(var e=x.container.parents(),t=0;t<e.length;t++)c(e[t]);c(x.container[0],{childList:!1}),c(x.wrapper[0],{attributes:!1})},x.disconnectObservers=function(){for(var e=0;e<x.observers.length;e++)x.observers[e].disconnect();x.observers=[]},x.createLoop=function(){x.wrapper.children("."+x.params.slideClass+"."+x.params.slideDuplicateClass).remove();var e=x.wrapper.children("."+x.params.slideClass);"auto"!==x.params.slidesPerView||x.params.loopedSlides||(x.params.loopedSlides=e.length),x.loopedSlides=parseInt(x.params.loopedSlides||x.params.slidesPerView,10),x.loopedSlides=x.loopedSlides+x.params.loopAdditionalSlides,x.loopedSlides>e.length&&(x.loopedSlides=e.length);var i,o=[],n=[];for(e.each(function(i,a){var r=t(this);i<x.loopedSlides&&n.push(a),i<e.length&&i>=e.length-x.loopedSlides&&o.push(a),r.attr("data-swiper-slide-index",i)}),i=0;i<n.length;i++)x.wrapper.append(t(n[i].cloneNode(!0)).addClass(x.params.slideDuplicateClass));for(i=o.length-1;i>=0;i--)x.wrapper.prepend(t(o[i].cloneNode(!0)).addClass(x.params.slideDuplicateClass))},x.destroyLoop=function(){x.wrapper.children("."+x.params.slideClass+"."+x.params.slideDuplicateClass).remove(),x.slides.removeAttr("data-swiper-slide-index")},x.reLoop=function(e){var t=x.activeIndex-x.loopedSlides;x.destroyLoop(),x.createLoop(),x.updateSlidesSize(),e&&x.slideTo(t+x.loopedSlides,0,!1)},x.fixLoop=function(){var e;x.activeIndex<x.loopedSlides?(e=x.slides.length-3*x.loopedSlides+x.activeIndex,e+=x.loopedSlides,x.slideTo(e,0,!1,!0)):("auto"===x.params.slidesPerView&&x.activeIndex>=2*x.loopedSlides||x.activeIndex>x.slides.length-2*x.params.slidesPerView)&&(e=-x.slides.length+x.activeIndex+x.loopedSlides,e+=x.loopedSlides,x.slideTo(e,0,!1,!0))},x.appendSlide=function(e){if(x.params.loop&&x.destroyLoop(),"object"==typeof e&&e.length)for(var t=0;t<e.length;t++)e[t]&&x.wrapper.append(e[t]);else x.wrapper.append(e);x.params.loop&&x.createLoop(),x.params.observer&&x.support.observer||x.update(!0)},x.prependSlide=function(e){x.params.loop&&x.destroyLoop();var t=x.activeIndex+1;if("object"==typeof e&&e.length){for(var i=0;i<e.length;i++)e[i]&&x.wrapper.prepend(e[i]);t=x.activeIndex+e.length}else x.wrapper.prepend(e);x.params.loop&&x.createLoop(),x.params.observer&&x.support.observer||x.update(!0),x.slideTo(t,0,!1)},x.removeSlide=function(e){x.params.loop&&(x.destroyLoop(),x.slides=x.wrapper.children("."+x.params.slideClass));var t,i=x.activeIndex;if("object"==typeof e&&e.length){for(var o=0;o<e.length;o++)t=e[o],x.slides[t]&&x.slides.eq(t).remove(),t<i&&i--;i=Math.max(i,0)}else t=e,x.slides[t]&&x.slides.eq(t).remove(),t<i&&i--,i=Math.max(i,0);x.params.loop&&x.createLoop(),x.params.observer&&x.support.observer||x.update(!0),x.params.loop?x.slideTo(i+x.loopedSlides,0,!1):x.slideTo(i,0,!1)},x.removeAllSlides=function(){for(var e=[],t=0;t<x.slides.length;t++)e.push(t);x.removeSlide(e)},x.effects={fade:{setTranslate:function(){for(var e=0;e<x.slides.length;e++){var t=x.slides.eq(e),i=t[0].swiperSlideOffset,o=-i;x.params.virtualTranslate||(o-=x.translate);var n=0;x.isHorizontal()||(n=o,o=0);var a=x.params.fade.crossFade?Math.max(1-Math.abs(t[0].progress),0):1+Math.min(Math.max(t[0].progress,-1),0);t.css({opacity:a}).transform("translate3d("+o+"px, "+n+"px, 0px)")}},setTransition:function(e){if(x.slides.transition(e),x.params.virtualTranslate&&0!==e){var t=!1;x.slides.transitionEnd(function(){if(!t&&x){t=!0,x.animating=!1;for(var e=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"],i=0;i<e.length;i++)x.wrapper.trigger(e[i])}})}}},flip:{setTranslate:function(){for(var e=0;e<x.slides.length;e++){var i=x.slides.eq(e),o=i[0].progress;x.params.flip.limitRotation&&(o=Math.max(Math.min(i[0].progress,1),-1));var n=i[0].swiperSlideOffset,a=-180*o,r=a,s=0,c=-n,u=0;if(x.isHorizontal()?x.rtl&&(r=-r):(u=c,c=0,s=-r,r=0),i[0].style.zIndex=-Math.abs(Math.round(o))+x.slides.length,x.params.flip.slideShadows){var d=x.isHorizontal()?i.find(".swiper-slide-shadow-left"):i.find(".swiper-slide-shadow-top"),l=x.isHorizontal()?i.find(".swiper-slide-shadow-right"):i.find(".swiper-slide-shadow-bottom");0===d.length&&(d=t('<div class="swiper-slide-shadow-'+(x.isHorizontal()?"left":"top")+'"></div>'),i.append(d)),0===l.length&&(l=t('<div class="swiper-slide-shadow-'+(x.isHorizontal()?"right":"bottom")+'"></div>'),i.append(l)),d.length&&(d[0].style.opacity=Math.max(-o,0)),l.length&&(l[0].style.opacity=Math.max(o,0))}i.transform("translate3d("+c+"px, "+u+"px, 0px) rotateX("+s+"deg) rotateY("+r+"deg)")}},setTransition:function(e){if(x.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e),x.params.virtualTranslate&&0!==e){var i=!1;x.slides.eq(x.activeIndex).transitionEnd(function(){if(!i&&x&&t(this).hasClass(x.params.slideActiveClass)){i=!0,x.animating=!1;for(var e=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"],o=0;o<e.length;o++)x.wrapper.trigger(e[o])}})}}},cube:{setTranslate:function(){var e,i=0;x.params.cube.shadow&&(x.isHorizontal()?(e=x.wrapper.find(".swiper-cube-shadow"),0===e.length&&(e=t('<div class="swiper-cube-shadow"></div>'),x.wrapper.append(e)),e.css({height:x.width+"px"})):(e=x.container.find(".swiper-cube-shadow"),0===e.length&&(e=t('<div class="swiper-cube-shadow"></div>'),x.container.append(e))));for(var o=0;o<x.slides.length;o++){var n=x.slides.eq(o),a=90*o,r=Math.floor(a/360);x.rtl&&(a=-a,r=Math.floor(-a/360));var s=Math.max(Math.min(n[0].progress,1),-1),c=0,u=0,d=0;o%4===0?(c=4*-r*x.size,d=0):(o-1)%4===0?(c=0,d=4*-r*x.size):(o-2)%4===0?(c=x.size+4*r*x.size,d=x.size):(o-3)%4===0&&(c=-x.size,d=3*x.size+4*x.size*r),x.rtl&&(c=-c),x.isHorizontal()||(u=c,c=0);var l="rotateX("+(x.isHorizontal()?0:-a)+"deg) rotateY("+(x.isHorizontal()?a:0)+"deg) translate3d("+c+"px, "+u+"px, "+d+"px)";if(s<=1&&s>-1&&(i=90*o+90*s,x.rtl&&(i=90*-o-90*s)),n.transform(l),x.params.cube.slideShadows){var f=x.isHorizontal()?n.find(".swiper-slide-shadow-left"):n.find(".swiper-slide-shadow-top"),h=x.isHorizontal()?n.find(".swiper-slide-shadow-right"):n.find(".swiper-slide-shadow-bottom");0===f.length&&(f=t('<div class="swiper-slide-shadow-'+(x.isHorizontal()?"left":"top")+'"></div>'),n.append(f)),0===h.length&&(h=t('<div class="swiper-slide-shadow-'+(x.isHorizontal()?"right":"bottom")+'"></div>'),n.append(h)),f.length&&(f[0].style.opacity=Math.max(-s,0)),h.length&&(h[0].style.opacity=Math.max(s,0))}}if(x.wrapper.css({"-webkit-transform-origin":"50% 50% -"+x.size/2+"px","-moz-transform-origin":"50% 50% -"+x.size/2+"px","-ms-transform-origin":"50% 50% -"+x.size/2+"px","transform-origin":"50% 50% -"+x.size/2+"px"}),x.params.cube.shadow)if(x.isHorizontal())e.transform("translate3d(0px, "+(x.width/2+x.params.cube.shadowOffset)+"px, "+-x.width/2+"px) rotateX(90deg) rotateZ(0deg) scale("+x.params.cube.shadowScale+")");else{var p=Math.abs(i)-90*Math.floor(Math.abs(i)/90),m=1.5-(Math.sin(2*p*Math.PI/360)/2+Math.cos(2*p*Math.PI/360)/2),g=x.params.cube.shadowScale,v=x.params.cube.shadowScale/m,y=x.params.cube.shadowOffset;e.transform("scale3d("+g+", 1, "+v+") translate3d(0px, "+(x.height/2+y)+"px, "+-x.height/2/v+"px) rotateX(-90deg)")}var w=x.isSafari||x.isUiWebView?-x.size/2:0;x.wrapper.transform("translate3d(0px,0,"+w+"px) rotateX("+(x.isHorizontal()?0:i)+"deg) rotateY("+(x.isHorizontal()?-i:0)+"deg)")},setTransition:function(e){x.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e),x.params.cube.shadow&&!x.isHorizontal()&&x.container.find(".swiper-cube-shadow").transition(e)}},coverflow:{setTranslate:function(){for(var e=x.translate,i=x.isHorizontal()?-e+x.width/2:-e+x.height/2,o=x.isHorizontal()?x.params.coverflow.rotate:-x.params.coverflow.rotate,n=x.params.coverflow.depth,a=0,r=x.slides.length;a<r;a++){var s=x.slides.eq(a),c=x.slidesSizesGrid[a],u=s[0].swiperSlideOffset,d=(i-u-c/2)/c*x.params.coverflow.modifier,l=x.isHorizontal()?o*d:0,f=x.isHorizontal()?0:o*d,h=-n*Math.abs(d),p=x.isHorizontal()?0:x.params.coverflow.stretch*d,m=x.isHorizontal()?x.params.coverflow.stretch*d:0;Math.abs(m)<.001&&(m=0),Math.abs(p)<.001&&(p=0),Math.abs(h)<.001&&(h=0),Math.abs(l)<.001&&(l=0),Math.abs(f)<.001&&(f=0);var g="translate3d("+m+"px,"+p+"px,"+h+"px)  rotateX("+f+"deg) rotateY("+l+"deg)";if(s.transform(g),s[0].style.zIndex=-Math.abs(Math.round(d))+1,x.params.coverflow.slideShadows){var v=x.isHorizontal()?s.find(".swiper-slide-shadow-left"):s.find(".swiper-slide-shadow-top"),y=x.isHorizontal()?s.find(".swiper-slide-shadow-right"):s.find(".swiper-slide-shadow-bottom");0===v.length&&(v=t('<div class="swiper-slide-shadow-'+(x.isHorizontal()?"left":"top")+'"></div>'),s.append(v)),0===y.length&&(y=t('<div class="swiper-slide-shadow-'+(x.isHorizontal()?"right":"bottom")+'"></div>'),s.append(y)),v.length&&(v[0].style.opacity=d>0?d:0),y.length&&(y[0].style.opacity=-d>0?-d:0)}}if(x.browser.ie){var w=x.wrapper[0].style;w.perspectiveOrigin=i+"px 50%"}},setTransition:function(e){x.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e)}}},x.lazy={initialImageLoaded:!1,loadImageInSlide:function(e,i){if("undefined"!=typeof e&&("undefined"==typeof i&&(i=!0),0!==x.slides.length)){var o=x.slides.eq(e),n=o.find("."+x.params.lazyLoadingClass+":not(."+x.params.lazyStatusLoadedClass+"):not(."+x.params.lazyStatusLoadingClass+")");!o.hasClass(x.params.lazyLoadingClass)||o.hasClass(x.params.lazyStatusLoadedClass)||o.hasClass(x.params.lazyStatusLoadingClass)||(n=n.add(o[0])),0!==n.length&&n.each(function(){var e=t(this);e.addClass(x.params.lazyStatusLoadingClass);var n=e.attr("data-background"),a=e.attr("data-src"),r=e.attr("data-srcset"),s=e.attr("data-sizes");x.loadImage(e[0],a||n,r,s,!1,function(){if("undefined"!=typeof x&&null!==x&&x){if(n?(e.css("background-image",'url("'+n+'")'),e.removeAttr("data-background")):(r&&(e.attr("srcset",r),e.removeAttr("data-srcset")),s&&(e.attr("sizes",s),e.removeAttr("data-sizes")),a&&(e.attr("src",a),e.removeAttr("data-src"))),e.addClass(x.params.lazyStatusLoadedClass).removeClass(x.params.lazyStatusLoadingClass),o.find("."+x.params.lazyPreloaderClass+", ."+x.params.preloaderClass).remove(),x.params.loop&&i){var t=o.attr("data-swiper-slide-index");if(o.hasClass(x.params.slideDuplicateClass)){var c=x.wrapper.children('[data-swiper-slide-index="'+t+'"]:not(.'+x.params.slideDuplicateClass+")");x.lazy.loadImageInSlide(c.index(),!1)}else{var u=x.wrapper.children("."+x.params.slideDuplicateClass+'[data-swiper-slide-index="'+t+'"]');x.lazy.loadImageInSlide(u.index(),!1)}}x.emit("onLazyImageReady",x,o[0],e[0])}}),x.emit("onLazyImageLoad",x,o[0],e[0])})}},load:function(){var e,i=x.params.slidesPerView;if("auto"===i&&(i=0),x.lazy.initialImageLoaded||(x.lazy.initialImageLoaded=!0),x.params.watchSlidesVisibility)x.wrapper.children("."+x.params.slideVisibleClass).each(function(){x.lazy.loadImageInSlide(t(this).index())});else if(i>1)for(e=x.activeIndex;e<x.activeIndex+i;e++)x.slides[e]&&x.lazy.loadImageInSlide(e);else x.lazy.loadImageInSlide(x.activeIndex);if(x.params.lazyLoadingInPrevNext)if(i>1||x.params.lazyLoadingInPrevNextAmount&&x.params.lazyLoadingInPrevNextAmount>1){var o=x.params.lazyLoadingInPrevNextAmount,n=i,a=Math.min(x.activeIndex+n+Math.max(o,n),x.slides.length),r=Math.max(x.activeIndex-Math.max(n,o),0);for(e=x.activeIndex+i;e<a;e++)x.slides[e]&&x.lazy.loadImageInSlide(e);for(e=r;e<x.activeIndex;e++)x.slides[e]&&x.lazy.loadImageInSlide(e)}else{var s=x.wrapper.children("."+x.params.slideNextClass);s.length>0&&x.lazy.loadImageInSlide(s.index());var c=x.wrapper.children("."+x.params.slidePrevClass);c.length>0&&x.lazy.loadImageInSlide(c.index())}},onTransitionStart:function(){x.params.lazyLoading&&(x.params.lazyLoadingOnTransitionStart||!x.params.lazyLoadingOnTransitionStart&&!x.lazy.initialImageLoaded)&&x.lazy.load()},onTransitionEnd:function(){x.params.lazyLoading&&!x.params.lazyLoadingOnTransitionStart&&x.lazy.load()}},x.scrollbar={isTouched:!1,setDragPosition:function(e){var t=x.scrollbar,i=x.isHorizontal()?"touchstart"===e.type||"touchmove"===e.type?e.targetTouches[0].pageX:e.pageX||e.clientX:"touchstart"===e.type||"touchmove"===e.type?e.targetTouches[0].pageY:e.pageY||e.clientY,o=i-t.track.offset()[x.isHorizontal()?"left":"top"]-t.dragSize/2,n=-x.minTranslate()*t.moveDivider,a=-x.maxTranslate()*t.moveDivider;o<n?o=n:o>a&&(o=a),o=-o/t.moveDivider,x.updateProgress(o),x.setWrapperTranslate(o,!0)},dragStart:function(e){var t=x.scrollbar;t.isTouched=!0,e.preventDefault(),e.stopPropagation(),t.setDragPosition(e),clearTimeout(t.dragTimeout),t.track.transition(0),x.params.scrollbarHide&&t.track.css("opacity",1),x.wrapper.transition(100),t.drag.transition(100),x.emit("onScrollbarDragStart",x)},dragMove:function(e){var t=x.scrollbar;t.isTouched&&(e.preventDefault?e.preventDefault():e.returnValue=!1,t.setDragPosition(e),x.wrapper.transition(0),t.track.transition(0),t.drag.transition(0),x.emit("onScrollbarDragMove",x))},dragEnd:function(e){var t=x.scrollbar;t.isTouched&&(t.isTouched=!1,x.params.scrollbarHide&&(clearTimeout(t.dragTimeout),t.dragTimeout=setTimeout(function(){t.track.css("opacity",0),t.track.transition(400)},1e3)),x.emit("onScrollbarDragEnd",x),x.params.scrollbarSnapOnRelease&&x.slideReset())},draggableEvents:function(){return x.params.simulateTouch!==!1||x.support.touch?x.touchEvents:x.touchEventsDesktop}(),enableDraggable:function(){var e=x.scrollbar,i=x.support.touch?e.track:document;t(e.track).on(e.draggableEvents.start,e.dragStart),t(i).on(e.draggableEvents.move,e.dragMove),t(i).on(e.draggableEvents.end,e.dragEnd)},disableDraggable:function(){var e=x.scrollbar,i=x.support.touch?e.track:document;t(e.track).off(e.draggableEvents.start,e.dragStart),t(i).off(e.draggableEvents.move,e.dragMove),t(i).off(e.draggableEvents.end,e.dragEnd)},set:function(){if(x.params.scrollbar){var e=x.scrollbar;e.track=t(x.params.scrollbar),x.params.uniqueNavElements&&"string"==typeof x.params.scrollbar&&e.track.length>1&&1===x.container.find(x.params.scrollbar).length&&(e.track=x.container.find(x.params.scrollbar)),e.drag=e.track.find(".swiper-scrollbar-drag"),0===e.drag.length&&(e.drag=t('<div class="swiper-scrollbar-drag"></div>'),e.track.append(e.drag)),e.drag[0].style.width="",e.drag[0].style.height="",e.trackSize=x.isHorizontal()?e.track[0].offsetWidth:e.track[0].offsetHeight,e.divider=x.size/x.virtualSize,e.moveDivider=e.divider*(e.trackSize/x.size),e.dragSize=e.trackSize*e.divider,x.isHorizontal()?e.drag[0].style.width=e.dragSize+"px":e.drag[0].style.height=e.dragSize+"px",e.divider>=1?e.track[0].style.display="none":e.track[0].style.display="",x.params.scrollbarHide&&(e.track[0].style.opacity=0)}},setTranslate:function(){if(x.params.scrollbar){var e,t=x.scrollbar,i=(x.translate||0,t.dragSize);e=(t.trackSize-t.dragSize)*x.progress,x.rtl&&x.isHorizontal()?(e=-e,e>0?(i=t.dragSize-e,e=0):-e+t.dragSize>t.trackSize&&(i=t.trackSize+e)):e<0?(i=t.dragSize+e,e=0):e+t.dragSize>t.trackSize&&(i=t.trackSize-e),x.isHorizontal()?(x.support.transforms3d?t.drag.transform("translate3d("+e+"px, 0, 0)"):t.drag.transform("translateX("+e+"px)"),t.drag[0].style.width=i+"px"):(x.support.transforms3d?t.drag.transform("translate3d(0px, "+e+"px, 0)"):t.drag.transform("translateY("+e+"px)"),t.drag[0].style.height=i+"px"),x.params.scrollbarHide&&(clearTimeout(t.timeout),t.track[0].style.opacity=1,t.timeout=setTimeout(function(){t.track[0].style.opacity=0,t.track.transition(400)},1e3))}},setTransition:function(e){x.params.scrollbar&&x.scrollbar.drag.transition(e)}},x.controller={LinearSpline:function(e,t){var i=function(){var e,t,i;return function(o,n){for(t=-1,e=o.length;e-t>1;)o[i=e+t>>1]<=n?t=i:e=i;return e}}();this.x=e,this.y=t,this.lastIndex=e.length-1;var o,n;this.x.length;this.interpolate=function(e){return e?(n=i(this.x,e),o=n-1,(e-this.x[o])*(this.y[n]-this.y[o])/(this.x[n]-this.x[o])+this.y[o]):0}},getInterpolateFunction:function(e){x.controller.spline||(x.controller.spline=x.params.loop?new x.controller.LinearSpline(x.slidesGrid,e.slidesGrid):new x.controller.LinearSpline(x.snapGrid,e.snapGrid))},setTranslate:function(e,t){function o(t){e=t.rtl&&"horizontal"===t.params.direction?-x.translate:x.translate,"slide"===x.params.controlBy&&(x.controller.getInterpolateFunction(t),a=-x.controller.spline.interpolate(-e)),a&&"container"!==x.params.controlBy||(n=(t.maxTranslate()-t.minTranslate())/(x.maxTranslate()-x.minTranslate()),a=(e-x.minTranslate())*n+t.minTranslate()),x.params.controlInverse&&(a=t.maxTranslate()-a),t.updateProgress(a),t.setWrapperTranslate(a,!1,x),t.updateActiveIndex()}var n,a,r=x.params.control;if(Array.isArray(r))for(var s=0;s<r.length;s++)r[s]!==t&&r[s]instanceof i&&o(r[s]);else r instanceof i&&t!==r&&o(r)},setTransition:function(e,t){function o(t){t.setWrapperTransition(e,x),0!==e&&(t.onTransitionStart(),t.wrapper.transitionEnd(function(){a&&(t.params.loop&&"slide"===x.params.controlBy&&t.fixLoop(),t.onTransitionEnd())}))}var n,a=x.params.control;if(Array.isArray(a))for(n=0;n<a.length;n++)a[n]!==t&&a[n]instanceof i&&o(a[n]);else a instanceof i&&t!==a&&o(a)}},x.hashnav={onHashCange:function(e,t){var i=document.location.hash.replace("#",""),o=x.slides.eq(x.activeIndex).attr("data-hash");i!==o&&x.slideTo(x.wrapper.children("."+x.params.slideClass+'[data-hash="'+i+'"]').index())},attachEvents:function(e){var i=e?"off":"on";t(window)[i]("hashchange",x.hashnav.onHashCange)},setHash:function(){if(x.hashnav.initialized&&x.params.hashnav)if(x.params.replaceState&&window.history&&window.history.replaceState)window.history.replaceState(null,null,"#"+x.slides.eq(x.activeIndex).attr("data-hash")||"");else{var e=x.slides.eq(x.activeIndex),t=e.attr("data-hash")||e.attr("data-history");document.location.hash=t||""}},init:function(){if(x.params.hashnav&&!x.params.history){x.hashnav.initialized=!0;var e=document.location.hash.replace("#","");if(e)for(var t=0,i=0,o=x.slides.length;i<o;i++){var n=x.slides.eq(i),a=n.attr("data-hash")||n.attr("data-history");if(a===e&&!n.hasClass(x.params.slideDuplicateClass)){var r=n.index();x.slideTo(r,t,x.params.runCallbacksOnInit,!0)}}x.params.hashnavWatchState&&x.hashnav.attachEvents()}},destroy:function(){x.params.hashnavWatchState&&x.hashnav.attachEvents(!0)}},x.history={init:function(){if(x.params.history){if(!window.history||!window.history.pushState)return x.params.history=!1,void(x.params.hashnav=!0);x.history.initialized=!0,this.paths=this.getPathValues(),(this.paths.key||this.paths.value)&&(this.scrollToSlide(0,this.paths.value,x.params.runCallbacksOnInit),x.params.replaceState||window.addEventListener("popstate",this.setHistoryPopState))}},setHistoryPopState:function(){x.history.paths=x.history.getPathValues(),x.history.scrollToSlide(x.params.speed,x.history.paths.value,!1)},getPathValues:function(){var e=window.location.pathname.slice(1).split("/"),t=e.length,i=e[t-2],o=e[t-1];return{key:i,value:o}},setHistory:function(e,t){if(x.history.initialized&&x.params.history){var i=x.slides.eq(t),o=this.slugify(i.attr("data-history"));window.location.pathname.includes(e)||(o=e+"/"+o),x.params.replaceState?window.history.replaceState(null,null,o):window.history.pushState(null,null,o)}},slugify:function(e){return e.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")},scrollToSlide:function(e,t,i){if(t)for(var o=0,n=x.slides.length;o<n;o++){var a=x.slides.eq(o),r=this.slugify(a.attr("data-history"));if(r===t&&!a.hasClass(x.params.slideDuplicateClass)){var s=a.index();x.slideTo(s,e,i)}}else x.slideTo(0,e,i)}},x.disableKeyboardControl=function(){x.params.keyboardControl=!1,t(document).off("keydown",u)},x.enableKeyboardControl=function(){x.params.keyboardControl=!0,t(document).on("keydown",u)},x.mousewheel={event:!1,lastScrollTime:(new window.Date).getTime()},x.params.mousewheelControl&&(x.mousewheel.event=navigator.userAgent.indexOf("firefox")>-1?"DOMMouseScroll":d()?"wheel":"mousewheel"),x.disableMousewheelControl=function(){if(!x.mousewheel.event)return!1;var e=x.container;return"container"!==x.params.mousewheelEventsTarged&&(e=t(x.params.mousewheelEventsTarged)),e.off(x.mousewheel.event,f),x.params.mousewheelControl=!1,!0},x.enableMousewheelControl=function(){if(!x.mousewheel.event)return!1;var e=x.container;return"container"!==x.params.mousewheelEventsTarged&&(e=t(x.params.mousewheelEventsTarged)),e.on(x.mousewheel.event,f),x.params.mousewheelControl=!0,!0},x.parallax={setTranslate:function(){x.container.children("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function(){h(this,x.progress)}),x.slides.each(function(){var e=t(this);e.find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function(){var t=Math.min(Math.max(e[0].progress,-1),1);h(this,t)})})},setTransition:function(e){"undefined"==typeof e&&(e=x.params.speed),x.container.find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function(){var i=t(this),o=parseInt(i.attr("data-swiper-parallax-duration"),10)||e;0===e&&(o=0),i.transition(o)})}},x.zoom={scale:1,currentScale:1,isScaling:!1,gesture:{slide:void 0,slideWidth:void 0,slideHeight:void 0,image:void 0,imageWrap:void 0,zoomMax:x.params.zoomMax},image:{isTouched:void 0,isMoved:void 0,currentX:void 0,currentY:void 0,minX:void 0,minY:void 0,maxX:void 0,maxY:void 0,width:void 0,height:void 0,startX:void 0,startY:void 0,touchesStart:{},touchesCurrent:{}},velocity:{x:void 0,y:void 0,prevPositionX:void 0,prevPositionY:void 0,prevTime:void 0},getDistanceBetweenTouches:function(e){if(e.targetTouches.length<2)return 1;var t=e.targetTouches[0].pageX,i=e.targetTouches[0].pageY,o=e.targetTouches[1].pageX,n=e.targetTouches[1].pageY,a=Math.sqrt(Math.pow(o-t,2)+Math.pow(n-i,2));return a},onGestureStart:function(e){var i=x.zoom;if(!x.support.gestures){if("touchstart"!==e.type||"touchstart"===e.type&&e.targetTouches.length<2)return;i.gesture.scaleStart=i.getDistanceBetweenTouches(e)}return i.gesture.slide&&i.gesture.slide.length||(i.gesture.slide=t(this),0===i.gesture.slide.length&&(i.gesture.slide=x.slides.eq(x.activeIndex)),i.gesture.image=i.gesture.slide.find("img, svg, canvas"),i.gesture.imageWrap=i.gesture.image.parent("."+x.params.zoomContainerClass),i.gesture.zoomMax=i.gesture.imageWrap.attr("data-swiper-zoom")||x.params.zoomMax,0!==i.gesture.imageWrap.length)?(i.gesture.image.transition(0),void(i.isScaling=!0)):void(i.gesture.image=void 0)},onGestureChange:function(e){var t=x.zoom;if(!x.support.gestures){if("touchmove"!==e.type||"touchmove"===e.type&&e.targetTouches.length<2)return;t.gesture.scaleMove=t.getDistanceBetweenTouches(e)}t.gesture.image&&0!==t.gesture.image.length&&(x.support.gestures?t.scale=e.scale*t.currentScale:t.scale=t.gesture.scaleMove/t.gesture.scaleStart*t.currentScale,
t.scale>t.gesture.zoomMax&&(t.scale=t.gesture.zoomMax-1+Math.pow(t.scale-t.gesture.zoomMax+1,.5)),t.scale<x.params.zoomMin&&(t.scale=x.params.zoomMin+1-Math.pow(x.params.zoomMin-t.scale+1,.5)),t.gesture.image.transform("translate3d(0,0,0) scale("+t.scale+")"))},onGestureEnd:function(e){var t=x.zoom;!x.support.gestures&&("touchend"!==e.type||"touchend"===e.type&&e.changedTouches.length<2)||t.gesture.image&&0!==t.gesture.image.length&&(t.scale=Math.max(Math.min(t.scale,t.gesture.zoomMax),x.params.zoomMin),t.gesture.image.transition(x.params.speed).transform("translate3d(0,0,0) scale("+t.scale+")"),t.currentScale=t.scale,t.isScaling=!1,1===t.scale&&(t.gesture.slide=void 0))},onTouchStart:function(e,t){var i=e.zoom;i.gesture.image&&0!==i.gesture.image.length&&(i.image.isTouched||("android"===e.device.os&&t.preventDefault(),i.image.isTouched=!0,i.image.touchesStart.x="touchstart"===t.type?t.targetTouches[0].pageX:t.pageX,i.image.touchesStart.y="touchstart"===t.type?t.targetTouches[0].pageY:t.pageY))},onTouchMove:function(e){var t=x.zoom;if(t.gesture.image&&0!==t.gesture.image.length&&(x.allowClick=!1,t.image.isTouched&&t.gesture.slide)){t.image.isMoved||(t.image.width=t.gesture.image[0].offsetWidth,t.image.height=t.gesture.image[0].offsetHeight,t.image.startX=x.getTranslate(t.gesture.imageWrap[0],"x")||0,t.image.startY=x.getTranslate(t.gesture.imageWrap[0],"y")||0,t.gesture.slideWidth=t.gesture.slide[0].offsetWidth,t.gesture.slideHeight=t.gesture.slide[0].offsetHeight,t.gesture.imageWrap.transition(0),x.rtl&&(t.image.startX=-t.image.startX),x.rtl&&(t.image.startY=-t.image.startY));var i=t.image.width*t.scale,o=t.image.height*t.scale;if(!(i<t.gesture.slideWidth&&o<t.gesture.slideHeight)){if(t.image.minX=Math.min(t.gesture.slideWidth/2-i/2,0),t.image.maxX=-t.image.minX,t.image.minY=Math.min(t.gesture.slideHeight/2-o/2,0),t.image.maxY=-t.image.minY,t.image.touchesCurrent.x="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,t.image.touchesCurrent.y="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,!t.image.isMoved&&!t.isScaling){if(x.isHorizontal()&&Math.floor(t.image.minX)===Math.floor(t.image.startX)&&t.image.touchesCurrent.x<t.image.touchesStart.x||Math.floor(t.image.maxX)===Math.floor(t.image.startX)&&t.image.touchesCurrent.x>t.image.touchesStart.x)return void(t.image.isTouched=!1);if(!x.isHorizontal()&&Math.floor(t.image.minY)===Math.floor(t.image.startY)&&t.image.touchesCurrent.y<t.image.touchesStart.y||Math.floor(t.image.maxY)===Math.floor(t.image.startY)&&t.image.touchesCurrent.y>t.image.touchesStart.y)return void(t.image.isTouched=!1)}e.preventDefault(),e.stopPropagation(),t.image.isMoved=!0,t.image.currentX=t.image.touchesCurrent.x-t.image.touchesStart.x+t.image.startX,t.image.currentY=t.image.touchesCurrent.y-t.image.touchesStart.y+t.image.startY,t.image.currentX<t.image.minX&&(t.image.currentX=t.image.minX+1-Math.pow(t.image.minX-t.image.currentX+1,.8)),t.image.currentX>t.image.maxX&&(t.image.currentX=t.image.maxX-1+Math.pow(t.image.currentX-t.image.maxX+1,.8)),t.image.currentY<t.image.minY&&(t.image.currentY=t.image.minY+1-Math.pow(t.image.minY-t.image.currentY+1,.8)),t.image.currentY>t.image.maxY&&(t.image.currentY=t.image.maxY-1+Math.pow(t.image.currentY-t.image.maxY+1,.8)),t.velocity.prevPositionX||(t.velocity.prevPositionX=t.image.touchesCurrent.x),t.velocity.prevPositionY||(t.velocity.prevPositionY=t.image.touchesCurrent.y),t.velocity.prevTime||(t.velocity.prevTime=Date.now()),t.velocity.x=(t.image.touchesCurrent.x-t.velocity.prevPositionX)/(Date.now()-t.velocity.prevTime)/2,t.velocity.y=(t.image.touchesCurrent.y-t.velocity.prevPositionY)/(Date.now()-t.velocity.prevTime)/2,Math.abs(t.image.touchesCurrent.x-t.velocity.prevPositionX)<2&&(t.velocity.x=0),Math.abs(t.image.touchesCurrent.y-t.velocity.prevPositionY)<2&&(t.velocity.y=0),t.velocity.prevPositionX=t.image.touchesCurrent.x,t.velocity.prevPositionY=t.image.touchesCurrent.y,t.velocity.prevTime=Date.now(),t.gesture.imageWrap.transform("translate3d("+t.image.currentX+"px, "+t.image.currentY+"px,0)")}}},onTouchEnd:function(e,t){var i=e.zoom;if(i.gesture.image&&0!==i.gesture.image.length){if(!i.image.isTouched||!i.image.isMoved)return i.image.isTouched=!1,void(i.image.isMoved=!1);i.image.isTouched=!1,i.image.isMoved=!1;var o=300,n=300,a=i.velocity.x*o,r=i.image.currentX+a,s=i.velocity.y*n,c=i.image.currentY+s;0!==i.velocity.x&&(o=Math.abs((r-i.image.currentX)/i.velocity.x)),0!==i.velocity.y&&(n=Math.abs((c-i.image.currentY)/i.velocity.y));var u=Math.max(o,n);i.image.currentX=r,i.image.currentY=c;var d=i.image.width*i.scale,l=i.image.height*i.scale;i.image.minX=Math.min(i.gesture.slideWidth/2-d/2,0),i.image.maxX=-i.image.minX,i.image.minY=Math.min(i.gesture.slideHeight/2-l/2,0),i.image.maxY=-i.image.minY,i.image.currentX=Math.max(Math.min(i.image.currentX,i.image.maxX),i.image.minX),i.image.currentY=Math.max(Math.min(i.image.currentY,i.image.maxY),i.image.minY),i.gesture.imageWrap.transition(u).transform("translate3d("+i.image.currentX+"px, "+i.image.currentY+"px,0)")}},onTransitionEnd:function(e){var t=e.zoom;t.gesture.slide&&e.previousIndex!==e.activeIndex&&(t.gesture.image.transform("translate3d(0,0,0) scale(1)"),t.gesture.imageWrap.transform("translate3d(0,0,0)"),t.gesture.slide=t.gesture.image=t.gesture.imageWrap=void 0,t.scale=t.currentScale=1)},toggleZoom:function(e,i){var o=e.zoom;if(o.gesture.slide||(o.gesture.slide=e.clickedSlide?t(e.clickedSlide):e.slides.eq(e.activeIndex),o.gesture.image=o.gesture.slide.find("img, svg, canvas"),o.gesture.imageWrap=o.gesture.image.parent("."+e.params.zoomContainerClass)),o.gesture.image&&0!==o.gesture.image.length){var n,a,r,s,c,u,d,l,f,h,p,m,g,v,y,w,_,b;"undefined"==typeof o.image.touchesStart.x&&i?(n="touchend"===i.type?i.changedTouches[0].pageX:i.pageX,a="touchend"===i.type?i.changedTouches[0].pageY:i.pageY):(n=o.image.touchesStart.x,a=o.image.touchesStart.y),o.scale&&1!==o.scale?(o.scale=o.currentScale=1,o.gesture.imageWrap.transition(300).transform("translate3d(0,0,0)"),o.gesture.image.transition(300).transform("translate3d(0,0,0) scale(1)"),o.gesture.slide=void 0):(o.scale=o.currentScale=o.gesture.imageWrap.attr("data-swiper-zoom")||e.params.zoomMax,i?(_=o.gesture.slide[0].offsetWidth,b=o.gesture.slide[0].offsetHeight,r=o.gesture.slide.offset().left,s=o.gesture.slide.offset().top,c=r+_/2-n,u=s+b/2-a,f=o.gesture.image[0].offsetWidth,h=o.gesture.image[0].offsetHeight,p=f*o.scale,m=h*o.scale,g=Math.min(_/2-p/2,0),v=Math.min(b/2-m/2,0),y=-g,w=-v,d=c*o.scale,l=u*o.scale,d<g&&(d=g),d>y&&(d=y),l<v&&(l=v),l>w&&(l=w)):(d=0,l=0),o.gesture.imageWrap.transition(300).transform("translate3d("+d+"px, "+l+"px,0)"),o.gesture.image.transition(300).transform("translate3d(0,0,0) scale("+o.scale+")"))}},attachEvents:function(e){var i=e?"off":"on";if(x.params.zoom){var o=(x.slides,!("touchstart"!==x.touchEvents.start||!x.support.passiveListener||!x.params.passiveListeners)&&{passive:!0,capture:!1});x.support.gestures?(x.slides[i]("gesturestart",x.zoom.onGestureStart,o),x.slides[i]("gesturechange",x.zoom.onGestureChange,o),x.slides[i]("gestureend",x.zoom.onGestureEnd,o)):"touchstart"===x.touchEvents.start&&(x.slides[i](x.touchEvents.start,x.zoom.onGestureStart,o),x.slides[i](x.touchEvents.move,x.zoom.onGestureChange,o),x.slides[i](x.touchEvents.end,x.zoom.onGestureEnd,o)),x[i]("touchStart",x.zoom.onTouchStart),x.slides.each(function(e,o){t(o).find("."+x.params.zoomContainerClass).length>0&&t(o)[i](x.touchEvents.move,x.zoom.onTouchMove)}),x[i]("touchEnd",x.zoom.onTouchEnd),x[i]("transitionEnd",x.zoom.onTransitionEnd),x.params.zoomToggle&&x.on("doubleTap",x.zoom.toggleZoom)}},init:function(){x.zoom.attachEvents()},destroy:function(){x.zoom.attachEvents(!0)}},x._plugins=[];for(var B in x.plugins){var F=x.plugins[B](x,x.params[B]);F&&x._plugins.push(F)}return x.callPlugins=function(e){for(var t=0;t<x._plugins.length;t++)e in x._plugins[t]&&x._plugins[t][e](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])},x.emitterEventListeners={},x.emit=function(e){x.params[e]&&x.params[e](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);var t;if(x.emitterEventListeners[e])for(t=0;t<x.emitterEventListeners[e].length;t++)x.emitterEventListeners[e][t](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);x.callPlugins&&x.callPlugins(e,arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])},x.on=function(e,t){return e=p(e),x.emitterEventListeners[e]||(x.emitterEventListeners[e]=[]),x.emitterEventListeners[e].push(t),x},x.off=function(e,t){var i;if(e=p(e),"undefined"==typeof t)return x.emitterEventListeners[e]=[],x;if(x.emitterEventListeners[e]&&0!==x.emitterEventListeners[e].length){for(i=0;i<x.emitterEventListeners[e].length;i++)x.emitterEventListeners[e][i]===t&&x.emitterEventListeners[e].splice(i,1);return x}},x.once=function(e,t){e=p(e);var i=function(){t(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]),x.off(e,i)};return x.on(e,i),x},x.a11y={makeFocusable:function(e){return e.attr("tabIndex","0"),e},addRole:function(e,t){return e.attr("role",t),e},addLabel:function(e,t){return e.attr("aria-label",t),e},disable:function(e){return e.attr("aria-disabled",!0),e},enable:function(e){return e.attr("aria-disabled",!1),e},onEnterKey:function(e){13===e.keyCode&&(t(e.target).is(x.params.nextButton)?(x.onClickNext(e),x.isEnd?x.a11y.notify(x.params.lastSlideMessage):x.a11y.notify(x.params.nextSlideMessage)):t(e.target).is(x.params.prevButton)&&(x.onClickPrev(e),x.isBeginning?x.a11y.notify(x.params.firstSlideMessage):x.a11y.notify(x.params.prevSlideMessage)),t(e.target).is("."+x.params.bulletClass)&&t(e.target)[0].click())},liveRegion:t('<span class="'+x.params.notificationClass+'" aria-live="assertive" aria-atomic="true"></span>'),notify:function(e){var t=x.a11y.liveRegion;0!==t.length&&(t.html(""),t.html(e))},init:function(){x.params.nextButton&&x.nextButton&&x.nextButton.length>0&&(x.a11y.makeFocusable(x.nextButton),x.a11y.addRole(x.nextButton,"button"),x.a11y.addLabel(x.nextButton,x.params.nextSlideMessage)),x.params.prevButton&&x.prevButton&&x.prevButton.length>0&&(x.a11y.makeFocusable(x.prevButton),x.a11y.addRole(x.prevButton,"button"),x.a11y.addLabel(x.prevButton,x.params.prevSlideMessage)),t(x.container).append(x.a11y.liveRegion)},initPagination:function(){x.params.pagination&&x.params.paginationClickable&&x.bullets&&x.bullets.length&&x.bullets.each(function(){var e=t(this);x.a11y.makeFocusable(e),x.a11y.addRole(e,"button"),x.a11y.addLabel(e,x.params.paginationBulletMessage.replace(/{{index}}/,e.index()+1))})},destroy:function(){x.a11y.liveRegion&&x.a11y.liveRegion.length>0&&x.a11y.liveRegion.remove()}},x.init=function(){x.params.loop&&x.createLoop(),x.updateContainerSize(),x.updateSlidesSize(),x.updatePagination(),x.params.scrollbar&&x.scrollbar&&(x.scrollbar.set(),x.params.scrollbarDraggable&&x.scrollbar.enableDraggable()),"slide"!==x.params.effect&&x.effects[x.params.effect]&&(x.params.loop||x.updateProgress(),x.effects[x.params.effect].setTranslate()),x.params.loop?x.slideTo(x.params.initialSlide+x.loopedSlides,0,x.params.runCallbacksOnInit):(x.slideTo(x.params.initialSlide,0,x.params.runCallbacksOnInit),0===x.params.initialSlide&&(x.parallax&&x.params.parallax&&x.parallax.setTranslate(),x.lazy&&x.params.lazyLoading&&(x.lazy.load(),x.lazy.initialImageLoaded=!0))),x.attachEvents(),x.params.observer&&x.support.observer&&x.initObservers(),x.params.preloadImages&&!x.params.lazyLoading&&x.preloadImages(),x.params.zoom&&x.zoom&&x.zoom.init(),x.params.autoplay&&x.startAutoplay(),x.params.keyboardControl&&x.enableKeyboardControl&&x.enableKeyboardControl(),x.params.mousewheelControl&&x.enableMousewheelControl&&x.enableMousewheelControl(),x.params.hashnavReplaceState&&(x.params.replaceState=x.params.hashnavReplaceState),x.params.history&&x.history&&x.history.init(),x.params.hashnav&&x.hashnav&&x.hashnav.init(),x.params.a11y&&x.a11y&&x.a11y.init(),x.emit("onInit",x)},x.cleanupStyles=function(){x.container.removeClass(x.classNames.join(" ")).removeAttr("style"),x.wrapper.removeAttr("style"),x.slides&&x.slides.length&&x.slides.removeClass([x.params.slideVisibleClass,x.params.slideActiveClass,x.params.slideNextClass,x.params.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-column").removeAttr("data-swiper-row"),x.paginationContainer&&x.paginationContainer.length&&x.paginationContainer.removeClass(x.params.paginationHiddenClass),x.bullets&&x.bullets.length&&x.bullets.removeClass(x.params.bulletActiveClass),x.params.prevButton&&t(x.params.prevButton).removeClass(x.params.buttonDisabledClass),x.params.nextButton&&t(x.params.nextButton).removeClass(x.params.buttonDisabledClass),x.params.scrollbar&&x.scrollbar&&(x.scrollbar.track&&x.scrollbar.track.length&&x.scrollbar.track.removeAttr("style"),x.scrollbar.drag&&x.scrollbar.drag.length&&x.scrollbar.drag.removeAttr("style"))},x.destroy=function(e,t){x.detachEvents(),x.stopAutoplay(),x.params.scrollbar&&x.scrollbar&&x.params.scrollbarDraggable&&x.scrollbar.disableDraggable(),x.params.loop&&x.destroyLoop(),t&&x.cleanupStyles(),x.disconnectObservers(),x.params.zoom&&x.zoom&&x.zoom.destroy(),x.params.keyboardControl&&x.disableKeyboardControl&&x.disableKeyboardControl(),x.params.mousewheelControl&&x.disableMousewheelControl&&x.disableMousewheelControl(),x.params.a11y&&x.a11y&&x.a11y.destroy(),x.params.history&&!x.params.replaceState&&window.removeEventListener("popstate",x.history.setHistoryPopState),x.params.hashnav&&x.hashnav&&x.hashnav.destroy(),x.emit("onDestroy"),e!==!1&&(x=null)},x.init(),x}};i.prototype={isSafari:function(){var e=window.navigator.userAgent.toLowerCase();return e.indexOf("safari")>=0&&e.indexOf("chrome")<0&&e.indexOf("android")<0}(),isUiWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(window.navigator.userAgent),isArray:function(e){return"[object Array]"===Object.prototype.toString.apply(e)},browser:{ie:window.navigator.pointerEnabled||window.navigator.msPointerEnabled,ieTouch:window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>1||window.navigator.pointerEnabled&&window.navigator.maxTouchPoints>1,lteIE9:function(){var e=document.createElement("div");return e.innerHTML="<!--[if lte IE 9]><i></i><![endif]-->",1===e.getElementsByTagName("i").length}()},device:function(){var e=window.navigator.userAgent,t=e.match(/(Android);?[\s\/]+([\d.]+)?/),i=e.match(/(iPad).*OS\s([\d_]+)/),o=e.match(/(iPod)(.*OS\s([\d_]+))?/),n=!i&&e.match(/(iPhone\sOS|iOS)\s([\d_]+)/);return{ios:i||n||o,android:t}}(),support:{touch:window.Modernizr&&Modernizr.touch===!0||function(){return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}(),transforms3d:window.Modernizr&&Modernizr.csstransforms3d===!0||function(){var e=document.createElement("div").style;return"webkitPerspective"in e||"MozPerspective"in e||"OPerspective"in e||"MsPerspective"in e||"perspective"in e}(),flexbox:function(){for(var e=document.createElement("div").style,t="alignItems webkitAlignItems webkitBoxAlign msFlexAlign mozBoxAlign webkitFlexDirection msFlexDirection mozBoxDirection mozBoxOrient webkitBoxDirection webkitBoxOrient".split(" "),i=0;i<t.length;i++)if(t[i]in e)return!0}(),observer:function(){return"MutationObserver"in window||"WebkitMutationObserver"in window}(),passiveListener:function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassiveListener",null,t)}catch(e){}return e}(),gestures:function(){return"ongesturestart"in window}()},plugins:{}};for(var o=(function(){var e=function(e){var t=this,i=0;for(i=0;i<e.length;i++)t[i]=e[i];return t.length=e.length,this},t=function(t,i){var o=[],n=0;if(t&&!i&&t instanceof e)return t;if(t)if("string"==typeof t){var a,r,s=t.trim();if(s.indexOf("<")>=0&&s.indexOf(">")>=0){var c="div";for(0===s.indexOf("<li")&&(c="ul"),0===s.indexOf("<tr")&&(c="tbody"),0!==s.indexOf("<td")&&0!==s.indexOf("<th")||(c="tr"),0===s.indexOf("<tbody")&&(c="table"),0===s.indexOf("<option")&&(c="select"),r=document.createElement(c),r.innerHTML=t,n=0;n<r.childNodes.length;n++)o.push(r.childNodes[n])}else for(a=i||"#"!==t[0]||t.match(/[ .<>:~]/)?(i||document).querySelectorAll(t):[document.getElementById(t.split("#")[1])],n=0;n<a.length;n++)a[n]&&o.push(a[n])}else if(t.nodeType||t===window||t===document)o.push(t);else if(t.length>0&&t[0].nodeType)for(n=0;n<t.length;n++)o.push(t[n]);return new e(o)};return e.prototype={addClass:function(e){if("undefined"==typeof e)return this;for(var t=e.split(" "),i=0;i<t.length;i++)for(var o=0;o<this.length;o++)this[o].classList.add(t[i]);return this},removeClass:function(e){for(var t=e.split(" "),i=0;i<t.length;i++)for(var o=0;o<this.length;o++)this[o].classList.remove(t[i]);return this},hasClass:function(e){return!!this[0]&&this[0].classList.contains(e)},toggleClass:function(e){for(var t=e.split(" "),i=0;i<t.length;i++)for(var o=0;o<this.length;o++)this[o].classList.toggle(t[i]);return this},attr:function(e,t){if(1===arguments.length&&"string"==typeof e)return this[0]?this[0].getAttribute(e):void 0;for(var i=0;i<this.length;i++)if(2===arguments.length)this[i].setAttribute(e,t);else for(var o in e)this[i][o]=e[o],this[i].setAttribute(o,e[o]);return this},removeAttr:function(e){for(var t=0;t<this.length;t++)this[t].removeAttribute(e);return this},data:function(e,t){if("undefined"!=typeof t){for(var i=0;i<this.length;i++){var o=this[i];o.dom7ElementDataStorage||(o.dom7ElementDataStorage={}),o.dom7ElementDataStorage[e]=t}return this}if(this[0]){var n=this[0].getAttribute("data-"+e);return n?n:this[0].dom7ElementDataStorage&&e in this[0].dom7ElementDataStorage?this[0].dom7ElementDataStorage[e]:void 0}},transform:function(e){for(var t=0;t<this.length;t++){var i=this[t].style;i.webkitTransform=i.MsTransform=i.msTransform=i.MozTransform=i.OTransform=i.transform=e}return this},transition:function(e){"string"!=typeof e&&(e+="ms");for(var t=0;t<this.length;t++){var i=this[t].style;i.webkitTransitionDuration=i.MsTransitionDuration=i.msTransitionDuration=i.MozTransitionDuration=i.OTransitionDuration=i.transitionDuration=e}return this},on:function(e,i,o,n){function a(e){var n=e.target;if(t(n).is(i))o.call(n,e);else for(var a=t(n).parents(),r=0;r<a.length;r++)t(a[r]).is(i)&&o.call(a[r],e)}var r,s,c=e.split(" ");for(r=0;r<this.length;r++)if("function"==typeof i||i===!1)for("function"==typeof i&&(o=arguments[1],n=arguments[2]||!1),s=0;s<c.length;s++)this[r].addEventListener(c[s],o,n);else for(s=0;s<c.length;s++)this[r].dom7LiveListeners||(this[r].dom7LiveListeners=[]),this[r].dom7LiveListeners.push({listener:o,liveListener:a}),this[r].addEventListener(c[s],a,n);return this},off:function(e,t,i,o){for(var n=e.split(" "),a=0;a<n.length;a++)for(var r=0;r<this.length;r++)if("function"==typeof t||t===!1)"function"==typeof t&&(i=arguments[1],o=arguments[2]||!1),this[r].removeEventListener(n[a],i,o);else if(this[r].dom7LiveListeners)for(var s=0;s<this[r].dom7LiveListeners.length;s++)this[r].dom7LiveListeners[s].listener===i&&this[r].removeEventListener(n[a],this[r].dom7LiveListeners[s].liveListener,o);return this},once:function(e,t,i,o){function n(r){i(r),a.off(e,t,n,o)}var a=this;"function"==typeof t&&(t=!1,i=arguments[1],o=arguments[2]),a.on(e,t,n,o)},trigger:function(e,t){for(var i=0;i<this.length;i++){var o;try{o=new window.CustomEvent(e,{detail:t,bubbles:!0,cancelable:!0})}catch(i){o=document.createEvent("Event"),o.initEvent(e,!0,!0),o.detail=t}this[i].dispatchEvent(o)}return this},transitionEnd:function(e){function t(a){if(a.target===this)for(e.call(this,a),i=0;i<o.length;i++)n.off(o[i],t)}var i,o=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"],n=this;if(e)for(i=0;i<o.length;i++)n.on(o[i],t);return this},width:function(){return this[0]===window?window.innerWidth:this.length>0?parseFloat(this.css("width")):null},outerWidth:function(e){return this.length>0?e?this[0].offsetWidth+parseFloat(this.css("margin-right"))+parseFloat(this.css("margin-left")):this[0].offsetWidth:null},height:function(){return this[0]===window?window.innerHeight:this.length>0?parseFloat(this.css("height")):null},outerHeight:function(e){return this.length>0?e?this[0].offsetHeight+parseFloat(this.css("margin-top"))+parseFloat(this.css("margin-bottom")):this[0].offsetHeight:null},offset:function(){if(this.length>0){var e=this[0],t=e.getBoundingClientRect(),i=document.body,o=e.clientTop||i.clientTop||0,n=e.clientLeft||i.clientLeft||0,a=window.pageYOffset||e.scrollTop,r=window.pageXOffset||e.scrollLeft;return{top:t.top+a-o,left:t.left+r-n}}return null},css:function(e,t){var i;if(1===arguments.length){if("string"!=typeof e){for(i=0;i<this.length;i++)for(var o in e)this[i].style[o]=e[o];return this}if(this[0])return window.getComputedStyle(this[0],null).getPropertyValue(e)}if(2===arguments.length&&"string"==typeof e){for(i=0;i<this.length;i++)this[i].style[e]=t;return this}return this},each:function(e){for(var t=0;t<this.length;t++)e.call(this[t],t,this[t]);return this},html:function(e){if("undefined"==typeof e)return this[0]?this[0].innerHTML:void 0;for(var t=0;t<this.length;t++)this[t].innerHTML=e;return this},text:function(e){if("undefined"==typeof e)return this[0]?this[0].textContent.trim():null;for(var t=0;t<this.length;t++)this[t].textContent=e;return this},is:function(i){if(!this[0])return!1;var o,n;if("string"==typeof i){var a=this[0];if(a===document)return i===document;if(a===window)return i===window;if(a.matches)return a.matches(i);if(a.webkitMatchesSelector)return a.webkitMatchesSelector(i);if(a.mozMatchesSelector)return a.mozMatchesSelector(i);if(a.msMatchesSelector)return a.msMatchesSelector(i);for(o=t(i),n=0;n<o.length;n++)if(o[n]===this[0])return!0;return!1}if(i===document)return this[0]===document;if(i===window)return this[0]===window;if(i.nodeType||i instanceof e){for(o=i.nodeType?[i]:i,n=0;n<o.length;n++)if(o[n]===this[0])return!0;return!1}return!1},index:function(){if(this[0]){for(var e=this[0],t=0;null!==(e=e.previousSibling);)1===e.nodeType&&t++;return t}},eq:function(t){if("undefined"==typeof t)return this;var i,o=this.length;return t>o-1?new e([]):t<0?(i=o+t,new e(i<0?[]:[this[i]])):new e([this[t]])},append:function(t){var i,o;for(i=0;i<this.length;i++)if("string"==typeof t){var n=document.createElement("div");for(n.innerHTML=t;n.firstChild;)this[i].appendChild(n.firstChild)}else if(t instanceof e)for(o=0;o<t.length;o++)this[i].appendChild(t[o]);else this[i].appendChild(t);return this},prepend:function(t){var i,o;for(i=0;i<this.length;i++)if("string"==typeof t){var n=document.createElement("div");for(n.innerHTML=t,o=n.childNodes.length-1;o>=0;o--)this[i].insertBefore(n.childNodes[o],this[i].childNodes[0])}else if(t instanceof e)for(o=0;o<t.length;o++)this[i].insertBefore(t[o],this[i].childNodes[0]);else this[i].insertBefore(t,this[i].childNodes[0]);return this},insertBefore:function(e){for(var i=t(e),o=0;o<this.length;o++)if(1===i.length)i[0].parentNode.insertBefore(this[o],i[0]);else if(i.length>1)for(var n=0;n<i.length;n++)i[n].parentNode.insertBefore(this[o].cloneNode(!0),i[n])},insertAfter:function(e){for(var i=t(e),o=0;o<this.length;o++)if(1===i.length)i[0].parentNode.insertBefore(this[o],i[0].nextSibling);else if(i.length>1)for(var n=0;n<i.length;n++)i[n].parentNode.insertBefore(this[o].cloneNode(!0),i[n].nextSibling)},next:function(i){return new e(this.length>0?i?this[0].nextElementSibling&&t(this[0].nextElementSibling).is(i)?[this[0].nextElementSibling]:[]:this[0].nextElementSibling?[this[0].nextElementSibling]:[]:[])},nextAll:function(i){var o=[],n=this[0];if(!n)return new e([]);for(;n.nextElementSibling;){var a=n.nextElementSibling;i?t(a).is(i)&&o.push(a):o.push(a),n=a}return new e(o)},prev:function(i){return new e(this.length>0?i?this[0].previousElementSibling&&t(this[0].previousElementSibling).is(i)?[this[0].previousElementSibling]:[]:this[0].previousElementSibling?[this[0].previousElementSibling]:[]:[])},prevAll:function(i){var o=[],n=this[0];if(!n)return new e([]);for(;n.previousElementSibling;){var a=n.previousElementSibling;i?t(a).is(i)&&o.push(a):o.push(a),n=a}return new e(o)},parent:function(e){for(var i=[],o=0;o<this.length;o++)e?t(this[o].parentNode).is(e)&&i.push(this[o].parentNode):i.push(this[o].parentNode);return t(t.unique(i))},parents:function(e){for(var i=[],o=0;o<this.length;o++)for(var n=this[o].parentNode;n;)e?t(n).is(e)&&i.push(n):i.push(n),n=n.parentNode;return t(t.unique(i))},find:function(t){for(var i=[],o=0;o<this.length;o++)for(var n=this[o].querySelectorAll(t),a=0;a<n.length;a++)i.push(n[a]);return new e(i)},children:function(i){for(var o=[],n=0;n<this.length;n++)for(var a=this[n].childNodes,r=0;r<a.length;r++)i?1===a[r].nodeType&&t(a[r]).is(i)&&o.push(a[r]):1===a[r].nodeType&&o.push(a[r]);return new e(t.unique(o))},remove:function(){for(var e=0;e<this.length;e++)this[e].parentNode&&this[e].parentNode.removeChild(this[e]);return this},add:function(){var e,i,o=this;for(e=0;e<arguments.length;e++){var n=t(arguments[e]);for(i=0;i<n.length;i++)o[o.length]=n[i],o.length++}return o}},t.fn=e.prototype,t.unique=function(e){for(var t=[],i=0;i<e.length;i++)t.indexOf(e[i])===-1&&t.push(e[i]);return t},t}()),n=["jQuery","Zepto","Dom7"],a=0;a<n.length;a++)window[n[a]]&&e(window[n[a]]);var r;r="undefined"==typeof o?window.Dom7||window.Zepto||window.jQuery:o,r&&("transitionEnd"in r.fn||(r.fn.transitionEnd=function(e){function t(a){if(a.target===this)for(e.call(this,a),i=0;i<o.length;i++)n.off(o[i],t)}var i,o=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"],n=this;if(e)for(i=0;i<o.length;i++)n.on(o[i],t);return this}),"transform"in r.fn||(r.fn.transform=function(e){for(var t=0;t<this.length;t++){var i=this[t].style;i.webkitTransform=i.MsTransform=i.msTransform=i.MozTransform=i.OTransform=i.transform=e}return this}),"transition"in r.fn||(r.fn.transition=function(e){"string"!=typeof e&&(e+="ms");for(var t=0;t<this.length;t++){var i=this[t].style;i.webkitTransitionDuration=i.MsTransitionDuration=i.msTransitionDuration=i.MozTransitionDuration=i.OTransitionDuration=i.transitionDuration=e}return this}),"outerWidth"in r.fn||(r.fn.outerWidth=function(e){return this.length>0?e?this[0].offsetWidth+parseFloat(this.css("margin-right"))+parseFloat(this.css("margin-left")):this[0].offsetWidth:null})),window.Swiper=i}(),e.exports=window.Swiper},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(10),a=o(n),r=i(12),s=o(r),c=i(167),u=o(c),d=i(45),l=o(d),f=i(9),h=i(43),p=i(26);i(41),i(183);var m=window.location,g=$(window),v=$(document.body),y=(window.URL||window.webkitURL,/^image\/\w+/);t.default={template:"#fullphotovote-joiners",components:{Searchbar:u.default,WaterfallFlowLoader:l.default},vuex:{getters:{user:function(e){return e.user}},actions:{showDialog:p.showDialog,showLoading:p.showLoading,hideLoading:p.hideLoading,pageIn:p.pageIn}},route:{data:function(e){var t=this,i=t.$route;e.next({category:(0,f.translateType)(Number(i.query.type)||0)})}},data:function(){return{joiners:[],joinerIds:[],keyword:"",category:"",loaders:{},activity:{customize_length:0,photosize:0},photosizes:["",1.5,1,2/3],visible:!1,joiner:{id:0,avator:[],uuid:"",name:"",remark:""},edittingIdx:-1,savedPhotosize:!1,photosize:0,avatorLimit:3,confirmTimer:null,confirmTimerCount:5,avatorUploader:{maxsize:3072,cropper:{croppered_params:[],config:{dragMode:"move",aspectRatio:1,autoCropArea:.8,guides:!1,center:!0,highlight:!1,dragCrop:!1,cropBoxMovable:!1,cropBoxResizable:!1,zoom:-.2,checkImageOrigin:!0,background:!1,rotatable:!0}}}}},computed:{loader:function(){var e=this,t=e.$route,i={activity_id:t.params.id,token:e.user.token},o=a.default.photovote+"/joiners";return e.joiners=[],e.joinerIds=[],e.keyword&&(i.keyword=e.keyword),e.loaders=i,{params:i,url:o}},joiners2CN:function(){var e=this,t=e.$route,i=t.params.id,o=e.activity.share_host,n=t.query.type,a=e.category;return e.joiners.length&&e.joiners.forEach(function(e){e.link=(0,f.generalShareurlV2)(o,i,n,a,e.id)}),e.joiners}},ready:function(){this.pageIn({title:"照片投票-报名表"})},methods:{load:function(e,t){var i=this;Array.isArray(e)&&e.forEach(function(e){e.is_exchanged=Number(e.is_exchanged),console.log(e.id),console.log(i.joinerIds),$.inArray(e.id,i.joinerIds)<0&&(i.joiners.push(e),i.joinerIds.push(e.id))}),t&&t.activity&&(i.activity=t.activity)},fail:function(e,t){var i=this;if(e==s.default[1100])(0,f.showKickedOffline)(t.time,t.ip,i.showDialog);else if(e==s.default[1101])(0,f.showExpireTip)(i.showDialog);else{if(e==s.default[1102])return void i.$router.go({name:"signout"});i.$root.$emit("show.snackbar",{color:"accent",message:e})}i.hideLoading(),callback&&callback()},fail_action:function(e,t){var i=this,o=e.code;if(1100==o)(0,f.showKickedOffline)(e.data.time,e.data.ip,i.showDialog);else if(1101==o)(0,f.showExpireTip)(i.showDialog);else{if(1102==o)return void i.$router.go({name:"signout"});i.$root.$emit("show.snackbar",{color:"accent",message:s.default[o]})}i.hideLoading(),t&&t()},search:function(e){this.keyword=e},showActionsheet:function(e){var t=e.target.getAttribute("href")?$(e.target.getAttribute("href")):$($(e.target).parent().attr("href")),i=t.find(".weui_mask_transition");e.preventDefault(),i.show().addClass("weui_fade_toggle"),t.find(".weui_actionsheet").addClass("weui_actionsheet_toggle")},hideActionsheet:function(e,t){var i=$(e.target).closest(".weui_actionsheet_container"),o=i.find(".weui_mask_transition");i.find(".weui_actionsheet").removeClass("weui_actionsheet_toggle"),o.removeClass("weui_fade_toggle"),setTimeout(function(){o.hide(),t&&t()},300)},remove:function(e){var t=this,i=$(e.target),o=Number("undefined"==typeof e.target.dataset.index?i.parent().data("index"):e.target.dataset.index),n=t.joiners[o],r=n.id,s=t.activity;return t.hideActionsheet(e),s.ended?void this.showDialog({title:"亲，活动已经结束了，无法删除哟！",button:{confirm:"我知道了"},confirm:function(){return!0}}):void this.showDialog({title:"确认删除“"+n.name+"”吗？删除后无法恢复",cancel:!0,confirm:function(){return t.showLoading(),$.ajax(a.default.photovote+"/joiner?token="+t.user.token+"&joiner_id="+r,{method:"DELETE",success:function(e){return e.code?void t.fail_action(e):(t.$root.$emit("show.snackbar",{message:"删除成功"}),void t.joiners.splice(o,1))},complete:function(){t.hideLoading()}}),!0}})},goJoinerHome:function(e){var t=this,i=t.$route.params.id;setTimeout(function(){var e=(0,f.pathify)(m.pathname).replace(/(\/*$)/g,"");window.location.href="/api/go.php?from="+encodeURIComponent(m.protocol+"//"+m.hostname+e+"/#!/activity/fullphotovote/"+i+"/joiner/"+id)},10)},uploadAvator:function(e){var t=this,i=e.target,o=i.files?i.files[0]:null,n=void 0;if(o&&(y.test(o.type)||""==o.type)){var r=o.size/1024;if(r>t.avatorUploader.maxsize)return t.showDialog({title:"提示",content:"图片大小请控制在 "+Math.floor(t.avatorUploader.maxsize)+" KB 以内",confirm:!0}),!1;t.showLoading("正在上传头像..."),$.get(a.default.uploadSignature,{type:5},function(e){return e.code?void t.$root.$emit("show.snackbar",{color:"accent",message:s.default[e.code]}):void(e.data&&!function(){var i=e.data,a=""+i.dir+(0,f.getRandomFilename)(o.name),r=$("#fullphotovote-joiner-avator");r.uploader({name:"file",url:i.host,data:{key:a,policy:i.policy,OSSAccessKeyId:i.accessid,signature:i.signature},done:function(){n=(0,h.imagify)(a,"image/resize,w_640"),t.initCropper(n,{aspectRatio:t.photosizes[t.activity.photosize]},function(){if(t.avatorUploader.cropper.croppered_params.length){var e=(0,h.imagify)(a,t.avatorUploader.cropper.croppered_params);t.joiner.avator.length<t.avatorLimit&&t.joiner.avator.push(e),t.avatorUploader.cropper.croppered_params=[]}}),t.hideLoading()},fail:function(){v.tooltip("头像上传失败，请检查网络连接并重试","danger"),t.hideLoading()},uploaded:function(){r.uploader("destroy")}}).uploader("upload")}())})}else v.tooltip("请选择正确的图片文件","notice")},initCropper:function(e,t,i){var o=this,n=(g.width(),g.height(),"dialog-fullphotovote-cropper-container");o.showDialog({title:"图片裁剪",fullscreen:!0,noeffect:!0,content:'<div id="'+n+'">'+('   <img src="'+e+'"/>')+'   <p style="color:#545454;font-size: 1.5rem;">     <i class="fa fa-rotate-left" id="dialog-fullphotovote-cropper-rotate-left"></i>     <i class="fa fa-rotate-right" id="dialog-fullphotovote-cropper-rotate-right" style="margin-left:0.5rem;"></i>   </p></div>',
cancel:function(){return $("#"+n).find("img").cropper("destroy"),!0},confirm:function(){return!!o.avatorUploader.cropper.croppered_params.length&&($("#"+n).find("img").cropper("destroy"),i(),!0)}}),setTimeout(function(){var i=$("#"+n).css({height:"90%"}).find("img"),a=o.avatorUploader.cropper.config;$("#dialog-fullphotovote-cropper-rotate-left").click(function(){i.cropper("rotate",-45)}),$("#dialog-fullphotovote-cropper-rotate-right").click(function(){i.cropper("rotate",45)}),i.attr("src",e).cropper($.extend(!0,{},a,{aspectRatio:t.aspectRatio,crop:function(e){var t=parseInt(e.x,10),i=parseInt(e.y,10),n=parseInt(e.width,10),a=parseInt(e.height,10),r=parseInt(e.rotate,10);o.avatorUploader.cropper.croppered_params="image/resize,w_640/"+["rotate",r].join(",")+"/"+["crop","x_"+t,"y_"+i,"w_"+n,"h_"+a].join(",")}}))},50)},showOptions:function(e,t){var i=this;return e&&e>0?($(".weui_actionsheet_toggle").prev().removeClass("weui_fade_toggle").next().removeClass("weui_actionsheet_toggle"),i.edittingIdx=t,void i.getJoinerProfile(e,function(){i.visible=!0})):(i.edittingIdx=-1,void(i.activity.photosize>0?i.getCurUUID(function(){i.visible=!0}):this.visible=!0))},hide:function(){this.visible=!1},saveJoiner:function(){var e=this,t=e.$route.params.id,i=e.joiner,o=i.id,n=$.trim(i.uuid),r=$.trim(i.name),s=$.trim(i.remark),c=i.avator;return c.length?/^[0-9]*[1-9][0-9]*$/.test(n)?r?s?(e.showLoading(),void $.ajax(a.default.photovote+"/joiner",{method:"POST",data:{activity_id:t,avator:c,id:o,uuid:n,name:r,remark:s,token:e.user.token},success:function(t){if(t.code)return void e.fail_action(t);e.$root.$emit("show.snackbar",{message:"选手信息添加成功"});var i=$.extend(e.joiner,{mobile:"",id:t.data.joiner_id,status:1,vote_count:0});e.$nextTick(function(){e.edittingIdx>=0?e.joiners.splice(e.edittingIdx,1,i):e.joiners.push(i)}),e.joiner={id:0,avator:[],uuid:"",name:"",remark:""},e.visible=!1},complete:function(){e.hideLoading()}})):void v.tooltip("请输入简要介绍","notice"):void v.tooltip("请输入选项名称","notice"):void v.tooltip("请输入正确的选项编号","notice"):void v.tooltip("请上传选手的照片","notice")},savePhotosize:function(){var e=this,t=e.$route.params.id,i=e.photosize;return e.photosize?e.confirmTimerCount>0?void(e.confirmTimer=setInterval(function(){e.confirmTimerCount<1&&clearInterval(e.confirmTimer),e.confirmTimerCount--},1e3)):void e.showDialog({title:"重要提示",content:"照片尺寸类型一经确认不可修改，是否已勾选正确选项",button:{confirm:"是",cancel:"否"},cancel:function(){return!0},confirm:function(){return e.showLoading(),$.ajax(a.default.photovote+"/photosize",{method:"PUT",data:{activity_id:t,photosize:i,token:e.user.token},success:function(t){return t.code?void e.fail_action(t):(e.$root.$emit("show.snackbar",{message:"保存成功"}),void e.getCurUUID(function(){e.savedPhotosize=!0,e.activity.photosize=i}))},complete:function(){e.hideLoading()}}),!0}}):void v.tooltip("请选择照片尺寸类型","notice")},chk2Index:function(e){var t=this,i=t.joiner.avator,o=i[e],n=0;i.splice(0,0,o),i.forEach(function(e,t){t>0&&e==o&&(n=t)}),n>0&&i.splice(n,1),t.joiner.avator=i,setTimeout(function(){$("input.setidx").prop("checked",!1).eq(0).prop("checked",!0)},100)},rmAvator:function(e){var t=this;t.joiner.avator.splice(e,1)},getCurUUID:function(e){var t=this,i=t.$route.params.id;t.showLoading(),$.ajax(a.default.photovote+"/cuuid",{method:"GET",data:{activity_id:i,token:t.user.token},success:function(i){return i.code?void t.fail_action(i):(t.joiner.uuid=i.data.uuid,void(e&&e()))},complete:function(){t.hideLoading()}})},getJoinerProfile:function(e,t){var i=this,o=i.$route.params.id;i.showLoading(),$.ajax(a.default.photovote+"/joinerprofile",{method:"GET",data:{activity_id:o,joiner_id:e,token:i.user.token},success:function(e){return e.code?void i.fail_action(e):(i.joiner=$.extend(i.joiner,e.data.joiner),void(t&&t()))},complete:function(){i.hideLoading()}})}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(52),a=i(123),r=o(a),s=i(214),c=o(s);t.default={template:"#fullphotovote-editor",mixins:[r.default],data:function(){var e=this,t=new Date,i=t.getFullYear(),o=t.getMonth(),n=t.getDate(),a=new Date(i,o,n),r=new Date(i,o,n+5);return $.extend({activity:{id:0,type:c.default.code,title:"小太阳“最美中国字”评选，选出您心目中的TA",start_time:a.valueOf()/1e3,end_time:r.valueOf()/1e3,prizes:{count:3,mobile:e.user.mobile,photosize:""},host_img:[],rules:"投票",host_info:[{type:"text",v:"说明：如有优秀作品希望参与本次评选，请与主办方联系，联系电话：XXXXX，微信：XXXX\n小太阳“最美中国字”评选\n主办方：小太阳学校\n协办方：多彩儿童写真\n\n东方水上乐园\n活动规则：活动期间，每人每天可以投3票",style:"",style_config:{}},{type:"text",v:"奖品设置\n一等奖（1名）\nXXX幼儿园一学期免费学\nXXX儿童写真价值588元儿童写真一套\nXXX英语机构儿童启蒙英语课1个月\n\n二等奖（2-5名）\n\n三等奖（6-30名）\n\n鼓励奖（31-100名）\n\n关于我们：\nXXX幼儿园成立于...\nXXX儿童写真是一家专门为....\nXXX英语培训机构坐落在....\n\n",style:"",style_config:{}}],others:{musician:"",foreground:{type:"",direction:""},banner:{src:"http://cdn.s.shangjiadao.cn/source/images/components/imager/fullphotovote/03.jpg"},join_customize:{customize_1:{name:"",required:0},customize_2:{name:"",required:0},customize_3:{name:"",required:0}}}},prize:{uploaded:!0},intro:{uploaded:!1,minieditor:{uploader:{showNotice:!0,maxlength:10,placeholder:"（点击选择图片，不上传则不显示）",description:"添加图片（最多添加 10 张图片）",error:function(){e.submitting=!1,$("body").tooltip("活动详情图片上传失败","danger")},success:function(t){e.activity.host_info=t,e.intro.uploaded=!0,e.publish()}},texter:{placeholder:"此处可修改字体样式：加粗、斜体、下划线、字体大小颜色...",description:"添加文本（最多添加 10 个文本内容）",maxlength:10},video:{placeholder:"请输入视频地址【支持优酷、腾讯视频】",description:"添加视频（最多添加 5 个视频）",maxlength:5}}}},c.default)},methods:{isValid:function(){var e=this,t=e.activity,i=(0,n.match)(JSON.stringify(t)),o="",a=!1;return!t.prizes.count||t.prizes.count>10?o="请输入正确的每人每天投票票数（票数须 大于0，小于等于10）":e.locked&&t.prizes.count!=e.clone_activity.prizes.count?o="已有用户报名，不能修改投票数":i.length?o="发现微信违规词："+i.join("、")+"，请修改后再发布！":a=!0,a||o&&e.showDialog({title:"提示",content:o,confirm:!0}),e.clearActivityAttrs(),a},clearActivityAttrs:function(){var e=this;e.is_clone&&(e.activity.prizes.photosize="")}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(10),a=o(n),r=i(12),s=o(r),c=i(167),u=o(c),d=i(45),l=o(d),f=i(9),h=(i(43),i(26));$(document.body);t.default={template:"#joiners",components:{Searchbar:u.default,WaterfallFlowLoader:l.default},vuex:{getters:{user:function(e){return e.user}},actions:{showDialog:h.showDialog,showLoading:h.showLoading,hideLoading:h.hideLoading,pageIn:h.pageIn}},route:{data:function(e){var t=this,i=t.$route;e.next({category:(0,f.translateType)(Number(i.query.type)||0)})}},data:function(){return{joiners:[],joinerIds:[],keyword:"",category:"",loaders:{},activity:{customize_length:0}}},computed:{loader:function(){var e=this,t=e.$route,i={activity_id:t.params.id,token:e.user.token},o=a.default.activityJoiners;return e.joiners=[],e.joinerIds=[],e.keyword&&(i.keyword=e.keyword),e.loaders=i,{params:i,url:o}},joiners2CN:function(){var e=this,t=e.$route,i=t.params.id,o=e.activity.share_host,n=t.query.type,a=e.category,r=void 0;return e.joiners.length&&e.joiners.forEach(function(e){var t=[];r=String("undefined"==typeof e.level?"":e.level).split(","),r.length&&r.forEach(function(e){e.length&&t.push(Number(e)+1)}),e.level2cn=t.join(", "),e.has_got=t.length>0,e.link=(0,f.generalShareurlV2)(o,i,n,a,e.id)}),e.joiners},categoryText:function(){switch(this.category){case"star":return"星星数";case"daydaysale":case"bargain2":case"bargain":case"bargain3":return"当前价格";case"moon":return"月牙数";case"nation":return"召集数";case"doubleeleven":return"福气";case"christmasgift":return"袜子数";case"ingots":return"元宝数";case"fire":return"鞭炮数";case"tree":return"剩余树苗";case"child":return"糖果数";default:return"票数"}}},ready:function(){this.pageIn({title:"报名表"})},methods:{load:function(e,t){var i=this;Array.isArray(e)&&e.forEach(function(e){e.is_exchanged=Number(e.is_exchanged),$.inArray(e.id,i.joinerIds)<0&&(i.joiners.push(e),i.joinerIds.push(e.id))}),t&&t.activity&&(i.activity=t.activity)},fail:function(e,t){var i=this;if(e==s.default[1100])(0,f.showKickedOffline)(t.time,t.ip,i.showDialog);else if(e==s.default[1101])(0,f.showExpireTip)(i.showDialog);else{if(e==s.default[1102])return void i.$router.go({name:"signout"});i.$root.$emit("show.snackbar",{color:"accent",message:e})}i.hideLoading(),callback&&callback()},fail_action:function(e,t){var i=this,o=e.code;if(1100==o)(0,f.showKickedOffline)(e.data.time,e.data.ip,i.showDialog);else if(1101==o)(0,f.showExpireTip)(i.showDialog);else{if(1102==o)return void i.$router.go({name:"signout"});i.$root.$emit("show.snackbar",{color:"accent",message:s.default[o]})}i.hideLoading(),t&&t()},search:function(e){this.keyword=e},showActionsheet:function(e){var t=e.target.getAttribute("href")?$(e.target.getAttribute("href")):$($(e.target).parent().attr("href")),i=t.find(".weui_mask_transition");e.preventDefault(),i.show().addClass("weui_fade_toggle"),t.find(".weui_actionsheet").addClass("weui_actionsheet_toggle")},hideActionsheet:function(e,t){var i=$(e.target).closest(".weui_actionsheet_container"),o=i.find(".weui_mask_transition");i.find(".weui_actionsheet").removeClass("weui_actionsheet_toggle"),o.removeClass("weui_fade_toggle"),setTimeout(function(){o.hide(),t&&t()},300)},modifyCustomize:function(e){var t=this,i=$(e.target),o=t.joiners[Number("undefined"==typeof e.target.dataset.index?i.parent().data("index"):e.target.dataset.index)],n=(o.id,"undefined"==typeof e.target.dataset.field?i.parent().data("field"):e.target.dataset.field),r=t.activity.customize[n],s=o[n];t.hideActionsheet(e),this.showDialog({title:"修改报名信息",cancel:!0,button:{confirm:"保存"},content:"<p>"+r+'：<input type="text"  value="'+s+'" id="dialog_text_name" placeholder="请输入'+r+'"/></p>',confirm:function(){var e=$("#dialog_text_name"),i=$.trim(e.val());return i.length?(t.showLoading(),$.ajax(""+a.default.solitaireJoinerProfile,{method:"PUT",data:{joiner_id:o.id,token:t.user.token,value:i,field:n},success:function(e){return e.code?void t.fail_action(e):(t.$root.$emit("show.snackbar",{message:r+"修改成功"}),void(o[n]=i))},complete:function(){t.hideLoading()}}),!0):(t.$root.$emit("show.snackbar",{message:r+"不能为空哟"}),e.focus(),!1)}})},exchange:function(e){var t=this,i=$(e.target),o=t.joiners[Number("undefined"==typeof e.target.dataset.index?i.parent().data("index"):e.target.dataset.index)],n=o.is_exchanged;t.hideActionsheet(e),this.showDialog({title:n?"确认撤销标记？":"确认标记？",cancel:!0,confirm:function(){return t.showLoading(),$.ajax(a.default.activityExchange,{method:"POST",data:{joiner_id:o.id,token:t.user.token},success:function(e){return e.code?void t.fail_action(e):(t.$root.$emit("show.snackbar",{message:n?"撤销成功":"标记成功"}),void(o.is_exchanged=!n))},complete:function(){t.hideLoading()}}),!0}})},remove:function(e){var t=this,i=$(e.target),o=t.joiners[Number("undefined"==typeof e.target.dataset.index?i.parent().data("index"):e.target.dataset.index)],n=o.id,r=t.activity;return t.hideActionsheet(e),r.ended?void this.showDialog({title:"亲，活动已经结束了，无法删除哟！",button:{confirm:"我知道了"},confirm:function(){return!0}}):void this.showDialog({title:"确认删除“"+o.name+"”吗？删除后无法恢复",cancel:!0,confirm:function(){return t.showLoading(),$.ajax(a.default.activityJoiner+"?token="+t.user.token+"&joiner_id="+n,{method:"DELETE",success:function(e){return e.code?void t.fail_action(e):(t.$root.$emit("show.snackbar",{message:"删除成功"}),void(o.status=0))},complete:function(){t.hideLoading()}}),!0}})},removePrizeJoiner:function(e){var t=this,i=$(e.target),o=t.joiners[Number("undefined"==typeof e.target.dataset.index?i.parent().data("index"):e.target.dataset.index)],n=o.id,r=t.activity;return t.hideActionsheet(e),r.ended?void this.showDialog({title:"亲，活动已经结束了，无法删除哟！",button:{confirm:"我知道了"},confirm:function(){return!0}}):void this.showDialog({title:"确认删除吗？删除后无法恢复",cancel:!0,confirm:function(){return t.showLoading(),$.ajax(a.default.activityPrize+"/"+n+"?token="+t.user.token,{method:"DELETE",success:function(e){return e.code?void t.fail_action(e):(o.discount=0,o.level=-1,void $.ajax(a.default.activityJoiner+"?token="+t.user.token+"&joiner_id="+n,{method:"DELETE",success:function(e){return e.code?void t.fail_action(e):(t.$root.$emit("show.snackbar",{message:"删除成功"}),void(o.status=0))},complete:function(){t.hideLoading()}}))}}),!0}})},modify:function(e){var t=this,i=$(e.target),o=t.joiners[Number("undefined"==typeof e.target.dataset.index?i.parent().data("index"):e.target.dataset.index)],n=(o.id,o.name);t.hideActionsheet(e),this.showDialog({title:"修改报名信息",cancel:!0,button:{confirm:"保存"},content:'<p>姓名：<input type="text" class="dialog_" value="'+n+'" id="dialog_text_name" placeholder="请输入报名者姓名"/></p>',confirm:function(){var e=$("#dialog_text_name"),i=$.trim(e.val());return i.length?(t.showLoading(),$.ajax(""+a.default.activityJoiner,{method:"PUT",data:{joiner_id:o.id,token:t.user.token,name:i},success:function(e){return e.code?void t.fail_action(e):(t.$root.$emit("show.snackbar",{message:"保存成功"}),void(o.name=i))},complete:function(){t.hideLoading()}}),!0):(t.$root.$emit("show.snackbar",{message:"姓名不能为空哟"}),e.focus(),!1)}})},doubleExchange:function(e){var t=this,i=$(e.target),o=t.joiners[Number("undefined"==typeof e.target.dataset.index?i.parent().data("index"):e.target.dataset.index)],n=e.target.dataset.change;if(n){var r=o.is_exchanged;this.showDialog({title:"确认撤销？",cancel:!0,confirm:function(){return t.showLoading(),$.ajax(a.default.activityPrize+"/"+o.id+"?token="+t.user.token,{method:"DELETE",success:function(e){return e.code?void t.fail_action(e):(t.$root.$emit("show.snackbar",{message:"撤销成功"}),o.is_exchanged=!r,o.discount=0,void(o.level=-1))},complete:function(){t.hideLoading()}}),!0}})}},levelText:function(e){var t=[];return e=e.split(","),e.length?(e.forEach(function(e){t.push(parseInt(e)+1)}),t.join(",")):""}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(10),a=o(n),r=i(12),s=o(r),c=i(9),u=i(26),d=$(document.body);t.default={template:"#statistics",vuex:{getters:{user:function(e){return e.user}},actions:{showLoading:u.showLoading,hideLoading:u.hideLoading,pageIn:u.pageIn}},route:{data:function(e){var t=this,i=e.to;t.showLoading(),$.ajax(a.default.activityStatistics,{data:{activity_id:i.params.id,token:t.user.token},success:function(t){if(t.code)return void d.tooltip(s.default[t.code],"danger");if(t.data){var o=t.data;e.next({category:(0,c.translateType)(Number(i.query.type)||0),total:{joiners:o.total_count.sign_up_count,voters:o.total_count.partake_count},list:o.list})}},error:function(){d.tooltip("数据加载失败","danger")},complete:function(){t.hideLoading()}})}},data:function(){return{category:"",total:{joiners:0,voters:0},list:[]}},ready:function(){this.pageIn({title:"数据统计"})}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(60),a=o(n),r=i(67),s=o(r),c=i(222),u=o(c),d=i(9);t.default={mixins:[a.default,s.default,u.default],ready:function(){var e=this;e.changeBnBg()},beforeDestroy:function(){var e=this;e.bannerChangeTimer&&clearInterval(e.bannerChangeTimer)},methods:{click:function(e){var t=this,i=t.my.joinerId;i?t.$router.go({name:"watermelon-joiner",params:{id:t.activityId,joinerId:i}}):"find"==e?t.joinerfound():(0,d.showBeforeJoinTiper)(t.showDialog,function(){t.visible=!0,setTimeout(function(){t.joining=!0},0)})}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(223),a=o(n),r=i(10);o(r);i(163),t.default={template:"#watermelon",data:function(){return $.extend({active:!1,personal:!1,visible:!1,votestat:"",rooturl:"",bannerClass:"day",bannerChangeStat:"finshed",pageSwitch:{countdown:!0},bannerChangeTimer:null},a.default)},computed:{button:function(){var e=this,t=e.activity,i=Math.round(Date.now()/1e3),o="",n=!1,a=e.completed;return t&&(t.start_time>i?(o="活动未开始",n=!0):t.end_time<i?(o="活动已结束",n=!0):o=e.my.self?"返回我的报名页":e.my.joinerId?"返回我的报名页":"我要报名"),{text:o,disabled:n,completed:a}}},methods:{changeBnBg:function(){var e=this;e.bannerChangeTimer&&clearInterval(e.bannerChangeTimer),e.bannerChangeTimer=setInterval(function(){"day"==e.bannerClass?(e.bannerClass="night",e.bannerChangeStat="day-leaving"):(e.bannerClass="day",e.bannerChangeStat="night-leaving"),setTimeout(function(){e.bannerChangeStat="done",setTimeout(function(){e.bannerChangeStat="finshed"},800)},1500)},6e3)}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={category:"watermelon",code:29,name:"摘西瓜"}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(52),a=i(123),r=o(a),s=i(223),c=o(s),u=i(222),d=o(u);t.default={template:"#watermelon-editor",mixins:[r.default,d.default],data:function(){var e=this,t=new Date,i=t.getFullYear(),o=t.getMonth(),n=t.getDate(),a=new Date(i,o,n),r=new Date(i,o,n+5);return $.extend({activity:{id:0,type:c.default.code,title:"摘西瓜赢好礼，58元换购价值500元英语大礼包",start_time:a.valueOf()/1e3,end_time:r.valueOf()/1e3,rules:"1.点击页面按钮“我要报名”参加活动。\n\n2.报名者自己每1小时可以点击【我要摘西瓜】增加摘西瓜个数。\n\n3.别人可以帮忙增加摘西瓜个数。\n\n4.奖品份数有限，达标就会减少一份，份数领完则无法继续报名，亲速度哦！\n\n5.完成后，马上联系商家兑奖吧。\n",prizes:{count:100,image:"",limit:30,desc:"小星星英语价值500元学习大礼包内含：\n\n①儿童英语免费学1颗月，价值300元；\n\n②小星星定制书包，价值100元；\n\n③学费抵扣券一张，价值100元\n\n到店提供参与活动的手机号码，工作人员查询后直接兑奖。\n本店承诺无任何隐形消费，欢迎大家监督。",vote_hours:1,text:"58元获得小星星英语价值500元的大礼包",receive_prize_mobile:""+e.user.mobile},receive_info:"兑奖时间：\n机构地址：\n领奖电话："+e.user.mobile+"\n到店出示手机号码，工作人员查询核对后，兑奖。",host_info:"",host_img:[],others:{musician:"",foreground:{type:"",direction:""},section_text:{receive_info:"兑奖信息",intro:"机构介绍"},join_customize:{customize_1:{name:"",required:0},customize_2:{name:"",required:0},customize_3:{name:"",required:0}}}}},c.default)},methods:{isValid:function(){var e=this,t=e.activity,i=(0,n.match)(JSON.stringify(t)),o=e.clone_activity,a="",r=!1;t.title?!t.prizes.vote_hours||t.prizes.vote_hours>24||t.prizes.vote_hours<1?a="每次投票时间间隔必须在1~24小时之间，请检查":e.clone_activity&&e.statistics&&e.statistics.join_count&&!e.is_clone&&t.prizes.vote_hours>e.clone_activity.prizes.vote_hours?a="【温馨提示】为了保证活动公平性，活动期间，报名者投票时间间隔只减不增":t.prizes.count?e.locked&&e.activity.prizes.count<e.clone_activity.prizes.count?a="已有用户报名，因此奖品数量必须大于原值【"+e.clone_activity.prizes.count+"】":e.locked&&t.prizes.limit>o.prizes.limit?a="已有用户报名，因此摘西瓜个数要求必须小于原值【"+o.prizes.limit+"】":t.prizes.limit?t.prizes.text?t.receive_info?t.prizes.desc?t.prizes.receive_prize_mobile?i.length?a="发现微信违规词："+i.join("、")+"，请修改后再发布！":r=!0:a="请设置咨询热线电话":a="请设置奖品描述":a="请设置领奖信息":a="请输入奖品描述":a="请输入摘西瓜个数":a="请输入奖品份数":a="请设置活动标题";var s=!1,c=2;return $.each(t.others.join_customize,function(e,t){if(c++,t.required&&""==$.trim(t.name))return a="【信息收集设置】第 "+c+" 个信息项由于设置为必填项，因此名称不能为空！",void(s=!0)}),s&&(r=!1),t.prizes.count>1e3&&!window.confirm("哇，土豪，您的奖品份数超过 1000 了，是否继续保存?")&&(r=!1),r||a&&e.showDialog({title:"提示",content:a,confirm:!0}),r}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(10),a=o(n),r=i(12),s=o(r),c=i(60),u=o(c),d=i(67),l=o(d),f=i(222),h=o(f),p=i(9);t.default={mixins:[u.default,l.default,h.default],route:{data:function(){var e=this;e.changeBnBg()}},data:function(){return{personal:!0}},computed:{required:function(){var e=this,t=e.activity;return t?Math.max(0,t.prizes.limit-e.participant.vote_count):0},completed:function(){return!this.required},ended:function(){var e=this,t=e.activity;return t.end_time<Math.round(Date.now()/1e3)}},beforeDestroy:function(){var e=this;e.bannerChangeTimer&&clearInterval(e.bannerChangeTimer)},methods:{alert:function(){var e=this;e.completed&&e.showDialog({title:"提示",content:e.my.self?"已完成，可以兑奖咯（商家联系方式可在活动页面上查找）":"TA已完成摘西瓜任务",confirm:!0})},click:function(e){var t=this,i=t.my.joinerId;t.my.self?t.completed?t.alert():t.showSharer():i?t.$router.go({name:"watermelon-joiner",params:{id:t.activityId,joinerId:i}}):"find"==e?t.joinerfound():(0,p.showBeforeJoinTiper)(t.showDialog,function(){t.visible=!0,setTimeout(function(){t.joining=!0},0)})},help:function(){var e=this;e.showDialog({title:"找人帮忙",content:'<p style="font-weight: bold;">如何找人帮忙<i class="fa fa-hand-o-down" aria-hidden="true"></i></p>'+e.getShortTip(),confirm:function(){return!0},button:{confirm:"我知道了"}}),e.genShorturl()},vote:function(){var e=this,t=e.joinerId,i=(e.my.self?"":"帮TA",!1),o=0,n=0,r=[];if(e.completed)return void e.alert();if(e.voter&&(e.voter.joiners.forEach(function(a){a.id==t&&(i=!0,e.my.self&&a.next_vote_date&&(o=a.next_vote_date,o<=Date.now()/1e3?i=!1:n=o-Date.now()/1e3))}),i)){if(n){var c=Math.floor(n/3600),u=Math.floor((n-3600*c)/60);c&&r.push(c+" 小时 "),u&&r.push(u+" 分钟")}return r=r.join(""),e.showDialog({title:"提示",content:e.my.self?'<font color="red">'+r+"</font> 后再摘哦，朋友也能帮你哦！":"你已经帮TA摘过了",confirm:!0}),void(e.my.self&&e.genShorturl())}e.showLoading(),$.ajax(a.default.activityVote,{method:"POST",data:{joiner_id:t,open_id:e.visitor?e.visitor.openId:"wx"+Date.now(),next_vote_date:o},success:function(i){return i.code?void $body.tooltip(s.default[i.code],"danger"):(e.voteIn({joiner:{id:t,next_vote_date:i.data.next_vote_date,expires:1e3*e.activity.end_time}}),void setTimeout(function(){e.votestat="ready",setTimeout(function(){e.votestat="doing",setTimeout(function(){e.participant.vote_count++,e.my.self?(e.genShorturl(),e.showDialog({title:"恭喜您",content:'<p><i class="fa fa-smile-o" aria-hidden="true"></i> 您成功摘了一个西瓜</p>',confirm:function(){return e.votestat="done",!0},button:{confirm:"我知道了"}})):e.showDialog({content:'<p><i class="fa fa-smile-o" aria-hidden="true"></i> 恭喜，成功帮TA摘了一个西瓜！</p>',confirm:function(){return e.votestat="done",!0},button:{confirm:"我知道了"}})},2200)},1200)},1))},complete:function(){e.hideLoading()}})}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(60),a=o(n),r=i(67),s=o(r),c=i(227),u=o(c),d=i(9);t.default={mixins:[a.default,s.default,u.default],methods:{click:function(e){var t=this,i=t.my.joinerId;i?t.$router.go({name:"fish-joiner",params:{id:t.activityId,joinerId:i}}):"find"==e?t.joinerfound():(0,d.showBeforeJoinTiper)(t.showDialog,function(){t.visible=!0,setTimeout(function(){t.joining=!0},0)})}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(228),a=o(n);t.default={template:"#fish",data:function(){return $.extend({active:!1,personal:!1,visible:!1,votestat:"",pageSwitch:{countdown:!0}},a.default)},computed:{button:function(){var e=this,t=e.activity,i=Math.round(Date.now()/1e3),o="",n=!1,a=e.completed;return t&&(t.start_time>i?(o="活动未开始",n=!0):t.end_time<i?(o="活动已结束",n=!0):o=e.my.self?"返回我的报名页":e.my.joinerId?"返回我的报名页":"我要报名"),{text:o,disabled:n,completed:a}}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={category:"fish",code:28,name:"钓鱼"}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(228),a=o(n),r=i(123),s=o(r),c=i(52);t.default={template:"#fish-editor",mixins:[s.default],data:function(){var e=($(document.body),this),t=new Date,i=t.getFullYear(),o=t.getMonth(),n=t.getDate(),r=new Date(i,o,n),s=new Date(i,o,n+5);return $.extend({activity:{id:"",type:a.default.code,title:"钓鱼赢好礼，58元换购价值500元英语大礼包",start_time:r.valueOf()/1e3,end_time:s.valueOf()/1e3,rules:"1.点击页面按钮“我要报名”参加活动。\n\n2.报名者自己每1小时可以点击【我要钓鱼】，每次可以增加1条鱼。\n\n3.朋友也能帮你。\n\n4.奖品份数有限，达标就会减少一份，份数领完则无法继续报名，亲速度哦！\n\n5.完成后，马上联系商家兑奖吧。",prizes:{count:300,image:"",limit:100,desc:"小星星英语价值500元学习大礼包内含：\n\n①儿童英语免费学1颗月，价值300元；\n\n②小星星定制书包，价值100元；\n\n③学费抵扣券一张，价值100元\n\n到店提供参与活动的手机号码，工作人员查询后直接兑奖。\n\n本店承诺无任何隐形消费，欢迎大家监督。",vote_hours:1,text:"58元获得小星星英语价值500元学习大礼包",receive_prize_mobile:""+e.user.mobile},receive_info:"兑奖时间：\n机构地址：\n领奖电话："+e.user.mobile+"\n到店出示手机号码，工作人员查询核对后，兑奖。",host_info:"",host_img:[],others:{musician:"",foreground:{type:"",direction:""},section_text:{receive_info:"兑奖信息",intro:"机构介绍"},join_customize:{customize_1:{name:"",required:0},customize_2:{name:"",required:0},customize_3:{name:"",required:0}}}},clone_activity:{prizes:{count:0,vote_hours:0,limit:0}}},a.default)},methods:{isValid:function(){var e=this,t=e.activity,i=(0,c.match)(JSON.stringify(t)),o=e.clone_activity,n="",a=!1;t.title?!t.prizes.vote_hours||t.prizes.vote_hours>24||t.prizes.vote_hours<1?n="每次投票时间间隔必须在1~24小时之间，请检查":o&&e.statistics&&e.statistics.join_count&&!e.is_clone&&t.prizes.vote_hours>o.prizes.vote_hours?n="【温馨提示】为了保证活动公平性，活动期间，报名者钓鱼时间间隔只减不增":t.prizes.count?e.locked&&t.prizes.count<o.prizes.count?n="已有用户报名，因此奖品数量必须大于原值【"+o.prizes.count+"】":e.locked&&t.prizes.limit>o.prizes.limit?n="已有用户报名，因此钓鱼数量要求必须小于原值【"+o.prizes.limit+"】":t.prizes.limit?t.prizes.text?t.receive_info?t.prizes.desc?t.prizes.receive_prize_mobile?i.length?n="发现微信违规词："+i.join("、")+"，请修改后再发布！":a=!0:n="请设置咨询热线电话":n="请设置产品描述":n="请设置领奖信息":n="请输入奖品描述":n="请输入钓鱼数量":n="请输入奖品份数":n="请设置活动标题";var r=!1,s=2;return $.each(t.others.join_customize,function(e,t){if(s++,t.required&&""==$.trim(t.name))return n="【信息收集设置】第 "+s+" 个信息项由于设置为必填项，因此名称不能为空！",void(r=!0)}),r&&(a=!1),t.prizes.count>1e3&&!window.confirm("哇，土豪，您的奖品份数超过 1000 了，是否继续保存?")&&(a=!1),a||n&&e.showDialog({title:"提示",content:n,confirm:!0}),a}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(61),a=o(n),r=i(12),s=o(r),c=i(60),u=o(c),d=i(67),l=o(d),f=i(227),h=o(f),p=i(9);t.default={mixins:[u.default,l.default,h.default],route:{data:function(){}},data:function(){return{personal:!0}},computed:{fish:function(){var e=this,t=e.activity,i=t?e.participant.vote_count/t.prizes.limit:1,o=Math.max(1,isNaN(i)?1:Math.floor(8*i));return"fish-"+o},required:function(){var e=this,t=e.activity;return t?Math.max(0,t.prizes.limit-e.participant.vote_count):0},completed:function(){return!this.required},ended:function(){var e=this,t=e.activity;return t.end_time<Math.round(Date.now()/1e3)}},methods:{alert:function(){var e=this;e.completed&&e.showDialog({title:"提示",content:e.my.self?"已完成，可以兑奖咯（商家联系方式可在活动页面上查找）":"TA已完成钓鱼任务",confirm:!0})},click:function(e){var t=this,i=t.my.joinerId;t.my.self?t.completed?t.alert():t.showSharer():i?t.$router.go({name:"fish-joiner",params:{id:t.activityId,joinerId:i}}):"find"==e?t.joinerfound():(0,p.showBeforeJoinTiper)(t.showDialog,function(){t.visible=!0,setTimeout(function(){t.joining=!0},0)})},help:function(){var e=this;e.showDialog({title:"找人帮忙",content:'<p style="font-weight: bold;">如何找人帮忙<i class="fa fa-hand-o-down" aria-hidden="true"></i></p>'+e.getShortTip(),confirm:function(){return!0},button:{confirm:"我知道了"}}),e.genShorturl()},vote:function(){var e=this,t=e.joinerId,i=(e.my.self?"":"帮TA",!1),o=0,n=0,r=[];if(e.completed)return void e.alert();if(e.voter&&(e.voter.joiners.forEach(function(a){a.id==t&&(i=!0,e.my.self&&a.next_vote_date&&(o=a.next_vote_date,o<=Date.now()/1e3?i=!1:n=o-Date.now()/1e3))}),i)){if(n){var c=Math.floor(n/3600),u=Math.floor((n-3600*c)/60);c&&r.push(c+" 小时 "),u&&r.push(u+" 分钟")}return r=r.join(""),e.showDialog({title:"提示",content:e.my.self?'<font color="red">'+r+"</font> 后再钓哦，朋友也能帮你哦！":"你已经帮TA钓过了",confirm:!0}),void(e.my.self&&e.genShorturl())}e.showLoading(),$.post(a.default.activity.vote,{joiner_id:t,open_id:e.visitor?e.visitor.openId:"wx"+Date.now(),next_vote_date:o}).then(function(i){return e.hideLoading(),i.code?void $("body").tooltip(s.default[i.code],"danger"):(e.voteIn({joiner:{id:t,next_vote_date:i.data.next_vote_date,expires:1e3*e.activity.end_time}}),e.active=!0,void setTimeout(function(){e.showVoteModal(),e.participant.vote_count++},200))})},showVoteModal:function(){var e=this;e.votestat="in",setTimeout(function(){e.votestat="stand",setTimeout(function(){e.hideVoteModal()},1500)},900)},hideVoteModal:function(){var e=this;e.votestat="out",setTimeout(function(){e.votestat="hide",e.my.self?(e.genShorturl(),e.showDialog({title:"恭喜您",content:'<p><i class="fa fa-smile-o" aria-hidden="true"></i> 恭喜钓到一条 “鱼”</p>',confirm:function(){return!0},button:{confirm:"我知道了"}})):e.showDialog({content:'<p><i class="fa fa-smile-o" aria-hidden="true"></i> 恭喜，成功钓鱼一次！</p>',confirm:function(){return!0},button:{confirm:"我知道了"}})},960)}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(10),a=o(n),r=i(26);t.default={template:"#flyer-categories",vuex:{actions:{showLoading:r.showLoading,hideLoading:r.hideLoading,pageIn:r.pageIn}},ready:function(){this.pageIn({title:"传单分类"})},route:{data:function(e){var t=this,i=""+a.default.json.flyer.categories;t.showLoading(),$.getJSON(i+"?"+(new Date).getHours(),function(i){t.hideLoading(),e.next({categories:i})})}},data:function(){return{categories:[]}},methods:{go:function(e){window.location.href=e}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(10),a=o(n),r=i(26);t.default={template:"#flyer-category",vuex:{actions:{showLoading:r.showLoading,hideLoading:r.hideLoading,pageIn:r.pageIn}},ready:function(){this.pageIn({title:"传单分类"})},route:{data:function(e){var t=this,i=t.$route,o=i.params.id||"",n=i.query.name||"",r=a.default.json.flyer.categoriesPath+"/"+o+".json";o?(t.showLoading(),$.getJSON(r+"?"+(new Date).getHours(),function(i){t.hideLoading(),n&&t.pageIn({title:"传单分类-"+n}),e.next({categories:i.reverse()})})):e.next({categories:[]})}},data:function(){return{categories:[]}},methods:{go:function(e){window.location.href=e}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(10),a=o(n),r=i(12),s=o(r),c=i(40),u=o(c),d=i(45),l=o(d),f=i(26),h=i(9),p=$("body");t.default={template:"#flyer-flyers",components:{Message:u.default,WaterfallFlowLoader:l.default},vuex:{getters:{user:function(e){return e.user}},actions:{showDialog:f.showDialog,showLoading:f.showLoading,hideLoading:f.hideLoading,pageIn:f.pageIn}},computed:{loader:function(){var e=this,t=e.user,i={token:t?t.token:""};return{url:a.default.flyer,params:i}}},ready:function(){this.pageIn({title:"我的传单"})},data:function(){return{hasFlyers:!0,flyers:[]}},methods:{load:function(e){var t=this;Array.isArray(e)&&e.forEach(function(e){e.content=$.parseJSON(e.content),t.flyers.push(e)}),t.hasFlyers=Array.isArray(e)&&e.length>0},fail:function(e,t){var i=this;if(e==s.default[1100])(0,h.showKickedOffline)(t.time,t.ip,i.showDialog);else if(e==s.default[1101])(0,h.showExpireTip)(i.showDialog);else{if(e==s.default[1102])return void this.$router.go({name:"signout"});if(e==s.default[1152])return void this.$router.go({name:"signout",query:{kicked:"1"}});i.$root.$emit("show.snackbar",{color:"accent",message:e})}i.hideLoading()},removeFlyer:function(e){var t=this,i=e.target,o=$(i),n=Number("undefined"==typeof i.dataset.index?o.parent().data("index"):i.dataset.index),r=t.flyers[n];e.preventDefault(),t.showDialog({title:"确认删除该传单？",content:"注意：传单删除后不可恢复！",cancel:!0,confirm:function(){return t.showLoading(),$.ajax(a.default.flyer+"/"+r.id+"?token="+t.user.token,{method:"DELETE",success:function(e){return t.hideLoading(),e.code?void t.fail(s.default[e.code]):(p.tooltip("传单删除成功","success"),void t.flyers.splice(n,1))},error:function(){p.tooltip("传单删除失败","danger")}}),!0}})},execDownload:function(e){var t=this,i=e.target,o=$(i),n=Number("undefined"==typeof i.dataset.index?o.parent().data("index"):i.dataset.index),r=t.flyers[n];return r.download_src?void t.showDialog({title:"&nbsp;",content:'<img src="'+r.download_src+'" style="width:30%;border: 14px solid #dfdfdf"/><br/><br/>长按图片下载到手机相册<br/>'+("pager"==r.typesetting?'<font style="color:#999;font-size:0.8rem;">（Ps：正反面下载后适合打印出来发传单哦）</font>':'<font style="color:#999; font-size:0.8rem;">（Ps：长图适合在网络中进行传播）</font>'),fullscreen:!0,confirm:!0,button:{confirm:"我知道了"}}):void t._loadTemplates(r,function(e){function i(){
var e=[],i=null;t.showLoading("正在生成图片，预计1分钟..."),$.ajax(a.default.flyer+"/download",{method:"post",data:{id:r.id,params:JSON.stringify(n),token:t.user.token},dataType:"text",timeout:6e4,success:function(i){return i=$.parseJSON(i),i.code?void t.fail(s.default[i.code]):("pager"==n.typesetting&&c.push(i.data.src),void(("long"==n.typesetting||"pager"==n.typesetting&&c.length==o.length)&&("pager"==n.typesetting&&(c.forEach(function(t,i){var o=0==i?"正面":"反面";e.push('<div class="cell-6" style="padding-top: 0.5rem;">'+(" <p><strong>"+o+"</strong><p/>")+(' <p><img src="'+t+'" style="width: 100%;"/></p>')+"</div>")}),c=[]),t.showDialog({title:"&nbsp;",content:'<div id="dialog-flyer-download-success" style="width:80%;border: 14px solid #dfdfdf;margin: 0 auto;overflow: hidden;">'+("pager"==n.typesetting?e.join(""):' <img src="'+i.data.src+'" style="width: 40%;"/>')+'</div><br/><br/><strong><i class="fa fa-smile-o" style="margin-right: 0.5rem;"></i>客官，让您久等了</strong><br/><br/>'+("pager"==n.typesetting?'<font color="red">分别</font>':"")+"长按图片下载到手机相册<br/>"+("pager"==n.typesetting?'<font style="color:#999;font-size:0.8rem;">（Ps：下载后，可以打印出来派发传单哟）</font>':'<font style="color:#999; font-size:0.8rem;">（Ps：长图适合在网络中进行传播）</font>'),fullscreen:!0,confirm:!0,button:{confirm:"我知道了"}}))))},error:function(){t.hideLoading(),t.$root.$emit("show.snackbar",{color:"accent",message:"传单下载失败"})},complete:function(){"long"==n.typesetting?t.hideLoading():i=setInterval(function(){$("#dialog-flyer-download-success").length&&(t.hideLoading(),clearInterval(i))},1e3)}})}var o=e.pages,n={width:0,height:0,t:t.user.token},c=[];o.forEach(function(e){(!n.width||e.width<n.width)&&(n.width=Number(e.width))}),t.hideLoading(),t.showDialog({content:"请选择下载方式",button:{cancel:'<i class="fa fa-files-o"> 分页图',confirm:'<i class="fa fa-file-text-o"> 长图'},minicancel:!0,cancel:function(){return n.typesetting="pager",o.forEach(function(e,t){n.height=Number(e.height)*Number(n.width)/Number(e.width),n.pageindex=t,i()}),!0},confirm:function(){return o.forEach(function(e){n.height+=Number(e.height)*Number(n.width)/Number(e.width)}),n.height=n.height+50,n.typesetting="long",i(),!0}})})},_loadTemplates:function(e,t){var i=this,o=i._getTemplateJsonFile(e);i.showLoading("正在拉取.."),$.ajax(a.default.flyer+"/templates?key="+o+"&token="+i.user.token,{method:"get",dataType:"text",success:function(e){return e=$.parseJSON(e),e.code?(i.hideLoading(),void i.fail(s.default[e.code])):void(t&&t(e.data))},error:function(){i.hideLoading(),i.$root.$emit("show.snackbar",{color:"accent",message:"拉取传单信息失败"})}})},_getTemplateJsonFile:function(e){var t=e.content.templates,i=[];return t.forEach(function(e){i.push(e.type+"-"+e.id)}),i.join(",")},modify:function(e){var t=this,i=$(e.target),o=t.flyers[Number("undefined"==typeof e.target.dataset.index?i.parent().data("index"):e.target.dataset.index)],n=o.id,r=o.name;this.showDialog({title:"修改传单名称",cancel:!0,button:{confirm:"保存"},content:'<p>名称：<input type="text" value="'+r+'" id="dialog_text_flyer_name" maxlength="15" placeholder="请输入传单名称"/></p>',confirm:function(){var e=$("#dialog_text_flyer_name"),i=$.trim(e.val());return i.length?(t.showLoading(),$.ajax(a.default.flyer+"/name",{method:"PUT",data:{id:n,token:t.user.token,name:i},success:function(e){return e.code?void t.fail(s.default[e.code]):(t.$root.$emit("show.snackbar",{message:"名称保存成功"}),void(o.name=i))},complete:function(){t.hideLoading()}}),!0):(t.$root.$emit("show.snackbar",{message:"传单名称不能为空"}),e.focus(),!1)}})}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(10),a=o(n),r=i(12),s=o(r),c=i(77),u=o(c),d=i(45),l=o(d),f=i(76),h=o(f);i(183),i(41);var p=i(26),m=i(43),g=i(9),v=window,y=$(v),w=$("body"),_=document,b=/^image\/\w+/;t.default={template:"#flyer-editor",components:{WaterfallFlowLoader:l.default,miniLogin:u.default},vuex:{getters:{user:function(e){return e.user}},actions:{showDialog:p.showDialog,showLoading:p.showLoading,hideLoading:p.hideLoading,pageIn:p.pageIn}},ready:function(){var e=this;e.editable&&e.showDialog({title:"温馨提示",content:"不同手机尺寸大小存在差异，编辑页面可能出现文字溢出现象，请以保存后的图片效果为准 :)",button:{confirm:"我知道了"},confirm:!0}),e._resize()},route:{data:function(e){function t(t){var n=o.flyer.name,a="制作";t?(n=t.name,a="clone"==o.$route.query.action?"复制":"编辑"):(o._setFlyerTemplates(s),c&&(o.flyer.content.category_id=c)),o.pageIn({title:o.editable?"【"+a+"】"+n:n}),o.templateData?(o.hideLoading(),e.next({activated:!0})):(i(),o.exchangeTemplate(!0))}function i(){var t=o._getTemplateJsonFile();return null===t?(o.hideLoading(),void o.$root.$emit("show.snackbar",{color:"accent",message:"未指定模板，请先指定模板"})):void $.ajax(a.default.flyer+"/templates?key="+t+"&token="+o.mtoken,{method:"get",dataType:"text",success:function(t){if(o.hideLoading(),t=$.parseJSON(t),t.code)return void o.fail(t);var i=t.data;o._initFlyerContent(i)?(o.templateData=i,e.next({activated:!0})):o.$root.$emit("show.snackbar",{color:"accent",message:"该传单模板配置有误！"})},error:function(){o.hideLoading(),window.location.href="/404.html"}})}var o=this,n=o.$route,r=Number(n.params.id)||0,s=n.query.t||"",c=n.query.cid||"",u=n.query.k||"",d=n.query.typesetting||"",l=n.query.pageindex||0;return"flyer-download"==n.name&&u&&(o.editable=!1,o.utoken=u,o.others.typesetting=d,o.others.pageindex=Number(l)),r?(o.showLoading(),void $.get(a.default.flyer+"/"+r,{token:""+o.mtoken},function(i){if(i=$.parseJSON(i),i.code)return void o.fail(i);if(i.data){var a=i.data.flyer,r=void 0;if(o.editable&&a.user_id!=o.user.id)return void e.abort();"clone"==n.query.action&&(a.id="",a.name=a.name+"-副本");try{r=JSON.parse(a.content)}catch(e){console.log("parse flyer content error: "+e.message)}a.content=r,o.flyer=a,t(a)}},"text")):void t()}},computed:{activityLoader:function(){var e=this,t=e.user,i={token:t?t.token:"",type:5};return e.loaders=i,{url:a.default.activity,params:i}},mtoken:function(){var e=this;return e.utoken?e.utoken:e.user.token},clientWidth:function(){var e=this;return e.others.clientWidth||(e.others.clientWidth=_.documentElement.clientWidth),e.others.clientWidth},clientHeight:function(){var e=this;return e.others.clientHeight||(e.others.clientHeight=_.documentElement.clientHeight),e.others.clientHeight},currentPage:function e(){var t=this,e=t.others.currentPage,i=t.flyer.content.templates,o=t.flyer.content.pages,n=void 0,a=void 0;return n=o[e].bg.src,a=i[e].id,{bg:n,template_id:a}},texterParser:function(){var e=this,t=e.templateData.pages[e.others.currentPage],i=t.fields_limit,o=(t.fields_data,void 0),n=void 0,a={};for(o in i)n=i[o],"image"==n.type&&(a[o]="background-image:url("+e.flyer.content.pages[e.others.currentPage].fields_data[o]+")");return{fieldsLimit:i,imageStyles:a}},pageParser:function(){var e=this,t=e.templateData,i=e.flyer.content.pages,o=(e.others.downloadSeparateHeight,[]),n=void 0,a=void 0,r=void 0,s=void 0,c=void 0,u=void 0,d=void 0,l=void 0,f=void 0,h=void 0,p=void 0,m=void 0,g=e.clientWidth,v=(e.clientHeight,void 0),y=void 0;return e.editable&&g>e.others.maxEditableWidth&&(g=e.others.maxEditableWidth),t.pages.forEach(function(t,w){if(e.editable||"long"==e.others.typesetting||"pager"==e.others.typesetting&&w==e.others.pageindex){if(n={},y=[],v=i[w].bg.src?i[w].bg.src:t.bg,y.push("background-image:url("+v+")"),!e.editable&&g>=t.width)y.push("width:"+t.width+"px;height:"+t.height+"px");else{var _=g*t.height/t.width;y.push("height:"+_+"px")}n.page_style=y.join(";"),n.width=t.width,n.height=t.height,n.bg=t.bg,n.fields_data=$.extend(!0,{},t.fields_data,i[w].fields_data),n.fields=t.fields,n.fieldsTypes=t.fieldsTypes,a=t.position,r=t.font,h=Number(t.width),p=Number(t.height),n.styles={},t.fields.forEach(function(e){s=[],a[e]&&(c=Number(a[e].x)/h*100,u=Number(a[e].y)/p*100,s.push("left:"+c+"%;top:"+u+"%;")),r[e]&&(m=g>h?Number(r[e].original):Number(r[e].original)*(g/h),m=m<12?12:m,d=m*Number(r[e]["x-size"]),l=m*Number(r[e]["line-size"]),r[e]["line-height"]&&(f=Number(r[e]["line-height"]),l*=f,s.push("line-height:"+f+";")),s.push("width:"+d+"px;height:"+l+"px;font-size:"+m+"px;")),t.fields_styles&&t.fields_styles[e]&&s.push(t.fields_styles[e]),n.styles[e]=s.join(";")}),o.push(n)}}),o},wrapperStyle:function(){var e=this,t=0,i=[],o=0;return e.templateData.pages.forEach(function(e){o<e.width&&(o=Number(e.width))}),e.editable||e.clientWidth<o?(t=e.clientHeight,i.push("height: "+t+"px;")):(e.templateData.pages.forEach(function(i,o){(e.editable||"long"==e.others.typesetting||"pager"==e.others.typesetting&&o==e.others.pageindex)&&(t+=Number(i.height))}),i.push("height: "+t+"px;")),i.join("")}},data:function(){return{activated:!1,expired:!1,editable:!0,utoken:null,flyer:{id:0,name:"传单",content:{category_id:"",templates:[],pages:[]}},templateTypes:["front","back"],templateData:null,templates:{types:[],data:[],d:[],currentType:-1},backgrounds:{types:[],data:[],d:[],currentType:-1},others:{page_count:2,maxEditableWidth:640,clientWidth:0,clientHeight:0,downloadSeparateHeight:100,typesetting:"",pageindex:0,orientationchanged:!1,currentPage:0,selectedActivityField:"",status:{menuExpanded:!1,showTemplates:!1,hideTemplates:!1,showBg:!1,hideBg:!1,showTexter:!1,hideTexter:!1,triggeredActivities:!1,showActivities:!1,hideActivities:!1,submitting:!1,submitted:!1,downloading:!1,showedDeviceTip:!1,notemplates:!1,loadedTemplates:!1},uploader:{maxsize:3072,cropper:{croppered_params:[],config:{dragMode:"move",aspectRatio:1,autoCropArea:.8,guides:!1,center:!0,highlight:!1,dragCrop:!1,cropBoxMovable:!1,cropBoxResizable:!1,zoom:-.2,checkImageOrigin:!0,background:!1,rotatable:!0}}}},activities:[],loaders:{}}},methods:{load:function(e){var t=this;Array.isArray(e)&&e.forEach(function(e){e.category=(0,g.translateType)(e.type),t.activities.push(e)})},loaderFail:function(e){var t=this;if(e==s.default[1101])(0,g.showExpireTip)(t.showDialog);else if(e==s.default[1102])t.expired=!0;else{if(e==s.default[2203])return t.$root.$emit("show.snackbar",{color:"accent",message:e}),void setTimeout(function(){t.$router.go({name:"flyer-categories"})},2500);t.$root.$emit("show.snackbar",{color:"accent",message:e})}},fail:function(e,t){var i=this,o=e.code;if(1100==o)i.editable?(0,g.showKickedOffline)(e.data.time,e.data.ip,i.showDialog,function(){i.expired=!0}):(0,g.showKickedOffline)(e.data.time,e.data.ip,i.showDialog);else if(1101==o)(0,g.showExpireTip)(i.showDialog);else if(1102==o)i.editable?i.expired=!0:i.$root.$emit("show.snackbar",{color:"accent",message:"该传单失效"});else{if(2203==o)return i.$root.$emit("show.snackbar",{color:"accent",message:s.default[o]}),void setTimeout(function(){i.$router.go({name:"flyer-categories"})},2500);i.$root.$emit("show.snackbar",{color:"accent",message:s.default[o]})}i.hideLoading(),t&&t()},expandMenu:function(){var e=this;e.others.status.menuExpanded?e.others.status.menuExpanded=!1:e.others.status.menuExpanded=!0},submit:function(e){var t=this,i=t.flyer,o={content:JSON.stringify(i.content),token:""+t.mtoken,name:i.name,category:i.content.category_id};t.activated&&(i.id&&(o.id=i.id),t.others.status.submitting||t.others.status.downloading||(t.others.status.submitting=!0,t.showLoading("正在保存..."),$.ajax(a.default.flyer,{method:i.id?"put":"post",data:o,dataType:"text",success:function(i){return i=$.parseJSON(i),i.code?void t.fail(i):(i.data&&(t.flyer.id=i.data.id,t.flyer.name=i.data.name),t.others.status.submitted=!0,"function"!=typeof e&&t.showDialog({content:'<p><i class="weui_icon_success" style="margin-right: 0.5rem;"></i>保存成功！</p>',button:{cancel:'<i class="fa fa-pencil-square-o"> 继续编辑',confirm:'<i class="fa fa-arrow-right"> 我的传单'},cancel:function(){return!0},confirm:function(){return window.location.href="#!/flyers",!0}}),void setTimeout(function(){"function"==typeof e&&e()},100))},error:function(){t.$root.$emit("show.snackbar",{color:"accent",message:"传单保存失败"})},complete:function(){t.others.status.submitting=!1,t.hideLoading()}})))},download:function(){var e=this;e.flyer;e.activated&&(e.others.status.submitting||e.others.status.downloading||e.submit(e.execDownload))},execDownload:function(){function e(){var e=[],s=null;t.others.status.downloading=!0,t.showLoading("正在生成图片，预计1分钟..."),$.ajax(a.default.flyer+"/download",{method:"post",data:{id:i.id,params:JSON.stringify(n),token:t.user.token},dataType:"text",timeout:6e4,success:function(i){return i=$.parseJSON(i),i.code?void t.fail(i):("pager"==n.typesetting&&r.push(i.data.src),void(("long"==n.typesetting||"pager"==n.typesetting&&r.length==o.length)&&("pager"==n.typesetting&&(r.forEach(function(t,i){var o=0==i?"正面":"反面";e.push('<div class="cell-6" style="padding-top: 0.5rem;">'+(" <p><strong>"+o+"</strong><p/>")+(' <p><img src="'+t+'" style="width: 100%;"/></p>')+"</div>")}),r=[]),t.showDialog({title:"&nbsp;",content:'<div id="dialog-flyer-download-success" style="width:80%;border: 14px solid #dfdfdf;margin: 0 auto;overflow: hidden;">'+("pager"==n.typesetting?e.join(""):' <img src="'+i.data.src+'" style="width: 40%;"/>')+'</div><br/><br/><strong><i class="fa fa-smile-o" style="margin-right: 0.5rem;"></i>客官，让您久等了</strong><br/><br/>'+("pager"==n.typesetting?'<font color="red">分别</font>':"")+"长按图片下载到手机相册<br/>"+("pager"==n.typesetting?'<font style="color:#999;font-size:0.8rem;">（Ps：下载后，可以打印出来派发传单哟）</font>':'<font style="color:#999; font-size:0.8rem;">（Ps：长图适合在网络中进行传播）</font>'),fullscreen:!0,confirm:!0,button:{confirm:"我知道了"}}))))},error:function(){t.hideLoading(),t.others.status.downloading=!1,t.$root.$emit("show.snackbar",{color:"accent",message:"传单下载失败"})},complete:function(){"long"==n.typesetting?(t.hideLoading(),t.others.status.downloading=!1):s=setInterval(function(){$("#dialog-flyer-download-success").length&&(t.hideLoading(),t.others.status.downloading=!1,clearInterval(s))},1e3)}})}var t=this,i=t.flyer,o=(t.templateData.pages[t.others.currentPage],t.templateData.pages),n={width:0,height:0,t:t.user.token},r=[];i.id&&(o.forEach(function(e){(!n.width||e.width<n.width)&&(n.width=Number(e.width))}),t.showDialog({content:"请选择下载方式",button:{cancel:'<i class="fa fa-files-o"> 分页图',confirm:'<i class="fa fa-file-text-o"> 长图'},minicancel:!0,cancel:function(){return n.typesetting="pager",o.forEach(function(t,i){n.height=Number(t.height)*Number(n.width)/Number(t.width),n.pageindex=i,e()}),!0},confirm:function(){return o.forEach(function(e){n.height+=Number(e.height)*Number(n.width)/Number(e.width)}),n.height=n.height+50,n.typesetting="long",e(),!0}}))},goPage:function(e){var t=this,i=e.target,o=$(i),n=Number("undefined"==typeof i.dataset.index?o.parent().data("index"):i.dataset.index),a=$("#flyer-editor"),r=$(".pager-li",a);t.activated&&!r.eq(n).hasClass("in")&&(r.eq(n).removeClass("hide").addClass("in").fadeIn().siblings().removeClass("in").addClass("hide").fadeOut(),$(".pager-action",a).eq(n).addClass("cur").siblings().removeClass("cur"),t.others.currentPage=n,t.showDeviceTip(n),t.closeTemplates())},showDeviceTip:function(e){var t=this,i=t.templateData.pages[e],o=0;if(i.device_min){var n=_.body.clientWidth;o=Number(i.device_min),o>n&&!t.others.status.showedDeviceTip&&(t.others.status.showedDeviceTip=!0,t.$root.$emit("show.snackbar",{message:'<i class="fa fa-lightbulb-o" aria-hidden="true" style="font-size:1.2rem;"></i>&nbsp;亲，您的手机屏幕实在太小，影响预览效果，建议换大屏操作哦~<p style="font-size:0.8rem;">（ps.打印后均正常显示，与屏幕大小无关）</p>',timeout:5e3}))}},exchangeTemplate:function(e){var t=this,i=t._getTemplatesUrl();!e&&t.showLoading("正在拉取版式..."),$.getJSON(i+"?"+(new Date).getSeconds(),function(i){var o=i.normal.data||i.data;return t.others.status.loadedTemplates=!0,o&&!o.length?void(t.others.status.notemplates=!0):void(e!==!0&&(t.others.status.notemplates=!1,t._setTemplatesData(i),t.others.status.showTemplates=!0,t.hideLoading()))})},selectTemplateType:function(e){var t=this,i=Number(e.target.dataset.index),o=t.templates.data;o[i]&&(t.templates.d=o[i].data,t.templates.currentType=i)},selectTemplate:function(e){var t=this,i=Number(e.target.dataset.index),o=t.templates.d,n=t.others.currentPage,a=(t.templates.currentType<0?0:t.templates.currentType,void 0);o[i]&&t.showDialog({title:"温馨提示",content:"是否要替换当前页排版版式?<p> 替换后数据不会丢失</p>",cancel:!0,confirm:function(){return a=o[i],t.flyer.content.templates[n].type=t.templateTypes[t.others.currentPage],t.flyer.content.templates[n].id=a.id,t._loadTemplate(),!0}})},closeTemplates:function(){var e=this;e.others.status.hideTemplates=!0,setTimeout(function(){e.others.status.showTemplates=!1,e.others.status.hideTemplates=!1},600)},_setTemplatesData:function(e){var t=this,i=[],o=[],n=void 0;for(n in e)i.push(e[n]),o.push({code:n,name:e[n].name});return i.length?(t.templates.data=i,t.templates.types=o,void(t.templates.d=i[0].data)):(w.tooltip("貌似没找到版式素材","info"),[])},_getTemplatesUrl:function(){var e=this,t=e.others.currentPage,i="";switch(t){case 0:i=a.default.json.flyer.templatesPath+"/category/"+e.flyer.content.category_id+"/templates_front.json";break;case 1:i=a.default.json.flyer.templatesPath+"/category/"+e.flyer.content.category_id+"/templates_back.json"}return i},_loadTemplate:function(e){var t=this,i=t.others.currentPage,o=t.flyer.content.templates[i],n=a.default.json.flyer.templatesPath+"/"+o.type+"/"+o.id+".json";t.showLoading("正在拉取数据..."),$.ajax(n,{method:"get",dataType:"json",success:function(o){t.templateData.pages[i]=o,t.flyer.content.pages[i].bg.src=o.bg,e&&e()},error:function(){t.$root.$emit("show.snackbar",{color:"accent",message:"模板切换失败，请重试！"})},complete:function(){t.hideLoading()}})},exchangeTexter:function(){var e=this;e.activated&&(e.others.status.showTexter=!0,setTimeout(function(){(0,h.default)($("textarea","#flyer-editor"))},500))},closeTexter:function(){var e=this;e.others.status.hideTexter=!0,setTimeout(function(){e.others.status.showTexter=!1,e.others.status.hideTexter=!1},600)},exchangeBackground:function(){var e=this;if(e.activated){if(e.backgrounds.data.length)return void(e.others.status.showBg=!0);e.showLoading("正在拉取背景..."),$.getJSON(a.default.json.flyer.background+"?"+(new Date).getSeconds(),function(t){e._setBackgroundData(t),e.others.status.showBg=!0,e.hideLoading()})}},selectBackgroundType:function(e){var t=this,i=Number(e.target.dataset.index),o=t.backgrounds.data;o[i]&&(t.backgrounds.d=o[i].data,t.backgrounds.currentType=i)},selectBackground:function(e){var t=this,i=Number(e.target.dataset.index),o=t.backgrounds.d,n=void 0;o[i]&&(n=o[i],t.flyer.content.pages[t.others.currentPage].bg.src=n.original,t.closeBackground())},closeBackground:function(){var e=this;e.others.status.hideBg=!0,setTimeout(function(){e.others.status.showBg=!1,e.others.status.hideBg=!1},600)},_setBackgroundData:function(e){var t=this,i=[],o=[],n=void 0;for(n in e)i.push(e[n]),o.push({code:n,name:e[n].name});return i.length?(t.backgrounds.data=i,t.backgrounds.types=o,void(t.backgrounds.d=i[0].data)):(w.tooltip("貌似没找到背景素材","info"),[])},uploadImg:function(e){var t=this,i=e.target,o=$(e.target),n=i.files?i.files[0]:null,r=t.others.uploader.maxsize,s=i.dataset.field,c=t.templateData.pages[t.others.currentPage].fields_limit,u=c[s].width,d=c[s].height,l=void 0;if(n&&(b.test(n.type)||""==n.type)){var f=n.size/1024;if(f>r)return t.showDialog({title:"提示",content:"图片大小请控制在 "+Math.floor(r)+" KB 以内",confirm:!0}),!1;t.showLoading("正在上传..."),$.ajax(a.default.uploadSignature,{method:"get",data:{token:""+t.mtoken,type:6},dataType:"json",success:function(e){return e.code?void t.fail(e):void(e.data&&!function(){var i=e.data,a=""+i.dir+(0,g.getRandomFilename)(n.name),r=o;r.uploader({name:"file",url:i.host,data:{key:a,policy:i.policy,OSSAccessKeyId:i.accessid,signature:i.signature},done:function(){l=(0,m.imagify)(a,"image/resize,w_640"),t.initCropper(l,{aspectRatio:u/d},function(){t.others.uploader.cropper.croppered_params.length&&(t.flyer.content.pages[t.others.currentPage].fields_data[s]=(0,m.imagify)(a,t.others.uploader.cropper.croppered_params),t.others.uploader.cropper.croppered_params=[])}),t.hideLoading()},fail:function(){w.tooltip("图片上传失败，请检查网络连接并重试","danger"),t.hideLoading()},uploaded:function(){r.uploader("destroy")}}).uploader("upload")}())},error:function(){t.hideLoading(),t.$root.$emit("show.snackbar",{color:"accent",message:"上传失败，请检查网络是否正常连接！"})}})}else w.tooltip("请选择正确的图片文件","notice")},initCropper:function(e,t,i){var o=this,n=(y.width(),y.height(),"dialog-flyer-cropper-container");o.showDialog({title:"图片裁剪",fullscreen:!0,noeffect:!0,content:'<div id="'+n+'">'+('   <img src="'+e+'"/>')+'   <p style="color:#545454;font-size: 1.5rem;">     <i class="fa fa-rotate-left" id="dialog-flyer-cropper-rotate-left"></i>     <i class="fa fa-rotate-right" id="dialog-flyer-cropper-rotate-right" style="margin-left:0.5rem;"></i>   </p></div>',cancel:function(){return $("#"+n).find("img").cropper("destroy"),!0},confirm:function(){return!!o.others.uploader.cropper.croppered_params.length&&($("#"+n).find("img").cropper("destroy"),i(),!0)}}),setTimeout(function(){var i=$("#"+n).css({height:"90%"}).find("img"),a=o.others.uploader.cropper.config;$("#dialog-flyer-cropper-rotate-left").click(function(){i.cropper("rotate",-45)}),$("#dialog-flyer-cropper-rotate-right").click(function(){i.cropper("rotate",45)}),i.attr("src",e).cropper($.extend(!0,{},a,{aspectRatio:t.aspectRatio,crop:function(e){var t=parseInt(e.x,10),i=parseInt(e.y,10),n=parseInt(e.width,10),a=parseInt(e.height,10),r=parseInt(e.rotate,10);o.others.uploader.cropper.croppered_params="image/resize,w_640/"+["rotate",r].join(",")+"/"+["crop","x_"+t,"y_"+i,"w_"+n,"h_"+a].join(",")}}))},50)},selectActivities:function(e){var t=this;t.others.selectedActivityField=e,t.others.status.showActivities=!0,t.others.status.triggeredActivities=!0},closeActivities:function(){var e=this;e.others.status.hideActivities=!0,setTimeout(function(){e.others.status.showActivities=!1,e.others.status.hideActivities=!1},600)},selectActivity2Qrcode:function(e){var t=this,i=e.target,o=$(i),n=Number("undefined"==typeof i.dataset.index?o.parent().data("index"):i.dataset.index),a=t.activities[n],r=(0,g.generalShareurlV2)(a.share_host,a.id,a.type,a.category),s=(0,g.generalBlackQrcode)({data:r,margin:"1"}),c=t.others.selectedActivityField;console.log(r),o.addClass("selected").parent().siblings().find(".targeter").removeClass("selected"),t.flyer.content.pages[t.others.currentPage].fields_data[c]=s,t.others.selectedActivityField="",t.closeActivities()},clearImgField:function(e){var t=this;t.flyer.content.pages[t.others.currentPage].fields_data[e]=""},_resize:function(){var e=this;_.addEventListener("DOMContentLoaded",function(t){v.orientation&&90!=v.orientation&&v.orientation!=-90&&setTimeout(function(){e.others.orientationchanged=!0},10)}),v.addEventListener("orientationchange",function(t){v.orientation&&180!=v.orientation&&0!=v.orientation&&setTimeout(function(){e.others.orientationchanged=!1},10),v.orientation&&90!=v.orientation&&v.orientation!=-90&&setTimeout(function(){e.others.orientationchanged=!0},10)}),y.resize(function(){e.others.clientHeight=_.documentElement.clientHeight,e.others.clientWidth=_.documentElement.clientWidth})},_getTemplateJsonFile:function(){var e=this,t=e.flyer.content.templates,i=[];return t.length?(t.forEach(function(e){i.push(e.type+"-"+e.id)}),i.join(",")):null},_initFlyerContent:function(e){var t=this,i=e.pages||[],o=[],n={};return!!e.pages.length&&(!!t.flyer.content.pages.length||(i.forEach(function(e){n=$.extend(!0,{},{},e.fields_data||{}),o.push({bg:{src:e.bg},fields_data:n})}),t.flyer.content.pages=o,!0))},_setFlyerTemplates:function(e){var t=this;e&&(e=e.split(","),e.length>t.others.page_count||e.forEach(function(e){e=e.split("-"),t.flyer.content.templates.push({type:e[0],id:e[1]})}))}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(10),a=o(n),r=i(12),s=o(r),c=i(40),u=o(c),d=i(22),l=o(d),f=i(26),h=$(document.body);t.default={template:"#complaint",components:{Message:u.default},vuex:{actions:{showLoading:f.showLoading,hideLoading:f.hideLoading,pageIn:f.pageIn}},route:{data:function(e){var t=this,i=Number(t.$route.params.id);t.showLoading(),$.ajax(a.default.complaintType,{success:function(t){return t.code?void h.tooltip(s.default[t.code],"danger"):void(t.data&&e.next({activityId:i,types:t.data}))},error:function(){h.tooltip("加载数据失败","danger")},complete:function(){t.hideLoading()}})}},data:function(){return{activityId:0,content:" ",contact:"",count:0,message:null,step:0,types:null,type:""}},ready:function(){this.pageIn({title:"投诉"})},methods:{prev:function(){this.step--},next:function(){this.step++},input:function(e){this.count=e.target.value.length},complaint:function(e){var t=this,i=l.default.state.visitor;e.preventDefault(),t.showLoading(),$.ajax(a.default.complaint,{method:"POST",data:{activity_id:t.activityId,content:i&&i.openId?"[openid:"+i.openId+"]"+t.content:t.content,type:t.type,contact:t.contact},success:function(e){var i=window.decodeURIComponent(t.$route.query.next);return t.next(),e.code?void(t.message={type:"warn",title:"投诉失败",content:s.default[e.code],primary:{link:i,text:"返回"}}):void(t.message={type:"success",title:"投诉成功",content:"感谢您的参与，我们坚决反对色情、暴力、欺诈等违规信息，我们会认真处理您的投诉，维护绿色、健康的网络环境。",primary:{link:i}})},error:function(){h.tooltip("数据提交失败","danger")},complete:function(){t.hideLoading()}})}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(40),a=o(n),r=i(26);t.default={template:"#page-not-found",components:{Message:a.default},vuex:{actions:{pageIn:r.pageIn}},ready:function(){this.pageIn({title:"404 - 页面没找到"})}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(40),a=o(n),r=i(26);t.default={template:"#page-not-found-why",components:{Message:a.default},vuex:{actions:{pageIn:r.pageIn}},ready:function(){this.pageIn({title:"404 - 页面没找到"})},computed:{mobile:function(){var e=this;return e.$route.query.mobile||null}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(40),a=o(n),r=i(26);t.default={template:"#page-forbidden",components:{Message:a.default},vuex:{actions:{pageIn:r.pageIn}},ready:function(){this.pageIn({title:"您已被停止访问"})}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(10),a=o(n),r=i(12),s=o(r),c=i(40),u=o(c),d=i(45),l=o(d),f=i(26),h=i(9),p=$(document.body);t.default={template:"#messages",components:{Message:u.default,WaterfallFlowLoader:l.default},vuex:{getters:{user:function(e){return e.user}},actions:{showLoading:f.showLoading,hideLoading:f.hideLoading,showDialog:f.showDialog,pageIn:f.pageIn}},data:function(){return{messages:[],mymessages:[]}},ready:function(){this.pageIn({title:"站内广播"})},route:{data:function e(t){var i=this,o=i.user,n=""+a.default.message.root,e={token:o?o.token:"",page:1,listrows:30,type:2};$.ajax({url:n,dataType:"text",data:e,success:function(e){return e=$.parseJSON(e),e.code?void i.fail(s.default[e.code]):void(e.data&&i.loadmy(e.data.list))},error:function(){p.tooltip("广播加载失败","danger")},complete:function(){i.hideLoading()}})}},computed:{loader:function(){var e=this,t=e.user,i={token:t?t.token:""};return e.messages=[],e.loaders=i,{url:a.default.message.root,params:i}}},methods:{load:function(e){var t=this;Array.isArray(e)&&e.forEach(function(e){e.viewed=t.checkViewed(e.id)?1:0,t.messages.push(e)})},loadmy:function(e){var t=this;Array.isArray(e)&&e.forEach(function(e){e.viewed=t.checkViewed(e.id)?1:0,t.mymessages.push(e)})},fail:function(e,t){var i=this;e==s.default[1100]?(0,h.showKickedOffline)(t.time,t.ip,i.showDialog):e==s.default[1102]?this.$router.go({name:"signout"}):e==s.default[1101]?(0,h.showExpireTip)(i.showDialog):i.$root.$emit("show.snackbar",{color:"accent",message:e})},checkViewed:function(e){var t=this,i=t.user,o="message-view-"+i.id,n=h.LocalStorage.getItem(o)||[];return $.inArray(e,n)>=0}}}},function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(10),a=o(n),r=i(12),s=o(r),c=i(40),u=o(c),d=i(45),l=o(d),f=i(76),h=o(f),p=i(26),m=i(9),g=$(document.body);t.default={template:"#message-detail",components:{Message:u.default,WaterfallFlowLoader:l.default},vuex:{getters:{user:function(e){return e.user}},actions:{showDialog:p.showDialog,showLoading:p.showLoading,hideLoading:p.hideLoading,pageIn:p.pageIn}},data:function(){return{message:{posts:{id:0,content:[]}},post:{content:""},hasMessage:!1,loading:!0,submitting:!1,replyPlaceholder:"请输入您的反馈内容",hasNewPost:!1}},ready:function(){this.pageIn({title:"站内广播"})},route:{data:function e(t){var i=this,o=i.user,n=t.to,r=Number(n.params.id)||0,c=a.default.message.root+"/"+r,e={token:o?o.token:""};i.showLoading(),$.ajax({url:c,dataType:"text",data:e,success:function(e){return e=$.parseJSON(e),e.code?void i.fail(s.default[e.code]):(i.hasMessage=!0,i.loading=!1,void(e.data&&i.loadDetail(e.data.detail)))},error:function(){g.tooltip("数据加载失败","danger")},complete:function(){setTimeout(function(){$("#message-box").find("img").each(function(){var e=$(this);e.attr("data-src",e.attr("src")).attr("src","http://cdn.s.shangjiadao.cn/source/images/default.png").scrollLoading()}),(0,h.default)($("#message-post-content"))},10),i.hideLoading()}})}},computed:{loader:function(){var e=this,t=e.user,i={token:t?t.token:""};return e.messages=[],e.loaders=i,{url:a.default.message.root,params:i}}},methods:{loadDetail:function(e){var t=this;$.isEmptyObject(e)||(t.message=$.extend(t.message,e),e.posts&&(t.message.posts.content=$.parseJSON(e.posts.content)),t.setViewCache(),this.pageIn({title:"【站内广播】"+e.title}))},setViewCache:function(){var e=this,t=e.user,i="message-view-"+t.id,o=m.LocalStorage.getItem(i)||[];$.inArray(e.message.id,o)<0&&(o.push(e.message.id),m.LocalStorage.setItem(i,o))},fail:function(e){var t=this;e==s.default[1102]?this.$router.go({name:"signout"}):e==s.default[1101]?(0,m.showExpireTip)(t.showDialog):e==s.default[2002]?t.hasMessage=!1:g.tooltip(e,"danger")},reply:function(e){var t=this,i=t.message.posts.content[e];t.replyPlaceholder="回复：商家岛客服 @ "+i.text,$("#message-post-content").focus()},submit:function(){var e=this,t=$("textarea",e.$el),i=e.message,o=e.user,n=o?o.token:"";return e.post.content?(e.submitting=!0,void $.ajax(a.default.message.root+"/reply",{method:"PUT",data:{content:e.post.content,token:n,id:i.id},dataType:"text",success:function(t){if(t=$.parseJSON(t),t.code)return void e.fail(s.default[t.code]);if(t.data){var i=t.data.data;e.message.posts.id=i.id,e.message.posts.content.unshift(i.content),e.post.content="",e.hasNewPost=!0,g.tooltip("感谢您的反馈，我们将第一时间与您取得联系 :)","success"),setTimeout(function(){e.hasNewPost=!1},1200)}},complete:function(){e.submitting=!1,e.hideLoading()}})):(g.tooltip("请输入反馈内容","danger"),void t.focus())}}}}]);